"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _AdaptiveCardBuilder = _interopRequireDefault(require("./AdaptiveCardBuilder"));

var _AdaptiveCardRenderer = _interopRequireDefault(require("./AdaptiveCardRenderer"));

var _useAdaptiveCardsPackage = _interopRequireDefault(require("../hooks/useAdaptiveCardsPackage"));

var useDirection = _botframeworkWebchatComponent.hooks.useDirection,
    useStyleOptions = _botframeworkWebchatComponent.hooks.useStyleOptions;

var HeroCardContent = function HeroCardContent(_ref) {
  var actionPerformedClassName = _ref.actionPerformedClassName,
      content = _ref.content,
      disabled = _ref.disabled;

  var _useAdaptiveCardsPack = (0, _useAdaptiveCardsPackage.default)(),
      _useAdaptiveCardsPack2 = (0, _slicedToArray2.default)(_useAdaptiveCardsPack, 1),
      adaptiveCardsPackage = _useAdaptiveCardsPack2[0];

  var _useStyleOptions = useStyleOptions(),
      _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
      styleOptions = _useStyleOptions2[0];

  var _useDirection = useDirection(),
      _useDirection2 = (0, _slicedToArray2.default)(_useDirection, 1),
      direction = _useDirection2[0];

  var builtCard = (0, _react.useMemo)(function () {
    var builder = new _AdaptiveCardBuilder.default(adaptiveCardsPackage, styleOptions, direction);

    if (content) {
      (content.images || []).forEach(function (image) {
        return builder.addImage(image.url, null, image.tap, image.alt);
      });
      builder.addCommon(content);
      return builder.card;
    }
  }, [adaptiveCardsPackage, content, direction, styleOptions]);
  return /*#__PURE__*/_react.default.createElement(_AdaptiveCardRenderer.default, {
    actionPerformedClassName: actionPerformedClassName,
    adaptiveCard: builtCard,
    disabled: disabled,
    tapAction: content && content.tap
  });
};

HeroCardContent.defaultProps = {
  actionPerformedClassName: '',
  disabled: undefined
};
HeroCardContent.propTypes = {
  actionPerformedClassName: _propTypes.default.string,
  content: _propTypes.default.shape({
    images: _propTypes.default.arrayOf(_propTypes.default.shape({
      alt: _propTypes.default.string,
      tap: _propTypes.default.any,
      url: _propTypes.default.string.isRequired
    })),
    tap: _propTypes.default.any
  }).isRequired,
  disabled: _propTypes.default.bool
};
var _default = HeroCardContent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvSGVyb0NhcmRDb250ZW50LmpzIl0sIm5hbWVzIjpbInVzZURpcmVjdGlvbiIsImhvb2tzIiwidXNlU3R5bGVPcHRpb25zIiwiSGVyb0NhcmRDb250ZW50IiwiYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lIiwiY29udGVudCIsImRpc2FibGVkIiwiYWRhcHRpdmVDYXJkc1BhY2thZ2UiLCJzdHlsZU9wdGlvbnMiLCJkaXJlY3Rpb24iLCJidWlsdENhcmQiLCJidWlsZGVyIiwiQWRhcHRpdmVDYXJkQnVpbGRlciIsImltYWdlcyIsImZvckVhY2giLCJpbWFnZSIsImFkZEltYWdlIiwidXJsIiwidGFwIiwiYWx0IiwiYWRkQ29tbW9uIiwiY2FyZCIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsInN0cmluZyIsInNoYXBlIiwiYXJyYXlPZiIsImFueSIsImlzUmVxdWlyZWQiLCJib29sIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0lBRVFBLFksR0FBa0NDLG1DLENBQWxDRCxZO0lBQWNFLGUsR0FBb0JELG1DLENBQXBCQyxlOztBQUV0QixJQUFNQyxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLE9BQXFEO0FBQUEsTUFBbERDLHdCQUFrRCxRQUFsREEsd0JBQWtEO0FBQUEsTUFBeEJDLE9BQXdCLFFBQXhCQSxPQUF3QjtBQUFBLE1BQWZDLFFBQWUsUUFBZkEsUUFBZTs7QUFBQSw4QkFDNUMsdUNBRDRDO0FBQUE7QUFBQSxNQUNwRUMsb0JBRG9FOztBQUFBLHlCQUVwREwsZUFBZSxFQUZxQztBQUFBO0FBQUEsTUFFcEVNLFlBRm9FOztBQUFBLHNCQUd2RFIsWUFBWSxFQUgyQztBQUFBO0FBQUEsTUFHcEVTLFNBSG9FOztBQUkzRSxNQUFNQyxTQUFTLEdBQUcsb0JBQVEsWUFBTTtBQUM5QixRQUFNQyxPQUFPLEdBQUcsSUFBSUMsNEJBQUosQ0FBd0JMLG9CQUF4QixFQUE4Q0MsWUFBOUMsRUFBNERDLFNBQTVELENBQWhCOztBQUVBLFFBQUlKLE9BQUosRUFBYTtBQUNYLE9BQUNBLE9BQU8sQ0FBQ1EsTUFBUixJQUFrQixFQUFuQixFQUF1QkMsT0FBdkIsQ0FBK0IsVUFBQUMsS0FBSztBQUFBLGVBQUlKLE9BQU8sQ0FBQ0ssUUFBUixDQUFpQkQsS0FBSyxDQUFDRSxHQUF2QixFQUE0QixJQUE1QixFQUFrQ0YsS0FBSyxDQUFDRyxHQUF4QyxFQUE2Q0gsS0FBSyxDQUFDSSxHQUFuRCxDQUFKO0FBQUEsT0FBcEM7QUFFQVIsTUFBQUEsT0FBTyxDQUFDUyxTQUFSLENBQWtCZixPQUFsQjtBQUVBLGFBQU9NLE9BQU8sQ0FBQ1UsSUFBZjtBQUNEO0FBQ0YsR0FWaUIsRUFVZixDQUFDZCxvQkFBRCxFQUF1QkYsT0FBdkIsRUFBZ0NJLFNBQWhDLEVBQTJDRCxZQUEzQyxDQVZlLENBQWxCO0FBWUEsc0JBQ0UsNkJBQUMsNkJBQUQ7QUFDRSxJQUFBLHdCQUF3QixFQUFFSix3QkFENUI7QUFFRSxJQUFBLFlBQVksRUFBRU0sU0FGaEI7QUFHRSxJQUFBLFFBQVEsRUFBRUosUUFIWjtBQUlFLElBQUEsU0FBUyxFQUFFRCxPQUFPLElBQUlBLE9BQU8sQ0FBQ2E7QUFKaEMsSUFERjtBQVFELENBeEJEOztBQTBCQWYsZUFBZSxDQUFDbUIsWUFBaEIsR0FBK0I7QUFDN0JsQixFQUFBQSx3QkFBd0IsRUFBRSxFQURHO0FBRTdCRSxFQUFBQSxRQUFRLEVBQUVpQjtBQUZtQixDQUEvQjtBQUtBcEIsZUFBZSxDQUFDcUIsU0FBaEIsR0FBNEI7QUFDMUJwQixFQUFBQSx3QkFBd0IsRUFBRXFCLG1CQUFVQyxNQURWO0FBRTFCckIsRUFBQUEsT0FBTyxFQUFFb0IsbUJBQVVFLEtBQVYsQ0FBZ0I7QUFDdkJkLElBQUFBLE1BQU0sRUFBRVksbUJBQVVHLE9BQVYsQ0FDTkgsbUJBQVVFLEtBQVYsQ0FBZ0I7QUFDZFIsTUFBQUEsR0FBRyxFQUFFTSxtQkFBVUMsTUFERDtBQUVkUixNQUFBQSxHQUFHLEVBQUVPLG1CQUFVSSxHQUZEO0FBR2RaLE1BQUFBLEdBQUcsRUFBRVEsbUJBQVVDLE1BQVYsQ0FBaUJJO0FBSFIsS0FBaEIsQ0FETSxDQURlO0FBUXZCWixJQUFBQSxHQUFHLEVBQUVPLG1CQUFVSTtBQVJRLEdBQWhCLEVBU05DLFVBWHVCO0FBWTFCeEIsRUFBQUEsUUFBUSxFQUFFbUIsbUJBQVVNO0FBWk0sQ0FBNUI7ZUFlZTVCLGUiLCJzb3VyY2VSb290IjoiYnVuZGxlOi8vLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhvb2tzIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtY29tcG9uZW50JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEFkYXB0aXZlQ2FyZEJ1aWxkZXIgZnJvbSAnLi9BZGFwdGl2ZUNhcmRCdWlsZGVyJztcbmltcG9ydCBBZGFwdGl2ZUNhcmRSZW5kZXJlciBmcm9tICcuL0FkYXB0aXZlQ2FyZFJlbmRlcmVyJztcbmltcG9ydCB1c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSBmcm9tICcuLi9ob29rcy91c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSc7XG5cbmNvbnN0IHsgdXNlRGlyZWN0aW9uLCB1c2VTdHlsZU9wdGlvbnMgfSA9IGhvb2tzO1xuXG5jb25zdCBIZXJvQ2FyZENvbnRlbnQgPSAoeyBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWUsIGNvbnRlbnQsIGRpc2FibGVkIH0pID0+IHtcbiAgY29uc3QgW2FkYXB0aXZlQ2FyZHNQYWNrYWdlXSA9IHVzZUFkYXB0aXZlQ2FyZHNQYWNrYWdlKCk7XG4gIGNvbnN0IFtzdHlsZU9wdGlvbnNdID0gdXNlU3R5bGVPcHRpb25zKCk7XG4gIGNvbnN0IFtkaXJlY3Rpb25dID0gdXNlRGlyZWN0aW9uKCk7XG4gIGNvbnN0IGJ1aWx0Q2FyZCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGJ1aWxkZXIgPSBuZXcgQWRhcHRpdmVDYXJkQnVpbGRlcihhZGFwdGl2ZUNhcmRzUGFja2FnZSwgc3R5bGVPcHRpb25zLCBkaXJlY3Rpb24pO1xuXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIChjb250ZW50LmltYWdlcyB8fCBbXSkuZm9yRWFjaChpbWFnZSA9PiBidWlsZGVyLmFkZEltYWdlKGltYWdlLnVybCwgbnVsbCwgaW1hZ2UudGFwLCBpbWFnZS5hbHQpKTtcblxuICAgICAgYnVpbGRlci5hZGRDb21tb24oY29udGVudCk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfVxuICB9LCBbYWRhcHRpdmVDYXJkc1BhY2thZ2UsIGNvbnRlbnQsIGRpcmVjdGlvbiwgc3R5bGVPcHRpb25zXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8QWRhcHRpdmVDYXJkUmVuZGVyZXJcbiAgICAgIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZT17YWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lfVxuICAgICAgYWRhcHRpdmVDYXJkPXtidWlsdENhcmR9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICB0YXBBY3Rpb249e2NvbnRlbnQgJiYgY29udGVudC50YXB9XG4gICAgLz5cbiAgKTtcbn07XG5cbkhlcm9DYXJkQ29udGVudC5kZWZhdWx0UHJvcHMgPSB7XG4gIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZTogJycsXG4gIGRpc2FibGVkOiB1bmRlZmluZWRcbn07XG5cbkhlcm9DYXJkQ29udGVudC5wcm9wVHlwZXMgPSB7XG4gIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29udGVudDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBpbWFnZXM6IFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgYWx0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB0YXA6IFByb3BUeXBlcy5hbnksXG4gICAgICAgIHVybDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgICB9KVxuICAgICksXG4gICAgdGFwOiBQcm9wVHlwZXMuYW55XG4gIH0pLmlzUmVxdWlyZWQsXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbFxufTtcblxuZXhwb3J0IGRlZmF1bHQgSGVyb0NhcmRDb250ZW50O1xuIl19