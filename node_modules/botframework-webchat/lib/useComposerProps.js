"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useComposerProps;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = require("react");

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _createAdaptiveCardsAttachmentForScreenReaderMiddleware = _interopRequireDefault(require("./adaptiveCards/createAdaptiveCardsAttachmentForScreenReaderMiddleware"));

var _createAdaptiveCardsAttachmentMiddleware = _interopRequireDefault(require("./adaptiveCards/createAdaptiveCardsAttachmentMiddleware"));

var _createAdaptiveCardsStyleSet = _interopRequireDefault(require("./adaptiveCards/Styles/createAdaptiveCardsStyleSet"));

var _renderMarkdown = _interopRequireDefault(require("./renderMarkdown"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function useComposerProps(_ref) {
  var attachmentForScreenReaderMiddleware = _ref.attachmentForScreenReaderMiddleware,
      attachmentMiddleware = _ref.attachmentMiddleware,
      renderMarkdown = _ref.renderMarkdown,
      styleOptions = _ref.styleOptions,
      styleSet = _ref.styleSet;
  var patchedAttachmentMiddleware = (0, _react.useMemo)(function () {
    return (0, _botframeworkWebchatComponent.concatMiddleware)(attachmentMiddleware, (0, _createAdaptiveCardsAttachmentMiddleware.default)());
  }, [attachmentMiddleware]);
  var patchedAttachmentForScreenReaderMiddleware = (0, _react.useMemo)(function () {
    return (0, _botframeworkWebchatComponent.concatMiddleware)(attachmentForScreenReaderMiddleware, (0, _createAdaptiveCardsAttachmentForScreenReaderMiddleware.default)());
  }, [attachmentForScreenReaderMiddleware]);
  var patchedStyleOptions = (0, _react.useMemo)(function () {
    return _objectSpread(_objectSpread({}, _botframeworkWebchatComponent.defaultStyleOptions), styleOptions);
  }, [styleOptions]); // When styleSet is not specified, the styleOptions will be used to create Adaptive Cards styleSet and merged into useStyleSet.

  var extraStyleSet = (0, _react.useMemo)(function () {
    return styleSet ? undefined : (0, _createAdaptiveCardsStyleSet.default)(patchedStyleOptions);
  }, [patchedStyleOptions, styleSet]);
  var patchedRenderMarkdown = (0, _react.useMemo)(function () {
    return typeof renderMarkdown === 'undefined' ? function (text) {
      return (0, _renderMarkdown.default)(text, patchedStyleOptions);
    } : renderMarkdown;
  }, [patchedStyleOptions, renderMarkdown]);
  return {
    attachmentMiddleware: patchedAttachmentMiddleware,
    attachmentForScreenReaderMiddleware: patchedAttachmentForScreenReaderMiddleware,
    extraStyleSet: extraStyleSet,
    renderMarkdown: patchedRenderMarkdown
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91c2VDb21wb3NlclByb3BzLmpzIl0sIm5hbWVzIjpbInVzZUNvbXBvc2VyUHJvcHMiLCJhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSIsImF0dGFjaG1lbnRNaWRkbGV3YXJlIiwicmVuZGVyTWFya2Rvd24iLCJzdHlsZU9wdGlvbnMiLCJzdHlsZVNldCIsInBhdGNoZWRBdHRhY2htZW50TWlkZGxld2FyZSIsInBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSIsInBhdGNoZWRTdHlsZU9wdGlvbnMiLCJkZWZhdWx0U3R5bGVPcHRpb25zIiwiZXh0cmFTdHlsZVNldCIsInVuZGVmaW5lZCIsInBhdGNoZWRSZW5kZXJNYXJrZG93biIsInRleHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVlLFNBQVNBLGdCQUFULE9BTVo7QUFBQSxNQUxEQyxtQ0FLQyxRQUxEQSxtQ0FLQztBQUFBLE1BSkRDLG9CQUlDLFFBSkRBLG9CQUlDO0FBQUEsTUFIREMsY0FHQyxRQUhEQSxjQUdDO0FBQUEsTUFGREMsWUFFQyxRQUZEQSxZQUVDO0FBQUEsTUFEREMsUUFDQyxRQUREQSxRQUNDO0FBQ0QsTUFBTUMsMkJBQTJCLEdBQUcsb0JBQ2xDO0FBQUEsV0FBTSxvREFBaUJKLG9CQUFqQixFQUF1Qyx1REFBdkMsQ0FBTjtBQUFBLEdBRGtDLEVBRWxDLENBQUNBLG9CQUFELENBRmtDLENBQXBDO0FBS0EsTUFBTUssMENBQTBDLEdBQUcsb0JBQ2pEO0FBQUEsV0FDRSxvREFBaUJOLG1DQUFqQixFQUFzRCxzRUFBdEQsQ0FERjtBQUFBLEdBRGlELEVBR2pELENBQUNBLG1DQUFELENBSGlELENBQW5EO0FBTUEsTUFBTU8sbUJBQW1CLEdBQUcsb0JBQVE7QUFBQSwyQ0FBWUMsaURBQVosR0FBb0NMLFlBQXBDO0FBQUEsR0FBUixFQUE2RCxDQUFDQSxZQUFELENBQTdELENBQTVCLENBWkMsQ0FjRDs7QUFDQSxNQUFNTSxhQUFhLEdBQUcsb0JBQVE7QUFBQSxXQUFPTCxRQUFRLEdBQUdNLFNBQUgsR0FBZSwwQ0FBNEJILG1CQUE1QixDQUE5QjtBQUFBLEdBQVIsRUFBeUYsQ0FDN0dBLG1CQUQ2RyxFQUU3R0gsUUFGNkcsQ0FBekYsQ0FBdEI7QUFLQSxNQUFNTyxxQkFBcUIsR0FBRyxvQkFDNUI7QUFBQSxXQUNFLE9BQU9ULGNBQVAsS0FBMEIsV0FBMUIsR0FBd0MsVUFBQVUsSUFBSTtBQUFBLGFBQUksNkJBQXNCQSxJQUF0QixFQUE0QkwsbUJBQTVCLENBQUo7QUFBQSxLQUE1QyxHQUFtR0wsY0FEckc7QUFBQSxHQUQ0QixFQUc1QixDQUFDSyxtQkFBRCxFQUFzQkwsY0FBdEIsQ0FINEIsQ0FBOUI7QUFNQSxTQUFPO0FBQ0xELElBQUFBLG9CQUFvQixFQUFFSSwyQkFEakI7QUFFTEwsSUFBQUEsbUNBQW1DLEVBQUVNLDBDQUZoQztBQUdMRyxJQUFBQSxhQUFhLEVBQWJBLGFBSEs7QUFJTFAsSUFBQUEsY0FBYyxFQUFFUztBQUpYLEdBQVA7QUFNRCIsInNvdXJjZVJvb3QiOiJidW5kbGU6Ly8vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgY29uY2F0TWlkZGxld2FyZSwgZGVmYXVsdFN0eWxlT3B0aW9ucyB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvbXBvbmVudCc7XG5pbXBvcnQgY3JlYXRlQWRhcHRpdmVDYXJkc0F0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlIGZyb20gJy4vYWRhcHRpdmVDYXJkcy9jcmVhdGVBZGFwdGl2ZUNhcmRzQXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUnO1xuaW1wb3J0IGNyZWF0ZUFkYXB0aXZlQ2FyZHNBdHRhY2htZW50TWlkZGxld2FyZSBmcm9tICcuL2FkYXB0aXZlQ2FyZHMvY3JlYXRlQWRhcHRpdmVDYXJkc0F0dGFjaG1lbnRNaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVBZGFwdGl2ZUNhcmRzU3R5bGVTZXQgZnJvbSAnLi9hZGFwdGl2ZUNhcmRzL1N0eWxlcy9jcmVhdGVBZGFwdGl2ZUNhcmRzU3R5bGVTZXQnO1xuaW1wb3J0IGRlZmF1bHRSZW5kZXJNYXJrZG93biBmcm9tICcuL3JlbmRlck1hcmtkb3duJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQ29tcG9zZXJQcm9wcyh7XG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlLFxuICBhdHRhY2htZW50TWlkZGxld2FyZSxcbiAgcmVuZGVyTWFya2Rvd24sXG4gIHN0eWxlT3B0aW9ucyxcbiAgc3R5bGVTZXRcbn0pIHtcbiAgY29uc3QgcGF0Y2hlZEF0dGFjaG1lbnRNaWRkbGV3YXJlID0gdXNlTWVtbyhcbiAgICAoKSA9PiBjb25jYXRNaWRkbGV3YXJlKGF0dGFjaG1lbnRNaWRkbGV3YXJlLCBjcmVhdGVBZGFwdGl2ZUNhcmRzQXR0YWNobWVudE1pZGRsZXdhcmUoKSksXG4gICAgW2F0dGFjaG1lbnRNaWRkbGV3YXJlXVxuICApO1xuXG4gIGNvbnN0IHBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIGNvbmNhdE1pZGRsZXdhcmUoYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUsIGNyZWF0ZUFkYXB0aXZlQ2FyZHNBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSgpKSxcbiAgICBbYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmVdXG4gICk7XG5cbiAgY29uc3QgcGF0Y2hlZFN0eWxlT3B0aW9ucyA9IHVzZU1lbW8oKCkgPT4gKHsgLi4uZGVmYXVsdFN0eWxlT3B0aW9ucywgLi4uc3R5bGVPcHRpb25zIH0pLCBbc3R5bGVPcHRpb25zXSk7XG5cbiAgLy8gV2hlbiBzdHlsZVNldCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgc3R5bGVPcHRpb25zIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgQWRhcHRpdmUgQ2FyZHMgc3R5bGVTZXQgYW5kIG1lcmdlZCBpbnRvIHVzZVN0eWxlU2V0LlxuICBjb25zdCBleHRyYVN0eWxlU2V0ID0gdXNlTWVtbygoKSA9PiAoc3R5bGVTZXQgPyB1bmRlZmluZWQgOiBjcmVhdGVBZGFwdGl2ZUNhcmRzU3R5bGVTZXQocGF0Y2hlZFN0eWxlT3B0aW9ucykpLCBbXG4gICAgcGF0Y2hlZFN0eWxlT3B0aW9ucyxcbiAgICBzdHlsZVNldFxuICBdKTtcblxuICBjb25zdCBwYXRjaGVkUmVuZGVyTWFya2Rvd24gPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICB0eXBlb2YgcmVuZGVyTWFya2Rvd24gPT09ICd1bmRlZmluZWQnID8gdGV4dCA9PiBkZWZhdWx0UmVuZGVyTWFya2Rvd24odGV4dCwgcGF0Y2hlZFN0eWxlT3B0aW9ucykgOiByZW5kZXJNYXJrZG93bixcbiAgICBbcGF0Y2hlZFN0eWxlT3B0aW9ucywgcmVuZGVyTWFya2Rvd25dXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBhdHRhY2htZW50TWlkZGxld2FyZTogcGF0Y2hlZEF0dGFjaG1lbnRNaWRkbGV3YXJlLFxuICAgIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlOiBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUsXG4gICAgZXh0cmFTdHlsZVNldCxcbiAgICByZW5kZXJNYXJrZG93bjogcGF0Y2hlZFJlbmRlck1hcmtkb3duXG4gIH07XG59XG4iXX0=