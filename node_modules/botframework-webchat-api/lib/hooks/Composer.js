"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _reactRedux = require("react-redux");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _simpleUpdateIn = _interopRequireDefault(require("simple-update-in"));

var _createCustomEvent = _interopRequireDefault(require("../utils/createCustomEvent"));

var _ErrorBoundary = _interopRequireDefault(require("./utils/ErrorBoundary"));

var _getAllLocalizedStrings = _interopRequireDefault(require("../localization/getAllLocalizedStrings"));

var _isObject = _interopRequireDefault(require("../utils/isObject"));

var _normalizeLanguage = _interopRequireDefault(require("../utils/normalizeLanguage"));

var _PrecompiledGlobalize = _interopRequireDefault(require("../external/PrecompiledGlobalize"));

var _botframeworkWebchatCore = require("botframework-webchat-core");

var _createDefaultCardActionMiddleware = _interopRequireDefault(require("./middleware/createDefaultCardActionMiddleware"));

var _createDefaultGroupActivitiesMiddleware = _interopRequireDefault(require("./middleware/createDefaultGroupActivitiesMiddleware"));

var _defaultSelectVoice = _interopRequireDefault(require("./internal/defaultSelectVoice"));

var _mapMap = _interopRequireDefault(require("../utils/mapMap"));

var _observableToPromise = _interopRequireDefault(require("./utils/observableToPromise"));

var _Tracker = _interopRequireDefault(require("./internal/Tracker"));

var _WebChatReduxContext = _interopRequireWildcard(require("./internal/WebChatReduxContext"));

var _WebChatAPIContext = _interopRequireDefault(require("./internal/WebChatAPIContext"));

var _applyMiddleware = _interopRequireWildcard(require("./middleware/applyMiddleware"));

var _patchStyleOptions = _interopRequireDefault(require("../patchStyleOptions"));

var _singleToArray = _interopRequireDefault(require("./utils/singleToArray"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

// List of Redux actions factory we are hoisting as Web Chat functions
var DISPATCHERS = {
  clearSuggestedActions: _botframeworkWebchatCore.clearSuggestedActions,
  dismissNotification: _botframeworkWebchatCore.dismissNotification,
  emitTypingIndicator: _botframeworkWebchatCore.emitTypingIndicator,
  markActivity: _botframeworkWebchatCore.markActivity,
  postActivity: _botframeworkWebchatCore.postActivity,
  sendEvent: _botframeworkWebchatCore.sendEvent,
  sendFiles: _botframeworkWebchatCore.sendFiles,
  sendMessage: _botframeworkWebchatCore.sendMessage,
  sendMessageBack: _botframeworkWebchatCore.sendMessageBack,
  sendPostBack: _botframeworkWebchatCore.sendPostBack,
  setDictateInterims: _botframeworkWebchatCore.setDictateInterims,
  setDictateState: _botframeworkWebchatCore.setDictateState,
  setNotification: _botframeworkWebchatCore.setNotification,
  setSendBox: _botframeworkWebchatCore.setSendBox,
  setSendTimeout: _botframeworkWebchatCore.setSendTimeout,
  startDictate: _botframeworkWebchatCore.startDictate,
  startSpeakingActivity: _botframeworkWebchatCore.startSpeakingActivity,
  stopDictate: _botframeworkWebchatCore.stopDictate,
  stopSpeakingActivity: _botframeworkWebchatCore.stopSpeakingActivity,
  submitSendBox: _botframeworkWebchatCore.submitSendBox
};

function createCardActionContext(_ref) {
  var cardActionMiddleware = _ref.cardActionMiddleware,
      directLine = _ref.directLine,
      dispatch = _ref.dispatch;

  var runMiddleware = _applyMiddleware.default.apply(void 0, ['card action'].concat(_toConsumableArray((0, _singleToArray.default)(cardActionMiddleware)), [(0, _createDefaultCardActionMiddleware.default)()]))({
    dispatch: dispatch
  });

  return {
    onCardAction: function onCardAction(cardAction) {
      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          target = _ref2.target;

      return runMiddleware({
        cardAction: cardAction,
        getSignInUrl: cardAction.type === 'signin' ? function () {
          var value = cardAction.value;

          if (directLine.getSessionId) {
            // TODO: [P3] We should change this one to async/await.
            //       This is the first place in this project to use async.
            //       Thus, we need to add @babel/plugin-transform-runtime and @babel/runtime.
            return (0, _observableToPromise.default)(directLine.getSessionId()).then(function (sessionId) {
              return "".concat(value).concat(encodeURIComponent("&code_challenge=".concat(sessionId)));
            });
          }

          console.warn('botframework-webchat: OAuth is not supported on this Direct Line adapter.');
          return value;
        } : null,
        target: target
      });
    }
  };
}

function createGroupActivitiesContext(_ref3) {
  var groupActivitiesMiddleware = _ref3.groupActivitiesMiddleware,
      groupTimestamp = _ref3.groupTimestamp;

  var runMiddleware = _applyMiddleware.default.apply(void 0, ['group activities'].concat(_toConsumableArray((0, _singleToArray.default)(groupActivitiesMiddleware)), [(0, _createDefaultGroupActivitiesMiddleware.default)({
    groupTimestamp: groupTimestamp
  })]));

  return {
    groupActivities: runMiddleware({})
  };
}

function mergeStringsOverrides(localizedStrings, language, overrideLocalizedStrings) {
  if (!overrideLocalizedStrings) {
    return localizedStrings;
  } else if (typeof overrideLocalizedStrings === 'function') {
    var merged = overrideLocalizedStrings(localizedStrings, language);

    if (!(0, _isObject.default)(merged)) {
      throw new Error('botframework-webchat: overrideLocalizedStrings function must return an object.');
    }

    return merged;
  }

  if (!(0, _isObject.default)(overrideLocalizedStrings)) {
    throw new Error('botframework-webchat: overrideLocalizedStrings must be either a function, an object, or falsy.');
  }

  return _objectSpread(_objectSpread({}, localizedStrings), overrideLocalizedStrings);
}

var Composer = function Composer(_ref4) {
  var activityMiddleware = _ref4.activityMiddleware,
      activityRenderer = _ref4.activityRenderer,
      activityStatusMiddleware = _ref4.activityStatusMiddleware,
      activityStatusRenderer = _ref4.activityStatusRenderer,
      attachmentMiddleware = _ref4.attachmentMiddleware,
      attachmentForScreenReaderMiddleware = _ref4.attachmentForScreenReaderMiddleware,
      attachmentRenderer = _ref4.attachmentRenderer,
      avatarMiddleware = _ref4.avatarMiddleware,
      avatarRenderer = _ref4.avatarRenderer,
      cardActionMiddleware = _ref4.cardActionMiddleware,
      children = _ref4.children,
      dir = _ref4.dir,
      directLine = _ref4.directLine,
      disabled = _ref4.disabled,
      downscaleImageToDataURL = _ref4.downscaleImageToDataURL,
      grammars = _ref4.grammars,
      groupActivitiesMiddleware = _ref4.groupActivitiesMiddleware,
      groupTimestamp = _ref4.groupTimestamp,
      internalErrorBoxClass = _ref4.internalErrorBoxClass,
      locale = _ref4.locale,
      onTelemetry = _ref4.onTelemetry,
      overrideLocalizedStrings = _ref4.overrideLocalizedStrings,
      renderMarkdown = _ref4.renderMarkdown,
      selectVoice = _ref4.selectVoice,
      sendTimeout = _ref4.sendTimeout,
      sendTypingIndicator = _ref4.sendTypingIndicator,
      styleOptions = _ref4.styleOptions,
      toastMiddleware = _ref4.toastMiddleware,
      toastRenderer = _ref4.toastRenderer,
      typingIndicatorMiddleware = _ref4.typingIndicatorMiddleware,
      typingIndicatorRenderer = _ref4.typingIndicatorRenderer,
      userID = _ref4.userID,
      username = _ref4.username;
  var dispatch = (0, _WebChatReduxContext.useDispatch)();
  var telemetryDimensionsRef = (0, _react.useRef)({});
  var patchedDir = (0, _react.useMemo)(function () {
    return dir === 'ltr' || dir === 'rtl' ? dir : 'auto';
  }, [dir]);
  var patchedGrammars = (0, _react.useMemo)(function () {
    return grammars || [];
  }, [grammars]);
  var patchedStyleOptions = (0, _react.useMemo)(function () {
    return (0, _patchStyleOptions.default)(styleOptions, {
      groupTimestamp: groupTimestamp,
      sendTimeout: sendTimeout
    });
  }, [groupTimestamp, sendTimeout, styleOptions]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.setLanguage)(locale));
  }, [dispatch, locale]);
  (0, _react.useEffect)(function () {
    typeof sendTimeout === 'number' && dispatch((0, _botframeworkWebchatCore.setSendTimeout)(sendTimeout));
  }, [dispatch, sendTimeout]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.setSendTypingIndicator)(!!sendTypingIndicator));
  }, [dispatch, sendTypingIndicator]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.connect)({
      directLine: directLine,
      userID: userID,
      username: username
    }));
    return function () {
      // TODO: [P3] disconnect() is an async call (pending -> fulfilled), we need to wait, or change it to reconnect()
      dispatch((0, _botframeworkWebchatCore.disconnect)());
    };
  }, [dispatch, directLine, userID, username]);
  var cardActionContext = (0, _react.useMemo)(function () {
    return createCardActionContext({
      cardActionMiddleware: cardActionMiddleware,
      directLine: directLine,
      dispatch: dispatch
    });
  }, [cardActionMiddleware, directLine, dispatch]);
  var patchedSelectVoice = (0, _react.useMemo)(function () {
    return selectVoice || _defaultSelectVoice.default.bind(null, {
      language: locale
    });
  }, [locale, selectVoice]);
  var groupActivitiesContext = (0, _react.useMemo)(function () {
    return createGroupActivitiesContext({
      groupActivitiesMiddleware: groupActivitiesMiddleware,
      groupTimestamp: patchedStyleOptions.groupTimestamp
    });
  }, [groupActivitiesMiddleware, patchedStyleOptions.groupTimestamp]);
  var hoistedDispatchers = (0, _react.useMemo)(function () {
    return (0, _mapMap.default)(DISPATCHERS, function (dispatcher) {
      return function () {
        return dispatch(dispatcher.apply(void 0, arguments));
      };
    });
  }, [dispatch]);
  var patchedLocalizedStrings = (0, _react.useMemo)(function () {
    return mergeStringsOverrides((0, _getAllLocalizedStrings.default)()[(0, _normalizeLanguage.default)(locale)], locale, overrideLocalizedStrings);
  }, [locale, overrideLocalizedStrings]);
  var localizedGlobalize = (0, _react.useMemo)(function () {
    var _ref5 = patchedLocalizedStrings || {},
        GLOBALIZE = _ref5.GLOBALIZE,
        GLOBALIZE_LANGUAGE = _ref5.GLOBALIZE_LANGUAGE;

    return GLOBALIZE || GLOBALIZE_LANGUAGE && (0, _PrecompiledGlobalize.default)(GLOBALIZE_LANGUAGE) || (0, _PrecompiledGlobalize.default)('en');
  }, [patchedLocalizedStrings]);
  var trackDimension = (0, _react.useCallback)(function (name, data) {
    if (!name || typeof name !== 'string') {
      return console.warn('botframework-webchat: Telemetry dimension name must be a string.');
    }

    var type = _typeof(data);

    if (type !== 'string' && type !== 'undefined') {
      return console.warn('botframework-webchat: Telemetry dimension data must be a string or undefined.');
    }

    telemetryDimensionsRef.current = (0, _simpleUpdateIn.default)(telemetryDimensionsRef.current, [name], type === 'undefined' ? data : function () {
      return data;
    });
  }, [telemetryDimensionsRef]);
  var patchedActivityRenderer = (0, _react.useMemo)(function () {
    activityRenderer && console.warn('Web Chat: "activityRenderer" is deprecated and will be removed on 2022-06-15, please use "activityMiddleware" instead.');
    return activityRenderer || _applyMiddleware.forRenderer.apply(void 0, ['activity', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(activityMiddleware)), [function () {
      return function () {
        return function (_ref6) {
          var activity = _ref6.activity;

          if (activity) {
            throw new Error("No renderer for activity of type \"".concat(activity.type, "\""));
          } else {
            throw new Error('No activity to render');
          }
        };
      };
    }]))({});
  }, [activityMiddleware, activityRenderer]);
  var patchedActivityStatusRenderer = (0, _react.useMemo)(function () {
    activityStatusRenderer && console.warn('Web Chat: "activityStatusRenderer" is deprecated and will be removed on 2022-06-15, please use "activityStatusMiddleware" instead.');
    return activityStatusRenderer || _applyMiddleware.forRenderer.apply(void 0, ['activity status', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(activityStatusMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [activityStatusMiddleware, activityStatusRenderer]);
  var patchedAttachmentForScreenReaderRenderer = (0, _react.useMemo)(function () {
    return _applyMiddleware.forRenderer.apply(void 0, ['attachment for screen reader', {
      strict: true
    }].concat(_toConsumableArray((0, _singleToArray.default)(attachmentForScreenReaderMiddleware)), [function () {
      return function () {
        return function (_ref7) {
          var attachment = _ref7.attachment;
          return function () {
            if (attachment) {
              throw new Error("No renderer for attachment for screen reader of type \"".concat(attachment.contentType, "\""));
            } else {
              throw new Error('No attachment to render');
            }
          };
        };
      };
    }]))({});
  }, [attachmentForScreenReaderMiddleware]);
  var patchedAttachmentRenderer = (0, _react.useMemo)(function () {
    if (attachmentRenderer) {
      console.warn('Web Chat: "attachmentRenderer" is deprecated and will be removed on 2022-06-15, please use "attachmentMiddleware" instead.');
      return attachmentRenderer;
    } // Attachment renderer


    return _applyMiddleware.default.apply(void 0, ['attachment'].concat(_toConsumableArray((0, _singleToArray.default)(attachmentMiddleware)), [function () {
      return function () {
        return function (_ref8) {
          var attachment = _ref8.attachment;

          if (attachment) {
            throw new Error("No renderer for attachment of type \"".concat(attachment.contentType, "\""));
          } else {
            throw new Error('No attachment to render');
          }
        };
      };
    }]))({});
  }, [attachmentMiddleware, attachmentRenderer]);
  var patchedAvatarRenderer = (0, _react.useMemo)(function () {
    avatarRenderer && console.warn('Web Chat: "avatarRenderer" is deprecated and will be removed on 2022-06-15, please use "avatarMiddleware" instead.');
    return avatarRenderer || _applyMiddleware.forRenderer.apply(void 0, ['avatar', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(avatarMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [avatarMiddleware, avatarRenderer]);
  var patchedToastRenderer = (0, _react.useMemo)(function () {
    toastRenderer && console.warn('Web Chat: "toastRenderer" is deprecated and will be removed on 2022-06-15, please use "toastMiddleware" instead.');
    return toastRenderer || _applyMiddleware.forRenderer.apply(void 0, ['toast', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(toastMiddleware)), [function () {
      return function () {
        return function (_ref9) {
          var notification = _ref9.notification;

          if (notification) {
            throw new Error("No renderer for notification of type \"".concat(notification.contentType, "\""));
          } else {
            throw new Error('No notification to render');
          }
        };
      };
    }]))({});
  }, [toastMiddleware, toastRenderer]);
  var patchedTypingIndicatorRenderer = (0, _react.useMemo)(function () {
    typingIndicatorRenderer && console.warn('Web Chat: "typingIndicatorRenderer" is deprecated and will be removed on 2022-06-15, please use "typingIndicatorMiddleware" instead.');
    return typingIndicatorRenderer || _applyMiddleware.forRenderer.apply(void 0, ['typing indicator', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(typingIndicatorMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [typingIndicatorMiddleware, typingIndicatorRenderer]); // This is a heavy function, and it is expected to be only called when there is a need to recreate business logic, e.g.
  // - User ID changed, causing all send* functions to be updated
  // - send
  // TODO: [P3] We should think about if we allow the user to change onSendBoxValueChanged/sendBoxValue, e.g.
  // 1. Turns text into UPPERCASE
  // 2. Filter out profanity
  // TODO: [P4] Revisit all members of context
  //       This context should consist of members that are not in the Redux store
  //       i.e. members that are not interested in other types of UIs

  var context = (0, _react.useMemo)(function () {
    return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, cardActionContext), groupActivitiesContext), hoistedDispatchers), {}, {
      activityRenderer: patchedActivityRenderer,
      activityStatusRenderer: patchedActivityStatusRenderer,
      attachmentForScreenReaderRenderer: patchedAttachmentForScreenReaderRenderer,
      attachmentRenderer: patchedAttachmentRenderer,
      avatarRenderer: patchedAvatarRenderer,
      dir: patchedDir,
      directLine: directLine,
      disabled: disabled,
      downscaleImageToDataURL: downscaleImageToDataURL,
      grammars: patchedGrammars,
      internalErrorBoxClass: internalErrorBoxClass,
      language: locale,
      localizedGlobalizeState: [localizedGlobalize],
      localizedStrings: patchedLocalizedStrings,
      onTelemetry: onTelemetry,
      renderMarkdown: renderMarkdown,
      selectVoice: patchedSelectVoice,
      sendTypingIndicator: sendTypingIndicator,
      styleOptions: patchedStyleOptions,
      telemetryDimensionsRef: telemetryDimensionsRef,
      toastRenderer: patchedToastRenderer,
      trackDimension: trackDimension,
      typingIndicatorRenderer: patchedTypingIndicatorRenderer,
      userID: userID,
      username: username
    });
  }, [cardActionContext, directLine, disabled, downscaleImageToDataURL, groupActivitiesContext, hoistedDispatchers, internalErrorBoxClass, locale, localizedGlobalize, onTelemetry, patchedActivityRenderer, patchedActivityStatusRenderer, patchedAttachmentForScreenReaderRenderer, patchedAttachmentRenderer, patchedAvatarRenderer, patchedDir, patchedGrammars, patchedLocalizedStrings, patchedSelectVoice, patchedStyleOptions, patchedToastRenderer, patchedTypingIndicatorRenderer, renderMarkdown, sendTypingIndicator, telemetryDimensionsRef, trackDimension, userID, username]);
  return /*#__PURE__*/_react.default.createElement(_WebChatAPIContext.default.Provider, {
    value: context
  }, typeof children === 'function' ? children(context) : children, onTelemetry && /*#__PURE__*/_react.default.createElement(_Tracker.default, null));
}; // We will create a Redux store if it was not passed in


var ComposeWithStore = function ComposeWithStore(_ref10) {
  var internalRenderErrorBox = _ref10.internalRenderErrorBox,
      onTelemetry = _ref10.onTelemetry,
      store = _ref10.store,
      props = _objectWithoutProperties(_ref10, ["internalRenderErrorBox", "onTelemetry", "store"]);

  var _useState = (0, _react.useState)(),
      _useState2 = _slicedToArray(_useState, 2),
      error = _useState2[0],
      setError = _useState2[1];

  var handleError = (0, _react.useCallback)(function (error) {
    console.error('botframework-webchat: Uncaught exception', {
      error: error
    });
    onTelemetry && onTelemetry((0, _createCustomEvent.default)('exception', {
      error: error,
      fatal: true
    }));
    setError(error);
  }, [onTelemetry, setError]);
  var memoizedStore = (0, _react.useMemo)(function () {
    return store || (0, _botframeworkWebchatCore.createStore)();
  }, [store]);
  return error ? !!internalRenderErrorBox && internalRenderErrorBox({
    error: error,
    type: 'uncaught exception'
  }) : /*#__PURE__*/_react.default.createElement(_ErrorBoundary.default, {
    onError: handleError
  }, /*#__PURE__*/_react.default.createElement(_reactRedux.Provider, {
    context: _WebChatReduxContext.default,
    store: memoizedStore
  }, /*#__PURE__*/_react.default.createElement(Composer, _extends({
    internalRenderErrorBox: internalRenderErrorBox,
    onTelemetry: onTelemetry
  }, props))));
};

ComposeWithStore.defaultProps = {
  internalRenderErrorBox: undefined,
  onTelemetry: undefined,
  store: undefined
};
ComposeWithStore.propTypes = {
  internalRenderErrorBox: _propTypes.default.any,
  onTelemetry: _propTypes.default.func,
  store: _propTypes.default.any
};
var _default = ComposeWithStore; // TODO: [P3] We should consider moving some data from Redux store to props
//       Although we use `connectToWebChat` to hide the details of accessor of Redux store,
//       we should clean up the responsibility between Context and Redux store
//       We should decide which data is needed for React but not in other environment such as CLI/VSCode

exports.default = _default;
Composer.defaultProps = {
  activityMiddleware: undefined,
  activityRenderer: undefined,
  activityStatusMiddleware: undefined,
  activityStatusRenderer: undefined,
  attachmentForScreenReaderMiddleware: undefined,
  attachmentMiddleware: undefined,
  attachmentRenderer: undefined,
  avatarMiddleware: undefined,
  avatarRenderer: undefined,
  cardActionMiddleware: undefined,
  children: undefined,
  dir: 'auto',
  disabled: false,
  downscaleImageToDataURL: undefined,
  grammars: [],
  groupActivitiesMiddleware: undefined,
  groupTimestamp: undefined,
  internalErrorBoxClass: undefined,
  locale: window.navigator.language || 'en-US',
  onTelemetry: undefined,
  overrideLocalizedStrings: undefined,
  renderMarkdown: undefined,
  selectVoice: undefined,
  sendTimeout: undefined,
  sendTypingIndicator: false,
  styleOptions: {},
  toastMiddleware: undefined,
  toastRenderer: undefined,
  typingIndicatorMiddleware: undefined,
  typingIndicatorRenderer: undefined,
  userID: '',
  username: ''
};
Composer.propTypes = {
  activityMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  activityRenderer: _propTypes.default.func,
  activityStatusMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  activityStatusRenderer: _propTypes.default.func,
  attachmentForScreenReaderMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  attachmentMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  attachmentRenderer: _propTypes.default.func,
  avatarMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  avatarRenderer: _propTypes.default.func,
  cardActionMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  children: _propTypes.default.any,
  dir: _propTypes.default.oneOf(['auto', 'ltr', 'rtl']),
  directLine: _propTypes.default.shape({
    activity$: _propTypes.default.shape({
      subscribe: _propTypes.default.func.isRequired
    }).isRequired,
    connectionStatus$: _propTypes.default.shape({
      subscribe: _propTypes.default.func.isRequired
    }).isRequired,
    end: _propTypes.default.func,
    getSessionId: _propTypes.default.func,
    postActivity: _propTypes.default.func.isRequired,
    referenceGrammarID: _propTypes.default.string,
    token: _propTypes.default.string
  }).isRequired,
  disabled: _propTypes.default.bool,
  downscaleImageToDataURL: _propTypes.default.func,
  grammars: _propTypes.default.arrayOf(_propTypes.default.string),
  groupActivitiesMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  groupTimestamp: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.number]),
  internalErrorBoxClass: _propTypes.default.func,
  // This is for internal use only. We don't allow customization of error box.
  locale: _propTypes.default.string,
  onTelemetry: _propTypes.default.func,
  overrideLocalizedStrings: _propTypes.default.oneOfType([_propTypes.default.any, _propTypes.default.func]),
  renderMarkdown: _propTypes.default.func,
  selectVoice: _propTypes.default.func,
  sendTimeout: _propTypes.default.number,
  sendTypingIndicator: _propTypes.default.bool,
  styleOptions: _propTypes.default.any,
  toastMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  toastRenderer: _propTypes.default.func,
  typingIndicatorMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  typingIndicatorRenderer: _propTypes.default.func,
  userID: _propTypes.default.string,
  username: _propTypes.default.string
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy9Db21wb3Nlci5qcyJdLCJuYW1lcyI6WyJESVNQQVRDSEVSUyIsImNsZWFyU3VnZ2VzdGVkQWN0aW9ucyIsImRpc21pc3NOb3RpZmljYXRpb24iLCJlbWl0VHlwaW5nSW5kaWNhdG9yIiwibWFya0FjdGl2aXR5IiwicG9zdEFjdGl2aXR5Iiwic2VuZEV2ZW50Iiwic2VuZEZpbGVzIiwic2VuZE1lc3NhZ2UiLCJzZW5kTWVzc2FnZUJhY2siLCJzZW5kUG9zdEJhY2siLCJzZXREaWN0YXRlSW50ZXJpbXMiLCJzZXREaWN0YXRlU3RhdGUiLCJzZXROb3RpZmljYXRpb24iLCJzZXRTZW5kQm94Iiwic2V0U2VuZFRpbWVvdXQiLCJzdGFydERpY3RhdGUiLCJzdGFydFNwZWFraW5nQWN0aXZpdHkiLCJzdG9wRGljdGF0ZSIsInN0b3BTcGVha2luZ0FjdGl2aXR5Iiwic3VibWl0U2VuZEJveCIsImNyZWF0ZUNhcmRBY3Rpb25Db250ZXh0IiwiY2FyZEFjdGlvbk1pZGRsZXdhcmUiLCJkaXJlY3RMaW5lIiwiZGlzcGF0Y2giLCJydW5NaWRkbGV3YXJlIiwiYXBwbHlNaWRkbGV3YXJlIiwib25DYXJkQWN0aW9uIiwiY2FyZEFjdGlvbiIsInRhcmdldCIsImdldFNpZ25JblVybCIsInR5cGUiLCJ2YWx1ZSIsImdldFNlc3Npb25JZCIsInRoZW4iLCJzZXNzaW9uSWQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb25zb2xlIiwid2FybiIsImNyZWF0ZUdyb3VwQWN0aXZpdGllc0NvbnRleHQiLCJncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlIiwiZ3JvdXBUaW1lc3RhbXAiLCJncm91cEFjdGl2aXRpZXMiLCJtZXJnZVN0cmluZ3NPdmVycmlkZXMiLCJsb2NhbGl6ZWRTdHJpbmdzIiwibGFuZ3VhZ2UiLCJvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MiLCJtZXJnZWQiLCJFcnJvciIsIkNvbXBvc2VyIiwiYWN0aXZpdHlNaWRkbGV3YXJlIiwiYWN0aXZpdHlSZW5kZXJlciIsImFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSIsImFjdGl2aXR5U3RhdHVzUmVuZGVyZXIiLCJhdHRhY2htZW50TWlkZGxld2FyZSIsImF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlIiwiYXR0YWNobWVudFJlbmRlcmVyIiwiYXZhdGFyTWlkZGxld2FyZSIsImF2YXRhclJlbmRlcmVyIiwiY2hpbGRyZW4iLCJkaXIiLCJkaXNhYmxlZCIsImRvd25zY2FsZUltYWdlVG9EYXRhVVJMIiwiZ3JhbW1hcnMiLCJpbnRlcm5hbEVycm9yQm94Q2xhc3MiLCJsb2NhbGUiLCJvblRlbGVtZXRyeSIsInJlbmRlck1hcmtkb3duIiwic2VsZWN0Vm9pY2UiLCJzZW5kVGltZW91dCIsInNlbmRUeXBpbmdJbmRpY2F0b3IiLCJzdHlsZU9wdGlvbnMiLCJ0b2FzdE1pZGRsZXdhcmUiLCJ0b2FzdFJlbmRlcmVyIiwidHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZSIsInR5cGluZ0luZGljYXRvclJlbmRlcmVyIiwidXNlcklEIiwidXNlcm5hbWUiLCJ0ZWxlbWV0cnlEaW1lbnNpb25zUmVmIiwicGF0Y2hlZERpciIsInBhdGNoZWRHcmFtbWFycyIsInBhdGNoZWRTdHlsZU9wdGlvbnMiLCJjYXJkQWN0aW9uQ29udGV4dCIsInBhdGNoZWRTZWxlY3RWb2ljZSIsImRlZmF1bHRTZWxlY3RWb2ljZSIsImJpbmQiLCJncm91cEFjdGl2aXRpZXNDb250ZXh0IiwiaG9pc3RlZERpc3BhdGNoZXJzIiwiZGlzcGF0Y2hlciIsInBhdGNoZWRMb2NhbGl6ZWRTdHJpbmdzIiwibG9jYWxpemVkR2xvYmFsaXplIiwiR0xPQkFMSVpFIiwiR0xPQkFMSVpFX0xBTkdVQUdFIiwidHJhY2tEaW1lbnNpb24iLCJuYW1lIiwiZGF0YSIsImN1cnJlbnQiLCJwYXRjaGVkQWN0aXZpdHlSZW5kZXJlciIsImFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyIiwic3RyaWN0IiwiYWN0aXZpdHkiLCJwYXRjaGVkQWN0aXZpdHlTdGF0dXNSZW5kZXJlciIsInBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXIiLCJhdHRhY2htZW50IiwiY29udGVudFR5cGUiLCJwYXRjaGVkQXR0YWNobWVudFJlbmRlcmVyIiwicGF0Y2hlZEF2YXRhclJlbmRlcmVyIiwicGF0Y2hlZFRvYXN0UmVuZGVyZXIiLCJub3RpZmljYXRpb24iLCJwYXRjaGVkVHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIiLCJjb250ZXh0IiwiYXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyIiwibG9jYWxpemVkR2xvYmFsaXplU3RhdGUiLCJDb21wb3NlV2l0aFN0b3JlIiwiaW50ZXJuYWxSZW5kZXJFcnJvckJveCIsInN0b3JlIiwicHJvcHMiLCJlcnJvciIsInNldEVycm9yIiwiaGFuZGxlRXJyb3IiLCJmYXRhbCIsIm1lbW9pemVkU3RvcmUiLCJXZWJDaGF0UmVkdXhDb250ZXh0IiwiZGVmYXVsdFByb3BzIiwidW5kZWZpbmVkIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYW55IiwiZnVuYyIsIndpbmRvdyIsIm5hdmlnYXRvciIsIm9uZU9mVHlwZSIsImFycmF5T2YiLCJvbmVPZiIsInNoYXBlIiwiYWN0aXZpdHkkIiwic3Vic2NyaWJlIiwiaXNSZXF1aXJlZCIsImNvbm5lY3Rpb25TdGF0dXMkIiwiZW5kIiwicmVmZXJlbmNlR3JhbW1hcklEIiwic3RyaW5nIiwidG9rZW4iLCJib29sIiwibnVtYmVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBNEJBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBLElBQU1BLFdBQVcsR0FBRztBQUNsQkMsRUFBQUEscUJB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QVVDLEdBdkNMO0FBd0NuQnZELEVBQUFBLGVBQWUsRUFBRXNELG1CQUFVSyxTQUFWLENBQW9CLENBQUNMLG1CQUFVTSxPQUFWLENBQWtCTixtQkFBVUUsSUFBNUIsQ0FBRCxFQUFvQ0YsbUJBQVVFLElBQTlDLENBQXBCLENBeENFO0FBeUNuQnZELEVBQUFBLGFBQWEsRUFBRXFELG1CQUFVRSxJQXpDTjtBQTBDbkJ0RCxFQUFBQSx5QkFBeUIsRUFBRW9ELG1CQUFVSyxTQUFWLENBQW9CLENBQUNMLG1CQUFVTSxPQUFWLENBQWtCTixtQkFBVUUsSUFBNUIsQ0FBRCxFQUFvQ0YsbUJBQVVFLElBQTlDLENBQXBCLENBMUNSO0FBMkNuQnJELEVBQUFBLHVCQUF1QixFQUFFbUQsbUJBQVVFLElBM0NoQjtBQTRDbkJwRCxFQUFBQSxNQUFNLEVBQUVrRCxtQkFBVWUsTUE1Q0M7QUE2Q25CaEUsRUFBQUEsUUFBUSxFQUFFaUQsbUJBQVVlO0FBN0NELENBQXJCIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1cGRhdGVJbiBmcm9tICdzaW1wbGUtdXBkYXRlLWluJztcblxuaW1wb3J0IGNyZWF0ZUN1c3RvbUV2ZW50IGZyb20gJy4uL3V0aWxzL2NyZWF0ZUN1c3RvbUV2ZW50JztcbmltcG9ydCBFcnJvckJvdW5kYXJ5IGZyb20gJy4vdXRpbHMvRXJyb3JCb3VuZGFyeSc7XG5pbXBvcnQgZ2V0QWxsTG9jYWxpemVkU3RyaW5ncyBmcm9tICcuLi9sb2NhbGl6YXRpb24vZ2V0QWxsTG9jYWxpemVkU3RyaW5ncyc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnLi4vdXRpbHMvaXNPYmplY3QnO1xuaW1wb3J0IG5vcm1hbGl6ZUxhbmd1YWdlIGZyb20gJy4uL3V0aWxzL25vcm1hbGl6ZUxhbmd1YWdlJztcbmltcG9ydCBQcmVjb21waWxlZEdsb2JhbGl6ZSBmcm9tICcuLi9leHRlcm5hbC9QcmVjb21waWxlZEdsb2JhbGl6ZSc7XG5cbmltcG9ydCB7XG4gIGNsZWFyU3VnZ2VzdGVkQWN0aW9ucyxcbiAgY29ubmVjdCBhcyBjcmVhdGVDb25uZWN0QWN0aW9uLFxuICBjcmVhdGVTdG9yZSxcbiAgZGlzY29ubmVjdCxcbiAgZGlzbWlzc05vdGlmaWNhdGlvbixcbiAgZW1pdFR5cGluZ0luZGljYXRvcixcbiAgbWFya0FjdGl2aXR5LFxuICBwb3N0QWN0aXZpdHksXG4gIHNlbmRFdmVudCxcbiAgc2VuZEZpbGVzLFxuICBzZW5kTWVzc2FnZSxcbiAgc2VuZE1lc3NhZ2VCYWNrLFxuICBzZW5kUG9zdEJhY2ssXG4gIHNldERpY3RhdGVJbnRlcmltcyxcbiAgc2V0RGljdGF0ZVN0YXRlLFxuICBzZXRMYW5ndWFnZSxcbiAgc2V0Tm90aWZpY2F0aW9uLFxuICBzZXRTZW5kQm94LFxuICBzZXRTZW5kVGltZW91dCxcbiAgc2V0U2VuZFR5cGluZ0luZGljYXRvcixcbiAgc3RhcnREaWN0YXRlLFxuICBzdGFydFNwZWFraW5nQWN0aXZpdHksXG4gIHN0b3BEaWN0YXRlLFxuICBzdG9wU3BlYWtpbmdBY3Rpdml0eSxcbiAgc3VibWl0U2VuZEJveFxufSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb3JlJztcblxuaW1wb3J0IGNyZWF0ZURlZmF1bHRDYXJkQWN0aW9uTWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUvY3JlYXRlRGVmYXVsdENhcmRBY3Rpb25NaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVEZWZhdWx0R3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUvY3JlYXRlRGVmYXVsdEdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUnO1xuaW1wb3J0IGRlZmF1bHRTZWxlY3RWb2ljZSBmcm9tICcuL2ludGVybmFsL2RlZmF1bHRTZWxlY3RWb2ljZSc7XG5pbXBvcnQgbWFwTWFwIGZyb20gJy4uL3V0aWxzL21hcE1hcCc7XG5pbXBvcnQgb2JzZXJ2YWJsZVRvUHJvbWlzZSBmcm9tICcuL3V0aWxzL29ic2VydmFibGVUb1Byb21pc2UnO1xuaW1wb3J0IFRyYWNrZXIgZnJvbSAnLi9pbnRlcm5hbC9UcmFja2VyJztcbmltcG9ydCBXZWJDaGF0UmVkdXhDb250ZXh0LCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi9pbnRlcm5hbC9XZWJDaGF0UmVkdXhDb250ZXh0JztcbmltcG9ydCBXZWJDaGF0QVBJQ29udGV4dCBmcm9tICcuL2ludGVybmFsL1dlYkNoYXRBUElDb250ZXh0JztcblxuaW1wb3J0IGFwcGx5TWlkZGxld2FyZSwgeyBmb3JSZW5kZXJlciBhcyBhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlciB9IGZyb20gJy4vbWlkZGxld2FyZS9hcHBseU1pZGRsZXdhcmUnO1xuaW1wb3J0IHBhdGNoU3R5bGVPcHRpb25zIGZyb20gJy4uL3BhdGNoU3R5bGVPcHRpb25zJztcbmltcG9ydCBzaW5nbGVUb0FycmF5IGZyb20gJy4vdXRpbHMvc2luZ2xlVG9BcnJheSc7XG5cbi8vIExpc3Qgb2YgUmVkdXggYWN0aW9ucyBmYWN0b3J5IHdlIGFyZSBob2lzdGluZyBhcyBXZWIgQ2hhdCBmdW5jdGlvbnNcbmNvbnN0IERJU1BBVENIRVJTID0ge1xuICBjbGVhclN1Z2dlc3RlZEFjdGlvbnMsXG4gIGRpc21pc3NOb3RpZmljYXRpb24sXG4gIGVtaXRUeXBpbmdJbmRpY2F0b3IsXG4gIG1hcmtBY3Rpdml0eSxcbiAgcG9zdEFjdGl2aXR5LFxuICBzZW5kRXZlbnQsXG4gIHNlbmRGaWxlcyxcbiAgc2VuZE1lc3NhZ2UsXG4gIHNlbmRNZXNzYWdlQmFjayxcbiAgc2VuZFBvc3RCYWNrLFxuICBzZXREaWN0YXRlSW50ZXJpbXMsXG4gIHNldERpY3RhdGVTdGF0ZSxcbiAgc2V0Tm90aWZpY2F0aW9uLFxuICBzZXRTZW5kQm94LFxuICBzZXRTZW5kVGltZW91dCxcbiAgc3RhcnREaWN0YXRlLFxuICBzdGFydFNwZWFraW5nQWN0aXZpdHksXG4gIHN0b3BEaWN0YXRlLFxuICBzdG9wU3BlYWtpbmdBY3Rpdml0eSxcbiAgc3VibWl0U2VuZEJveFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZEFjdGlvbkNvbnRleHQoeyBjYXJkQWN0aW9uTWlkZGxld2FyZSwgZGlyZWN0TGluZSwgZGlzcGF0Y2ggfSkge1xuICBjb25zdCBydW5NaWRkbGV3YXJlID0gYXBwbHlNaWRkbGV3YXJlKFxuICAgICdjYXJkIGFjdGlvbicsXG4gICAgLi4uc2luZ2xlVG9BcnJheShjYXJkQWN0aW9uTWlkZGxld2FyZSksXG4gICAgY3JlYXRlRGVmYXVsdENhcmRBY3Rpb25NaWRkbGV3YXJlKClcbiAgKSh7IGRpc3BhdGNoIH0pO1xuXG4gIHJldHVybiB7XG4gICAgb25DYXJkQWN0aW9uOiAoY2FyZEFjdGlvbiwgeyB0YXJnZXQgfSA9IHt9KSA9PlxuICAgICAgcnVuTWlkZGxld2FyZSh7XG4gICAgICAgIGNhcmRBY3Rpb24sXG4gICAgICAgIGdldFNpZ25JblVybDpcbiAgICAgICAgICBjYXJkQWN0aW9uLnR5cGUgPT09ICdzaWduaW4nXG4gICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBjYXJkQWN0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdExpbmUuZ2V0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBUT0RPOiBbUDNdIFdlIHNob3VsZCBjaGFuZ2UgdGhpcyBvbmUgdG8gYXN5bmMvYXdhaXQuXG4gICAgICAgICAgICAgICAgICAvLyAgICAgICBUaGlzIGlzIHRoZSBmaXJzdCBwbGFjZSBpbiB0aGlzIHByb2plY3QgdG8gdXNlIGFzeW5jLlxuICAgICAgICAgICAgICAgICAgLy8gICAgICAgVGh1cywgd2UgbmVlZCB0byBhZGQgQGJhYmVsL3BsdWdpbi10cmFuc2Zvcm0tcnVudGltZSBhbmQgQGJhYmVsL3J1bnRpbWUuXG5cbiAgICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlVG9Qcm9taXNlKGRpcmVjdExpbmUuZ2V0U2Vzc2lvbklkKCkpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9PiBgJHt2YWx1ZX0ke2VuY29kZVVSSUNvbXBvbmVudChgJmNvZGVfY2hhbGxlbmdlPSR7c2Vzc2lvbklkfWApfWBcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstd2ViY2hhdDogT0F1dGggaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIERpcmVjdCBMaW5lIGFkYXB0ZXIuJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgdGFyZ2V0XG4gICAgICB9KVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVHcm91cEFjdGl2aXRpZXNDb250ZXh0KHsgZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSwgZ3JvdXBUaW1lc3RhbXAgfSkge1xuICBjb25zdCBydW5NaWRkbGV3YXJlID0gYXBwbHlNaWRkbGV3YXJlKFxuICAgICdncm91cCBhY3Rpdml0aWVzJyxcbiAgICAuLi5zaW5nbGVUb0FycmF5KGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUpLFxuICAgIGNyZWF0ZURlZmF1bHRHcm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlKHsgZ3JvdXBUaW1lc3RhbXAgfSlcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGdyb3VwQWN0aXZpdGllczogcnVuTWlkZGxld2FyZSh7fSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VTdHJpbmdzT3ZlcnJpZGVzKGxvY2FsaXplZFN0cmluZ3MsIGxhbmd1YWdlLCBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MpIHtcbiAgaWYgKCFvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MpIHtcbiAgICByZXR1cm4gbG9jYWxpemVkU3RyaW5ncztcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgbWVyZ2VkID0gb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzKGxvY2FsaXplZFN0cmluZ3MsIGxhbmd1YWdlKTtcblxuICAgIGlmICghaXNPYmplY3QobWVyZ2VkKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdib3RmcmFtZXdvcmstd2ViY2hhdDogb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzIGZ1bmN0aW9uIG11c3QgcmV0dXJuIGFuIG9iamVjdC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVyZ2VkO1xuICB9XG5cbiAgaWYgKCFpc09iamVjdChvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdib3RmcmFtZXdvcmstd2ViY2hhdDogb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzIG11c3QgYmUgZWl0aGVyIGEgZnVuY3Rpb24sIGFuIG9iamVjdCwgb3IgZmFsc3kuJyk7XG4gIH1cblxuICByZXR1cm4geyAuLi5sb2NhbGl6ZWRTdHJpbmdzLCAuLi5vdmVycmlkZUxvY2FsaXplZFN0cmluZ3MgfTtcbn1cblxuY29uc3QgQ29tcG9zZXIgPSAoe1xuICBhY3Rpdml0eU1pZGRsZXdhcmUsXG4gIGFjdGl2aXR5UmVuZGVyZXIsXG4gIGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSxcbiAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcixcbiAgYXR0YWNobWVudE1pZGRsZXdhcmUsXG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlLFxuICBhdHRhY2htZW50UmVuZGVyZXIsXG4gIGF2YXRhck1pZGRsZXdhcmUsXG4gIGF2YXRhclJlbmRlcmVyLFxuICBjYXJkQWN0aW9uTWlkZGxld2FyZSxcbiAgY2hpbGRyZW4sXG4gIGRpcixcbiAgZGlyZWN0TGluZSxcbiAgZGlzYWJsZWQsXG4gIGRvd25zY2FsZUltYWdlVG9EYXRhVVJMLFxuICBncmFtbWFycyxcbiAgZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSxcbiAgZ3JvdXBUaW1lc3RhbXAsXG4gIGludGVybmFsRXJyb3JCb3hDbGFzcyxcbiAgbG9jYWxlLFxuICBvblRlbGVtZXRyeSxcbiAgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzLFxuICByZW5kZXJNYXJrZG93bixcbiAgc2VsZWN0Vm9pY2UsXG4gIHNlbmRUaW1lb3V0LFxuICBzZW5kVHlwaW5nSW5kaWNhdG9yLFxuICBzdHlsZU9wdGlvbnMsXG4gIHRvYXN0TWlkZGxld2FyZSxcbiAgdG9hc3RSZW5kZXJlcixcbiAgdHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZSxcbiAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIsXG4gIHVzZXJJRCxcbiAgdXNlcm5hbWVcbn0pID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCB0ZWxlbWV0cnlEaW1lbnNpb25zUmVmID0gdXNlUmVmKHt9KTtcblxuICBjb25zdCBwYXRjaGVkRGlyID0gdXNlTWVtbygoKSA9PiAoZGlyID09PSAnbHRyJyB8fCBkaXIgPT09ICdydGwnID8gZGlyIDogJ2F1dG8nKSwgW2Rpcl0pO1xuICBjb25zdCBwYXRjaGVkR3JhbW1hcnMgPSB1c2VNZW1vKCgpID0+IGdyYW1tYXJzIHx8IFtdLCBbZ3JhbW1hcnNdKTtcbiAgY29uc3QgcGF0Y2hlZFN0eWxlT3B0aW9ucyA9IHVzZU1lbW8oKCkgPT4gcGF0Y2hTdHlsZU9wdGlvbnMoc3R5bGVPcHRpb25zLCB7IGdyb3VwVGltZXN0YW1wLCBzZW5kVGltZW91dCB9KSwgW1xuICAgIGdyb3VwVGltZXN0YW1wLFxuICAgIHNlbmRUaW1lb3V0LFxuICAgIHN0eWxlT3B0aW9uc1xuICBdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRpc3BhdGNoKHNldExhbmd1YWdlKGxvY2FsZSkpO1xuICB9LCBbZGlzcGF0Y2gsIGxvY2FsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHlwZW9mIHNlbmRUaW1lb3V0ID09PSAnbnVtYmVyJyAmJiBkaXNwYXRjaChzZXRTZW5kVGltZW91dChzZW5kVGltZW91dCkpO1xuICB9LCBbZGlzcGF0Y2gsIHNlbmRUaW1lb3V0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkaXNwYXRjaChzZXRTZW5kVHlwaW5nSW5kaWNhdG9yKCEhc2VuZFR5cGluZ0luZGljYXRvcikpO1xuICB9LCBbZGlzcGF0Y2gsIHNlbmRUeXBpbmdJbmRpY2F0b3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRpc3BhdGNoKFxuICAgICAgY3JlYXRlQ29ubmVjdEFjdGlvbih7XG4gICAgICAgIGRpcmVjdExpbmUsXG4gICAgICAgIHVzZXJJRCxcbiAgICAgICAgdXNlcm5hbWVcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyBUT0RPOiBbUDNdIGRpc2Nvbm5lY3QoKSBpcyBhbiBhc3luYyBjYWxsIChwZW5kaW5nIC0+IGZ1bGZpbGxlZCksIHdlIG5lZWQgdG8gd2FpdCwgb3IgY2hhbmdlIGl0IHRvIHJlY29ubmVjdCgpXG4gICAgICBkaXNwYXRjaChkaXNjb25uZWN0KCkpO1xuICAgIH07XG4gIH0sIFtkaXNwYXRjaCwgZGlyZWN0TGluZSwgdXNlcklELCB1c2VybmFtZV0pO1xuXG4gIGNvbnN0IGNhcmRBY3Rpb25Db250ZXh0ID0gdXNlTWVtbygoKSA9PiBjcmVhdGVDYXJkQWN0aW9uQ29udGV4dCh7IGNhcmRBY3Rpb25NaWRkbGV3YXJlLCBkaXJlY3RMaW5lLCBkaXNwYXRjaCB9KSwgW1xuICAgIGNhcmRBY3Rpb25NaWRkbGV3YXJlLFxuICAgIGRpcmVjdExpbmUsXG4gICAgZGlzcGF0Y2hcbiAgXSk7XG5cbiAgY29uc3QgcGF0Y2hlZFNlbGVjdFZvaWNlID0gdXNlTWVtbygoKSA9PiBzZWxlY3RWb2ljZSB8fCBkZWZhdWx0U2VsZWN0Vm9pY2UuYmluZChudWxsLCB7IGxhbmd1YWdlOiBsb2NhbGUgfSksIFtcbiAgICBsb2NhbGUsXG4gICAgc2VsZWN0Vm9pY2VcbiAgXSk7XG5cbiAgY29uc3QgZ3JvdXBBY3Rpdml0aWVzQ29udGV4dCA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIGNyZWF0ZUdyb3VwQWN0aXZpdGllc0NvbnRleHQoe1xuICAgICAgICBncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlLFxuICAgICAgICBncm91cFRpbWVzdGFtcDogcGF0Y2hlZFN0eWxlT3B0aW9ucy5ncm91cFRpbWVzdGFtcFxuICAgICAgfSksXG4gICAgW2dyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUsIHBhdGNoZWRTdHlsZU9wdGlvbnMuZ3JvdXBUaW1lc3RhbXBdXG4gICk7XG5cbiAgY29uc3QgaG9pc3RlZERpc3BhdGNoZXJzID0gdXNlTWVtbyhcbiAgICAoKSA9PiBtYXBNYXAoRElTUEFUQ0hFUlMsIGRpc3BhdGNoZXIgPT4gKC4uLmFyZ3MpID0+IGRpc3BhdGNoKGRpc3BhdGNoZXIoLi4uYXJncykpKSxcbiAgICBbZGlzcGF0Y2hdXG4gICk7XG5cbiAgY29uc3QgcGF0Y2hlZExvY2FsaXplZFN0cmluZ3MgPSB1c2VNZW1vKFxuICAgICgpID0+IG1lcmdlU3RyaW5nc092ZXJyaWRlcyhnZXRBbGxMb2NhbGl6ZWRTdHJpbmdzKClbbm9ybWFsaXplTGFuZ3VhZ2UobG9jYWxlKV0sIGxvY2FsZSwgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzKSxcbiAgICBbbG9jYWxlLCBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3NdXG4gICk7XG5cbiAgY29uc3QgbG9jYWxpemVkR2xvYmFsaXplID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBHTE9CQUxJWkUsIEdMT0JBTElaRV9MQU5HVUFHRSB9ID0gcGF0Y2hlZExvY2FsaXplZFN0cmluZ3MgfHwge307XG5cbiAgICByZXR1cm4gR0xPQkFMSVpFIHx8IChHTE9CQUxJWkVfTEFOR1VBR0UgJiYgUHJlY29tcGlsZWRHbG9iYWxpemUoR0xPQkFMSVpFX0xBTkdVQUdFKSkgfHwgUHJlY29tcGlsZWRHbG9iYWxpemUoJ2VuJyk7XG4gIH0sIFtwYXRjaGVkTG9jYWxpemVkU3RyaW5nc10pO1xuXG4gIGNvbnN0IHRyYWNrRGltZW5zaW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKG5hbWUsIGRhdGEpID0+IHtcbiAgICAgIGlmICghbmFtZSB8fCB0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybignYm90ZnJhbWV3b3JrLXdlYmNoYXQ6IFRlbGVtZXRyeSBkaW1lbnNpb24gbmFtZSBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0eXBlID0gdHlwZW9mIGRhdGE7XG5cbiAgICAgIGlmICh0eXBlICE9PSAnc3RyaW5nJyAmJiB0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstd2ViY2hhdDogVGVsZW1ldHJ5IGRpbWVuc2lvbiBkYXRhIG11c3QgYmUgYSBzdHJpbmcgb3IgdW5kZWZpbmVkLicpO1xuICAgICAgfVxuXG4gICAgICB0ZWxlbWV0cnlEaW1lbnNpb25zUmVmLmN1cnJlbnQgPSB1cGRhdGVJbihcbiAgICAgICAgdGVsZW1ldHJ5RGltZW5zaW9uc1JlZi5jdXJyZW50LFxuICAgICAgICBbbmFtZV0sXG4gICAgICAgIHR5cGUgPT09ICd1bmRlZmluZWQnID8gZGF0YSA6ICgpID0+IGRhdGFcbiAgICAgICk7XG4gICAgfSxcbiAgICBbdGVsZW1ldHJ5RGltZW5zaW9uc1JlZl1cbiAgKTtcblxuICBjb25zdCBwYXRjaGVkQWN0aXZpdHlSZW5kZXJlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGFjdGl2aXR5UmVuZGVyZXIgJiZcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dlYiBDaGF0OiBcImFjdGl2aXR5UmVuZGVyZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gMjAyMi0wNi0xNSwgcGxlYXNlIHVzZSBcImFjdGl2aXR5TWlkZGxld2FyZVwiIGluc3RlYWQuJ1xuICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICBhY3Rpdml0eVJlbmRlcmVyIHx8XG4gICAgICBhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlcihcbiAgICAgICAgJ2FjdGl2aXR5JyxcbiAgICAgICAgeyBzdHJpY3Q6IGZhbHNlIH0sXG4gICAgICAgIC4uLnNpbmdsZVRvQXJyYXkoYWN0aXZpdHlNaWRkbGV3YXJlKSxcbiAgICAgICAgKCkgPT4gKCkgPT4gKHsgYWN0aXZpdHkgfSkgPT4ge1xuICAgICAgICAgIGlmIChhY3Rpdml0eSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3IgYWN0aXZpdHkgb2YgdHlwZSBcIiR7YWN0aXZpdHkudHlwZX1cImApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjdGl2aXR5IHRvIHJlbmRlcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSh7fSlcbiAgICApO1xuICB9LCBbYWN0aXZpdHlNaWRkbGV3YXJlLCBhY3Rpdml0eVJlbmRlcmVyXSk7XG5cbiAgY29uc3QgcGF0Y2hlZEFjdGl2aXR5U3RhdHVzUmVuZGVyZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyICYmXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdXZWIgQ2hhdDogXCJhY3Rpdml0eVN0YXR1c1JlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlciB8fFxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICdhY3Rpdml0eSBzdGF0dXMnLFxuICAgICAgICB7IHN0cmljdDogZmFsc2UgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheShhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUpLFxuICAgICAgICAoKSA9PiAoKSA9PiAoKSA9PiBmYWxzZVxuICAgICAgKSh7fSlcbiAgICApO1xuICB9LCBbYWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlLCBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyXSk7XG5cbiAgY29uc3QgcGF0Y2hlZEF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJSZW5kZXJlciA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKFxuICAgICAgICAnYXR0YWNobWVudCBmb3Igc2NyZWVuIHJlYWRlcicsXG4gICAgICAgIHsgc3RyaWN0OiB0cnVlIH0sXG4gICAgICAgIC4uLnNpbmdsZVRvQXJyYXkoYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUpLFxuICAgICAgICAoKSA9PiAoKSA9PiAoeyBhdHRhY2htZW50IH0pID0+ICgpID0+IHtcbiAgICAgICAgICBpZiAoYXR0YWNobWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3IgYXR0YWNobWVudCBmb3Igc2NyZWVuIHJlYWRlciBvZiB0eXBlIFwiJHthdHRhY2htZW50LmNvbnRlbnRUeXBlfVwiYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYXR0YWNobWVudCB0byByZW5kZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICkoe30pLFxuICAgIFthdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZV1cbiAgKTtcblxuICBjb25zdCBwYXRjaGVkQXR0YWNobWVudFJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGF0dGFjaG1lbnRSZW5kZXJlcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwiYXR0YWNobWVudFJlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJhdHRhY2htZW50TWlkZGxld2FyZVwiIGluc3RlYWQuJ1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGF0dGFjaG1lbnRSZW5kZXJlcjtcbiAgICB9XG5cbiAgICAvLyBBdHRhY2htZW50IHJlbmRlcmVyXG4gICAgcmV0dXJuIGFwcGx5TWlkZGxld2FyZSgnYXR0YWNobWVudCcsIC4uLnNpbmdsZVRvQXJyYXkoYXR0YWNobWVudE1pZGRsZXdhcmUpLCAoKSA9PiAoKSA9PiAoeyBhdHRhY2htZW50IH0pID0+IHtcbiAgICAgIGlmIChhdHRhY2htZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gcmVuZGVyZXIgZm9yIGF0dGFjaG1lbnQgb2YgdHlwZSBcIiR7YXR0YWNobWVudC5jb250ZW50VHlwZX1cImApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhdHRhY2htZW50IHRvIHJlbmRlcicpO1xuICAgICAgfVxuICAgIH0pKHt9KTtcbiAgfSwgW2F0dGFjaG1lbnRNaWRkbGV3YXJlLCBhdHRhY2htZW50UmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkQXZhdGFyUmVuZGVyZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBhdmF0YXJSZW5kZXJlciAmJlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwiYXZhdGFyUmVuZGVyZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gMjAyMi0wNi0xNSwgcGxlYXNlIHVzZSBcImF2YXRhck1pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgYXZhdGFyUmVuZGVyZXIgfHxcbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKCdhdmF0YXInLCB7IHN0cmljdDogZmFsc2UgfSwgLi4uc2luZ2xlVG9BcnJheShhdmF0YXJNaWRkbGV3YXJlKSwgKCkgPT4gKCkgPT4gKCkgPT5cbiAgICAgICAgZmFsc2VcbiAgICAgICkoe30pXG4gICAgKTtcbiAgfSwgW2F2YXRhck1pZGRsZXdhcmUsIGF2YXRhclJlbmRlcmVyXSk7XG5cbiAgY29uc3QgcGF0Y2hlZFRvYXN0UmVuZGVyZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICB0b2FzdFJlbmRlcmVyICYmXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdXZWIgQ2hhdDogXCJ0b2FzdFJlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJ0b2FzdE1pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgdG9hc3RSZW5kZXJlciB8fFxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICd0b2FzdCcsXG4gICAgICAgIHsgc3RyaWN0OiBmYWxzZSB9LFxuICAgICAgICAuLi5zaW5nbGVUb0FycmF5KHRvYXN0TWlkZGxld2FyZSksXG4gICAgICAgICgpID0+ICgpID0+ICh7IG5vdGlmaWNhdGlvbiB9KSA9PiB7XG4gICAgICAgICAgaWYgKG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3Igbm90aWZpY2F0aW9uIG9mIHR5cGUgXCIke25vdGlmaWNhdGlvbi5jb250ZW50VHlwZX1cImApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG5vdGlmaWNhdGlvbiB0byByZW5kZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICkoe30pXG4gICAgKTtcbiAgfSwgW3RvYXN0TWlkZGxld2FyZSwgdG9hc3RSZW5kZXJlcl0pO1xuXG4gIGNvbnN0IHBhdGNoZWRUeXBpbmdJbmRpY2F0b3JSZW5kZXJlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHR5cGluZ0luZGljYXRvclJlbmRlcmVyICYmXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdXZWIgQ2hhdDogXCJ0eXBpbmdJbmRpY2F0b3JSZW5kZXJlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiAyMDIyLTA2LTE1LCBwbGVhc2UgdXNlIFwidHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZVwiIGluc3RlYWQuJ1xuICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlciB8fFxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICd0eXBpbmcgaW5kaWNhdG9yJyxcbiAgICAgICAgeyBzdHJpY3Q6IGZhbHNlIH0sXG4gICAgICAgIC4uLnNpbmdsZVRvQXJyYXkodHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZSksXG4gICAgICAgICgpID0+ICgpID0+ICgpID0+IGZhbHNlXG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFt0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlLCB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlcl0pO1xuXG4gIC8vIFRoaXMgaXMgYSBoZWF2eSBmdW5jdGlvbiwgYW5kIGl0IGlzIGV4cGVjdGVkIHRvIGJlIG9ubHkgY2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBuZWVkIHRvIHJlY3JlYXRlIGJ1c2luZXNzIGxvZ2ljLCBlLmcuXG4gIC8vIC0gVXNlciBJRCBjaGFuZ2VkLCBjYXVzaW5nIGFsbCBzZW5kKiBmdW5jdGlvbnMgdG8gYmUgdXBkYXRlZFxuICAvLyAtIHNlbmRcblxuICAvLyBUT0RPOiBbUDNdIFdlIHNob3VsZCB0aGluayBhYm91dCBpZiB3ZSBhbGxvdyB0aGUgdXNlciB0byBjaGFuZ2Ugb25TZW5kQm94VmFsdWVDaGFuZ2VkL3NlbmRCb3hWYWx1ZSwgZS5nLlxuICAvLyAxLiBUdXJucyB0ZXh0IGludG8gVVBQRVJDQVNFXG4gIC8vIDIuIEZpbHRlciBvdXQgcHJvZmFuaXR5XG5cbiAgLy8gVE9ETzogW1A0XSBSZXZpc2l0IGFsbCBtZW1iZXJzIG9mIGNvbnRleHRcbiAgLy8gICAgICAgVGhpcyBjb250ZXh0IHNob3VsZCBjb25zaXN0IG9mIG1lbWJlcnMgdGhhdCBhcmUgbm90IGluIHRoZSBSZWR1eCBzdG9yZVxuICAvLyAgICAgICBpLmUuIG1lbWJlcnMgdGhhdCBhcmUgbm90IGludGVyZXN0ZWQgaW4gb3RoZXIgdHlwZXMgb2YgVUlzXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICAuLi5jYXJkQWN0aW9uQ29udGV4dCxcbiAgICAgIC4uLmdyb3VwQWN0aXZpdGllc0NvbnRleHQsXG4gICAgICAuLi5ob2lzdGVkRGlzcGF0Y2hlcnMsXG4gICAgICBhY3Rpdml0eVJlbmRlcmVyOiBwYXRjaGVkQWN0aXZpdHlSZW5kZXJlcixcbiAgICAgIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXI6IHBhdGNoZWRBY3Rpdml0eVN0YXR1c1JlbmRlcmVyLFxuICAgICAgYXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyOiBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyLFxuICAgICAgYXR0YWNobWVudFJlbmRlcmVyOiBwYXRjaGVkQXR0YWNobWVudFJlbmRlcmVyLFxuICAgICAgYXZhdGFyUmVuZGVyZXI6IHBhdGNoZWRBdmF0YXJSZW5kZXJlcixcbiAgICAgIGRpcjogcGF0Y2hlZERpcixcbiAgICAgIGRpcmVjdExpbmUsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGRvd25zY2FsZUltYWdlVG9EYXRhVVJMLFxuICAgICAgZ3JhbW1hcnM6IHBhdGNoZWRHcmFtbWFycyxcbiAgICAgIGludGVybmFsRXJyb3JCb3hDbGFzcyxcbiAgICAgIGxhbmd1YWdlOiBsb2NhbGUsXG4gICAgICBsb2NhbGl6ZWRHbG9iYWxpemVTdGF0ZTogW2xvY2FsaXplZEdsb2JhbGl6ZV0sXG4gICAgICBsb2NhbGl6ZWRTdHJpbmdzOiBwYXRjaGVkTG9jYWxpemVkU3RyaW5ncyxcbiAgICAgIG9uVGVsZW1ldHJ5LFxuICAgICAgcmVuZGVyTWFya2Rvd24sXG4gICAgICBzZWxlY3RWb2ljZTogcGF0Y2hlZFNlbGVjdFZvaWNlLFxuICAgICAgc2VuZFR5cGluZ0luZGljYXRvcixcbiAgICAgIHN0eWxlT3B0aW9uczogcGF0Y2hlZFN0eWxlT3B0aW9ucyxcbiAgICAgIHRlbGVtZXRyeURpbWVuc2lvbnNSZWYsXG4gICAgICB0b2FzdFJlbmRlcmVyOiBwYXRjaGVkVG9hc3RSZW5kZXJlcixcbiAgICAgIHRyYWNrRGltZW5zaW9uLFxuICAgICAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXI6IHBhdGNoZWRUeXBpbmdJbmRpY2F0b3JSZW5kZXJlcixcbiAgICAgIHVzZXJJRCxcbiAgICAgIHVzZXJuYW1lXG4gICAgfSksXG4gICAgW1xuICAgICAgY2FyZEFjdGlvbkNvbnRleHQsXG4gICAgICBkaXJlY3RMaW5lLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBkb3duc2NhbGVJbWFnZVRvRGF0YVVSTCxcbiAgICAgIGdyb3VwQWN0aXZpdGllc0NvbnRleHQsXG4gICAgICBob2lzdGVkRGlzcGF0Y2hlcnMsXG4gICAgICBpbnRlcm5hbEVycm9yQm94Q2xhc3MsXG4gICAgICBsb2NhbGUsXG4gICAgICBsb2NhbGl6ZWRHbG9iYWxpemUsXG4gICAgICBvblRlbGVtZXRyeSxcbiAgICAgIHBhdGNoZWRBY3Rpdml0eVJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZEFjdGl2aXR5U3RhdHVzUmVuZGVyZXIsXG4gICAgICBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZEF0dGFjaG1lbnRSZW5kZXJlcixcbiAgICAgIHBhdGNoZWRBdmF0YXJSZW5kZXJlcixcbiAgICAgIHBhdGNoZWREaXIsXG4gICAgICBwYXRjaGVkR3JhbW1hcnMsXG4gICAgICBwYXRjaGVkTG9jYWxpemVkU3RyaW5ncyxcbiAgICAgIHBhdGNoZWRTZWxlY3RWb2ljZSxcbiAgICAgIHBhdGNoZWRTdHlsZU9wdGlvbnMsXG4gICAgICBwYXRjaGVkVG9hc3RSZW5kZXJlcixcbiAgICAgIHBhdGNoZWRUeXBpbmdJbmRpY2F0b3JSZW5kZXJlcixcbiAgICAgIHJlbmRlck1hcmtkb3duLFxuICAgICAgc2VuZFR5cGluZ0luZGljYXRvcixcbiAgICAgIHRlbGVtZXRyeURpbWVuc2lvbnNSZWYsXG4gICAgICB0cmFja0RpbWVuc2lvbixcbiAgICAgIHVzZXJJRCxcbiAgICAgIHVzZXJuYW1lXG4gICAgXVxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPFdlYkNoYXRBUElDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0fT5cbiAgICAgIHt0eXBlb2YgY2hpbGRyZW4gPT09ICdmdW5jdGlvbicgPyBjaGlsZHJlbihjb250ZXh0KSA6IGNoaWxkcmVufVxuICAgICAge29uVGVsZW1ldHJ5ICYmIDxUcmFja2VyIC8+fVxuICAgIDwvV2ViQ2hhdEFQSUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG4vLyBXZSB3aWxsIGNyZWF0ZSBhIFJlZHV4IHN0b3JlIGlmIGl0IHdhcyBub3QgcGFzc2VkIGluXG5jb25zdCBDb21wb3NlV2l0aFN0b3JlID0gKHsgaW50ZXJuYWxSZW5kZXJFcnJvckJveCwgb25UZWxlbWV0cnksIHN0b3JlLCAuLi5wcm9wcyB9KSA9PiB7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoKTtcblxuICBjb25zdCBoYW5kbGVFcnJvciA9IHVzZUNhbGxiYWNrKFxuICAgIGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBVbmNhdWdodCBleGNlcHRpb24nLCB7IGVycm9yIH0pO1xuXG4gICAgICBvblRlbGVtZXRyeSAmJiBvblRlbGVtZXRyeShjcmVhdGVDdXN0b21FdmVudCgnZXhjZXB0aW9uJywgeyBlcnJvciwgZmF0YWw6IHRydWUgfSkpO1xuICAgICAgc2V0RXJyb3IoZXJyb3IpO1xuICAgIH0sXG4gICAgW29uVGVsZW1ldHJ5LCBzZXRFcnJvcl1cbiAgKTtcblxuICBjb25zdCBtZW1vaXplZFN0b3JlID0gdXNlTWVtbygoKSA9PiBzdG9yZSB8fCBjcmVhdGVTdG9yZSgpLCBbc3RvcmVdKTtcblxuICByZXR1cm4gZXJyb3IgPyAoXG4gICAgISFpbnRlcm5hbFJlbmRlckVycm9yQm94ICYmIGludGVybmFsUmVuZGVyRXJyb3JCb3goeyBlcnJvciwgdHlwZTogJ3VuY2F1Z2h0IGV4Y2VwdGlvbicgfSlcbiAgKSA6IChcbiAgICA8RXJyb3JCb3VuZGFyeSBvbkVycm9yPXtoYW5kbGVFcnJvcn0+XG4gICAgICA8UHJvdmlkZXIgY29udGV4dD17V2ViQ2hhdFJlZHV4Q29udGV4dH0gc3RvcmU9e21lbW9pemVkU3RvcmV9PlxuICAgICAgICA8Q29tcG9zZXIgaW50ZXJuYWxSZW5kZXJFcnJvckJveD17aW50ZXJuYWxSZW5kZXJFcnJvckJveH0gb25UZWxlbWV0cnk9e29uVGVsZW1ldHJ5fSB7Li4ucHJvcHN9IC8+XG4gICAgICA8L1Byb3ZpZGVyPlxuICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgKTtcbn07XG5cbkNvbXBvc2VXaXRoU3RvcmUuZGVmYXVsdFByb3BzID0ge1xuICBpbnRlcm5hbFJlbmRlckVycm9yQm94OiB1bmRlZmluZWQsXG4gIG9uVGVsZW1ldHJ5OiB1bmRlZmluZWQsXG4gIHN0b3JlOiB1bmRlZmluZWRcbn07XG5cbkNvbXBvc2VXaXRoU3RvcmUucHJvcFR5cGVzID0ge1xuICBpbnRlcm5hbFJlbmRlckVycm9yQm94OiBQcm9wVHlwZXMuYW55LFxuICBvblRlbGVtZXRyeTogUHJvcFR5cGVzLmZ1bmMsXG4gIHN0b3JlOiBQcm9wVHlwZXMuYW55XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb21wb3NlV2l0aFN0b3JlO1xuXG4vLyBUT0RPOiBbUDNdIFdlIHNob3VsZCBjb25zaWRlciBtb3Zpbmcgc29tZSBkYXRhIGZyb20gUmVkdXggc3RvcmUgdG8gcHJvcHNcbi8vICAgICAgIEFsdGhvdWdoIHdlIHVzZSBgY29ubmVjdFRvV2ViQ2hhdGAgdG8gaGlkZSB0aGUgZGV0YWlscyBvZiBhY2Nlc3NvciBvZiBSZWR1eCBzdG9yZSxcbi8vICAgICAgIHdlIHNob3VsZCBjbGVhbiB1cCB0aGUgcmVzcG9uc2liaWxpdHkgYmV0d2VlbiBDb250ZXh0IGFuZCBSZWR1eCBzdG9yZVxuLy8gICAgICAgV2Ugc2hvdWxkIGRlY2lkZSB3aGljaCBkYXRhIGlzIG5lZWRlZCBmb3IgUmVhY3QgYnV0IG5vdCBpbiBvdGhlciBlbnZpcm9ubWVudCBzdWNoIGFzIENMSS9WU0NvZGVcblxuQ29tcG9zZXIuZGVmYXVsdFByb3BzID0ge1xuICBhY3Rpdml0eU1pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgYWN0aXZpdHlSZW5kZXJlcjogdW5kZWZpbmVkLFxuICBhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcjogdW5kZWZpbmVkLFxuICBhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBhdHRhY2htZW50TWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBhdHRhY2htZW50UmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgYXZhdGFyTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBhdmF0YXJSZW5kZXJlcjogdW5kZWZpbmVkLFxuICBjYXJkQWN0aW9uTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBjaGlsZHJlbjogdW5kZWZpbmVkLFxuICBkaXI6ICdhdXRvJyxcbiAgZGlzYWJsZWQ6IGZhbHNlLFxuICBkb3duc2NhbGVJbWFnZVRvRGF0YVVSTDogdW5kZWZpbmVkLFxuICBncmFtbWFyczogW10sXG4gIGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgZ3JvdXBUaW1lc3RhbXA6IHVuZGVmaW5lZCxcbiAgaW50ZXJuYWxFcnJvckJveENsYXNzOiB1bmRlZmluZWQsXG4gIGxvY2FsZTogd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZSB8fCAnZW4tVVMnLFxuICBvblRlbGVtZXRyeTogdW5kZWZpbmVkLFxuICBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3M6IHVuZGVmaW5lZCxcbiAgcmVuZGVyTWFya2Rvd246IHVuZGVmaW5lZCxcbiAgc2VsZWN0Vm9pY2U6IHVuZGVmaW5lZCxcbiAgc2VuZFRpbWVvdXQ6IHVuZGVmaW5lZCxcbiAgc2VuZFR5cGluZ0luZGljYXRvcjogZmFsc2UsXG4gIHN0eWxlT3B0aW9uczoge30sXG4gIHRvYXN0TWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICB0b2FzdFJlbmRlcmVyOiB1bmRlZmluZWQsXG4gIHR5cGluZ0luZGljYXRvck1pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgdXNlcklEOiAnJyxcbiAgdXNlcm5hbWU6ICcnXG59O1xuXG5Db21wb3Nlci5wcm9wVHlwZXMgPSB7XG4gIGFjdGl2aXR5TWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBhY3Rpdml0eVJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgYWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICBhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBhdHRhY2htZW50TWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBhdHRhY2htZW50UmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICBhdmF0YXJNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGF2YXRhclJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgY2FyZEFjdGlvbk1pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gIGRpcjogUHJvcFR5cGVzLm9uZU9mKFsnYXV0bycsICdsdHInLCAncnRsJ10pLFxuICBkaXJlY3RMaW5lOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGFjdGl2aXR5JDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHN1YnNjcmliZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgY29ubmVjdGlvblN0YXR1cyQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBzdWJzY3JpYmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9KS5pc1JlcXVpcmVkLFxuICAgIGVuZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZ2V0U2Vzc2lvbklkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBwb3N0QWN0aXZpdHk6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgcmVmZXJlbmNlR3JhbW1hcklEOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRva2VuOiBQcm9wVHlwZXMuc3RyaW5nXG4gIH0pLmlzUmVxdWlyZWQsXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgZG93bnNjYWxlSW1hZ2VUb0RhdGFVUkw6IFByb3BUeXBlcy5mdW5jLFxuICBncmFtbWFyczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gIGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgZ3JvdXBUaW1lc3RhbXA6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLCBQcm9wVHlwZXMubnVtYmVyXSksXG4gIGludGVybmFsRXJyb3JCb3hDbGFzczogUHJvcFR5cGVzLmZ1bmMsIC8vIFRoaXMgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LiBXZSBkb24ndCBhbGxvdyBjdXN0b21pemF0aW9uIG9mIGVycm9yIGJveC5cbiAgbG9jYWxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBvblRlbGVtZXRyeTogUHJvcFR5cGVzLmZ1bmMsXG4gIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5nczogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFueSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgcmVuZGVyTWFya2Rvd246IFByb3BUeXBlcy5mdW5jLFxuICBzZWxlY3RWb2ljZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHNlbmRUaW1lb3V0OiBQcm9wVHlwZXMubnVtYmVyLFxuICBzZW5kVHlwaW5nSW5kaWNhdG9yOiBQcm9wVHlwZXMuYm9vbCxcbiAgc3R5bGVPcHRpb25zOiBQcm9wVHlwZXMuYW55LFxuICB0b2FzdE1pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgdG9hc3RSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIHR5cGluZ0luZGljYXRvck1pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICB1c2VySUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHVzZXJuYW1lOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuIl19