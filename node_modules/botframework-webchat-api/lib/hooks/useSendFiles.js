"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useSendFiles;

var _react = require("react");

var _useTrackEvent = _interopRequireDefault(require("./useTrackEvent"));

var _useWebChatAPIContext2 = _interopRequireDefault(require("./internal/useWebChatAPIContext"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint no-magic-numbers: ["error", { "ignore": [0, 1024] }] */
function useSendFiles() {
  var _useWebChatAPIContext = (0, _useWebChatAPIContext2.default)(),
      sendFiles = _useWebChatAPIContext.sendFiles;

  var trackEvent = (0, _useTrackEvent.default)();
  return (0, _react.useCallback)(function (files) {
    if (files && files.length) {
      sendFiles(files);
      trackEvent('sendFiles', {
        numFiles: files.length,
        sumSizeInKB: Math.round(files.reduce(function (total, _ref) {
          var size = _ref.size;
          return total + size;
        }, 0) / 1024)
      });
    }
  }, [sendFiles, trackEvent]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy91c2VTZW5kRmlsZXMuanMiXSwibmFtZXMiOlsidXNlU2VuZEZpbGVzIiwic2VuZEZpbGVzIiwidHJhY2tFdmVudCIsImZpbGVzIiwibGVuZ3RoIiwibnVtRmlsZXMiLCJzdW1TaXplSW5LQiIsIk1hdGgiLCJyb3VuZCIsInJlZHVjZSIsInRvdGFsIiwic2l6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUVBOztBQUNBOzs7O0FBTEE7QUFPZSxTQUFTQSxZQUFULEdBQXdCO0FBQUEsOEJBQ2YscUNBRGU7QUFBQSxNQUM3QkMsU0FENkIseUJBQzdCQSxTQUQ2Qjs7QUFFckMsTUFBTUMsVUFBVSxHQUFHLDZCQUFuQjtBQUVBLFNBQU8sd0JBQ0wsVUFBQUMsS0FBSyxFQUFJO0FBQ1AsUUFBSUEsS0FBSyxJQUFJQSxLQUFLLENBQUNDLE1BQW5CLEVBQTJCO0FBQ3pCSCxNQUFBQSxTQUFTLENBQUNFLEtBQUQsQ0FBVDtBQUVBRCxNQUFBQSxVQUFVLENBQUMsV0FBRCxFQUFjO0FBQ3RCRyxRQUFBQSxRQUFRLEVBQUVGLEtBQUssQ0FBQ0MsTUFETTtBQUV0QkUsUUFBQUEsV0FBVyxFQUFFQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0wsS0FBSyxDQUFDTSxNQUFOLENBQWEsVUFBQ0MsS0FBRDtBQUFBLGNBQVVDLElBQVYsUUFBVUEsSUFBVjtBQUFBLGlCQUFxQkQsS0FBSyxHQUFHQyxJQUE3QjtBQUFBLFNBQWIsRUFBZ0QsQ0FBaEQsSUFBcUQsSUFBaEU7QUFGUyxPQUFkLENBQVY7QUFJRDtBQUNGLEdBVkksRUFXTCxDQUFDVixTQUFELEVBQVlDLFVBQVosQ0FYSyxDQUFQO0FBYUQiLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1tYWdpYy1udW1iZXJzOiBbXCJlcnJvclwiLCB7IFwiaWdub3JlXCI6IFswLCAxMDI0XSB9XSAqL1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHVzZVRyYWNrRXZlbnQgZnJvbSAnLi91c2VUcmFja0V2ZW50JztcbmltcG9ydCB1c2VXZWJDaGF0QVBJQ29udGV4dCBmcm9tICcuL2ludGVybmFsL3VzZVdlYkNoYXRBUElDb250ZXh0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU2VuZEZpbGVzKCkge1xuICBjb25zdCB7IHNlbmRGaWxlcyB9ID0gdXNlV2ViQ2hhdEFQSUNvbnRleHQoKTtcbiAgY29uc3QgdHJhY2tFdmVudCA9IHVzZVRyYWNrRXZlbnQoKTtcblxuICByZXR1cm4gdXNlQ2FsbGJhY2soXG4gICAgZmlsZXMgPT4ge1xuICAgICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCkge1xuICAgICAgICBzZW5kRmlsZXMoZmlsZXMpO1xuXG4gICAgICAgIHRyYWNrRXZlbnQoJ3NlbmRGaWxlcycsIHtcbiAgICAgICAgICBudW1GaWxlczogZmlsZXMubGVuZ3RoLFxuICAgICAgICAgIHN1bVNpemVJbktCOiBNYXRoLnJvdW5kKGZpbGVzLnJlZHVjZSgodG90YWwsIHsgc2l6ZSB9KSA9PiB0b3RhbCArIHNpemUsIDApIC8gMTAyNClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbc2VuZEZpbGVzLCB0cmFja0V2ZW50XVxuICApO1xufVxuIl19