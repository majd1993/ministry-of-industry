"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _observable = _interopRequireDefault(require("core-js/features/observable"));

var _mathRandom = _interopRequireDefault(require("math-random"));

var _shareObservable = _interopRequireDefault(require("./shareObservable"));

var _SpeechSynthesisAudioStreamUtterance = _interopRequireDefault(require("./SpeechSynthesisAudioStreamUtterance"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function randomActivityId() {
  return (0, _mathRandom.default)().toString(36).substr(2);
}

var DirectLineSpeech = /*#__PURE__*/function () {
  function DirectLineSpeech(_ref) {
    var _this = this;

    var dialogServiceConnector = _ref.dialogServiceConnector;
    (0, _classCallCheck2.default)(this, DirectLineSpeech);
    var connectionStatusObserver;
    this.dialogServiceConnector = dialogServiceConnector;
    this.activity$ = (0, _shareObservable.default)(new _observable.default(function (observer) {
      _this._activityObserver = observer;
      connectionStatusObserver.next(0);
      connectionStatusObserver.next(1);
      connectionStatusObserver.next(2);
    }));
    this.connectionStatus$ = (0, _shareObservable.default)(new _observable.default(function (observer) {
      connectionStatusObserver = observer;
    }));

    dialogServiceConnector.activityReceived = function (_, _ref2) {
      var activity = _ref2.activity,
          audioStream = _ref2.audioStream;

      try {
        _this._activityObserver && _this._activityObserver.next(_objectSpread(_objectSpread({}, activity), {}, {
          channelData: _objectSpread(_objectSpread({}, activity.channelData), {}, {
            speechSynthesisUtterance: new _SpeechSynthesisAudioStreamUtterance.default(audioStream)
          }),
          from: _objectSpread(_objectSpread({}, activity.from), {}, {
            // Since DLSpeech service never ACK our outgoing activity, this activity must be from bot.
            role: 'bot'
          }),
          // Direct Line Speech server currently do not timestamp outgoing activities.
          // Thus, it will be easier to just re-timestamp every incoming/outgoing activities using local time.
          timestamp: new Date().toISOString()
        }));
      } catch (error) {
        console.error(error);
      }
    };
  }

  (0, _createClass2.default)(DirectLineSpeech, [{
    key: "end",
    value: function end() {
      try {
        this.dialogServiceConnector.close();
      } catch (err) {
        if (!~err.message.indexOf('already disposed')) {
          throw err;
        }
      }
    }
  }, {
    key: "postActivity",
    value: function postActivity(activity) {
      // Currently, Web Chat set user ID on all outgoing activities.
      // As Direct Line Speech maintains its own user ID, Web Chat should not set the user ID.
      // TODO: [P2] We should move user ID into options of DirectLineJS, instead of Web Chat.
      activity = _objectSpread(_objectSpread({}, activity), {}, {
        from: {
          role: 'user'
        }
      });

      try {
        // TODO: [P1] Direct Line Speech server currently do not ack the outgoing activities with any activity ID or timestamp.
        var pseudoActivityId = randomActivityId();
        var isSpeech = !!(activity.channelData && activity.channelData.speech); // Do not send the activity if it was from speech.

        if (!isSpeech) {
          // Starting from Speech SDK 1.13.0, they accept JSON text instead of JavaScript object.
          // https://github.com/microsoft/cognitive-services-speech-sdk-js/commit/2f3a35446692b6d492a6c68e3237a48de67e293f
          this.dialogServiceConnector.sendActivityAsync(JSON.stringify(activity));
        }

        this._activityObserver && this._activityObserver.next(_objectSpread(_objectSpread({}, activity), {}, {
          id: pseudoActivityId,
          timestamp: new Date().toISOString()
        }));
        return _observable.default.of(pseudoActivityId);
      } catch (err) {
        return new _observable.default(function (observer) {
          return observer.error(err);
        });
      }
    }
  }]);
  return DirectLineSpeech;
}(); // Interfaces not yet implemented in Web Chat:
// referenceGrammarId?: string,
// getSessionId? : () => Observable<string>


exports.default = DirectLineSpeech;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9EaXJlY3RMaW5lU3BlZWNoLmpzIl0sIm5hbWVzIjpbInJhbmRvbUFjdGl2aXR5SWQiLCJ0b1N0cmluZyIsInN1YnN0ciIsIkRpcmVjdExpbmVTcGVlY2giLCJkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIiwiY29ubmVjdGlvblN0YXR1c09ic2VydmVyIiwiYWN0aXZpdHkkIiwiT2JzZXJ2YWJsZSIsIm9ic2VydmVyIiwiX2FjdGl2aXR5T2JzZXJ2ZXIiLCJuZXh0IiwiY29ubmVjdGlvblN0YXR1cyQiLCJhY3Rpdml0eVJlY2VpdmVkIiwiXyIsImFjdGl2aXR5IiwiYXVkaW9TdHJlYW0iLCJjaGFubmVsRGF0YSIsInNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsIlNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlIiwiZnJvbSIsInJvbGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsImNvbnNvbGUiLCJjbG9zZSIsImVyciIsIm1lc3NhZ2UiLCJpbmRleE9mIiwicHNldWRvQWN0aXZpdHlJZCIsImlzU3BlZWNoIiwic3BlZWNoIiwic2VuZEFjdGl2aXR5QXN5bmMiLCJKU09OIiwic3RyaW5naWZ5IiwiaWQiLCJvZiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7OztBQUVBLFNBQVNBLGdCQUFULEdBQTRCO0FBQzFCLFNBQU8sMkJBQ0pDLFFBREksQ0FDSyxFQURMLEVBRUpDLE1BRkksQ0FFRyxDQUZILENBQVA7QUFHRDs7SUFFb0JDLGdCO0FBQ25CLGtDQUF3QztBQUFBOztBQUFBLFFBQTFCQyxzQkFBMEIsUUFBMUJBLHNCQUEwQjtBQUFBO0FBQ3RDLFFBQUlDLHdCQUFKO0FBRUEsU0FBS0Qsc0JBQUwsR0FBOEJBLHNCQUE5QjtBQUVBLFNBQUtFLFNBQUwsR0FBaUIsOEJBQ2YsSUFBSUMsbUJBQUosQ0FBZSxVQUFBQyxRQUFRLEVBQUk7QUFDekIsTUFB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Iiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IG5vLW1hZ2ljLW51bWJlcnM6IFtcImVycm9yXCIsIHsgXCJpZ25vcmVcIjogWzAsIDEsIDIsIDM2XSB9XSAqL1xuXG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICdjb3JlLWpzL2ZlYXR1cmVzL29ic2VydmFibGUnO1xuaW1wb3J0IHJhbmRvbSBmcm9tICdtYXRoLXJhbmRvbSc7XG5cbmltcG9ydCBzaGFyZU9ic2VydmFibGUgZnJvbSAnLi9zaGFyZU9ic2VydmFibGUnO1xuaW1wb3J0IFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlIGZyb20gJy4vU3BlZWNoU3ludGhlc2lzQXVkaW9TdHJlYW1VdHRlcmFuY2UnO1xuXG5mdW5jdGlvbiByYW5kb21BY3Rpdml0eUlkKCkge1xuICByZXR1cm4gcmFuZG9tKClcbiAgICAudG9TdHJpbmcoMzYpXG4gICAgLnN1YnN0cigyKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlyZWN0TGluZVNwZWVjaCB7XG4gIGNvbnN0cnVjdG9yKHsgZGlhbG9nU2VydmljZUNvbm5lY3RvciB9KSB7XG4gICAgbGV0IGNvbm5lY3Rpb25TdGF0dXNPYnNlcnZlcjtcblxuICAgIHRoaXMuZGlhbG9nU2VydmljZUNvbm5lY3RvciA9IGRpYWxvZ1NlcnZpY2VDb25uZWN0b3I7XG5cbiAgICB0aGlzLmFjdGl2aXR5JCA9IHNoYXJlT2JzZXJ2YWJsZShcbiAgICAgIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcbiAgICAgICAgdGhpcy5fYWN0aXZpdHlPYnNlcnZlciA9IG9ic2VydmVyO1xuXG4gICAgICAgIGNvbm5lY3Rpb25TdGF0dXNPYnNlcnZlci5uZXh0KDApO1xuICAgICAgICBjb25uZWN0aW9uU3RhdHVzT2JzZXJ2ZXIubmV4dCgxKTtcbiAgICAgICAgY29ubmVjdGlvblN0YXR1c09ic2VydmVyLm5leHQoMik7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLmNvbm5lY3Rpb25TdGF0dXMkID0gc2hhcmVPYnNlcnZhYmxlKFxuICAgICAgbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgICAgICBjb25uZWN0aW9uU3RhdHVzT2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIGRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuYWN0aXZpdHlSZWNlaXZlZCA9IChfLCB7IGFjdGl2aXR5LCBhdWRpb1N0cmVhbSB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl9hY3Rpdml0eU9ic2VydmVyICYmXG4gICAgICAgICAgdGhpcy5fYWN0aXZpdHlPYnNlcnZlci5uZXh0KHtcbiAgICAgICAgICAgIC4uLmFjdGl2aXR5LFxuICAgICAgICAgICAgY2hhbm5lbERhdGE6IHtcbiAgICAgICAgICAgICAgLi4uYWN0aXZpdHkuY2hhbm5lbERhdGEsXG4gICAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZTogbmV3IFNwZWVjaFN5bnRoZXNpc0F1ZGlvU3RyZWFtVXR0ZXJhbmNlKGF1ZGlvU3RyZWFtKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyb206IHtcbiAgICAgICAgICAgICAgLi4uYWN0aXZpdHkuZnJvbSxcbiAgICAgICAgICAgICAgLy8gU2luY2UgRExTcGVlY2ggc2VydmljZSBuZXZlciBBQ0sgb3VyIG91dGdvaW5nIGFjdGl2aXR5LCB0aGlzIGFjdGl2aXR5IG11c3QgYmUgZnJvbSBib3QuXG4gICAgICAgICAgICAgIHJvbGU6ICdib3QnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gRGlyZWN0IExpbmUgU3BlZWNoIHNlcnZlciBjdXJyZW50bHkgZG8gbm90IHRpbWVzdGFtcCBvdXRnb2luZyBhY3Rpdml0aWVzLlxuICAgICAgICAgICAgLy8gVGh1cywgaXQgd2lsbCBiZSBlYXNpZXIgdG8ganVzdCByZS10aW1lc3RhbXAgZXZlcnkgaW5jb21pbmcvb3V0Z29pbmcgYWN0aXZpdGllcyB1c2luZyBsb2NhbCB0aW1lLlxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBlbmQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGlhbG9nU2VydmljZUNvbm5lY3Rvci5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKCF+ZXJyLm1lc3NhZ2UuaW5kZXhPZignYWxyZWFkeSBkaXNwb3NlZCcpKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwb3N0QWN0aXZpdHkoYWN0aXZpdHkpIHtcbiAgICAvLyBDdXJyZW50bHksIFdlYiBDaGF0IHNldCB1c2VyIElEIG9uIGFsbCBvdXRnb2luZyBhY3Rpdml0aWVzLlxuICAgIC8vIEFzIERpcmVjdCBMaW5lIFNwZWVjaCBtYWludGFpbnMgaXRzIG93biB1c2VyIElELCBXZWIgQ2hhdCBzaG91bGQgbm90IHNldCB0aGUgdXNlciBJRC5cbiAgICAvLyBUT0RPOiBbUDJdIFdlIHNob3VsZCBtb3ZlIHVzZXIgSUQgaW50byBvcHRpb25zIG9mIERpcmVjdExpbmVKUywgaW5zdGVhZCBvZiBXZWIgQ2hhdC5cbiAgICBhY3Rpdml0eSA9IHtcbiAgICAgIC4uLmFjdGl2aXR5LFxuICAgICAgZnJvbTogeyByb2xlOiAndXNlcicgfVxuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgLy8gVE9ETzogW1AxXSBEaXJlY3QgTGluZSBTcGVlY2ggc2VydmVyIGN1cnJlbnRseSBkbyBub3QgYWNrIHRoZSBvdXRnb2luZyBhY3Rpdml0aWVzIHdpdGggYW55IGFjdGl2aXR5IElEIG9yIHRpbWVzdGFtcC5cbiAgICAgIGNvbnN0IHBzZXVkb0FjdGl2aXR5SWQgPSByYW5kb21BY3Rpdml0eUlkKCk7XG4gICAgICBjb25zdCBpc1NwZWVjaCA9ICEhKGFjdGl2aXR5LmNoYW5uZWxEYXRhICYmIGFjdGl2aXR5LmNoYW5uZWxEYXRhLnNwZWVjaCk7XG5cbiAgICAgIC8vIERvIG5vdCBzZW5kIHRoZSBhY3Rpdml0eSBpZiBpdCB3YXMgZnJvbSBzcGVlY2guXG4gICAgICBpZiAoIWlzU3BlZWNoKSB7XG4gICAgICAgIC8vIFN0YXJ0aW5nIGZyb20gU3BlZWNoIFNESyAxLjEzLjAsIHRoZXkgYWNjZXB0IEpTT04gdGV4dCBpbnN0ZWFkIG9mIEphdmFTY3JpcHQgb2JqZWN0LlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L2NvZ25pdGl2ZS1zZXJ2aWNlcy1zcGVlY2gtc2RrLWpzL2NvbW1pdC8yZjNhMzU0NDY2OTJiNmQ0OTJhNmM2OGUzMjM3YTQ4ZGU2N2UyOTNmXG4gICAgICAgIHRoaXMuZGlhbG9nU2VydmljZUNvbm5lY3Rvci5zZW5kQWN0aXZpdHlBc3luYyhKU09OLnN0cmluZ2lmeShhY3Rpdml0eSkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hY3Rpdml0eU9ic2VydmVyICYmXG4gICAgICAgIHRoaXMuX2FjdGl2aXR5T2JzZXJ2ZXIubmV4dCh7XG4gICAgICAgICAgLi4uYWN0aXZpdHksXG4gICAgICAgICAgaWQ6IHBzZXVkb0FjdGl2aXR5SWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBPYnNlcnZhYmxlLm9mKHBzZXVkb0FjdGl2aXR5SWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IG9ic2VydmVyLmVycm9yKGVycikpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBJbnRlcmZhY2VzIG5vdCB5ZXQgaW1wbGVtZW50ZWQgaW4gV2ViIENoYXQ6XG4vLyByZWZlcmVuY2VHcmFtbWFySWQ/OiBzdHJpbmcsXG4vLyBnZXRTZXNzaW9uSWQ/IDogKCkgPT4gT2JzZXJ2YWJsZTxzdHJpbmc+XG4iXX0=