{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nvar Enums = require(\"./enums\");\n\nvar Shared = require(\"./shared\");\n\nfunction generateUniqueId() {\n  return \"__ac-\" + Shared.UUID.generate();\n}\n\nexports.generateUniqueId = generateUniqueId;\n\nfunction isNullOrEmpty(value) {\n  return value === undefined || value === null || value === \"\";\n}\n\nexports.isNullOrEmpty = isNullOrEmpty;\n\nfunction appendChild(node, child) {\n  if (child != null && child != undefined) {\n    node.appendChild(child);\n  }\n}\n\nexports.appendChild = appendChild;\n\nfunction getStringValue(obj, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = undefined;\n  }\n\n  return typeof obj === \"string\" ? obj.toString() : defaultValue;\n}\n\nexports.getStringValue = getStringValue;\n\nfunction getNumberValue(obj, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = undefined;\n  }\n\n  return typeof obj === \"number\" ? obj : defaultValue;\n}\n\nexports.getNumberValue = getNumberValue;\n\nfunction getBoolValue(value, defaultValue) {\n  if (typeof value === \"boolean\") {\n    return value;\n  } else if (typeof value === \"string\") {\n    switch (value.toLowerCase()) {\n      case \"true\":\n        return true;\n\n      case \"false\":\n        return false;\n\n      default:\n        return defaultValue;\n    }\n  }\n\n  return defaultValue;\n}\n\nexports.getBoolValue = getBoolValue;\n\nfunction getEnumValue(targetEnum, name, defaultValue) {\n  if (isNullOrEmpty(name)) {\n    return defaultValue;\n  }\n\n  for (var key in targetEnum) {\n    var isValueProperty = parseInt(key, 10) >= 0;\n\n    if (isValueProperty) {\n      var value = targetEnum[key];\n\n      if (value && typeof value === \"string\") {\n        if (value.toLowerCase() === name.toLowerCase()) {\n          return parseInt(key, 10);\n        }\n      }\n    }\n  }\n\n  return defaultValue;\n}\n\nexports.getEnumValue = getEnumValue;\n\nfunction setProperty(target, propertyName, propertyValue, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = undefined;\n  }\n\n  if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {\n    delete target[propertyName];\n  } else {\n    target[propertyName] = propertyValue;\n  }\n}\n\nexports.setProperty = setProperty;\n\nfunction setNumberProperty(target, propertyName, propertyValue, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = undefined;\n  }\n\n  if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue || isNaN(propertyValue)) {\n    delete target[propertyName];\n  } else {\n    target[propertyName] = propertyValue;\n  }\n}\n\nexports.setNumberProperty = setNumberProperty;\n\nfunction setEnumProperty(enumType, target, propertyName, propertyValue, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = undefined;\n  }\n\n  var targetValue = target[propertyName];\n  var canDeleteTarget = targetValue == undefined ? true : enumType[targetValue] !== undefined;\n\n  if (propertyValue == defaultValue) {\n    if (canDeleteTarget) {\n      delete target[propertyName];\n    }\n  } else {\n    if (propertyValue == undefined) {\n      if (canDeleteTarget) {\n        delete target[propertyName];\n      }\n    } else {\n      target[propertyName] = enumType[propertyValue];\n    }\n  }\n}\n\nexports.setEnumProperty = setEnumProperty;\n\nfunction setArrayProperty(target, propertyName, propertyValue) {\n  var items = [];\n\n  if (propertyValue) {\n    for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {\n      var item = propertyValue_1[_i];\n      items.push(item.toJSON());\n    }\n  }\n\n  if (items.length == 0) {\n    if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {\n      delete target[propertyName];\n    }\n  } else {\n    setProperty(target, propertyName, items);\n  }\n}\n\nexports.setArrayProperty = setArrayProperty;\n\nfunction parseHostConfigEnum(targetEnum, value, defaultValue) {\n  if (typeof value === \"string\") {\n    return getEnumValue(targetEnum, value, defaultValue);\n  } else if (typeof value === \"number\") {\n    return value;\n  } else {\n    return defaultValue;\n  }\n}\n\nexports.parseHostConfigEnum = parseHostConfigEnum;\n\nfunction renderSeparation(hostConfig, separationDefinition, orientation) {\n  if (separationDefinition.spacing > 0 || separationDefinition.lineThickness > 0) {\n    var separator = document.createElement(\"div\");\n    separator.className = hostConfig.makeCssClassName(\"ac-\" + (orientation == Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\") + \"-separator\");\n\n    if (orientation == Enums.Orientation.Horizontal) {\n      if (separationDefinition.lineThickness) {\n        separator.style.paddingTop = separationDefinition.spacing / 2 + \"px\";\n        separator.style.marginBottom = separationDefinition.spacing / 2 + \"px\";\n        separator.style.borderBottom = separationDefinition.lineThickness + \"px solid \" + stringToCssColor(separationDefinition.lineColor);\n      } else {\n        separator.style.height = separationDefinition.spacing + \"px\";\n      }\n    } else {\n      if (separationDefinition.lineThickness) {\n        separator.style.paddingLeft = separationDefinition.spacing / 2 + \"px\";\n        separator.style.marginRight = separationDefinition.spacing / 2 + \"px\";\n        separator.style.borderRight = separationDefinition.lineThickness + \"px solid \" + stringToCssColor(separationDefinition.lineColor);\n      } else {\n        separator.style.width = separationDefinition.spacing + \"px\";\n      }\n    }\n\n    separator.style.overflow = \"hidden\";\n    return separator;\n  } else {\n    return null;\n  }\n}\n\nexports.renderSeparation = renderSeparation;\n\nfunction stringToCssColor(color) {\n  var regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;\n  var matches = regEx.exec(color);\n\n  if (matches && matches[4]) {\n    var a = parseInt(matches[1], 16) / 255;\n    var r = parseInt(matches[2], 16);\n    var g = parseInt(matches[3], 16);\n    var b = parseInt(matches[4], 16);\n    return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\n  } else {\n    return color;\n  }\n}\n\nexports.stringToCssColor = stringToCssColor;\n\nfunction truncate(element, maxHeight, lineHeight) {\n  var fits = function fits() {\n    // Allow a one pixel overflow to account for rounding differences\n    // between browsers\n    return maxHeight - element.scrollHeight >= -1.0;\n  };\n\n  if (fits()) return;\n  var fullText = element.innerHTML;\n\n  var truncateAt = function truncateAt(idx) {\n    element.innerHTML = fullText.substring(0, idx) + '...';\n  };\n\n  var breakableIndices = findBreakableIndices(fullText);\n  var lo = 0;\n  var hi = breakableIndices.length;\n  var bestBreakIdx = 0; // Do a binary search for the longest string that fits\n\n  while (lo < hi) {\n    var mid = Math.floor((lo + hi) / 2);\n    truncateAt(breakableIndices[mid]);\n\n    if (fits()) {\n      bestBreakIdx = breakableIndices[mid];\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  truncateAt(bestBreakIdx); // If we have extra room, try to expand the string letter by letter\n  // (covers the case where we have to break in the middle of a long word)\n\n  if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {\n    var idx = findNextCharacter(fullText, bestBreakIdx);\n\n    while (idx < fullText.length) {\n      truncateAt(idx);\n\n      if (fits()) {\n        bestBreakIdx = idx;\n        idx = findNextCharacter(fullText, idx);\n      } else {\n        break;\n      }\n    }\n\n    truncateAt(bestBreakIdx);\n  }\n}\n\nexports.truncate = truncate;\n\nfunction findBreakableIndices(html) {\n  var results = [];\n  var idx = findNextCharacter(html, -1);\n\n  while (idx < html.length) {\n    if (html[idx] == ' ') {\n      results.push(idx);\n    }\n\n    idx = findNextCharacter(html, idx);\n  }\n\n  return results;\n}\n\nfunction findNextCharacter(html, currIdx) {\n  currIdx += 1; // If we found the start of an HTML tag, keep advancing until we get\n  // past it, so we don't end up truncating in the middle of the tag\n\n  while (currIdx < html.length && html[currIdx] == '<') {\n    while (currIdx < html.length && html[currIdx++] != '>') {\n      ;\n    }\n  }\n\n  return currIdx;\n}\n\nfunction getFitStatus(element, containerEnd) {\n  var start = element.offsetTop;\n  var end = start + element.clientHeight;\n\n  if (end <= containerEnd) {\n    return Enums.ContainerFitStatus.FullyInContainer;\n  } else if (start < containerEnd) {\n    return Enums.ContainerFitStatus.Overflowing;\n  } else {\n    return Enums.ContainerFitStatus.FullyOutOfContainer;\n  }\n}\n\nexports.getFitStatus = getFitStatus;","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar Shared = require(\"./shared\");\r\nfunction generateUniqueId() {\r\n    return \"__ac-\" + Shared.UUID.generate();\r\n}\r\nexports.generateUniqueId = generateUniqueId;\r\nfunction isNullOrEmpty(value) {\r\n    return value === undefined || value === null || value === \"\";\r\n}\r\nexports.isNullOrEmpty = isNullOrEmpty;\r\nfunction appendChild(node, child) {\r\n    if (child != null && child != undefined) {\r\n        node.appendChild(child);\r\n    }\r\n}\r\nexports.appendChild = appendChild;\r\nfunction getStringValue(obj, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = undefined; }\r\n    return typeof obj === \"string\" ? obj.toString() : defaultValue;\r\n}\r\nexports.getStringValue = getStringValue;\r\nfunction getNumberValue(obj, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = undefined; }\r\n    return typeof obj === \"number\" ? obj : defaultValue;\r\n}\r\nexports.getNumberValue = getNumberValue;\r\nfunction getBoolValue(value, defaultValue) {\r\n    if (typeof value === \"boolean\") {\r\n        return value;\r\n    }\r\n    else if (typeof value === \"string\") {\r\n        switch (value.toLowerCase()) {\r\n            case \"true\":\r\n                return true;\r\n            case \"false\":\r\n                return false;\r\n            default:\r\n                return defaultValue;\r\n        }\r\n    }\r\n    return defaultValue;\r\n}\r\nexports.getBoolValue = getBoolValue;\r\nfunction getEnumValue(targetEnum, name, defaultValue) {\r\n    if (isNullOrEmpty(name)) {\r\n        return defaultValue;\r\n    }\r\n    for (var key in targetEnum) {\r\n        var isValueProperty = parseInt(key, 10) >= 0;\r\n        if (isValueProperty) {\r\n            var value = targetEnum[key];\r\n            if (value && typeof value === \"string\") {\r\n                if (value.toLowerCase() === name.toLowerCase()) {\r\n                    return parseInt(key, 10);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return defaultValue;\r\n}\r\nexports.getEnumValue = getEnumValue;\r\nfunction setProperty(target, propertyName, propertyValue, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = undefined; }\r\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {\r\n        delete target[propertyName];\r\n    }\r\n    else {\r\n        target[propertyName] = propertyValue;\r\n    }\r\n}\r\nexports.setProperty = setProperty;\r\nfunction setNumberProperty(target, propertyName, propertyValue, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = undefined; }\r\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue || isNaN(propertyValue)) {\r\n        delete target[propertyName];\r\n    }\r\n    else {\r\n        target[propertyName] = propertyValue;\r\n    }\r\n}\r\nexports.setNumberProperty = setNumberProperty;\r\nfunction setEnumProperty(enumType, target, propertyName, propertyValue, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = undefined; }\r\n    var targetValue = target[propertyName];\r\n    var canDeleteTarget = targetValue == undefined ? true : enumType[targetValue] !== undefined;\r\n    if (propertyValue == defaultValue) {\r\n        if (canDeleteTarget) {\r\n            delete target[propertyName];\r\n        }\r\n    }\r\n    else {\r\n        if (propertyValue == undefined) {\r\n            if (canDeleteTarget) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else {\r\n            target[propertyName] = enumType[propertyValue];\r\n        }\r\n    }\r\n}\r\nexports.setEnumProperty = setEnumProperty;\r\nfunction setArrayProperty(target, propertyName, propertyValue) {\r\n    var items = [];\r\n    if (propertyValue) {\r\n        for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {\r\n            var item = propertyValue_1[_i];\r\n            items.push(item.toJSON());\r\n        }\r\n    }\r\n    if (items.length == 0) {\r\n        if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {\r\n            delete target[propertyName];\r\n        }\r\n    }\r\n    else {\r\n        setProperty(target, propertyName, items);\r\n    }\r\n}\r\nexports.setArrayProperty = setArrayProperty;\r\nfunction parseHostConfigEnum(targetEnum, value, defaultValue) {\r\n    if (typeof value === \"string\") {\r\n        return getEnumValue(targetEnum, value, defaultValue);\r\n    }\r\n    else if (typeof value === \"number\") {\r\n        return value;\r\n    }\r\n    else {\r\n        return defaultValue;\r\n    }\r\n}\r\nexports.parseHostConfigEnum = parseHostConfigEnum;\r\nfunction renderSeparation(hostConfig, separationDefinition, orientation) {\r\n    if (separationDefinition.spacing > 0 || separationDefinition.lineThickness > 0) {\r\n        var separator = document.createElement(\"div\");\r\n        separator.className = hostConfig.makeCssClassName(\"ac-\" + (orientation == Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\") + \"-separator\");\r\n        if (orientation == Enums.Orientation.Horizontal) {\r\n            if (separationDefinition.lineThickness) {\r\n                separator.style.paddingTop = (separationDefinition.spacing / 2) + \"px\";\r\n                separator.style.marginBottom = (separationDefinition.spacing / 2) + \"px\";\r\n                separator.style.borderBottom = separationDefinition.lineThickness + \"px solid \" + stringToCssColor(separationDefinition.lineColor);\r\n            }\r\n            else {\r\n                separator.style.height = separationDefinition.spacing + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            if (separationDefinition.lineThickness) {\r\n                separator.style.paddingLeft = (separationDefinition.spacing / 2) + \"px\";\r\n                separator.style.marginRight = (separationDefinition.spacing / 2) + \"px\";\r\n                separator.style.borderRight = separationDefinition.lineThickness + \"px solid \" + stringToCssColor(separationDefinition.lineColor);\r\n            }\r\n            else {\r\n                separator.style.width = separationDefinition.spacing + \"px\";\r\n            }\r\n        }\r\n        separator.style.overflow = \"hidden\";\r\n        return separator;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.renderSeparation = renderSeparation;\r\nfunction stringToCssColor(color) {\r\n    var regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;\r\n    var matches = regEx.exec(color);\r\n    if (matches && matches[4]) {\r\n        var a = parseInt(matches[1], 16) / 255;\r\n        var r = parseInt(matches[2], 16);\r\n        var g = parseInt(matches[3], 16);\r\n        var b = parseInt(matches[4], 16);\r\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\r\n    }\r\n    else {\r\n        return color;\r\n    }\r\n}\r\nexports.stringToCssColor = stringToCssColor;\r\nfunction truncate(element, maxHeight, lineHeight) {\r\n    var fits = function () {\r\n        // Allow a one pixel overflow to account for rounding differences\r\n        // between browsers\r\n        return maxHeight - element.scrollHeight >= -1.0;\r\n    };\r\n    if (fits())\r\n        return;\r\n    var fullText = element.innerHTML;\r\n    var truncateAt = function (idx) {\r\n        element.innerHTML = fullText.substring(0, idx) + '...';\r\n    };\r\n    var breakableIndices = findBreakableIndices(fullText);\r\n    var lo = 0;\r\n    var hi = breakableIndices.length;\r\n    var bestBreakIdx = 0;\r\n    // Do a binary search for the longest string that fits\r\n    while (lo < hi) {\r\n        var mid = Math.floor((lo + hi) / 2);\r\n        truncateAt(breakableIndices[mid]);\r\n        if (fits()) {\r\n            bestBreakIdx = breakableIndices[mid];\r\n            lo = mid + 1;\r\n        }\r\n        else {\r\n            hi = mid;\r\n        }\r\n    }\r\n    truncateAt(bestBreakIdx);\r\n    // If we have extra room, try to expand the string letter by letter\r\n    // (covers the case where we have to break in the middle of a long word)\r\n    if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {\r\n        var idx = findNextCharacter(fullText, bestBreakIdx);\r\n        while (idx < fullText.length) {\r\n            truncateAt(idx);\r\n            if (fits()) {\r\n                bestBreakIdx = idx;\r\n                idx = findNextCharacter(fullText, idx);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        truncateAt(bestBreakIdx);\r\n    }\r\n}\r\nexports.truncate = truncate;\r\nfunction findBreakableIndices(html) {\r\n    var results = [];\r\n    var idx = findNextCharacter(html, -1);\r\n    while (idx < html.length) {\r\n        if (html[idx] == ' ') {\r\n            results.push(idx);\r\n        }\r\n        idx = findNextCharacter(html, idx);\r\n    }\r\n    return results;\r\n}\r\nfunction findNextCharacter(html, currIdx) {\r\n    currIdx += 1;\r\n    // If we found the start of an HTML tag, keep advancing until we get\r\n    // past it, so we don't end up truncating in the middle of the tag\r\n    while (currIdx < html.length && html[currIdx] == '<') {\r\n        while (currIdx < html.length && html[currIdx++] != '>')\r\n            ;\r\n    }\r\n    return currIdx;\r\n}\r\nfunction getFitStatus(element, containerEnd) {\r\n    var start = element.offsetTop;\r\n    var end = start + element.clientHeight;\r\n    if (end <= containerEnd) {\r\n        return Enums.ContainerFitStatus.FullyInContainer;\r\n    }\r\n    else if (start < containerEnd) {\r\n        return Enums.ContainerFitStatus.Overflowing;\r\n    }\r\n    else {\r\n        return Enums.ContainerFitStatus.FullyOutOfContainer;\r\n    }\r\n}\r\nexports.getFitStatus = getFitStatus;\r\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}