{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _firstTabbableDescendant = require(\"../firstTabbableDescendant\");\n\nvar _Context = _interopRequireDefault(require(\"./internal/Context\"));\n\nvar _useNavigatorPlatform3 = _interopRequireDefault(require(\"../../hooks/internal/useNavigatorPlatform\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar Surface = function Surface(_ref) {\n  var children = _ref.children,\n      otherProps = _objectWithoutProperties(_ref, [\"children\"]);\n\n  var _useNavigatorPlatform = (0, _useNavigatorPlatform3.default)(),\n      _useNavigatorPlatform2 = _slicedToArray(_useNavigatorPlatform, 1),\n      apple = _useNavigatorPlatform2[0].apple;\n\n  var contextRef = (0, _react.useRef)({\n    focii: []\n  });\n  var handleKeyUp = (0, _react.useCallback)(function (event) {\n    var altKey = event.altKey,\n        ctrlKey = event.ctrlKey,\n        key = event.key,\n        shiftKey = event.shiftKey; // On Apple, most modern browsers use CTRL + OPTION as modifiers.\n    // Otherwise, we use ALT + SHIFT as modifierse.\n\n    if (altKey && (apple ? ctrlKey : shiftKey)) {\n      var focii = contextRef.current.focii.filter(function (entry) {\n        return entry.keys.includes(key);\n      });\n      var currentFocus = focii.findIndex(function (_ref2) {\n        var current = _ref2.ref.current;\n        return current === document.activeElement || current.contains(document.activeElement);\n      });\n      var nextFocus = focii[(currentFocus + 1) % focii.length];\n\n      if (nextFocus) {\n        event.preventDefault();\n        event.stopPropagation();\n        var tabbable = (0, _firstTabbableDescendant.orSelf)(nextFocus.ref.current);\n        tabbable && tabbable.focus();\n      }\n    }\n  }, [apple]);\n  return /*#__PURE__*/_react.default.createElement(_Context.default.Provider, {\n    value: contextRef.current\n  }, /*#__PURE__*/_react.default.createElement(\"div\", _extends({\n    onKeyUp: handleKeyUp\n  }, otherProps), children));\n};\n\nSurface.defaultProps = {\n  children: undefined\n};\nSurface.propTypes = {\n  children: _propTypes.default.element\n};\nvar _default = Surface;\nexports.default = _default;","map":{"version":3,"sources":["../../../src/Utils/AccessKeySink/Surface.js"],"names":["Surface","children","otherProps","apple","contextRef","focii","handleKeyUp","altKey","ctrlKey","key","shiftKey","event","entry","currentFocus","current","document","nextFocus","tabbable","undefined","PropTypes","element"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AAEA,IAAA,wBAAA,GAAA,OAAA,CAAA,4BAAA,CAAA;;AACA,IAAA,QAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,oBAAA,CAAA,CAAA;;AACA,IAAA,sBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,2CAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAAA,IAAA,EAAiC;AAAA,MAA9BC,QAA8B,GAAA,IAAA,CAA9BA,QAA8B;AAAA,MAAjBC,UAAiB,GAAA,wBAAA,CAAA,IAAA,EAAA,CAAA,UAAA,CAAA,CAAA;;AAAA,MAAA,qBAAA,GAC3B,CAAA,GAAA,sBAAA,CAD2B,OAC3B,GAD2B;AAAA,MAAA,sBAAA,GAAA,cAAA,CAAA,qBAAA,EAAA,CAAA,CAAA;AAAA,MACtCC,KADsC,GAAA,sBAAA,CAAA,CAAA,CAAA,CAAA,KAAA;;AAE/C,MAAMC,UAAU,GAAG,CAAA,GAAA,MAAA,CAAA,MAAA,EAAO;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAP,CAAnB;AAEA,MAAMC,WAAW,GAAG,CAAA,GAAA,MAAA,CAAA,WAAA,EAClB,UAAA,KAAA,EAAS;AAAA,QACCC,MADD,GACoCI,KADpC,CAAA,MAAA;AAAA,QACSH,OADT,GACoCG,KADpC,CAAA,OAAA;AAAA,QACkBF,GADlB,GACoCE,KADpC,CAAA,GAAA;AAAA,QACuBD,QADvB,GACoCC,KADpC,CAAA,QAAA,CAAA,CAGP;AACA;;AACA,QAAIJ,MAAM,KAAKJ,KAAK,GAAA,OAAA,GAApB,QAAU,CAAV,EAA4C;AAC1C,UAAME,KAAK,GAAG,UAAU,CAAV,OAAA,CAAA,KAAA,CAAA,MAAA,CAAgC,UAAA,KAAA,EAAK;AAAA,eAAIO,KAAK,CAALA,IAAAA,CAAAA,QAAAA,CAAJ,GAAIA,CAAJ;AAAnD,OAAc,CAAd;AAEA,UAAMC,YAAY,GAAG,KAAK,CAAL,SAAA,CACnB,UAAA,KAAA,EAAA;AAAA,YAAUC,OAAV,GAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AAAA,eAA0BA,OAAO,KAAKC,QAAQ,CAApBD,aAAAA,IAAsCA,OAAO,CAAPA,QAAAA,CAAiBC,QAAQ,CAAzF,aAAgED,CAAhE;AADF,OAAqB,CAArB;AAGA,UAAME,SAAS,GAAGX,KAAK,CAAC,CAACQ,YAAY,GAAb,CAAA,IAAqBR,KAAK,CAAlD,MAAuB,CAAvB;;AAEA,UAAA,SAAA,EAAe;AACbM,QAAAA,KAAK,CAALA,cAAAA;AACAA,QAAAA,KAAK,CAALA,eAAAA;AAEA,YAAMM,QAAQ,GAAG,CAAA,GAAA,wBAAA,CAAA,MAAA,EAA8BD,SAAS,CAATA,GAAAA,CAA/C,OAAiB,CAAjB;AAEAC,QAAAA,QAAQ,IAAIA,QAAQ,CAApBA,KAAYA,EAAZA;AACD;AACF;AAtBe,GAAA,EAwBlB,CAxBF,KAwBE,CAxBkB,CAApB;AA2BA,SAAA,aACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,QAAA,CAAD,OAAC,CAAD,QAAA,EAAA;AAA+B,IAAA,KAAK,EAAEb,UAAU,CAACU;AAAjD,GAAA,EAAA,aACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AAAK,IAAA,OAAO,EAAER;AAAd,GAAA,EAAA,UAAA,CAAA,EAFJ,QAEI,CADF,CADF;AA/BF,CAAA;;AAwCAN,OAAO,CAAPA,YAAAA,GAAuB;AACrBC,EAAAA,QAAQ,EAAEiB;AADW,CAAvBlB;AAIAA,OAAO,CAAPA,SAAAA,GAAoB;AAClBC,EAAAA,QAAQ,EAAEkB,UAAAA,CAAAA,OAAAA,CAAUC;AADF,CAApBpB;eAIeA,O","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useCallback, useRef } from 'react';\n\nimport { orSelf as firstTabbableDescendantOrSelf } from '../firstTabbableDescendant';\nimport AccessKeySinkContext from './internal/Context';\nimport useNavigatorPlatform from '../../hooks/internal/useNavigatorPlatform';\n\nconst Surface = ({ children, ...otherProps }) => {\n  const [{ apple }] = useNavigatorPlatform();\n  const contextRef = useRef({ focii: [] });\n\n  const handleKeyUp = useCallback(\n    event => {\n      const { altKey, ctrlKey, key, shiftKey } = event;\n\n      // On Apple, most modern browsers use CTRL + OPTION as modifiers.\n      // Otherwise, we use ALT + SHIFT as modifierse.\n      if (altKey && (apple ? ctrlKey : shiftKey)) {\n        const focii = contextRef.current.focii.filter(entry => entry.keys.includes(key));\n\n        const currentFocus = focii.findIndex(\n          ({ ref: { current } }) => current === document.activeElement || current.contains(document.activeElement)\n        );\n        const nextFocus = focii[(currentFocus + 1) % focii.length];\n\n        if (nextFocus) {\n          event.preventDefault();\n          event.stopPropagation();\n\n          const tabbable = firstTabbableDescendantOrSelf(nextFocus.ref.current);\n\n          tabbable && tabbable.focus();\n        }\n      }\n    },\n    [apple]\n  );\n\n  return (\n    <AccessKeySinkContext.Provider value={contextRef.current}>\n      <div onKeyUp={handleKeyUp} {...otherProps}>\n        {children}\n      </div>\n    </AccessKeySinkContext.Provider>\n  );\n};\n\nSurface.defaultProps = {\n  children: undefined\n};\n\nSurface.propTypes = {\n  children: PropTypes.element\n};\n\nexport default Surface;\n"],"sourceRoot":"component:///"},"metadata":{},"sourceType":"script"}