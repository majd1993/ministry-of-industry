{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nvar Enums = require(\"./enums\");\n\nvar Shared = require(\"./shared\");\n\nvar Utils = require(\"./utils\");\n\nvar HostConfig = require(\"./host-config\");\n\nvar TextFormatters = require(\"./text-formatters\");\n\nfunction invokeSetCollection(action, collection) {\n  if (action) {\n    // Closest emulation of \"internal\" in TypeScript.\n    action[\"setCollection\"](collection);\n  }\n}\n\nfunction isActionAllowed(action, forbiddenActionTypes) {\n  if (forbiddenActionTypes) {\n    for (var i = 0; i < forbiddenActionTypes.length; i++) {\n      if (action.getJsonTypeName() === forbiddenActionTypes[i]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nvar InstanceCreationErrorType;\n\n(function (InstanceCreationErrorType) {\n  InstanceCreationErrorType[InstanceCreationErrorType[\"UnknownType\"] = 0] = \"UnknownType\";\n  InstanceCreationErrorType[InstanceCreationErrorType[\"ForbiddenType\"] = 1] = \"ForbiddenType\";\n})(InstanceCreationErrorType || (InstanceCreationErrorType = {}));\n\nfunction createCardObjectInstance(parent, json, forbiddenTypeNames, allowFallback, createInstanceCallback, createValidationErrorCallback, errors) {\n  var result = null;\n\n  if (json && typeof json === \"object\") {\n    var tryToFallback = false;\n    var typeName = Utils.getStringValue(json[\"type\"]);\n\n    if (forbiddenTypeNames && forbiddenTypeNames.indexOf(typeName) >= 0) {\n      raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.ForbiddenType), errors);\n    } else {\n      result = createInstanceCallback(typeName);\n\n      if (!result) {\n        tryToFallback = allowFallback;\n        raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.UnknownType), errors);\n      } else {\n        result.setParent(parent);\n        result.parse(json, errors);\n        tryToFallback = result.shouldFallback() && allowFallback;\n      }\n\n      if (tryToFallback) {\n        var fallback = json[\"fallback\"];\n\n        if (!fallback) {\n          parent.setShouldFallback(true);\n        }\n\n        if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\n          result = null;\n        } else if (typeof fallback === \"object\") {\n          result = createCardObjectInstance(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, createValidationErrorCallback, errors);\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction createActionInstance(parent, json, forbiddenActionTypes, allowFallback, errors) {\n  return createCardObjectInstance(parent, json, forbiddenActionTypes, allowFallback, function (typeName) {\n    return AdaptiveCard.actionTypeRegistry.createInstance(typeName);\n  }, function (typeName, errorType) {\n    if (errorType == InstanceCreationErrorType.UnknownType) {\n      return {\n        error: Enums.ValidationError.UnknownActionType,\n        message: \"Unknown action type: \" + typeName + \". Fallback will be used if present.\"\n      };\n    } else {\n      return {\n        error: Enums.ValidationError.ActionTypeNotAllowed,\n        message: \"Action type \" + typeName + \" is not allowed in this context.\"\n      };\n    }\n  }, errors);\n}\n\nexports.createActionInstance = createActionInstance;\n\nfunction createElementInstance(parent, json, allowFallback, errors) {\n  return createCardObjectInstance(parent, json, [], // Forbidden types not supported for elements for now\n  allowFallback, function (typeName) {\n    return AdaptiveCard.elementTypeRegistry.createInstance(typeName);\n  }, function (typeName, errorType) {\n    if (errorType == InstanceCreationErrorType.UnknownType) {\n      return {\n        error: Enums.ValidationError.UnknownElementType,\n        message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\n      };\n    } else {\n      return {\n        error: Enums.ValidationError.ElementTypeNotAllowed,\n        message: \"Element type \" + typeName + \" is not allowed in this context.\"\n      };\n    }\n  }, errors);\n}\n\nexports.createElementInstance = createElementInstance;\n\nvar SerializableObject =\n/** @class */\nfunction () {\n  function SerializableObject() {\n    this._rawProperties = {};\n  }\n\n  SerializableObject.prototype.parse = function (json, errors) {\n    this._rawProperties = AdaptiveCard.enableFullJsonRoundTrip ? json : {};\n  };\n\n  SerializableObject.prototype.toJSON = function () {\n    var result;\n\n    if (AdaptiveCard.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === \"object\") {\n      result = this._rawProperties;\n    } else {\n      result = {};\n    }\n\n    return result;\n  };\n\n  SerializableObject.prototype.setCustomProperty = function (name, value) {\n    var shouldDeleteProperty = typeof value === \"string\" && Utils.isNullOrEmpty(value) || value === undefined || value === null;\n\n    if (shouldDeleteProperty) {\n      delete this._rawProperties[name];\n    } else {\n      this._rawProperties[name] = value;\n    }\n  };\n\n  SerializableObject.prototype.getCustomProperty = function (name) {\n    return this._rawProperties[name];\n  };\n\n  return SerializableObject;\n}();\n\nexports.SerializableObject = SerializableObject;\n\nvar ValidationFailure =\n/** @class */\nfunction () {\n  function ValidationFailure(cardObject) {\n    this.cardObject = cardObject;\n    this.errors = [];\n  }\n\n  return ValidationFailure;\n}();\n\nexports.ValidationFailure = ValidationFailure;\n\nvar ValidationResults =\n/** @class */\nfunction () {\n  function ValidationResults() {\n    this.allIds = {};\n    this.failures = [];\n  }\n\n  ValidationResults.prototype.getFailureIndex = function (cardObject) {\n    for (var i = 0; i < this.failures.length; i++) {\n      if (this.failures[i].cardObject === cardObject) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  ValidationResults.prototype.addFailure = function (cardObject, error) {\n    var index = this.getFailureIndex(cardObject);\n    var failure;\n\n    if (index < 0) {\n      failure = new ValidationFailure(cardObject);\n      this.failures.push(failure);\n    } else {\n      failure = this.failures[index];\n    }\n\n    failure.errors.push(error);\n  };\n\n  return ValidationResults;\n}();\n\nexports.ValidationResults = ValidationResults;\n\nvar CardObject =\n/** @class */\nfunction (_super) {\n  __extends(CardObject, _super);\n\n  function CardObject() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CardObject.prototype.internalValidateProperties = function (context) {\n    if (!Utils.isNullOrEmpty(this.id)) {\n      if (context.allIds.hasOwnProperty(this.id)) {\n        if (context.allIds[this.id] == 1) {\n          context.addFailure(this, {\n            error: Enums.ValidationError.DuplicateId,\n            message: \"Duplicate Id: \" + this.id\n          });\n        }\n\n        context.allIds[this.id] += 1;\n      } else {\n        context.allIds[this.id] = 1;\n      }\n    }\n  };\n\n  CardObject.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.id = Utils.getStringValue(json[\"id\"]);\n  };\n\n  CardObject.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"type\", this.getJsonTypeName());\n    Utils.setProperty(result, \"id\", this.id);\n    return result;\n  };\n\n  CardObject.prototype.validateProperties = function () {\n    var result = new ValidationResults();\n    this.internalValidateProperties(result);\n    return result;\n  };\n\n  return CardObject;\n}(SerializableObject);\n\nexports.CardObject = CardObject;\n\nvar CardElement =\n/** @class */\nfunction (_super) {\n  __extends(CardElement, _super);\n\n  function CardElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._shouldFallback = false;\n    _this._lang = undefined;\n    _this._hostConfig = null;\n    _this._parent = null;\n    _this._renderedElement = null;\n    _this._separatorElement = null;\n    _this._isVisible = true;\n    _this._truncatedDueToOverflow = false;\n    _this._defaultRenderedElementDisplayMode = null;\n    _this._padding = null;\n    _this.requires = new HostConfig.HostCapabilities();\n    _this.horizontalAlignment = null;\n    _this.spacing = Enums.Spacing.Default;\n    _this.separator = false;\n    _this.customCssSelector = null;\n    _this.height = \"auto\";\n    _this.minPixelHeight = null;\n    return _this;\n  }\n\n  CardElement.prototype.internalRenderSeparator = function () {\n    var renderedSeparator = Utils.renderSeparation(this.hostConfig, {\n      spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\n      lineThickness: this.separator ? this.hostConfig.separator.lineThickness : null,\n      lineColor: this.separator ? this.hostConfig.separator.lineColor : null\n    }, this.separatorOrientation);\n\n    if (AdaptiveCard.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {\n      // Adjust separator's margins if the option to always bleed separators is turned on\n      var parentContainer = this.getParentContainer();\n\n      if (parentContainer && parentContainer.getEffectivePadding()) {\n        var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\n        renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\n        renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\n      }\n    }\n\n    return renderedSeparator;\n  };\n\n  CardElement.prototype.updateRenderedElementVisibility = function () {\n    var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : \"none\";\n\n    if (this._renderedElement) {\n      this._renderedElement.style.display = displayMode;\n    }\n\n    if (this._separatorElement) {\n      if (this.parent && this.parent.isFirstElement(this)) {\n        this._separatorElement.style.display = \"none\";\n      } else {\n        this._separatorElement.style.display = displayMode;\n      }\n    }\n  };\n\n  CardElement.prototype.hideElementDueToOverflow = function () {\n    if (this._renderedElement && this.isVisible) {\n      this._renderedElement.style.visibility = 'hidden';\n      this.isVisible = false;\n      raiseElementVisibilityChangedEvent(this, false);\n    }\n  };\n\n  CardElement.prototype.showElementHiddenDueToOverflow = function () {\n    if (this._renderedElement && !this.isVisible) {\n      this._renderedElement.style.visibility = null;\n      this.isVisible = true;\n      raiseElementVisibilityChangedEvent(this, false);\n    }\n  }; // Marked private to emulate internal access\n\n\n  CardElement.prototype.handleOverflow = function (maxHeight) {\n    if (this.isVisible || this.isHiddenDueToOverflow()) {\n      var handled = this.truncateOverflow(maxHeight); // Even if we were unable to truncate the element to fit this time,\n      // it still could have been previously truncated\n\n      this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\n\n      if (!handled) {\n        this.hideElementDueToOverflow();\n      } else if (handled && !this.isVisible) {\n        this.showElementHiddenDueToOverflow();\n      }\n    }\n  }; // Marked private to emulate internal access\n\n\n  CardElement.prototype.resetOverflow = function () {\n    var sizeChanged = false;\n\n    if (this._truncatedDueToOverflow) {\n      this.undoOverflowTruncation();\n      this._truncatedDueToOverflow = false;\n      sizeChanged = true;\n    }\n\n    if (this.isHiddenDueToOverflow) {\n      this.showElementHiddenDueToOverflow();\n    }\n\n    return sizeChanged;\n  };\n\n  CardElement.prototype.createPlaceholderElement = function () {\n    var element = document.createElement(\"div\");\n    element.style.border = \"1px dashed #DDDDDD\";\n    element.style.padding = \"4px\";\n    element.style.minHeight = \"32px\";\n    element.style.fontSize = \"10px\";\n    element.innerText = \"Empty \" + this.getJsonTypeName();\n    return element;\n  };\n\n  CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {\n    if (this.height === \"auto\") {\n      renderedElement.style.flex = \"0 0 auto\";\n    } else {\n      renderedElement.style.flex = \"1 1 auto\";\n    }\n\n    if (this.minPixelHeight) {\n      renderedElement.style.minHeight = this.minPixelHeight + \"px\";\n    }\n  };\n\n  CardElement.prototype.overrideInternalRender = function () {\n    return this.internalRender();\n  };\n\n  CardElement.prototype.applyPadding = function () {\n    if (this.separatorElement) {\n      if (AdaptiveCard.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {\n        var padding = new Shared.PaddingDefinition();\n        this.getImmediateSurroundingPadding(padding);\n        var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n        this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\n        this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\n      } else {\n        this.separatorElement.style.marginRight = \"0\";\n        this.separatorElement.style.marginLeft = \"0\";\n      }\n    }\n  };\n  /*\r\n   * Called when this element overflows the bottom of the card.\r\n   * maxHeight will be the amount of space still available on the card (0 if\r\n   * the element is fully off the card).\r\n   */\n\n\n  CardElement.prototype.truncateOverflow = function (maxHeight) {\n    // Child implementations should return true if the element handled\n    // the truncation request such that its content fits within maxHeight,\n    // false if the element should fall back to being hidden\n    return false;\n  };\n  /*\r\n   * This should reverse any changes performed in truncateOverflow().\r\n   */\n\n\n  CardElement.prototype.undoOverflowTruncation = function () {};\n\n  CardElement.prototype.getDefaultPadding = function () {\n    return new Shared.PaddingDefinition();\n  };\n\n  CardElement.prototype.getHasBackground = function () {\n    return false;\n  };\n\n  CardElement.prototype.getPadding = function () {\n    return this._padding;\n  };\n\n  CardElement.prototype.setPadding = function (value) {\n    this._padding = value;\n  };\n\n  Object.defineProperty(CardElement.prototype, \"supportsMinHeight\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"useDefaultSizing\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"allowCustomPadding\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"separatorOrientation\", {\n    get: function get() {\n      return Enums.Orientation.Horizontal;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"defaultStyle\", {\n    get: function get() {\n      return Enums.ContainerStyle.Default;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CardElement.prototype.asString = function () {\n    return \"\";\n  };\n\n  CardElement.prototype.isBleeding = function () {\n    return false;\n  };\n\n  CardElement.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"isVisible\", this.isVisible, true);\n\n    if (this.horizontalAlignment !== null) {\n      Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment);\n    }\n\n    Utils.setEnumProperty(Enums.Spacing, result, \"spacing\", this.spacing, Enums.Spacing.Default);\n    Utils.setProperty(result, \"separator\", this.separator, false);\n    Utils.setProperty(result, \"height\", this.height, \"auto\");\n\n    if (this.supportsMinHeight) {\n      Utils.setProperty(result, \"minHeight\", typeof this.minPixelHeight === \"number\" && !isNaN(this.minPixelHeight) ? this.minPixelHeight + \"px\" : undefined);\n    }\n\n    return result;\n  };\n\n  CardElement.prototype.setParent = function (value) {\n    this._parent = value;\n  };\n\n  CardElement.prototype.getEffectiveStyle = function () {\n    if (this.parent) {\n      return this.parent.getEffectiveStyle();\n    }\n\n    return this.defaultStyle;\n  };\n\n  CardElement.prototype.getForbiddenElementTypes = function () {\n    return null;\n  };\n\n  CardElement.prototype.getForbiddenActionTypes = function () {\n    return null;\n  };\n\n  CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {\n    if (processTop === void 0) {\n      processTop = true;\n    }\n\n    if (processRight === void 0) {\n      processRight = true;\n    }\n\n    if (processBottom === void 0) {\n      processBottom = true;\n    }\n\n    if (processLeft === void 0) {\n      processLeft = true;\n    }\n\n    if (this.parent) {\n      var doProcessTop = processTop && this.parent.isTopElement(this);\n      var doProcessRight = processRight && this.parent.isRightMostElement(this);\n      var doProcessBottom = processBottom && this.parent.isBottomElement(this);\n      var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\n      var effectivePadding = this.parent.getEffectivePadding();\n\n      if (effectivePadding) {\n        if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {\n          result.top = effectivePadding.top;\n          doProcessTop = false;\n        }\n\n        if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {\n          result.right = effectivePadding.right;\n          doProcessRight = false;\n        }\n\n        if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {\n          result.bottom = effectivePadding.bottom;\n          doProcessBottom = false;\n        }\n\n        if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {\n          result.left = effectivePadding.left;\n          doProcessLeft = false;\n        }\n      }\n\n      if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\n        this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);\n      }\n    }\n  };\n\n  CardElement.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    raiseParseElementEvent(this, json, errors);\n    this.requires.parse(json[\"requires\"], errors);\n    this.isVisible = Utils.getBoolValue(json[\"isVisible\"], this.isVisible);\n    this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\n    this.spacing = Utils.getEnumValue(Enums.Spacing, json[\"spacing\"], Enums.Spacing.Default);\n    this.separator = Utils.getBoolValue(json[\"separator\"], this.separator);\n    var jsonSeparation = json[\"separation\"];\n\n    if (jsonSeparation !== undefined) {\n      if (jsonSeparation === \"none\") {\n        this.spacing = Enums.Spacing.None;\n        this.separator = false;\n      } else if (jsonSeparation === \"strong\") {\n        this.spacing = Enums.Spacing.Large;\n        this.separator = true;\n      } else if (jsonSeparation === \"default\") {\n        this.spacing = Enums.Spacing.Default;\n        this.separator = false;\n      }\n\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The \\\"separation\\\" property is deprecated and will be removed. Use the \\\"spacing\\\" and \\\"separator\\\" properties instead.\"\n      }, errors);\n    }\n\n    var jsonHeight = json[\"height\"];\n\n    if (jsonHeight === \"auto\" || jsonHeight === \"stretch\") {\n      this.height = jsonHeight;\n    }\n\n    if (this.supportsMinHeight) {\n      var jsonMinHeight = json[\"minHeight\"];\n\n      if (jsonMinHeight && typeof jsonMinHeight === \"string\") {\n        var isValid = false;\n\n        try {\n          var size = Shared.SizeAndUnit.parse(jsonMinHeight, true);\n\n          if (size.unit == Enums.SizeUnit.Pixel) {\n            this.minPixelHeight = size.physicalSize;\n            isValid = true;\n          }\n        } catch (_a) {// Do nothing. A parse error is emitted below\n        }\n\n        if (!isValid) {\n          raiseParseError({\n            error: Enums.ValidationError.InvalidPropertyValue,\n            message: \"Invalid \\\"minHeight\\\" value: \" + jsonMinHeight\n          }, errors);\n        }\n      }\n    } else {\n      this.minPixelHeight = null;\n    }\n  };\n\n  CardElement.prototype.getActionCount = function () {\n    return 0;\n  };\n\n  CardElement.prototype.getActionAt = function (index) {\n    throw new Error(\"Index out of range.\");\n  };\n\n  CardElement.prototype.remove = function () {\n    if (this.parent && this.parent instanceof CardElementContainer) {\n      return this.parent.removeItem(this);\n    }\n\n    return false;\n  };\n\n  CardElement.prototype.render = function () {\n    this._renderedElement = this.overrideInternalRender();\n    this._separatorElement = this.internalRenderSeparator();\n\n    if (this._renderedElement) {\n      if (this.customCssSelector) {\n        this._renderedElement.classList.add(this.customCssSelector);\n      }\n\n      this._renderedElement.style.boxSizing = \"border-box\";\n      this._defaultRenderedElementDisplayMode = this._renderedElement.style.display;\n      this.adjustRenderedElementSize(this._renderedElement);\n      this.updateLayout(false);\n    } else if (this.isDesignMode()) {\n      this._renderedElement = this.createPlaceholderElement();\n    }\n\n    return this._renderedElement;\n  };\n\n  CardElement.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n\n    this.updateRenderedElementVisibility();\n    this.applyPadding();\n  };\n\n  CardElement.prototype.indexOf = function (cardElement) {\n    return -1;\n  };\n\n  CardElement.prototype.isDesignMode = function () {\n    var rootElement = this.getRootElement();\n    return rootElement instanceof AdaptiveCard && rootElement.designMode;\n  };\n\n  CardElement.prototype.isRendered = function () {\n    return this._renderedElement && this._renderedElement.offsetHeight > 0;\n  };\n\n  CardElement.prototype.isFirstElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isLastElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isAtTheVeryLeft = function () {\n    return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;\n  };\n\n  CardElement.prototype.isAtTheVeryRight = function () {\n    return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;\n  };\n\n  CardElement.prototype.isAtTheVeryTop = function () {\n    return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;\n  };\n\n  CardElement.prototype.isAtTheVeryBottom = function () {\n    return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;\n  };\n\n  CardElement.prototype.isBleedingAtTop = function () {\n    return false;\n  };\n\n  CardElement.prototype.isBleedingAtBottom = function () {\n    return false;\n  };\n\n  CardElement.prototype.isLeftMostElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isRightMostElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isTopElement = function (element) {\n    return this.isFirstElement(element);\n  };\n\n  CardElement.prototype.isBottomElement = function (element) {\n    return this.isLastElement(element);\n  };\n\n  CardElement.prototype.isHiddenDueToOverflow = function () {\n    return this._renderedElement && this._renderedElement.style.visibility == 'hidden';\n  };\n\n  CardElement.prototype.getRootElement = function () {\n    var rootElement = this;\n\n    while (rootElement.parent) {\n      rootElement = rootElement.parent;\n    }\n\n    return rootElement;\n  };\n\n  CardElement.prototype.getParentContainer = function () {\n    var currentElement = this.parent;\n\n    while (currentElement) {\n      if (currentElement instanceof Container) {\n        return currentElement;\n      }\n\n      currentElement = currentElement.parent;\n    }\n\n    return null;\n  };\n\n  CardElement.prototype.getAllInputs = function () {\n    return [];\n  };\n\n  CardElement.prototype.getResourceInformation = function () {\n    return [];\n  };\n\n  CardElement.prototype.getElementById = function (id) {\n    return this.id === id ? this : null;\n  };\n\n  CardElement.prototype.getActionById = function (id) {\n    return null;\n  };\n\n  CardElement.prototype.shouldFallback = function () {\n    return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\n  };\n\n  CardElement.prototype.setShouldFallback = function (value) {\n    this._shouldFallback = value;\n  };\n\n  CardElement.prototype.getEffectivePadding = function () {\n    var padding = this.getPadding();\n    return padding && this.allowCustomPadding ? padding : this.getDefaultPadding();\n  };\n\n  Object.defineProperty(CardElement.prototype, \"lang\", {\n    get: function get() {\n      if (this._lang) {\n        return this._lang;\n      } else {\n        if (this.parent) {\n          return this.parent.lang;\n        } else {\n          return undefined;\n        }\n      }\n    },\n    set: function set(value) {\n      if (value && value != \"\") {\n        var regEx = /^[a-z]{2,3}$/ig;\n        var matches = regEx.exec(value);\n\n        if (!matches) {\n          throw new Error(\"Invalid language identifier: \" + value);\n        }\n      }\n\n      this._lang = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"hostConfig\", {\n    get: function get() {\n      if (this._hostConfig) {\n        return this._hostConfig;\n      } else {\n        if (this.parent) {\n          return this.parent.hostConfig;\n        } else {\n          return defaultHostConfig;\n        }\n      }\n    },\n    set: function set(value) {\n      this._hostConfig = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"index\", {\n    get: function get() {\n      if (this.parent) {\n        return this.parent.indexOf(this);\n      } else {\n        return 0;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isInteractive\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isStandalone\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isInline\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isVisible\", {\n    get: function get() {\n      return this._isVisible;\n    },\n    set: function set(value) {\n      // If the element is going to be hidden, reset any changes that were due\n      // to overflow truncation (this ensures that if the element is later\n      // un-hidden it has the right content)\n      if (AdaptiveCard.useAdvancedCardBottomTruncation && !value) {\n        this.undoOverflowTruncation();\n      }\n\n      if (this._isVisible != value) {\n        this._isVisible = value;\n        this.updateRenderedElementVisibility();\n\n        if (this._renderedElement) {\n          raiseElementVisibilityChangedEvent(this);\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"hasVisibleSeparator\", {\n    get: function get() {\n      if (this.parent && this.separatorElement) {\n        return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\n      } else {\n        return false;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"renderedElement\", {\n    get: function get() {\n      return this._renderedElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"separatorElement\", {\n    get: function get() {\n      return this._separatorElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return CardElement;\n}(CardObject);\n\nexports.CardElement = CardElement;\n\nvar BaseTextBlock =\n/** @class */\nfunction (_super) {\n  __extends(BaseTextBlock, _super);\n\n  function BaseTextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._selectAction = null;\n    _this.size = Enums.TextSize.Default;\n    _this.weight = Enums.TextWeight.Default;\n    _this.color = Enums.TextColor.Default;\n    _this.isSubtle = false;\n    _this.fontType = null;\n    return _this;\n  }\n\n  BaseTextBlock.prototype.getEffectiveStyleDefinition = function () {\n    return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\n  };\n\n  BaseTextBlock.prototype.getFontSize = function (fontType) {\n    switch (this.size) {\n      case Enums.TextSize.Small:\n        return fontType.fontSizes.small;\n\n      case Enums.TextSize.Medium:\n        return fontType.fontSizes.medium;\n\n      case Enums.TextSize.Large:\n        return fontType.fontSizes.large;\n\n      case Enums.TextSize.ExtraLarge:\n        return fontType.fontSizes.extraLarge;\n\n      default:\n        return fontType.fontSizes.default;\n    }\n  };\n\n  BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {\n    switch (color) {\n      case Enums.TextColor.Accent:\n        return colorSet.accent;\n\n      case Enums.TextColor.Dark:\n        return colorSet.dark;\n\n      case Enums.TextColor.Light:\n        return colorSet.light;\n\n      case Enums.TextColor.Good:\n        return colorSet.good;\n\n      case Enums.TextColor.Warning:\n        return colorSet.warning;\n\n      case Enums.TextColor.Attention:\n        return colorSet.attention;\n\n      default:\n        return colorSet.default;\n    }\n  };\n\n  BaseTextBlock.prototype.setText = function (value) {\n    this._text = value;\n  };\n\n  BaseTextBlock.prototype.asString = function () {\n    return this.text;\n  };\n\n  BaseTextBlock.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setEnumProperty(Enums.TextSize, result, \"size\", this.size, Enums.TextSize.Default);\n    Utils.setEnumProperty(Enums.TextWeight, result, \"weight\", this.weight, Enums.TextWeight.Default);\n    Utils.setEnumProperty(Enums.TextColor, result, \"color\", this.color, Enums.TextColor.Default);\n    Utils.setProperty(result, \"text\", this.text);\n    Utils.setProperty(result, \"isSubtle\", this.isSubtle, false);\n    Utils.setEnumProperty(Enums.FontType, result, \"fontType\", this.fontType, Enums.FontType.Default);\n    return result;\n  };\n\n  BaseTextBlock.prototype.applyStylesTo = function (targetElement) {\n    var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);\n\n    if (fontType.fontFamily) {\n      targetElement.style.fontFamily = fontType.fontFamily;\n    }\n\n    var fontSize;\n\n    switch (this.size) {\n      case Enums.TextSize.Small:\n        fontSize = fontType.fontSizes.small;\n        break;\n\n      case Enums.TextSize.Medium:\n        fontSize = fontType.fontSizes.medium;\n        break;\n\n      case Enums.TextSize.Large:\n        fontSize = fontType.fontSizes.large;\n        break;\n\n      case Enums.TextSize.ExtraLarge:\n        fontSize = fontType.fontSizes.extraLarge;\n        break;\n\n      default:\n        fontSize = fontType.fontSizes.default;\n        break;\n    }\n\n    targetElement.style.fontSize = fontSize + \"px\";\n    var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\n    targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);\n    var fontWeight;\n\n    switch (this.weight) {\n      case Enums.TextWeight.Lighter:\n        fontWeight = fontType.fontWeights.lighter;\n        break;\n\n      case Enums.TextWeight.Bolder:\n        fontWeight = fontType.fontWeights.bolder;\n        break;\n\n      default:\n        fontWeight = fontType.fontWeights.default;\n        break;\n    }\n\n    targetElement.style.fontWeight = fontWeight.toString();\n  };\n\n  BaseTextBlock.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.text = Utils.getStringValue(json[\"text\"]);\n    var sizeString = Utils.getStringValue(json[\"size\"]);\n\n    if (sizeString && sizeString.toLowerCase() === \"normal\") {\n      this.size = Enums.TextSize.Default;\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The TextBlock.size value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\n      }, errors);\n    } else {\n      this.size = Utils.getEnumValue(Enums.TextSize, sizeString, this.size);\n    }\n\n    var weightString = Utils.getStringValue(json[\"weight\"]);\n\n    if (weightString && weightString.toLowerCase() === \"normal\") {\n      this.weight = Enums.TextWeight.Default;\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The TextBlock.weight value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\n      }, errors);\n    } else {\n      this.weight = Utils.getEnumValue(Enums.TextWeight, weightString, this.weight);\n    }\n\n    this.color = Utils.getEnumValue(Enums.TextColor, json[\"color\"], this.color);\n    this.isSubtle = Utils.getBoolValue(json[\"isSubtle\"], this.isSubtle);\n    this.fontType = Utils.getEnumValue(Enums.FontType, json[\"fontType\"], this.fontType);\n  };\n\n  Object.defineProperty(BaseTextBlock.prototype, \"effectiveColor\", {\n    get: function get() {\n      return this.color ? this.color : Enums.TextColor.Default;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BaseTextBlock.prototype, \"text\", {\n    get: function get() {\n      return this._text;\n    },\n    set: function set(value) {\n      this.setText(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BaseTextBlock.prototype, \"selectAction\", {\n    get: function get() {\n      return this._selectAction;\n    },\n    set: function set(value) {\n      this._selectAction = value;\n\n      if (this._selectAction) {\n        this._selectAction.setParent(this);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BaseTextBlock;\n}(CardElement);\n\nexports.BaseTextBlock = BaseTextBlock;\n\nvar TextBlock =\n/** @class */\nfunction (_super) {\n  __extends(TextBlock, _super);\n\n  function TextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._processedText = null;\n    _this._treatAsPlainText = true;\n    _this.wrap = false;\n    _this.useMarkdown = true;\n    return _this;\n  }\n\n  TextBlock.prototype.restoreOriginalContent = function () {\n    var maxHeight = this.maxLines ? this._computedLineHeight * this.maxLines + 'px' : null;\n    this.renderedElement.style.maxHeight = maxHeight;\n    this.renderedElement.innerHTML = this._originalInnerHtml;\n  };\n\n  TextBlock.prototype.truncateIfSupported = function (maxHeight) {\n    // For now, only truncate TextBlocks that contain just a single\n    // paragraph -- since the maxLines calculation doesn't take into\n    // account Markdown lists\n    var children = this.renderedElement.children;\n    var isTextOnly = !children.length;\n    var truncationSupported = isTextOnly || children.length == 1 && children[0].tagName.toLowerCase() == 'p';\n\n    if (truncationSupported) {\n      var element = isTextOnly ? this.renderedElement : children[0];\n      Utils.truncate(element, maxHeight, this._computedLineHeight);\n      return true;\n    }\n\n    return false;\n  };\n\n  TextBlock.prototype.setText = function (value) {\n    _super.prototype.setText.call(this, value);\n\n    this._processedText = null;\n  };\n\n  TextBlock.prototype.getRenderedDomElementType = function () {\n    return \"div\";\n  };\n\n  TextBlock.prototype.internalRender = function () {\n    var _this = this;\n\n    this._processedText = null;\n\n    if (!Utils.isNullOrEmpty(this.text)) {\n      var hostConfig = this.hostConfig;\n      var element = document.createElement(this.getRenderedDomElementType());\n      element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\n      element.style.overflow = \"hidden\";\n      this.applyStylesTo(element);\n\n      if (this.selectAction) {\n        element.onclick = function (e) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this.selectAction.execute();\n        };\n\n        if (hostConfig.supportsInteractivity) {\n          element.tabIndex = 0;\n          element.setAttribute(\"role\", this.selectAction.getAriaRole());\n          element.setAttribute(\"aria-label\", this.selectAction.title);\n          element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n        }\n      }\n\n      if (!this._processedText) {\n        this._treatAsPlainText = true;\n        var formattedText = TextFormatters.formatText(this.lang, this.text);\n\n        if (this.useMarkdown) {\n          if (AdaptiveCard.allowMarkForTextHighlighting) {\n            formattedText = formattedText.replace(/<mark>/g, \"===\").replace(/<\\/mark>/g, \"/==\");\n          }\n\n          var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\n\n          if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {\n            this._processedText = markdownProcessingResult.outputHtml;\n            this._treatAsPlainText = false; // Only process <mark> tag if markdown processing was applied because\n            // markdown processing is also responsible for sanitizing the input string\n\n            if (AdaptiveCard.allowMarkForTextHighlighting) {\n              var markStyle = \"\";\n              var effectiveStyle = this.getEffectiveStyleDefinition();\n\n              if (effectiveStyle.highlightBackgroundColor) {\n                markStyle += \"background-color: \" + effectiveStyle.highlightBackgroundColor + \";\";\n              }\n\n              if (effectiveStyle.highlightForegroundColor) {\n                markStyle += \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\n              }\n\n              if (!Utils.isNullOrEmpty(markStyle)) {\n                markStyle = 'style=\"' + markStyle + '\"';\n              }\n\n              this._processedText = this._processedText.replace(/===/g, \"<mark \" + markStyle + \">\").replace(/\\/==/g, \"</mark>\");\n            }\n          } else {\n            this._processedText = formattedText;\n            this._treatAsPlainText = true;\n          }\n        } else {\n          this._processedText = formattedText;\n          this._treatAsPlainText = true;\n        }\n      }\n\n      if (this._treatAsPlainText) {\n        element.innerText = this._processedText;\n      } else {\n        element.innerHTML = this._processedText;\n      }\n\n      if (element.firstElementChild instanceof HTMLElement) {\n        var firstElementChild = element.firstElementChild;\n        firstElementChild.style.marginTop = \"0px\";\n        firstElementChild.style.width = \"100%\";\n\n        if (!this.wrap) {\n          firstElementChild.style.overflow = \"hidden\";\n          firstElementChild.style.textOverflow = \"ellipsis\";\n        }\n      }\n\n      if (element.lastElementChild instanceof HTMLElement) {\n        element.lastElementChild.style.marginBottom = \"0px\";\n      }\n\n      var anchors = element.getElementsByTagName(\"a\");\n\n      for (var i = 0; i < anchors.length; i++) {\n        var anchor = anchors[i];\n        anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\n        anchor.target = \"_blank\";\n\n        anchor.onclick = function (e) {\n          if (raiseAnchorClickedEvent(_this, e.target)) {\n            e.preventDefault();\n            e.cancelBubble = true;\n          }\n        };\n      }\n\n      if (this.wrap) {\n        element.style.wordWrap = \"break-word\";\n\n        if (this.maxLines > 0) {\n          element.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\n          element.style.overflow = \"hidden\";\n        }\n      } else {\n        element.style.whiteSpace = \"nowrap\";\n        element.style.textOverflow = \"ellipsis\";\n      }\n\n      if (AdaptiveCard.useAdvancedTextBlockTruncation || AdaptiveCard.useAdvancedCardBottomTruncation) {\n        this._originalInnerHtml = element.innerHTML;\n      }\n\n      return element;\n    } else {\n      return null;\n    }\n  };\n\n  TextBlock.prototype.truncateOverflow = function (maxHeight) {\n    if (maxHeight >= this._computedLineHeight) {\n      return this.truncateIfSupported(maxHeight);\n    }\n\n    return false;\n  };\n\n  TextBlock.prototype.undoOverflowTruncation = function () {\n    this.restoreOriginalContent();\n\n    if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines) {\n      var maxHeight = this._computedLineHeight * this.maxLines;\n      this.truncateIfSupported(maxHeight);\n    }\n  };\n\n  TextBlock.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"wrap\", this.wrap, false);\n    Utils.setNumberProperty(result, \"maxLines\", this.maxLines);\n    return result;\n  };\n\n  TextBlock.prototype.applyStylesTo = function (targetElement) {\n    _super.prototype.applyStylesTo.call(this, targetElement);\n\n    var parentContainer = this.getParentContainer();\n    var isRtl = parentContainer ? parentContainer.isRtl() : false;\n\n    switch (this.horizontalAlignment) {\n      case Enums.HorizontalAlignment.Center:\n        targetElement.style.textAlign = \"center\";\n        break;\n\n      case Enums.HorizontalAlignment.Right:\n        targetElement.style.textAlign = isRtl ? \"left\" : \"right\";\n        break;\n\n      default:\n        targetElement.style.textAlign = isRtl ? \"right\" : \"left\";\n        break;\n    }\n\n    var lineHeights = this.hostConfig.lineHeights;\n\n    if (lineHeights) {\n      switch (this.size) {\n        case Enums.TextSize.Small:\n          this._computedLineHeight = lineHeights.small;\n          break;\n\n        case Enums.TextSize.Medium:\n          this._computedLineHeight = lineHeights.medium;\n          break;\n\n        case Enums.TextSize.Large:\n          this._computedLineHeight = lineHeights.large;\n          break;\n\n        case Enums.TextSize.ExtraLarge:\n          this._computedLineHeight = lineHeights.extraLarge;\n          break;\n\n        default:\n          this._computedLineHeight = lineHeights.default;\n          break;\n      }\n    } else {\n      // Looks like 1.33 is the magic number to compute line-height\n      // from font size.\n      this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;\n    }\n\n    targetElement.style.lineHeight = this._computedLineHeight + \"px\";\n  };\n\n  TextBlock.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\n    this.maxLines = Utils.getNumberValue(json[\"maxLines\"]);\n  };\n\n  TextBlock.prototype.getJsonTypeName = function () {\n    return \"TextBlock\";\n  };\n\n  TextBlock.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = false;\n    }\n\n    _super.prototype.updateLayout.call(this, processChildren);\n\n    if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines && this.isRendered()) {\n      // Reset the element's innerHTML in case the available room for\n      // content has increased\n      this.restoreOriginalContent();\n      this.truncateIfSupported(this._computedLineHeight * this.maxLines);\n    }\n  };\n\n  return TextBlock;\n}(BaseTextBlock);\n\nexports.TextBlock = TextBlock;\n\nvar Label =\n/** @class */\nfunction (_super) {\n  __extends(Label, _super);\n\n  function Label() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Label.prototype.getRenderedDomElementType = function () {\n    return \"label\";\n  };\n\n  Label.prototype.internalRender = function () {\n    var renderedElement = _super.prototype.internalRender.call(this);\n\n    if (renderedElement && !Utils.isNullOrEmpty(this.forElementId)) {\n      renderedElement.htmlFor = this.forElementId;\n    }\n\n    return renderedElement;\n  };\n\n  return Label;\n}(TextBlock);\n\nvar TextRun =\n/** @class */\nfunction (_super) {\n  __extends(TextRun, _super);\n\n  function TextRun() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.italic = false;\n    _this.strikethrough = false;\n    _this.highlight = false;\n    return _this;\n  }\n\n  TextRun.prototype.internalRender = function () {\n    var _this = this;\n\n    if (!Utils.isNullOrEmpty(this.text)) {\n      var hostConfig = this.hostConfig;\n      var formattedText = TextFormatters.formatText(this.lang, this.text);\n      var element = document.createElement(\"span\");\n      element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\n      this.applyStylesTo(element);\n\n      if (this.selectAction && hostConfig.supportsInteractivity) {\n        var anchor = document.createElement(\"a\");\n        anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\n        anchor.href = this.selectAction.getHref();\n        anchor.target = \"_blank\";\n\n        anchor.onclick = function (e) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this.selectAction.execute();\n        };\n\n        anchor.innerText = formattedText;\n        element.appendChild(anchor);\n      } else {\n        element.innerText = formattedText;\n      }\n\n      return element;\n    } else {\n      return null;\n    }\n  };\n\n  TextRun.prototype.applyStylesTo = function (targetElement) {\n    _super.prototype.applyStylesTo.call(this, targetElement);\n\n    if (this.italic) {\n      targetElement.style.fontStyle = \"italic\";\n    }\n\n    if (this.strikethrough) {\n      targetElement.style.textDecoration = \"line-through\";\n    }\n\n    if (this.highlight) {\n      var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\n      targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);\n    }\n  };\n\n  TextRun.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"italic\", this.italic, false);\n    Utils.setProperty(result, \"strikethrough\", this.strikethrough, false);\n    Utils.setProperty(result, \"highlight\", this.highlight, false);\n\n    if (this.selectAction) {\n      Utils.setProperty(result, \"selectAction\", this.selectAction.toJSON());\n    }\n\n    return result;\n  };\n\n  TextRun.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.italic = Utils.getBoolValue(json[\"italic\"], this.italic);\n    this.strikethrough = Utils.getBoolValue(json[\"strikethrough\"], this.strikethrough);\n    this.highlight = Utils.getBoolValue(json[\"highlight\"], this.highlight);\n    this.selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n  };\n\n  TextRun.prototype.getJsonTypeName = function () {\n    return \"TextRun\";\n  };\n\n  Object.defineProperty(TextRun.prototype, \"isStandalone\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TextRun.prototype, \"isInline\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return TextRun;\n}(BaseTextBlock);\n\nexports.TextRun = TextRun;\n\nvar RichTextBlock =\n/** @class */\nfunction (_super) {\n  __extends(RichTextBlock, _super);\n\n  function RichTextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._inlines = [];\n    return _this;\n  }\n\n  RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {\n    if (forceAdd === void 0) {\n      forceAdd = false;\n    }\n\n    if (!inline.isInline) {\n      throw new Error(\"RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.\");\n    }\n\n    var doAdd = inline.parent == null || forceAdd;\n\n    if (!doAdd && inline.parent != this) {\n      throw new Error(\"RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.\");\n    } else {\n      inline.setParent(this);\n\n      this._inlines.push(inline);\n    }\n  };\n\n  RichTextBlock.prototype.internalRender = function () {\n    if (this._inlines.length > 0) {\n      var element = document.createElement(\"div\");\n      element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\n      var parentContainer = this.getParentContainer();\n      var isRtl = parentContainer ? parentContainer.isRtl() : false;\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.textAlign = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.textAlign = isRtl ? \"left\" : \"right\";\n          break;\n\n        default:\n          element.style.textAlign = isRtl ? \"right\" : \"left\";\n          break;\n      }\n\n      var renderedInlines = 0;\n\n      for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n        var inline = _a[_i];\n        var renderedInline = inline.render();\n\n        if (renderedInline) {\n          element.appendChild(renderedInline);\n          renderedInlines++;\n        }\n      }\n\n      if (renderedInlines > 0) {\n        return element;\n      }\n    }\n\n    return null;\n  };\n\n  RichTextBlock.prototype.asString = function () {\n    var result = \"\";\n\n    for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n      var inline = _a[_i];\n      result += inline.asString();\n    }\n\n    return result;\n  };\n\n  RichTextBlock.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this._inlines = [];\n\n    if (Array.isArray(json[\"inlines\"])) {\n      for (var _i = 0, _a = json[\"inlines\"]; _i < _a.length; _i++) {\n        var jsonInline = _a[_i];\n        var inline = void 0;\n\n        if (typeof jsonInline === \"string\") {\n          var textRun = new TextRun();\n          textRun.text = jsonInline;\n          inline = textRun;\n        } else {\n          inline = createElementInstance(this, jsonInline, false, // No fallback for inlines in 1.2\n          errors);\n        }\n\n        if (inline) {\n          this.internalAddInline(inline, true);\n        }\n      }\n    }\n  };\n\n  RichTextBlock.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    if (this._inlines.length > 0) {\n      var jsonInlines = [];\n\n      for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n        var inline = _a[_i];\n        jsonInlines.push(inline.toJSON());\n      }\n\n      Utils.setProperty(result, \"inlines\", jsonInlines);\n    }\n\n    return result;\n  };\n\n  RichTextBlock.prototype.getJsonTypeName = function () {\n    return \"RichTextBlock\";\n  };\n\n  RichTextBlock.prototype.getInlineCount = function () {\n    return this._inlines.length;\n  };\n\n  RichTextBlock.prototype.getInlineAt = function (index) {\n    if (index >= 0 && index < this._inlines.length) {\n      return this._inlines[index];\n    } else {\n      throw new Error(\"RichTextBlock.getInlineAt: Index out of range (\" + index + \")\");\n    }\n  };\n\n  RichTextBlock.prototype.addInline = function (inline) {\n    this.internalAddInline(inline);\n  };\n\n  RichTextBlock.prototype.removeInline = function (inline) {\n    var index = this._inlines.indexOf(inline);\n\n    if (index >= 0) {\n      this._inlines[index].setParent(null);\n\n      this._inlines.splice(index, 1);\n\n      return true;\n    }\n\n    return false;\n  };\n\n  return RichTextBlock;\n}(CardElement);\n\nexports.RichTextBlock = RichTextBlock;\n\nvar Fact =\n/** @class */\nfunction (_super) {\n  __extends(Fact, _super);\n\n  function Fact(name, value) {\n    if (name === void 0) {\n      name = undefined;\n    }\n\n    if (value === void 0) {\n      value = undefined;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.name = name;\n    _this.value = value;\n    return _this;\n  }\n\n  Fact.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n\n    this.name = Utils.getStringValue(json[\"title\"]);\n    this.value = Utils.getStringValue(json[\"value\"]);\n  };\n\n  Fact.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"title\", this.name);\n    Utils.setProperty(result, \"value\", this.value);\n    return result;\n  };\n\n  return Fact;\n}(SerializableObject);\n\nexports.Fact = Fact;\n\nvar FactSet =\n/** @class */\nfunction (_super) {\n  __extends(FactSet, _super);\n\n  function FactSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.facts = [];\n    return _this;\n  }\n\n  Object.defineProperty(FactSet.prototype, \"useDefaultSizing\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FactSet.prototype.internalRender = function () {\n    var element = null;\n    var hostConfig = this.hostConfig;\n\n    if (this.facts.length > 0) {\n      element = document.createElement(\"table\");\n      element.style.borderWidth = \"0px\";\n      element.style.borderSpacing = \"0px\";\n      element.style.borderStyle = \"none\";\n      element.style.borderCollapse = \"collapse\";\n      element.style.display = \"block\";\n      element.style.overflow = \"hidden\";\n      element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\n\n      for (var i = 0; i < this.facts.length; i++) {\n        var trElement = document.createElement(\"tr\");\n\n        if (i > 0) {\n          trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\n        } // Title column\n\n\n        var tdElement = document.createElement(\"td\");\n        tdElement.style.padding = \"0\";\n        tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\n\n        if (hostConfig.factSet.title.maxWidth) {\n          tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\n        }\n\n        tdElement.style.verticalAlign = \"top\";\n        var textBlock = new TextBlock();\n        textBlock.setParent(this);\n        textBlock.text = Utils.isNullOrEmpty(this.facts[i].name) && this.isDesignMode() ? \"Title\" : this.facts[i].name;\n        textBlock.size = hostConfig.factSet.title.size;\n        textBlock.color = hostConfig.factSet.title.color;\n        textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\n        textBlock.weight = hostConfig.factSet.title.weight;\n        textBlock.wrap = hostConfig.factSet.title.wrap;\n        textBlock.spacing = Enums.Spacing.None;\n        Utils.appendChild(tdElement, textBlock.render());\n        Utils.appendChild(trElement, tdElement); // Spacer column\n\n        tdElement = document.createElement(\"td\");\n        tdElement.style.width = \"10px\";\n        Utils.appendChild(trElement, tdElement); // Value column\n\n        tdElement = document.createElement(\"td\");\n        tdElement.style.padding = \"0\";\n        tdElement.style.verticalAlign = \"top\";\n        tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\n        textBlock = new TextBlock();\n        textBlock.setParent(this);\n        textBlock.text = this.facts[i].value;\n        textBlock.size = hostConfig.factSet.value.size;\n        textBlock.color = hostConfig.factSet.value.color;\n        textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\n        textBlock.weight = hostConfig.factSet.value.weight;\n        textBlock.wrap = hostConfig.factSet.value.wrap;\n        textBlock.spacing = Enums.Spacing.None;\n        Utils.appendChild(tdElement, textBlock.render());\n        Utils.appendChild(trElement, tdElement);\n        Utils.appendChild(element, trElement);\n      }\n    }\n\n    return element;\n  };\n\n  FactSet.prototype.getJsonTypeName = function () {\n    return \"FactSet\";\n  };\n\n  FactSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setArrayProperty(result, \"facts\", this.facts);\n    return result;\n  };\n\n  FactSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.facts = [];\n    var jsonFacts = json[\"facts\"];\n\n    if (Array.isArray(jsonFacts)) {\n      for (var _i = 0, jsonFacts_1 = jsonFacts; _i < jsonFacts_1.length; _i++) {\n        var jsonFact = jsonFacts_1[_i];\n        var fact = new Fact();\n        fact.parse(jsonFact);\n        this.facts.push(fact);\n      }\n    }\n  };\n\n  return FactSet;\n}(CardElement);\n\nexports.FactSet = FactSet;\n\nvar Image =\n/** @class */\nfunction (_super) {\n  __extends(Image, _super);\n\n  function Image() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.style = Enums.ImageStyle.Default;\n    _this.size = Enums.Size.Auto;\n    _this.pixelWidth = null;\n    _this.pixelHeight = null;\n    _this.altText = \"\";\n    return _this;\n  }\n\n  Image.prototype.parseDimension = function (name, value, errors) {\n    if (value) {\n      if (typeof value === \"string\") {\n        try {\n          var size = Shared.SizeAndUnit.parse(value);\n\n          if (size.unit == Enums.SizeUnit.Pixel) {\n            return size.physicalSize;\n          }\n        } catch (_a) {// Ignore error\n        }\n      }\n\n      raiseParseError({\n        error: Enums.ValidationError.InvalidPropertyValue,\n        message: \"Invalid image \" + name + \": \" + value\n      }, errors);\n    }\n\n    return 0;\n  };\n\n  Image.prototype.applySize = function (element) {\n    if (this.pixelWidth || this.pixelHeight) {\n      if (this.pixelWidth) {\n        element.style.width = this.pixelWidth + \"px\";\n      }\n\n      if (this.pixelHeight) {\n        element.style.height = this.pixelHeight + \"px\";\n      }\n    } else {\n      switch (this.size) {\n        case Enums.Size.Stretch:\n          element.style.width = \"100%\";\n          break;\n\n        case Enums.Size.Auto:\n          element.style.maxWidth = \"100%\";\n          break;\n\n        case Enums.Size.Small:\n          element.style.width = this.hostConfig.imageSizes.small + \"px\";\n          break;\n\n        case Enums.Size.Large:\n          element.style.width = this.hostConfig.imageSizes.large + \"px\";\n          break;\n\n        case Enums.Size.Medium:\n          element.style.width = this.hostConfig.imageSizes.medium + \"px\";\n          break;\n      }\n    }\n  };\n\n  Object.defineProperty(Image.prototype, \"useDefaultSizing\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Image.prototype.internalRender = function () {\n    var _this = this;\n\n    var element = null;\n\n    if (!Utils.isNullOrEmpty(this.url)) {\n      element = document.createElement(\"div\");\n      element.style.display = \"flex\";\n      element.style.alignItems = \"flex-start\";\n\n      element.onkeypress = function (e) {\n        if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) {\n          // enter or space pressed\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this.selectAction.execute();\n        }\n      };\n\n      element.onclick = function (e) {\n        if (_this.selectAction) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this.selectAction.execute();\n        }\n      };\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.justifyContent = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.justifyContent = \"flex-end\";\n          break;\n\n        default:\n          element.style.justifyContent = \"flex-start\";\n          break;\n      } // Cache hostConfig to avoid walking the parent hierarchy multiple times\n\n\n      var hostConfig = this.hostConfig;\n      var imageElement = document.createElement(\"img\");\n\n      imageElement.onload = function (e) {\n        raiseImageLoadedEvent(_this);\n      };\n\n      imageElement.onerror = function (e) {\n        var card = _this.getRootElement();\n\n        _this.renderedElement.innerHTML = \"\";\n\n        if (card && card.designMode) {\n          var errorElement = document.createElement(\"div\");\n          errorElement.style.display = \"flex\";\n          errorElement.style.alignItems = \"center\";\n          errorElement.style.justifyContent = \"center\";\n          errorElement.style.backgroundColor = \"#EEEEEE\";\n          errorElement.style.color = \"black\";\n          errorElement.innerText = \":-(\";\n          errorElement.style.padding = \"10px\";\n\n          _this.applySize(errorElement);\n\n          _this.renderedElement.appendChild(errorElement);\n        }\n\n        raiseImageLoadedEvent(_this);\n      };\n\n      imageElement.style.maxHeight = \"100%\";\n      imageElement.style.minWidth = \"0\";\n      imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\n\n      if (this.selectAction != null && hostConfig.supportsInteractivity) {\n        imageElement.tabIndex = 0;\n        imageElement.setAttribute(\"role\", this.selectAction.getAriaRole());\n        imageElement.setAttribute(\"aria-label\", this.selectAction.title);\n        imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n      }\n\n      this.applySize(imageElement);\n\n      if (this.style === Enums.ImageStyle.Person) {\n        imageElement.style.borderRadius = \"50%\";\n        imageElement.style.backgroundPosition = \"50% 50%\";\n        imageElement.style.backgroundRepeat = \"no-repeat\";\n      }\n\n      if (!Utils.isNullOrEmpty(this.backgroundColor)) {\n        imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);\n      }\n\n      imageElement.src = this.url;\n\n      if (!Utils.isNullOrEmpty(this.altText)) {\n        imageElement.alt = this.altText;\n      }\n\n      element.appendChild(imageElement);\n    }\n\n    return element;\n  };\n\n  Image.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    if (this._selectAction) {\n      Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\n    }\n\n    Utils.setEnumProperty(Enums.ImageStyle, result, \"style\", this.style, Enums.ImageStyle.Default);\n    Utils.setProperty(result, \"backgroundColor\", this.backgroundColor);\n    Utils.setProperty(result, \"url\", this.url);\n    Utils.setEnumProperty(Enums.Size, result, \"size\", this.size, Enums.Size.Auto);\n\n    if (this.pixelWidth) {\n      Utils.setProperty(result, \"width\", this.pixelWidth + \"px\");\n    }\n\n    if (this.pixelHeight) {\n      Utils.setProperty(result, \"height\", this.pixelHeight + \"px\");\n    }\n\n    Utils.setProperty(result, \"altText\", this.altText);\n    return result;\n  };\n\n  Image.prototype.getJsonTypeName = function () {\n    return \"Image\";\n  };\n\n  Image.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result && this.selectAction) {\n      result = this.selectAction.getActionById(id);\n    }\n\n    return result;\n  };\n\n  Image.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.url = Utils.getStringValue(json[\"url\"]);\n    this.backgroundColor = Utils.getStringValue(json[\"backgroundColor\"]);\n    var styleString = Utils.getStringValue(json[\"style\"]);\n\n    if (styleString && styleString.toLowerCase() === \"normal\") {\n      this.style = Enums.ImageStyle.Default;\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The Image.style value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\n      }, errors);\n    } else {\n      this.style = Utils.getEnumValue(Enums.ImageStyle, styleString, this.style);\n    }\n\n    this.size = Utils.getEnumValue(Enums.Size, json[\"size\"], this.size);\n    this.altText = Utils.getStringValue(json[\"altText\"]); // pixelWidth and pixelHeight are only parsed for backwards compatibility.\n    // Payloads should use the width and height proerties instead.\n\n    if (json[\"pixelWidth\"] && typeof json[\"pixelWidth\"] === \"number\") {\n      this.pixelWidth = json[\"pixelWidth\"];\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The pixelWidth property is deprecated and will be removed. Use the width property instead.\"\n      }, errors);\n    }\n\n    if (json[\"pixelHeight\"] && typeof json[\"pixelHeight\"] === \"number\") {\n      this.pixelHeight = json[\"pixelHeight\"];\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The pixelHeight property is deprecated and will be removed. Use the height property instead.\"\n      }, errors);\n    }\n\n    var size = this.parseDimension(\"width\", json[\"width\"], errors);\n\n    if (size > 0) {\n      this.pixelWidth = size;\n    }\n\n    size = this.parseDimension(\"height\", json[\"height\"], errors);\n\n    if (size > 0) {\n      this.pixelHeight = size;\n    }\n\n    this.selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n  };\n\n  Image.prototype.getResourceInformation = function () {\n    if (!Utils.isNullOrEmpty(this.url)) {\n      return [{\n        url: this.url,\n        mimeType: \"image\"\n      }];\n    } else {\n      return [];\n    }\n  };\n\n  Object.defineProperty(Image.prototype, \"selectAction\", {\n    get: function get() {\n      return this._selectAction;\n    },\n    set: function set(value) {\n      this._selectAction = value;\n\n      if (this._selectAction) {\n        this._selectAction.setParent(this);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Image;\n}(CardElement);\n\nexports.Image = Image;\n\nvar CardElementContainer =\n/** @class */\nfunction (_super) {\n  __extends(CardElementContainer, _super);\n\n  function CardElementContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._selectAction = null;\n    _this.allowVerticalOverflow = false;\n    return _this;\n  }\n\n  CardElementContainer.prototype.isElementAllowed = function (element, forbiddenElementTypes) {\n    if (!this.hostConfig.supportsInteractivity && element.isInteractive) {\n      return false;\n    }\n\n    if (forbiddenElementTypes) {\n      for (var _i = 0, forbiddenElementTypes_1 = forbiddenElementTypes; _i < forbiddenElementTypes_1.length; _i++) {\n        var forbiddenElementType = forbiddenElementTypes_1[_i];\n\n        if (element.getJsonTypeName() === forbiddenElementType) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  CardElementContainer.prototype.applyPadding = function () {\n    _super.prototype.applyPadding.call(this);\n\n    if (!this.renderedElement) {\n      return;\n    }\n\n    var physicalPadding = new Shared.SpacingDefinition();\n\n    if (this.getEffectivePadding()) {\n      physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\n    }\n\n    this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\n    this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\n    this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\n    this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\n    this.renderedElement.style.marginRight = \"0\";\n    this.renderedElement.style.marginLeft = \"0\";\n  };\n\n  CardElementContainer.prototype.getSelectAction = function () {\n    return this._selectAction;\n  };\n\n  CardElementContainer.prototype.setSelectAction = function (value) {\n    this._selectAction = value;\n\n    if (this._selectAction) {\n      this._selectAction.setParent(this);\n    }\n  };\n\n  Object.defineProperty(CardElementContainer.prototype, \"isSelectable\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CardElementContainer.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    if (this.isSelectable) {\n      this._selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n    }\n  };\n\n  CardElementContainer.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    if (this._selectAction && this.isSelectable) {\n      Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\n    }\n\n    return result;\n  };\n\n  CardElementContainer.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    for (var i = 0; i < this.getItemCount(); i++) {\n      var item = this.getItemAt(i);\n\n      if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.InteractivityNotAllowed,\n          message: \"Interactivity is not allowed.\"\n        });\n      }\n\n      if (!this.isElementAllowed(item, this.getForbiddenElementTypes())) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.InteractivityNotAllowed,\n          message: \"Elements of type \" + item.getJsonTypeName() + \" are not allowed in this container.\"\n        });\n      }\n\n      item.internalValidateProperties(context);\n    }\n\n    if (this._selectAction) {\n      this._selectAction.internalValidateProperties(context);\n    }\n  };\n\n  CardElementContainer.prototype.render = function () {\n    var _this = this;\n\n    var element = _super.prototype.render.call(this);\n\n    var hostConfig = this.hostConfig;\n\n    if (this.allowVerticalOverflow) {\n      element.style.overflowX = \"hidden\";\n      element.style.overflowY = \"auto\";\n    }\n\n    if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {\n      element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n      element.tabIndex = 0;\n      element.setAttribute(\"role\", this._selectAction.getAriaRole());\n      element.setAttribute(\"aria-label\", this._selectAction.title);\n\n      element.onclick = function (e) {\n        if (_this._selectAction != null) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this._selectAction.execute();\n        }\n      };\n\n      element.onkeypress = function (e) {\n        if (_this._selectAction != null && (e.keyCode == 13 || e.keyCode == 32)) {\n          // Enter or space pressed\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this._selectAction.execute();\n        }\n      };\n    }\n\n    return element;\n  };\n\n  CardElementContainer.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n\n    _super.prototype.updateLayout.call(this, processChildren);\n\n    if (processChildren) {\n      for (var i = 0; i < this.getItemCount(); i++) {\n        this.getItemAt(i).updateLayout();\n      }\n    }\n  };\n\n  CardElementContainer.prototype.getAllInputs = function () {\n    var result = [];\n\n    for (var i = 0; i < this.getItemCount(); i++) {\n      result = result.concat(this.getItemAt(i).getAllInputs());\n    }\n\n    return result;\n  };\n\n  CardElementContainer.prototype.getResourceInformation = function () {\n    var result = [];\n\n    for (var i = 0; i < this.getItemCount(); i++) {\n      result = result.concat(this.getItemAt(i).getResourceInformation());\n    }\n\n    return result;\n  };\n\n  CardElementContainer.prototype.getElementById = function (id) {\n    var result = _super.prototype.getElementById.call(this, id);\n\n    if (!result) {\n      for (var i = 0; i < this.getItemCount(); i++) {\n        result = this.getItemAt(i).getElementById(id);\n\n        if (result) {\n          break;\n        }\n      }\n    }\n\n    return result;\n  };\n\n  return CardElementContainer;\n}(CardElement);\n\nexports.CardElementContainer = CardElementContainer;\n\nvar ImageSet =\n/** @class */\nfunction (_super) {\n  __extends(ImageSet, _super);\n\n  function ImageSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._images = [];\n    _this.imageSize = Enums.Size.Medium;\n    return _this;\n  }\n\n  ImageSet.prototype.internalRender = function () {\n    var element = null;\n\n    if (this._images.length > 0) {\n      element = document.createElement(\"div\");\n      element.style.display = \"flex\";\n      element.style.flexWrap = \"wrap\";\n\n      for (var i = 0; i < this._images.length; i++) {\n        this._images[i].size = this.imageSize;\n\n        var renderedImage = this._images[i].render();\n\n        renderedImage.style.display = \"inline-flex\";\n        renderedImage.style.margin = \"0px\";\n        renderedImage.style.marginRight = \"10px\";\n        renderedImage.style.maxHeight = this.hostConfig.imageSet.maxImageHeight + \"px\";\n        Utils.appendChild(element, renderedImage);\n      }\n    }\n\n    return element;\n  };\n\n  ImageSet.prototype.getItemCount = function () {\n    return this._images.length;\n  };\n\n  ImageSet.prototype.getItemAt = function (index) {\n    return this._images[index];\n  };\n\n  ImageSet.prototype.getFirstVisibleRenderedItem = function () {\n    return this._images && this._images.length > 0 ? this._images[0] : null;\n  };\n\n  ImageSet.prototype.getLastVisibleRenderedItem = function () {\n    return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : null;\n  };\n\n  ImageSet.prototype.removeItem = function (item) {\n    if (item instanceof Image) {\n      var itemIndex = this._images.indexOf(item);\n\n      if (itemIndex >= 0) {\n        this._images.splice(itemIndex, 1);\n\n        item.setParent(null);\n        this.updateLayout();\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ImageSet.prototype.getJsonTypeName = function () {\n    return \"ImageSet\";\n  };\n\n  ImageSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setEnumProperty(Enums.Size, result, \"imageSize\", this.imageSize, Enums.Size.Medium);\n\n    if (this._images.length > 0) {\n      var images = [];\n\n      for (var _i = 0, _a = this._images; _i < _a.length; _i++) {\n        var image = _a[_i];\n        images.push(image.toJSON());\n      }\n\n      Utils.setProperty(result, \"images\", images);\n    }\n\n    return result;\n  };\n\n  ImageSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.imageSize = Utils.getEnumValue(Enums.Size, json[\"imageSize\"], Enums.Size.Medium);\n\n    if (json[\"images\"] != null) {\n      var jsonImages = json[\"images\"];\n      this._images = [];\n\n      for (var i = 0; i < jsonImages.length; i++) {\n        var image = new Image();\n        image.parse(jsonImages[i], errors);\n        this.addImage(image);\n      }\n    }\n  };\n\n  ImageSet.prototype.addImage = function (image) {\n    if (!image.parent) {\n      this._images.push(image);\n\n      image.setParent(this);\n    } else {\n      throw new Error(\"This image already belongs to another ImageSet\");\n    }\n  };\n\n  ImageSet.prototype.indexOf = function (cardElement) {\n    return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\n  };\n\n  return ImageSet;\n}(CardElementContainer);\n\nexports.ImageSet = ImageSet;\n\nvar MediaSource =\n/** @class */\nfunction (_super) {\n  __extends(MediaSource, _super);\n\n  function MediaSource(url, mimeType) {\n    if (url === void 0) {\n      url = undefined;\n    }\n\n    if (mimeType === void 0) {\n      mimeType = undefined;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.url = url;\n    _this.mimeType = mimeType;\n    return _this;\n  }\n\n  MediaSource.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.mimeType = Utils.getStringValue(json[\"mimeType\"]);\n    this.url = Utils.getStringValue(json[\"url\"]);\n  };\n\n  MediaSource.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"mimeType\", this.mimeType);\n    Utils.setProperty(result, \"url\", this.url);\n    return result;\n  };\n\n  return MediaSource;\n}(SerializableObject);\n\nexports.MediaSource = MediaSource;\n\nvar Media =\n/** @class */\nfunction (_super) {\n  __extends(Media, _super);\n\n  function Media() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.sources = [];\n    return _this;\n  }\n\n  Media.prototype.getPosterUrl = function () {\n    return this.poster ? this.poster : this.hostConfig.media.defaultPoster;\n  };\n\n  Media.prototype.processSources = function () {\n    this._selectedSources = [];\n    this._selectedMediaType = undefined;\n\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var source = _a[_i];\n      var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];\n\n      if (mimeComponents.length == 2) {\n        if (!this._selectedMediaType) {\n          var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);\n\n          if (index >= 0) {\n            this._selectedMediaType = Media.supportedMediaTypes[index];\n          }\n        }\n\n        if (mimeComponents[0] == this._selectedMediaType) {\n          this._selectedSources.push(source);\n        }\n      }\n    }\n  };\n\n  Media.prototype.renderPoster = function () {\n    var _this = this;\n\n    var playButtonArrowWidth = 12;\n    var playButtonArrowHeight = 15;\n    var posterRootElement = document.createElement(\"div\");\n    posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\n    posterRootElement.setAttribute(\"role\", \"contentinfo\");\n    posterRootElement.setAttribute(\"aria-label\", this.altText ? this.altText : \"Media content\");\n    posterRootElement.style.position = \"relative\";\n    posterRootElement.style.display = \"flex\";\n    var posterUrl = this.getPosterUrl();\n\n    if (posterUrl) {\n      var posterImageElement_1 = document.createElement(\"img\");\n      posterImageElement_1.style.width = \"100%\";\n      posterImageElement_1.style.height = \"100%\";\n\n      posterImageElement_1.onerror = function (e) {\n        posterImageElement_1.parentNode.removeChild(posterImageElement_1);\n        posterRootElement.classList.add(\"empty\");\n        posterRootElement.style.minHeight = \"150px\";\n      };\n\n      posterImageElement_1.src = posterUrl;\n      posterRootElement.appendChild(posterImageElement_1);\n    } else {\n      posterRootElement.classList.add(\"empty\");\n      posterRootElement.style.minHeight = \"150px\";\n    }\n\n    if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {\n      var playButtonOuterElement = document.createElement(\"div\");\n      playButtonOuterElement.setAttribute(\"role\", \"button\");\n      playButtonOuterElement.setAttribute(\"aria-label\", \"Play media\");\n      playButtonOuterElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton\");\n      playButtonOuterElement.style.display = \"flex\";\n      playButtonOuterElement.style.alignItems = \"center\";\n      playButtonOuterElement.style.justifyContent = \"center\";\n\n      playButtonOuterElement.onclick = function (e) {\n        if (_this.hostConfig.media.allowInlinePlayback) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          var mediaPlayerElement = _this.renderMediaPlayer();\n\n          _this.renderedElement.innerHTML = \"\";\n\n          _this.renderedElement.appendChild(mediaPlayerElement);\n\n          mediaPlayerElement.play();\n        } else {\n          if (Media.onPlay) {\n            e.preventDefault();\n            e.cancelBubble = true;\n            Media.onPlay(_this);\n          }\n        }\n      };\n\n      var playButtonInnerElement = document.createElement(\"div\");\n      playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\n      playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\n      playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\n      playButtonInnerElement.style.borderTopWidth = playButtonArrowHeight / 2 + \"px\";\n      playButtonInnerElement.style.borderBottomWidth = playButtonArrowHeight / 2 + \"px\";\n      playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\n      playButtonInnerElement.style.borderRightWidth = \"0\";\n      playButtonInnerElement.style.borderStyle = \"solid\";\n      playButtonInnerElement.style.borderTopColor = \"transparent\";\n      playButtonInnerElement.style.borderRightColor = \"transparent\";\n      playButtonInnerElement.style.borderBottomColor = \"transparent\";\n      playButtonInnerElement.style.transform = \"translate(\" + playButtonArrowWidth / 10 + \"px,0px)\";\n      playButtonOuterElement.appendChild(playButtonInnerElement);\n      var playButtonContainer = document.createElement(\"div\");\n      playButtonContainer.style.position = \"absolute\";\n      playButtonContainer.style.left = \"0\";\n      playButtonContainer.style.top = \"0\";\n      playButtonContainer.style.width = \"100%\";\n      playButtonContainer.style.height = \"100%\";\n      playButtonContainer.style.display = \"flex\";\n      playButtonContainer.style.justifyContent = \"center\";\n      playButtonContainer.style.alignItems = \"center\";\n      playButtonContainer.appendChild(playButtonOuterElement);\n      posterRootElement.appendChild(playButtonContainer);\n    }\n\n    return posterRootElement;\n  };\n\n  Media.prototype.renderMediaPlayer = function () {\n    var mediaElement;\n\n    if (this._selectedMediaType == \"video\") {\n      var videoPlayer = document.createElement(\"video\");\n      var posterUrl = this.getPosterUrl();\n\n      if (posterUrl) {\n        videoPlayer.poster = posterUrl;\n      }\n\n      mediaElement = videoPlayer;\n    } else {\n      mediaElement = document.createElement(\"audio\");\n    }\n\n    mediaElement.controls = true;\n    mediaElement.preload = \"none\";\n    mediaElement.style.width = \"100%\";\n\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var source = _a[_i];\n      var src = document.createElement(\"source\");\n      src.src = source.url;\n      src.type = source.mimeType;\n      mediaElement.appendChild(src);\n    }\n\n    return mediaElement;\n  };\n\n  Media.prototype.internalRender = function () {\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-media\");\n    this.processSources();\n    element.appendChild(this.renderPoster());\n    return element;\n  };\n\n  Media.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.poster = Utils.getStringValue(json[\"poster\"]);\n    this.altText = Utils.getStringValue(json[\"altText\"]);\n    this.sources = [];\n\n    if (Array.isArray(json[\"sources\"])) {\n      for (var _i = 0, _a = json[\"sources\"]; _i < _a.length; _i++) {\n        var jsonSource = _a[_i];\n        var source = new MediaSource();\n        source.parse(jsonSource, errors);\n        this.sources.push(source);\n      }\n    }\n  };\n\n  Media.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"poster\", this.poster);\n    Utils.setProperty(result, \"altText\", this.altText);\n    /*\r\n    if (this.sources.length > 0) {\r\n        let serializedSources = [];\r\n          for (let source of this.sources) {\r\n            serializedSources.push(source.toJSON());\r\n        }\r\n          Utils.setProperty(result, \"sources\", serializedSources);\r\n    }\r\n    */\n\n    Utils.setArrayProperty(result, \"sources\", this.sources);\n    return result;\n  };\n\n  Media.prototype.getJsonTypeName = function () {\n    return \"Media\";\n  };\n\n  Media.prototype.getResourceInformation = function () {\n    var result = [];\n    var posterUrl = this.getPosterUrl();\n\n    if (!Utils.isNullOrEmpty(posterUrl)) {\n      result.push({\n        url: posterUrl,\n        mimeType: \"image\"\n      });\n    }\n\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var mediaSource = _a[_i];\n\n      if (!Utils.isNullOrEmpty(mediaSource.url)) {\n        result.push({\n          url: mediaSource.url,\n          mimeType: mediaSource.mimeType\n        });\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(Media.prototype, \"selectedMediaType\", {\n    get: function get() {\n      return this._selectedMediaType;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Media.supportedMediaTypes = [\"audio\", \"video\"];\n  return Media;\n}(CardElement);\n\nexports.Media = Media;\n\nvar InputValidationOptions =\n/** @class */\nfunction (_super) {\n  __extends(InputValidationOptions, _super);\n\n  function InputValidationOptions() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.necessity = Enums.InputValidationNecessity.Optional;\n    _this.errorMessage = undefined;\n    return _this;\n  }\n\n  InputValidationOptions.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n\n    this.necessity = Utils.getEnumValue(Enums.InputValidationNecessity, json[\"necessity\"], this.necessity);\n    this.errorMessage = Utils.getStringValue(json[\"errorMessage\"]);\n  };\n\n  InputValidationOptions.prototype.toJSON = function () {\n    if (this.necessity != Enums.InputValidationNecessity.Optional || !Utils.isNullOrEmpty(this.errorMessage)) {\n      var result = _super.prototype.toJSON.call(this);\n\n      Utils.setEnumProperty(Enums.InputValidationNecessity, result, \"necessity\", this.necessity, Enums.InputValidationNecessity.Optional);\n      Utils.setProperty(result, \"errorMessage\", this.errorMessage);\n      return result;\n    } else {\n      return null;\n    }\n  };\n\n  return InputValidationOptions;\n}(SerializableObject);\n\nexports.InputValidationOptions = InputValidationOptions;\n\nvar Input =\n/** @class */\nfunction (_super) {\n  __extends(Input, _super);\n\n  function Input() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.validation = new InputValidationOptions();\n    return _this;\n  }\n\n  Object.defineProperty(Input.prototype, \"isNullable\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"renderedInputControlElement\", {\n    get: function get() {\n      return this._renderedInputControlElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"inputControlContainerElement\", {\n    get: function get() {\n      return this._inputControlContainerElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Input.prototype.overrideInternalRender = function () {\n    var hostConfig = this.hostConfig;\n    this._outerContainerElement = document.createElement(\"div\");\n    this._outerContainerElement.style.display = \"flex\";\n    this._outerContainerElement.style.flexDirection = \"column\";\n    this._inputControlContainerElement = document.createElement(\"div\");\n    this._inputControlContainerElement.className = hostConfig.makeCssClassName(\"ac-input-container\");\n    this._inputControlContainerElement.style.display = \"flex\";\n    this._renderedInputControlElement = this.internalRender();\n    this._renderedInputControlElement.style.minWidth = \"0px\";\n\n    if (AdaptiveCard.useBuiltInInputValidation && this.isNullable && this.validation.necessity == Enums.InputValidationNecessity.RequiredWithVisualCue) {\n      this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\n    }\n\n    this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\n\n    this._outerContainerElement.appendChild(this._inputControlContainerElement);\n\n    return this._outerContainerElement;\n  };\n\n  Input.prototype.valueChanged = function () {\n    this.resetValidationFailureCue();\n\n    if (this.onValueChanged) {\n      this.onValueChanged(this);\n    }\n\n    raiseInputValueChangedEvent(this);\n  };\n\n  Input.prototype.resetValidationFailureCue = function () {\n    if (AdaptiveCard.useBuiltInInputValidation && this.renderedElement) {\n      this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\n\n      if (this._errorMessageElement) {\n        this._outerContainerElement.removeChild(this._errorMessageElement);\n\n        this._errorMessageElement = null;\n      }\n    }\n  };\n\n  Input.prototype.showValidationErrorMessage = function () {\n    if (this.renderedElement && AdaptiveCard.useBuiltInInputValidation && AdaptiveCard.displayInputValidationErrors && !Utils.isNullOrEmpty(this.validation.errorMessage)) {\n      this._errorMessageElement = document.createElement(\"span\");\n      this._errorMessageElement.className = this.hostConfig.makeCssClassName(\"ac-input-validation-error-message\");\n      this._errorMessageElement.textContent = this.validation.errorMessage;\n\n      this._outerContainerElement.appendChild(this._errorMessageElement);\n    }\n  };\n\n  Input.prototype.parseInputValue = function (value) {\n    return value;\n  };\n\n  Input.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"title\", this.title);\n    Utils.setProperty(result, \"value\", this.renderedElement && !Utils.isNullOrEmpty(this.value) ? this.value : this.defaultValue);\n\n    if (AdaptiveCard.useBuiltInInputValidation) {\n      Utils.setProperty(result, \"validation\", this.validation.toJSON());\n    }\n\n    return result;\n  };\n\n  Input.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (Utils.isNullOrEmpty(this.id)) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"All inputs must have a unique Id\"\n      });\n    }\n  };\n\n  Input.prototype.validateValue = function () {\n    if (AdaptiveCard.useBuiltInInputValidation) {\n      this.resetValidationFailureCue();\n      var result = this.validation.necessity != Enums.InputValidationNecessity.Optional ? !Utils.isNullOrEmpty(this.value) : true;\n\n      if (!result && this.renderedElement) {\n        this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\n\n        this.showValidationErrorMessage();\n      }\n\n      return result;\n    } else {\n      return true;\n    }\n  };\n\n  Input.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.id = Utils.getStringValue(json[\"id\"]);\n    this.defaultValue = Utils.getStringValue(json[\"value\"]);\n\n    if (AdaptiveCard.useBuiltInInputValidation) {\n      var jsonValidation = json[\"validation\"];\n\n      if (jsonValidation) {\n        this.validation.parse(jsonValidation);\n      }\n    }\n  };\n\n  Input.prototype.getAllInputs = function () {\n    return [this];\n  };\n\n  Object.defineProperty(Input.prototype, \"defaultValue\", {\n    get: function get() {\n      return this._defaultValue;\n    },\n    set: function set(value) {\n      this._defaultValue = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"isInteractive\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Input;\n}(CardElement);\n\nexports.Input = Input;\n\nvar TextInput =\n/** @class */\nfunction (_super) {\n  __extends(TextInput, _super);\n\n  function TextInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.isMultiline = false;\n    _this.style = Enums.InputTextStyle.Text;\n    return _this;\n  }\n\n  TextInput.prototype.internalRender = function () {\n    var _this = this;\n\n    if (this.isMultiline) {\n      var textareaElement = document.createElement(\"textarea\");\n      textareaElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\n      textareaElement.style.flex = \"1 1 auto\";\n      textareaElement.tabIndex = 0;\n\n      if (!Utils.isNullOrEmpty(this.placeholder)) {\n        textareaElement.placeholder = this.placeholder;\n        textareaElement.setAttribute(\"aria-label\", this.placeholder);\n      }\n\n      if (!Utils.isNullOrEmpty(this.defaultValue)) {\n        textareaElement.value = this.defaultValue;\n      }\n\n      if (this.maxLength && this.maxLength > 0) {\n        textareaElement.maxLength = this.maxLength;\n      }\n\n      textareaElement.oninput = function () {\n        _this.valueChanged();\n      };\n\n      textareaElement.onkeypress = function (e) {\n        // Ctrl+Enter pressed\n        if (e.keyCode == 10 && _this.inlineAction) {\n          _this.inlineAction.execute();\n        }\n      };\n\n      return textareaElement;\n    } else {\n      var inputElement = document.createElement(\"input\");\n      inputElement.type = Enums.InputTextStyle[this.style].toLowerCase();\n      inputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\n      inputElement.style.flex = \"1 1 auto\";\n      inputElement.tabIndex = 0;\n\n      if (!Utils.isNullOrEmpty(this.placeholder)) {\n        inputElement.placeholder = this.placeholder;\n        inputElement.setAttribute(\"aria-label\", this.placeholder);\n      }\n\n      if (!Utils.isNullOrEmpty(this.defaultValue)) {\n        inputElement.value = this.defaultValue;\n      }\n\n      if (this.maxLength && this.maxLength > 0) {\n        inputElement.maxLength = this.maxLength;\n      }\n\n      inputElement.oninput = function () {\n        _this.valueChanged();\n      };\n\n      inputElement.onkeypress = function (e) {\n        // Enter pressed\n        if (e.keyCode == 13 && _this.inlineAction) {\n          _this.inlineAction.execute();\n        }\n      };\n\n      return inputElement;\n    }\n  };\n\n  TextInput.prototype.overrideInternalRender = function () {\n    var _this = this;\n\n    var renderedInputControl = _super.prototype.overrideInternalRender.call(this);\n\n    if (this.inlineAction) {\n      var button_1 = document.createElement(\"button\");\n      button_1.className = this.hostConfig.makeCssClassName(\"ac-inlineActionButton\");\n\n      button_1.onclick = function (e) {\n        e.preventDefault();\n        e.cancelBubble = true;\n\n        _this.inlineAction.execute();\n      };\n\n      if (!Utils.isNullOrEmpty(this.inlineAction.iconUrl)) {\n        button_1.classList.add(\"iconOnly\");\n        var icon_1 = document.createElement(\"img\");\n        icon_1.style.height = \"100%\"; // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\n        // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\n        // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\n        // after the image has loaded and been gicven its final size. The below trick also fixes that.\n\n        icon_1.style.display = \"none\";\n\n        icon_1.onload = function () {\n          icon_1.style.removeProperty(\"display\");\n        };\n\n        icon_1.onerror = function () {\n          button_1.removeChild(icon_1);\n          button_1.classList.remove(\"iconOnly\");\n          button_1.classList.add(\"textOnly\");\n          button_1.textContent = !Utils.isNullOrEmpty(_this.inlineAction.title) ? _this.inlineAction.title : \"Title\";\n        };\n\n        icon_1.src = this.inlineAction.iconUrl;\n        button_1.appendChild(icon_1);\n\n        if (!Utils.isNullOrEmpty(this.inlineAction.title)) {\n          button_1.title = this.inlineAction.title;\n        }\n      } else {\n        button_1.classList.add(\"textOnly\");\n        button_1.textContent = !Utils.isNullOrEmpty(this.inlineAction.title) ? this.inlineAction.title : \"Title\";\n      }\n\n      button_1.style.marginLeft = \"8px\";\n      this.inputControlContainerElement.appendChild(button_1);\n    }\n\n    return renderedInputControl;\n  };\n\n  TextInput.prototype.getJsonTypeName = function () {\n    return \"Input.Text\";\n  };\n\n  TextInput.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result && this.inlineAction) {\n      result = this.inlineAction.getActionById(id);\n    }\n\n    return result;\n  };\n\n  TextInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"placeholder\", this.placeholder);\n    Utils.setNumberProperty(result, \"maxLength\", this.maxLength);\n    Utils.setProperty(result, \"isMultiline\", this.isMultiline, false);\n    Utils.setEnumProperty(Enums.InputTextStyle, result, \"style\", this.style, Enums.InputTextStyle.Text);\n\n    if (this._inlineAction) {\n      Utils.setProperty(result, \"inlineAction\", this._inlineAction.toJSON());\n    }\n\n    return result;\n  };\n\n  TextInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.maxLength = Utils.getNumberValue(json[\"maxLength\"]);\n    this.isMultiline = Utils.getBoolValue(json[\"isMultiline\"], this.isMultiline);\n    this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\n    this.style = Utils.getEnumValue(Enums.InputTextStyle, json[\"style\"], this.style);\n    this.inlineAction = createActionInstance(this, json[\"inlineAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n  };\n\n  Object.defineProperty(TextInput.prototype, \"inlineAction\", {\n    get: function get() {\n      return this._inlineAction;\n    },\n    set: function set(value) {\n      this._inlineAction = value;\n\n      if (this._inlineAction) {\n        this._inlineAction.setParent(this);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TextInput.prototype, \"value\", {\n    get: function get() {\n      if (this.renderedInputControlElement) {\n        if (this.isMultiline) {\n          return this.renderedInputControlElement.value;\n        } else {\n          return this.renderedInputControlElement.value;\n        }\n      } else {\n        return null;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return TextInput;\n}(Input);\n\nexports.TextInput = TextInput;\n\nvar ToggleInput =\n/** @class */\nfunction (_super) {\n  __extends(ToggleInput, _super);\n\n  function ToggleInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.valueOn = \"true\";\n    _this.valueOff = \"false\";\n    _this.wrap = false;\n    return _this;\n  }\n\n  ToggleInput.prototype.internalRender = function () {\n    var _this = this;\n\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\n    element.style.width = \"100%\";\n    element.style.display = \"flex\";\n    element.style.alignItems = \"center\";\n    this._checkboxInputElement = document.createElement(\"input\");\n    this._checkboxInputElement.id = Utils.generateUniqueId();\n    this._checkboxInputElement.type = \"checkbox\";\n    this._checkboxInputElement.style.display = \"inline-block\";\n    this._checkboxInputElement.style.verticalAlign = \"middle\";\n    this._checkboxInputElement.style.margin = \"0\";\n    this._checkboxInputElement.style.flex = \"0 0 auto\";\n\n    this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\n\n    this._checkboxInputElement.tabIndex = 0;\n\n    if (this.defaultValue == this.valueOn) {\n      this._checkboxInputElement.checked = true;\n    }\n\n    this._checkboxInputElement.onchange = function () {\n      _this.valueChanged();\n    };\n\n    Utils.appendChild(element, this._checkboxInputElement);\n\n    if (!Utils.isNullOrEmpty(this.title) || this.isDesignMode()) {\n      var label = new Label();\n      label.setParent(this);\n      label.forElementId = this._checkboxInputElement.id;\n      label.hostConfig = this.hostConfig;\n      label.text = Utils.isNullOrEmpty(this.title) ? this.getJsonTypeName() : this.title;\n      label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\n      label.wrap = this.wrap;\n      var labelElement = label.render();\n      labelElement.style.display = \"inline-block\";\n      labelElement.style.flex = \"1 1 auto\";\n      labelElement.style.marginLeft = \"6px\";\n      labelElement.style.verticalAlign = \"middle\";\n      var spacerElement = document.createElement(\"div\");\n      spacerElement.style.width = \"6px\";\n      Utils.appendChild(element, spacerElement);\n      Utils.appendChild(element, labelElement);\n    }\n\n    return element;\n  };\n\n  Object.defineProperty(ToggleInput.prototype, \"isNullable\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ToggleInput.prototype.getJsonTypeName = function () {\n    return \"Input.Toggle\";\n  };\n\n  ToggleInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"valueOn\", this.valueOn, \"true\");\n    Utils.setProperty(result, \"valueOff\", this.valueOff, \"false\");\n    Utils.setProperty(result, \"wrap\", this.wrap);\n    return result;\n  };\n\n  ToggleInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.title = Utils.getStringValue(json[\"title\"]);\n    this.valueOn = Utils.getStringValue(json[\"valueOn\"], this.valueOn);\n    this.valueOff = Utils.getStringValue(json[\"valueOff\"], this.valueOff);\n    this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\n  };\n\n  Object.defineProperty(ToggleInput.prototype, \"value\", {\n    get: function get() {\n      if (this._checkboxInputElement) {\n        return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\n      } else {\n        return null;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ToggleInput;\n}(Input);\n\nexports.ToggleInput = ToggleInput;\n\nvar Choice =\n/** @class */\nfunction (_super) {\n  __extends(Choice, _super);\n\n  function Choice(title, value) {\n    if (title === void 0) {\n      title = undefined;\n    }\n\n    if (value === void 0) {\n      value = undefined;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.title = title;\n    _this.value = value;\n    return _this;\n  }\n\n  Choice.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n\n    this.title = Utils.getStringValue(json[\"title\"], \"\");\n    this.value = Utils.getStringValue(json[\"value\"], \"\");\n  };\n\n  Choice.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"title\", this.title);\n    Utils.setProperty(result, \"value\", this.value);\n    return result;\n  };\n\n  return Choice;\n}(SerializableObject);\n\nexports.Choice = Choice;\n\nvar ChoiceSetInput =\n/** @class */\nfunction (_super) {\n  __extends(ChoiceSetInput, _super);\n\n  function ChoiceSetInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.choices = [];\n    _this.isCompact = false;\n    _this.isMultiSelect = false;\n    _this.wrap = false;\n    return _this;\n  }\n\n  ChoiceSetInput.getUniqueCategoryName = function () {\n    var uniqueCwtegoryName = \"__ac-category\" + ChoiceSetInput.uniqueCategoryCounter;\n    ChoiceSetInput.uniqueCategoryCounter++;\n    return uniqueCwtegoryName;\n  }; // Make sure `aria-current` is applied to the currently-selected item\n\n\n  ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {\n    var options = this._selectElement.options;\n\n    if (options) {\n      for (var i = 0; i < options.length; i++) {\n        if (options[i].selected) {\n          options[i].setAttribute(\"aria-current\", \"true\");\n        } else {\n          options[i].removeAttribute(\"aria-current\");\n        }\n      }\n    }\n  };\n\n  ChoiceSetInput.prototype.internalRender = function () {\n    var _this = this;\n\n    if (!this.isMultiSelect) {\n      if (this.isCompact) {\n        // Render as a combo box\n        this._selectElement = document.createElement(\"select\");\n        this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\n        this._selectElement.style.width = \"100%\";\n        var option = document.createElement(\"option\");\n        option.selected = true;\n        option.disabled = true;\n        option.hidden = true;\n        option.value = \"\";\n\n        if (this.placeholder) {\n          option.text = this.placeholder;\n        }\n\n        Utils.appendChild(this._selectElement, option);\n\n        for (var i = 0; i < this.choices.length; i++) {\n          var option_1 = document.createElement(\"option\");\n          option_1.value = this.choices[i].value;\n          option_1.text = this.choices[i].title;\n          option_1.setAttribute(\"aria-label\", this.choices[i].title);\n\n          if (this.choices[i].value == this.defaultValue) {\n            option_1.selected = true;\n          }\n\n          Utils.appendChild(this._selectElement, option_1);\n        }\n\n        this._selectElement.onchange = function () {\n          _this.internalApplyAriaCurrent();\n\n          _this.valueChanged();\n        };\n\n        this.internalApplyAriaCurrent();\n        return this._selectElement;\n      } else {\n        // Render as a series of radio buttons\n        var uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\n        var element = document.createElement(\"div\");\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-expanded\");\n        element.style.width = \"100%\";\n        this._toggleInputs = [];\n\n        for (var i_1 = 0; i_1 < this.choices.length; i_1++) {\n          var radioInput = document.createElement(\"input\");\n          radioInput.id = Utils.generateUniqueId();\n          radioInput.type = \"radio\";\n          radioInput.style.margin = \"0\";\n          radioInput.style.display = \"inline-block\";\n          radioInput.style.verticalAlign = \"middle\";\n          radioInput.name = Utils.isNullOrEmpty(this.id) ? uniqueCategoryName : this.id;\n          radioInput.value = this.choices[i_1].value;\n          radioInput.style.flex = \"0 0 auto\";\n          radioInput.setAttribute(\"aria-label\", this.choices[i_1].title);\n\n          if (this.choices[i_1].value == this.defaultValue) {\n            radioInput.checked = true;\n          }\n\n          radioInput.onchange = function () {\n            _this.valueChanged();\n          };\n\n          this._toggleInputs.push(radioInput);\n\n          var label = new Label();\n          label.setParent(this);\n          label.forElementId = radioInput.id;\n          label.hostConfig = this.hostConfig;\n          label.text = Utils.isNullOrEmpty(this.choices[i_1].title) ? \"Choice \" + i_1 : this.choices[i_1].title;\n          label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\n          label.wrap = this.wrap;\n          var labelElement = label.render();\n          labelElement.style.display = \"inline-block\";\n          labelElement.style.flex = \"1 1 auto\";\n          labelElement.style.marginLeft = \"6px\";\n          labelElement.style.verticalAlign = \"middle\";\n          var spacerElement = document.createElement(\"div\");\n          spacerElement.style.width = \"6px\";\n          var compoundInput = document.createElement(\"div\");\n          compoundInput.style.display = \"flex\";\n          compoundInput.style.alignItems = \"center\";\n          Utils.appendChild(compoundInput, radioInput);\n          Utils.appendChild(compoundInput, spacerElement);\n          Utils.appendChild(compoundInput, labelElement);\n          Utils.appendChild(element, compoundInput);\n        }\n\n        return element;\n      }\n    } else {\n      // Render as a list of toggle inputs\n      var defaultValues = this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : null;\n      var element = document.createElement(\"div\");\n      element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-multiSelect\");\n      element.style.width = \"100%\";\n      this._toggleInputs = [];\n\n      for (var i_2 = 0; i_2 < this.choices.length; i_2++) {\n        var checkboxInput = document.createElement(\"input\");\n        checkboxInput.id = Utils.generateUniqueId();\n        checkboxInput.type = \"checkbox\";\n        checkboxInput.style.margin = \"0\";\n        checkboxInput.style.display = \"inline-block\";\n        checkboxInput.style.verticalAlign = \"middle\";\n        checkboxInput.value = this.choices[i_2].value;\n        checkboxInput.style.flex = \"0 0 auto\";\n        checkboxInput.setAttribute(\"aria-label\", this.choices[i_2].title);\n\n        if (defaultValues) {\n          if (defaultValues.indexOf(this.choices[i_2].value) >= 0) {\n            checkboxInput.checked = true;\n          }\n        }\n\n        checkboxInput.onchange = function () {\n          _this.valueChanged();\n        };\n\n        this._toggleInputs.push(checkboxInput);\n\n        var label = new Label();\n        label.setParent(this);\n        label.forElementId = checkboxInput.id;\n        label.hostConfig = this.hostConfig;\n        label.text = Utils.isNullOrEmpty(this.choices[i_2].title) ? \"Choice \" + i_2 : this.choices[i_2].title;\n        label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\n        label.wrap = this.wrap;\n        var labelElement = label.render();\n        labelElement.style.display = \"inline-block\";\n        labelElement.style.flex = \"1 1 auto\";\n        labelElement.style.marginLeft = \"6px\";\n        labelElement.style.verticalAlign = \"middle\";\n        var spacerElement = document.createElement(\"div\");\n        spacerElement.style.width = \"6px\";\n        var compoundInput = document.createElement(\"div\");\n        compoundInput.style.display = \"flex\";\n        compoundInput.style.alignItems = \"center\";\n        Utils.appendChild(compoundInput, checkboxInput);\n        Utils.appendChild(compoundInput, spacerElement);\n        Utils.appendChild(compoundInput, labelElement);\n        Utils.appendChild(element, compoundInput);\n      }\n\n      return element;\n    }\n  };\n\n  ChoiceSetInput.prototype.getJsonTypeName = function () {\n    return \"Input.ChoiceSet\";\n  };\n\n  ChoiceSetInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"placeholder\", this.placeholder);\n    /*\r\n    let choices = [];\r\n      if (this.choices) {\r\n        for (let choice of this.choices) {\r\n            choices.push(choice.toJSON());\r\n        }\r\n    }\r\n      Utils.setProperty(result, \"choices\", choices);\r\n    */\n\n    Utils.setArrayProperty(result, \"choices\", this.choices);\n    Utils.setProperty(result, \"style\", this.isCompact ? null : \"expanded\");\n    Utils.setProperty(result, \"isMultiSelect\", this.isMultiSelect, false);\n    Utils.setProperty(result, \"wrap\", this.wrap, false);\n    return result;\n  };\n\n  ChoiceSetInput.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this.choices.length == 0) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.CollectionCantBeEmpty,\n        message: \"An Input.ChoiceSet must have at least one choice defined.\"\n      });\n    }\n\n    for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\n      var choice = _a[_i];\n\n      if (!choice.title || !choice.value) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.PropertyCantBeNull,\n          message: \"All choices in an Input.ChoiceSet must have their title and value properties set.\"\n        });\n      }\n    }\n  };\n\n  ChoiceSetInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.isCompact = !(json[\"style\"] === \"expanded\");\n    this.isMultiSelect = Utils.getBoolValue(json[\"isMultiSelect\"], this.isMultiSelect);\n    this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\n    this.choices = [];\n\n    if (Array.isArray(json[\"choices\"])) {\n      for (var _i = 0, _a = json[\"choices\"]; _i < _a.length; _i++) {\n        var jsonChoice = _a[_i];\n        var choice = new Choice();\n        choice.parse(jsonChoice);\n        this.choices.push(choice);\n      }\n    }\n\n    this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\n  };\n\n  Object.defineProperty(ChoiceSetInput.prototype, \"value\", {\n    get: function get() {\n      if (!this.isMultiSelect) {\n        if (this.isCompact) {\n          if (this._selectElement) {\n            return this._selectElement.selectedIndex > 0 ? this._selectElement.value : null;\n          }\n\n          return null;\n        } else {\n          if (!this._toggleInputs || this._toggleInputs.length == 0) {\n            return null;\n          }\n\n          for (var i = 0; i < this._toggleInputs.length; i++) {\n            if (this._toggleInputs[i].checked) {\n              return this._toggleInputs[i].value;\n            }\n          }\n\n          return null;\n        }\n      } else {\n        if (!this._toggleInputs || this._toggleInputs.length == 0) {\n          return null;\n        }\n\n        var result = \"\";\n\n        for (var i = 0; i < this._toggleInputs.length; i++) {\n          if (this._toggleInputs[i].checked) {\n            if (result != \"\") {\n              result += this.hostConfig.choiceSetInputValueSeparator;\n            }\n\n            result += this._toggleInputs[i].value;\n          }\n        }\n\n        return result == \"\" ? null : result;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ChoiceSetInput.uniqueCategoryCounter = 0;\n  return ChoiceSetInput;\n}(Input);\n\nexports.ChoiceSetInput = ChoiceSetInput;\n\nvar NumberInput =\n/** @class */\nfunction (_super) {\n  __extends(NumberInput, _super);\n\n  function NumberInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  NumberInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._numberInputElement = document.createElement(\"input\");\n\n    this._numberInputElement.setAttribute(\"type\", \"number\");\n\n    if (this.min) {\n      this._numberInputElement.setAttribute(\"min\", this.min.toString());\n    }\n\n    if (this.max) {\n      this._numberInputElement.setAttribute(\"max\", this.max.toString());\n    }\n\n    this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\n    this._numberInputElement.style.width = \"100%\";\n    this._numberInputElement.tabIndex = 0;\n\n    if (!Utils.isNullOrEmpty(this.defaultValue)) {\n      this._numberInputElement.value = this.defaultValue;\n    }\n\n    if (!Utils.isNullOrEmpty(this.placeholder)) {\n      this._numberInputElement.placeholder = this.placeholder;\n\n      this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\n    }\n\n    this._numberInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n\n    return this._numberInputElement;\n  };\n\n  NumberInput.prototype.getJsonTypeName = function () {\n    return \"Input.Number\";\n  };\n\n  NumberInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"placeholder\", this.placeholder);\n    Utils.setNumberProperty(result, \"min\", this.min);\n    Utils.setNumberProperty(result, \"max\", this.max);\n    return result;\n  };\n\n  NumberInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\n    this.min = Utils.getNumberValue(json[\"min\"]);\n    this.max = Utils.getNumberValue(json[\"max\"]);\n  };\n\n  Object.defineProperty(NumberInput.prototype, \"min\", {\n    get: function get() {\n      return this._min;\n    },\n    set: function set(value) {\n      this._min = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberInput.prototype, \"max\", {\n    get: function get() {\n      return this._max;\n    },\n    set: function set(value) {\n      this._max = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberInput.prototype, \"value\", {\n    get: function get() {\n      return this._numberInputElement ? this._numberInputElement.value : undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberInput.prototype, \"valueAsNumber\", {\n    get: function get() {\n      return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return NumberInput;\n}(Input);\n\nexports.NumberInput = NumberInput;\n\nvar DateInput =\n/** @class */\nfunction (_super) {\n  __extends(DateInput, _super);\n\n  function DateInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DateInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._dateInputElement = document.createElement(\"input\");\n\n    this._dateInputElement.setAttribute(\"type\", \"date\");\n\n    this._dateInputElement.setAttribute(\"min\", this.min);\n\n    this._dateInputElement.setAttribute(\"max\", this.max);\n\n    this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\n    this._dateInputElement.style.width = \"100%\";\n\n    this._dateInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n\n    if (!Utils.isNullOrEmpty(this.defaultValue)) {\n      this._dateInputElement.value = this.defaultValue;\n    }\n\n    return this._dateInputElement;\n  };\n\n  DateInput.prototype.getJsonTypeName = function () {\n    return \"Input.Date\";\n  };\n\n  DateInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"min\", this.min);\n    Utils.setProperty(result, \"max\", this.max);\n    return result;\n  };\n\n  DateInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.min = Utils.getStringValue(json[\"min\"]);\n    this.max = Utils.getStringValue(json[\"max\"]);\n  };\n\n  Object.defineProperty(DateInput.prototype, \"min\", {\n    get: function get() {\n      return this._min;\n    },\n    set: function set(value) {\n      this._min = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateInput.prototype, \"max\", {\n    get: function get() {\n      return this._max;\n    },\n    set: function set(value) {\n      this._max = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateInput.prototype, \"value\", {\n    get: function get() {\n      return this._dateInputElement ? this._dateInputElement.value : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return DateInput;\n}(Input);\n\nexports.DateInput = DateInput;\n\nvar TimeInput =\n/** @class */\nfunction (_super) {\n  __extends(TimeInput, _super);\n\n  function TimeInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._timeInputElement = document.createElement(\"input\");\n\n    this._timeInputElement.setAttribute(\"type\", \"time\");\n\n    this._timeInputElement.setAttribute(\"min\", this.min);\n\n    this._timeInputElement.setAttribute(\"max\", this.max);\n\n    this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\n    this._timeInputElement.style.width = \"100%\";\n\n    this._timeInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n\n    if (!Utils.isNullOrEmpty(this.defaultValue)) {\n      this._timeInputElement.value = this.defaultValue;\n    }\n\n    return this._timeInputElement;\n  };\n\n  TimeInput.prototype.parseInputValue = function (value) {\n    if (/^[0-9]{2}:[0-9]{2}$/.test(value)) {\n      return value;\n    } else {\n      return null;\n    }\n  };\n\n  TimeInput.prototype.getJsonTypeName = function () {\n    return \"Input.Time\";\n  };\n\n  TimeInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"min\", this.min);\n    Utils.setProperty(result, \"max\", this.max);\n    return result;\n  };\n\n  TimeInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.min = Utils.getStringValue(json[\"min\"]);\n    this.max = Utils.getStringValue(json[\"max\"]);\n  };\n\n  Object.defineProperty(TimeInput.prototype, \"min\", {\n    get: function get() {\n      return this._min;\n    },\n    set: function set(value) {\n      this._min = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeInput.prototype, \"max\", {\n    get: function get() {\n      return this._max;\n    },\n    set: function set(value) {\n      this._max = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeInput.prototype, \"value\", {\n    get: function get() {\n      return this._timeInputElement ? this._timeInputElement.value : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return TimeInput;\n}(Input);\n\nexports.TimeInput = TimeInput;\nvar ActionButtonState;\n\n(function (ActionButtonState) {\n  ActionButtonState[ActionButtonState[\"Normal\"] = 0] = \"Normal\";\n  ActionButtonState[ActionButtonState[\"Expanded\"] = 1] = \"Expanded\";\n  ActionButtonState[ActionButtonState[\"Subdued\"] = 2] = \"Subdued\";\n})(ActionButtonState || (ActionButtonState = {}));\n\nvar ActionButton =\n/** @class */\nfunction () {\n  function ActionButton(action, parentContainerStyle) {\n    this._state = ActionButtonState.Normal;\n    this.onClick = null;\n    this.action = action;\n    this._parentContainerStyle = parentContainerStyle;\n  }\n\n  ActionButton.prototype.updateCssStyle = function () {\n    var _a, _b;\n\n    var hostConfig = this.action.parent.hostConfig;\n    this.action.renderedElement.className = hostConfig.makeCssClassName(\"ac-pushButton\");\n\n    if (!Utils.isNullOrEmpty(this._parentContainerStyle)) {\n      this.action.renderedElement.classList.add(\"style-\" + this._parentContainerStyle);\n    }\n\n    if (this.action instanceof ShowCardAction) {\n      this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expandable\"));\n    }\n\n    this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"expanded\"));\n    this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"subdued\"));\n\n    switch (this._state) {\n      case ActionButtonState.Expanded:\n        this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\n        break;\n\n      case ActionButtonState.Subdued:\n        this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\n        break;\n    }\n\n    if (!Utils.isNullOrEmpty(this.action.style)) {\n      if (this.action.style === Enums.ActionStyle.Positive) {\n        (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\n      } else {\n        (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames(\"style-\" + this.action.style.toLowerCase()));\n      }\n    }\n  };\n\n  ActionButton.prototype.render = function () {\n    var _this = this;\n\n    this.action.render();\n\n    this.action.renderedElement.onclick = function (e) {\n      e.preventDefault();\n      e.cancelBubble = true;\n\n      _this.click();\n    };\n\n    this.updateCssStyle();\n  };\n\n  ActionButton.prototype.click = function () {\n    if (this.onClick != null) {\n      this.onClick(this);\n    }\n  };\n\n  Object.defineProperty(ActionButton.prototype, \"state\", {\n    get: function get() {\n      return this._state;\n    },\n    set: function set(value) {\n      this._state = value;\n      this.updateCssStyle();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActionButton;\n}();\n\nvar Action =\n/** @class */\nfunction (_super) {\n  __extends(Action, _super);\n\n  function Action() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._shouldFallback = false;\n    _this._parent = null;\n    _this._actionCollection = null; // hold the reference to its action collection\n\n    _this._renderedElement = null;\n    _this.requires = new HostConfig.HostCapabilities();\n    _this.style = Enums.ActionStyle.Default;\n    return _this;\n  }\n\n  Action.prototype.setCollection = function (actionCollection) {\n    this._actionCollection = actionCollection;\n  };\n\n  Action.prototype.addCssClasses = function (element) {// Do nothing in base implementation\n  };\n\n  Action.prototype.internalGetReferencedInputs = function (allInputs) {\n    return {};\n  };\n\n  Action.prototype.internalPrepareForExecution = function (inputs) {// Do nothing in base implementation\n  };\n\n  Action.prototype.internalValidateInputs = function (referencedInputs) {\n    var result = [];\n\n    if (AdaptiveCard.useBuiltInInputValidation && !this.ignoreInputValidation) {\n      for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var input = referencedInputs[key];\n\n        if (!input.validateValue()) {\n          result.push(input);\n        }\n      }\n    }\n\n    return result;\n  };\n\n  Action.prototype.getAriaRole = function () {\n    return \"button\";\n  };\n\n  Action.prototype.getHref = function () {\n    return \"\";\n  };\n\n  Action.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"type\", this.getJsonTypeName());\n    Utils.setProperty(result, \"title\", this.title);\n    Utils.setProperty(result, \"iconUrl\", this.iconUrl);\n    Utils.setProperty(result, \"style\", this.style, Enums.ActionStyle.Default);\n    return result;\n  };\n\n  Action.prototype.render = function (baseCssClass) {\n    if (baseCssClass === void 0) {\n      baseCssClass = \"ac-pushButton\";\n    } // Cache hostConfig for perf\n\n\n    var hostConfig = this.parent.hostConfig;\n    var buttonElement = document.createElement(\"button\");\n    this.addCssClasses(buttonElement);\n    buttonElement.setAttribute(\"aria-label\", this.title);\n    buttonElement.type = \"button\";\n    buttonElement.style.display = \"flex\";\n    buttonElement.style.alignItems = \"center\";\n    buttonElement.style.justifyContent = \"center\";\n    buttonElement.setAttribute(\"role\", this.getAriaRole());\n    var hasTitle = !Utils.isNullOrEmpty(this.title);\n    var titleElement = document.createElement(\"div\");\n    titleElement.style.overflow = \"hidden\";\n    titleElement.style.textOverflow = \"ellipsis\";\n\n    if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {\n      titleElement.style.whiteSpace = \"nowrap\";\n    }\n\n    if (hasTitle) {\n      titleElement.innerText = this.title;\n    }\n\n    if (Utils.isNullOrEmpty(this.iconUrl)) {\n      buttonElement.classList.add(\"noIcon\");\n      buttonElement.appendChild(titleElement);\n    } else {\n      var iconElement = document.createElement(\"img\");\n      iconElement.src = this.iconUrl;\n      iconElement.style.width = hostConfig.actions.iconSize + \"px\";\n      iconElement.style.height = hostConfig.actions.iconSize + \"px\";\n      iconElement.style.flex = \"0 0 auto\";\n\n      if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {\n        buttonElement.classList.add(\"iconAbove\");\n        buttonElement.style.flexDirection = \"column\";\n\n        if (hasTitle) {\n          iconElement.style.marginBottom = \"4px\";\n        }\n      } else {\n        buttonElement.classList.add(\"iconLeft\");\n\n        if (hasTitle) {\n          iconElement.style.marginRight = \"4px\";\n        }\n      }\n\n      buttonElement.appendChild(iconElement);\n      buttonElement.appendChild(titleElement);\n    }\n\n    this._renderedElement = buttonElement;\n  };\n\n  Action.prototype.setParent = function (value) {\n    this._parent = value;\n  };\n\n  Action.prototype.execute = function () {\n    if (this.onExecute) {\n      this.onExecute(this);\n    }\n\n    raiseExecuteActionEvent(this);\n  };\n\n  Action.prototype.prepareForExecution = function () {\n    var referencedInputs = this.getReferencedInputs();\n\n    if (this.internalValidateInputs(referencedInputs).length > 0) {\n      return false;\n    }\n\n    this.internalPrepareForExecution(referencedInputs);\n    return true;\n  };\n\n  ;\n\n  Action.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    raiseParseActionEvent(this, json, errors);\n    this.requires.parse(json[\"requires\"], errors);\n\n    if (!json[\"title\"] && json[\"title\"] !== \"\") {\n      raiseParseError({\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"Actions should always have a title.\"\n      }, errors);\n    }\n\n    this.title = Utils.getStringValue(json[\"title\"]);\n    this.iconUrl = Utils.getStringValue(json[\"iconUrl\"]);\n    this.style = Utils.getStringValue(json[\"style\"], this.style);\n  };\n\n  Action.prototype.remove = function () {\n    if (this._actionCollection) {\n      return this._actionCollection.removeAction(this);\n    }\n\n    return false;\n  };\n\n  Action.prototype.getAllInputs = function () {\n    return [];\n  };\n\n  Action.prototype.getResourceInformation = function () {\n    if (!Utils.isNullOrEmpty(this.iconUrl)) {\n      return [{\n        url: this.iconUrl,\n        mimeType: \"image\"\n      }];\n    } else {\n      return [];\n    }\n  };\n\n  Action.prototype.getActionById = function (id) {\n    if (this.id == id) {\n      return this;\n    }\n  };\n\n  Action.prototype.getReferencedInputs = function () {\n    return this.internalGetReferencedInputs(this.parent.getRootElement().getAllInputs());\n  };\n\n  Action.prototype.validateInputs = function () {\n    return this.internalValidateInputs(this.getReferencedInputs());\n  };\n\n  Action.prototype.shouldFallback = function () {\n    return this._shouldFallback || !this.requires.areAllMet(this.parent.hostConfig.hostCapabilities);\n  };\n\n  Object.defineProperty(Action.prototype, \"isPrimary\", {\n    get: function get() {\n      return this.style == Enums.ActionStyle.Positive;\n    },\n    set: function set(value) {\n      if (value) {\n        this.style = Enums.ActionStyle.Positive;\n      } else {\n        if (this.style == Enums.ActionStyle.Positive) {\n          this.style = Enums.ActionStyle.Default;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"ignoreInputValidation\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"renderedElement\", {\n    get: function get() {\n      return this._renderedElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Action;\n}(CardObject);\n\nexports.Action = Action;\n\nvar SubmitAction =\n/** @class */\nfunction (_super) {\n  __extends(SubmitAction, _super);\n\n  function SubmitAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._isPrepared = false;\n    _this._ignoreInputValidation = false;\n    return _this;\n  }\n\n  SubmitAction.prototype.internalGetReferencedInputs = function (allInputs) {\n    var result = {};\n\n    for (var _i = 0, allInputs_1 = allInputs; _i < allInputs_1.length; _i++) {\n      var input = allInputs_1[_i];\n      result[input.id] = input;\n    }\n\n    return result;\n  };\n\n  SubmitAction.prototype.internalPrepareForExecution = function (inputs) {\n    if (this._originalData) {\n      this._processedData = JSON.parse(JSON.stringify(this._originalData));\n    } else {\n      this._processedData = {};\n    }\n\n    for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\n      var key = _a[_i];\n      var input = inputs[key];\n\n      if (input.value != null) {\n        this._processedData[input.id] = input.value;\n      }\n    }\n\n    this._isPrepared = true;\n  };\n\n  SubmitAction.prototype.getJsonTypeName = function () {\n    return SubmitAction.JsonTypeName;\n  };\n\n  SubmitAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\n    Utils.setProperty(result, \"data\", this._originalData);\n    return result;\n  };\n\n  SubmitAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\n    this.data = json[\"data\"];\n  };\n\n  Object.defineProperty(SubmitAction.prototype, \"ignoreInputValidation\", {\n    get: function get() {\n      return this._ignoreInputValidation;\n    },\n    set: function set(value) {\n      this._ignoreInputValidation = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SubmitAction.prototype, \"data\", {\n    get: function get() {\n      return this._isPrepared ? this._processedData : this._originalData;\n    },\n    set: function set(value) {\n      this._originalData = value;\n      this._isPrepared = false;\n    },\n    enumerable: true,\n    configurable: true\n  }); // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n  SubmitAction.JsonTypeName = \"Action.Submit\";\n  return SubmitAction;\n}(Action);\n\nexports.SubmitAction = SubmitAction;\n\nvar OpenUrlAction =\n/** @class */\nfunction (_super) {\n  __extends(OpenUrlAction, _super);\n\n  function OpenUrlAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  OpenUrlAction.prototype.getJsonTypeName = function () {\n    return OpenUrlAction.JsonTypeName;\n  };\n\n  OpenUrlAction.prototype.getAriaRole = function () {\n    return \"link\";\n  };\n\n  OpenUrlAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"url\", this.url);\n    return result;\n  };\n\n  OpenUrlAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (Utils.isNullOrEmpty(this.url)) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"An Action.OpenUrl must have its url property set.\"\n      });\n    }\n  };\n\n  OpenUrlAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.url = Utils.getStringValue(json[\"url\"]);\n  };\n\n  OpenUrlAction.prototype.getHref = function () {\n    return this.url;\n  }; // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n\n  OpenUrlAction.JsonTypeName = \"Action.OpenUrl\";\n  return OpenUrlAction;\n}(Action);\n\nexports.OpenUrlAction = OpenUrlAction;\n\nvar ToggleVisibilityAction =\n/** @class */\nfunction (_super) {\n  __extends(ToggleVisibilityAction, _super);\n\n  function ToggleVisibilityAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.targetElements = {};\n    return _this;\n  }\n\n  ToggleVisibilityAction.prototype.getJsonTypeName = function () {\n    return ToggleVisibilityAction.JsonTypeName;\n  };\n\n  ToggleVisibilityAction.prototype.execute = function () {\n    for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\n      var elementId = _a[_i];\n      var targetElement = this.parent.getRootElement().getElementById(elementId);\n\n      if (targetElement) {\n        if (typeof this.targetElements[elementId] === \"boolean\") {\n          targetElement.isVisible = this.targetElements[elementId];\n        } else {\n          targetElement.isVisible = !targetElement.isVisible;\n        }\n      }\n    }\n  };\n\n  ToggleVisibilityAction.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n\n    this.targetElements = {};\n    var jsonTargetElements = json[\"targetElements\"];\n\n    if (jsonTargetElements && Array.isArray(jsonTargetElements)) {\n      for (var _i = 0, jsonTargetElements_1 = jsonTargetElements; _i < jsonTargetElements_1.length; _i++) {\n        var item = jsonTargetElements_1[_i];\n\n        if (typeof item === \"string\") {\n          this.targetElements[item] = undefined;\n        } else if (typeof item === \"object\") {\n          var jsonElementId = item[\"elementId\"];\n\n          if (jsonElementId && typeof jsonElementId === \"string\") {\n            this.targetElements[jsonElementId] = Utils.getBoolValue(item[\"isVisible\"], undefined);\n          }\n        }\n      }\n    }\n  };\n\n  ToggleVisibilityAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    var targetElements = [];\n\n    for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\n      var id = _a[_i];\n\n      if (typeof this.targetElements[id] === \"boolean\") {\n        targetElements.push({\n          elementId: id,\n          isVisible: this.targetElements[id]\n        });\n      } else {\n        targetElements.push(id);\n      }\n    }\n\n    result[\"targetElements\"] = targetElements;\n    return result;\n  };\n\n  ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {\n    if (isVisible === void 0) {\n      isVisible = undefined;\n    }\n\n    this.targetElements[elementId] = isVisible;\n  };\n\n  ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {\n    delete this.targetElements[elementId];\n  }; // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n\n  ToggleVisibilityAction.JsonTypeName = \"Action.ToggleVisibility\";\n  return ToggleVisibilityAction;\n}(Action);\n\nexports.ToggleVisibilityAction = ToggleVisibilityAction;\n\nvar HttpHeader =\n/** @class */\nfunction (_super) {\n  __extends(HttpHeader, _super);\n\n  function HttpHeader(name, value) {\n    if (name === void 0) {\n      name = \"\";\n    }\n\n    if (value === void 0) {\n      value = \"\";\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._value = new Shared.StringWithSubstitutions();\n    _this.name = name;\n    _this.value = value;\n    return _this;\n  }\n\n  HttpHeader.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n\n    this.name = Utils.getStringValue(json[\"name\"]);\n    this.value = Utils.getStringValue(json[\"value\"]);\n  };\n\n  HttpHeader.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"name\", this.name);\n    Utils.setProperty(result, \"value\", this._value.getOriginal());\n    return result;\n  };\n\n  HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {\n    this._value.getReferencedInputs(inputs, referencedInputs);\n  };\n\n  HttpHeader.prototype.prepareForExecution = function (inputs) {\n    this._value.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\n  };\n\n  Object.defineProperty(HttpHeader.prototype, \"value\", {\n    get: function get() {\n      return this._value.get();\n    },\n    set: function set(newValue) {\n      this._value.set(newValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return HttpHeader;\n}(SerializableObject);\n\nexports.HttpHeader = HttpHeader;\n\nvar HttpAction =\n/** @class */\nfunction (_super) {\n  __extends(HttpAction, _super);\n\n  function HttpAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._url = new Shared.StringWithSubstitutions();\n    _this._body = new Shared.StringWithSubstitutions();\n    _this._headers = [];\n    _this._ignoreInputValidation = false;\n    return _this;\n  }\n\n  HttpAction.prototype.internalGetReferencedInputs = function (allInputs) {\n    var result = {};\n\n    this._url.getReferencedInputs(allInputs, result);\n\n    for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {\n      var header = _a[_i];\n      header.getReferencedInputs(allInputs, result);\n    }\n\n    this._body.getReferencedInputs(allInputs, result);\n\n    return result;\n  };\n\n  HttpAction.prototype.internalPrepareForExecution = function (inputs) {\n    this._url.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\n\n    var contentType = Shared.ContentTypes.applicationJson;\n\n    for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {\n      var header = _a[_i];\n      header.prepareForExecution(inputs);\n\n      if (header.name && header.name.toLowerCase() == \"content-type\") {\n        contentType = header.value;\n      }\n    }\n\n    this._body.substituteInputValues(inputs, contentType);\n  };\n\n  ;\n\n  HttpAction.prototype.getJsonTypeName = function () {\n    return HttpAction.JsonTypeName;\n  };\n\n  HttpAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"method\", this.method);\n    Utils.setProperty(result, \"url\", this._url.getOriginal());\n    Utils.setProperty(result, \"body\", this._body.getOriginal());\n    Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\n    Utils.setArrayProperty(result, \"headers\", this.headers);\n    return result;\n  };\n\n  HttpAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (Utils.isNullOrEmpty(this.url)) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"An Action.Http must have its url property set.\"\n      });\n    }\n\n    if (this.headers.length > 0) {\n      for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\n        var header = _a[_i];\n\n        if (!header.name) {\n          context.addFailure(this, {\n            error: Enums.ValidationError.PropertyCantBeNull,\n            message: \"All headers of an Action.Http must have their name and value properties set.\"\n          });\n        }\n      }\n    }\n  };\n\n  HttpAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.url = Utils.getStringValue(json[\"url\"]);\n    this.method = Utils.getStringValue(json[\"method\"]);\n    this.body = Utils.getStringValue(json[\"body\"]);\n    this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\n    this._headers = [];\n\n    if (Array.isArray(json[\"headers\"])) {\n      for (var _i = 0, _a = json[\"headers\"]; _i < _a.length; _i++) {\n        var jsonHeader = _a[_i];\n        var httpHeader = new HttpHeader();\n        httpHeader.parse(jsonHeader);\n        this.headers.push(httpHeader);\n      }\n    }\n  };\n\n  Object.defineProperty(HttpAction.prototype, \"ignoreInputValidation\", {\n    get: function get() {\n      return this._ignoreInputValidation;\n    },\n    set: function set(value) {\n      this._ignoreInputValidation = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"url\", {\n    get: function get() {\n      return this._url.get();\n    },\n    set: function set(value) {\n      this._url.set(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"body\", {\n    get: function get() {\n      return this._body.get();\n    },\n    set: function set(value) {\n      this._body.set(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"headers\", {\n    get: function get() {\n      return this._headers ? this._headers : [];\n    },\n    set: function set(value) {\n      this._headers = value;\n    },\n    enumerable: true,\n    configurable: true\n  }); // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n  HttpAction.JsonTypeName = \"Action.Http\";\n  return HttpAction;\n}(Action);\n\nexports.HttpAction = HttpAction;\n\nvar ShowCardAction =\n/** @class */\nfunction (_super) {\n  __extends(ShowCardAction, _super);\n\n  function ShowCardAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.card = new InlineAdaptiveCard();\n    return _this;\n  }\n\n  ShowCardAction.prototype.addCssClasses = function (element) {\n    _super.prototype.addCssClasses.call(this, element);\n\n    element.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\n  };\n\n  ShowCardAction.prototype.getJsonTypeName = function () {\n    return ShowCardAction.JsonTypeName;\n  };\n\n  ShowCardAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    if (this.card) {\n      Utils.setProperty(result, \"card\", this.card.toJSON());\n    }\n\n    return result;\n  };\n\n  ShowCardAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    this.card.internalValidateProperties(context);\n  };\n\n  ShowCardAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    var jsonCard = json[\"card\"];\n\n    if (jsonCard) {\n      this.card.parse(jsonCard, errors);\n    } else {\n      raiseParseError({\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"An Action.ShowCard must have its \\\"card\\\" property set to a valid AdaptiveCard object.\"\n      }, errors);\n    }\n  };\n\n  ShowCardAction.prototype.setParent = function (value) {\n    _super.prototype.setParent.call(this, value);\n\n    this.card.setParent(value);\n  };\n\n  ShowCardAction.prototype.getAllInputs = function () {\n    return this.card.getAllInputs();\n  };\n\n  ShowCardAction.prototype.getResourceInformation = function () {\n    return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());\n  };\n\n  ShowCardAction.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result) {\n      result = this.card.getActionById(id);\n    }\n\n    return result;\n  }; // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n\n  ShowCardAction.JsonTypeName = \"Action.ShowCard\";\n  return ShowCardAction;\n}(Action);\n\nexports.ShowCardAction = ShowCardAction;\n\nvar ActionCollection =\n/** @class */\nfunction () {\n  function ActionCollection(owner) {\n    this._expandedAction = null;\n    this._renderedActionCount = 0;\n    this._actionCard = null;\n    this.items = [];\n    this.buttons = [];\n    this._owner = owner;\n  }\n\n  ActionCollection.prototype.refreshContainer = function () {\n    this._actionCardContainer.innerHTML = \"\";\n\n    if (this._actionCard === null) {\n      this._actionCardContainer.style.marginTop = \"0px\";\n      return;\n    }\n\n    this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\" : \"0px\";\n\n    var padding = this._owner.getEffectivePadding();\n\n    this._owner.getImmediateSurroundingPadding(padding);\n\n    var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n\n    if (this._actionCard !== null) {\n      this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\n      this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\n      this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\n      this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\n\n      if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {\n        this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\n        this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\n      }\n\n      Utils.appendChild(this._actionCardContainer, this._actionCard);\n    }\n  };\n\n  ActionCollection.prototype.layoutChanged = function () {\n    this._owner.getRootElement().updateLayout();\n  };\n\n  ActionCollection.prototype.hideActionCard = function () {\n    var previouslyExpandedAction = this._expandedAction;\n    this._expandedAction = null;\n    this._actionCard = null;\n    this.refreshContainer();\n\n    if (previouslyExpandedAction) {\n      this.layoutChanged();\n      raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\n    }\n  };\n\n  ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {\n    if (suppressStyle === void 0) {\n      suppressStyle = false;\n    }\n\n    if (raiseEvent === void 0) {\n      raiseEvent = true;\n    }\n\n    if (action.card == null) {\n      return;\n    }\n\n    action.card.suppressStyle = suppressStyle;\n    var renderedCard = action.card.renderedElement ? action.card.renderedElement : action.card.render();\n    this._actionCard = renderedCard;\n    this._expandedAction = action;\n    this.refreshContainer();\n\n    if (raiseEvent) {\n      this.layoutChanged();\n      raiseInlineCardExpandedEvent(action, true);\n    }\n  };\n\n  ActionCollection.prototype.collapseExpandedAction = function () {\n    for (var i = 0; i < this.buttons.length; i++) {\n      this.buttons[i].state = ActionButtonState.Normal;\n    }\n\n    this.hideActionCard();\n  };\n\n  ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {\n    for (var i = 0; i < this.buttons.length; i++) {\n      if (this.buttons[i].action !== action) {\n        this.buttons[i].state = ActionButtonState.Subdued;\n      } else {\n        this.buttons[i].state = ActionButtonState.Expanded;\n      }\n    }\n\n    this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);\n  };\n\n  ActionCollection.prototype.actionClicked = function (actionButton) {\n    if (!(actionButton.action instanceof ShowCardAction)) {\n      for (var i = 0; i < this.buttons.length; i++) {\n        this.buttons[i].state = ActionButtonState.Normal;\n      }\n\n      this.hideActionCard();\n      actionButton.action.execute();\n    } else {\n      if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\n        actionButton.action.execute();\n      } else if (actionButton.action === this._expandedAction) {\n        this.collapseExpandedAction();\n      } else {\n        this.expandShowCardAction(actionButton.action, true);\n      }\n    }\n  };\n\n  ActionCollection.prototype.getParentContainer = function () {\n    if (this._owner instanceof Container) {\n      return this._owner;\n    } else {\n      return this._owner.getParentContainer();\n    }\n  };\n\n  ActionCollection.prototype.findActionButton = function (action) {\n    for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\n      var actionButton = _a[_i];\n\n      if (actionButton.action == action) {\n        return actionButton;\n      }\n    }\n\n    return null;\n  };\n\n  ActionCollection.prototype.parse = function (json, errors) {\n    this.clear();\n\n    if (json && json instanceof Array) {\n      for (var _i = 0, json_1 = json; _i < json_1.length; _i++) {\n        var jsonAction = json_1[_i];\n        var action = createActionInstance(this._owner, jsonAction, [], !this._owner.isDesignMode(), errors);\n\n        if (action) {\n          this.addAction(action);\n        }\n      }\n    }\n  };\n\n  ActionCollection.prototype.toJSON = function () {\n    if (this.items.length > 0) {\n      var result = [];\n\n      for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n        var action = _a[_i];\n        result.push(action.toJSON());\n      }\n\n      return result;\n    } else {\n      return null;\n    }\n  };\n\n  ActionCollection.prototype.getActionById = function (id) {\n    var result = null;\n\n    for (var i = 0; i < this.items.length; i++) {\n      result = this.items[i].getActionById(id);\n\n      if (result) {\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  ActionCollection.prototype.validateProperties = function (context) {\n    if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {\n      context.addFailure(this._owner, {\n        error: Enums.ValidationError.TooManyActions,\n        message: \"A maximum of \" + this._owner.hostConfig.actions.maxActions + \" actions are allowed.\"\n      });\n    }\n\n    if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\n      context.addFailure(this._owner, {\n        error: Enums.ValidationError.InteractivityNotAllowed,\n        message: \"Interactivity is not allowed.\"\n      });\n    }\n\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      if (!isActionAllowed(item, this._owner.getForbiddenActionTypes())) {\n        context.addFailure(this._owner, {\n          error: Enums.ValidationError.ActionTypeNotAllowed,\n          message: \"Actions of type \" + item.getJsonTypeName() + \" are not allowe.\"\n        });\n      }\n\n      item.internalValidateProperties(context);\n    }\n  };\n\n  ActionCollection.prototype.render = function (orientation, isDesignMode) {\n    var _this = this; // Cache hostConfig for better perf\n\n\n    var hostConfig = this._owner.hostConfig;\n\n    if (!hostConfig.supportsInteractivity) {\n      return null;\n    }\n\n    var element = document.createElement(\"div\");\n    var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;\n\n    var forbiddenActionTypes = this._owner.getForbiddenActionTypes();\n\n    this._actionCardContainer = document.createElement(\"div\");\n    this._renderedActionCount = 0;\n\n    if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && isActionAllowed(this.items[0], forbiddenActionTypes)) {\n      this.showActionCard(this.items[0], true);\n      this._renderedActionCount = 1;\n    } else {\n      var buttonStrip = document.createElement(\"div\");\n      buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\n      buttonStrip.style.display = \"flex\";\n\n      if (orientation == Enums.Orientation.Horizontal) {\n        buttonStrip.style.flexDirection = \"row\";\n\n        if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\n          switch (this._owner.horizontalAlignment) {\n            case Enums.HorizontalAlignment.Center:\n              buttonStrip.style.justifyContent = \"center\";\n              break;\n\n            case Enums.HorizontalAlignment.Right:\n              buttonStrip.style.justifyContent = \"flex-end\";\n              break;\n\n            default:\n              buttonStrip.style.justifyContent = \"flex-start\";\n              break;\n          }\n        } else {\n          switch (hostConfig.actions.actionAlignment) {\n            case Enums.ActionAlignment.Center:\n              buttonStrip.style.justifyContent = \"center\";\n              break;\n\n            case Enums.ActionAlignment.Right:\n              buttonStrip.style.justifyContent = \"flex-end\";\n              break;\n\n            default:\n              buttonStrip.style.justifyContent = \"flex-start\";\n              break;\n          }\n        }\n      } else {\n        buttonStrip.style.flexDirection = \"column\";\n\n        if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\n          switch (this._owner.horizontalAlignment) {\n            case Enums.HorizontalAlignment.Center:\n              buttonStrip.style.alignItems = \"center\";\n              break;\n\n            case Enums.HorizontalAlignment.Right:\n              buttonStrip.style.alignItems = \"flex-end\";\n              break;\n\n            default:\n              buttonStrip.style.alignItems = \"flex-start\";\n              break;\n          }\n        } else {\n          switch (hostConfig.actions.actionAlignment) {\n            case Enums.ActionAlignment.Center:\n              buttonStrip.style.alignItems = \"center\";\n              break;\n\n            case Enums.ActionAlignment.Right:\n              buttonStrip.style.alignItems = \"flex-end\";\n              break;\n\n            case Enums.ActionAlignment.Stretch:\n              buttonStrip.style.alignItems = \"stretch\";\n              break;\n\n            default:\n              buttonStrip.style.alignItems = \"flex-start\";\n              break;\n          }\n        }\n      }\n\n      var parentContainerStyle = this.getParentContainer().getEffectiveStyle();\n\n      for (var i = 0; i < this.items.length; i++) {\n        if (isActionAllowed(this.items[i], forbiddenActionTypes)) {\n          var actionButton = this.findActionButton(this.items[i]);\n\n          if (!actionButton) {\n            actionButton = new ActionButton(this.items[i], parentContainerStyle);\n\n            actionButton.onClick = function (ab) {\n              _this.actionClicked(ab);\n            };\n\n            this.buttons.push(actionButton);\n          }\n\n          actionButton.render();\n\n          if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {\n            actionButton.action.renderedElement.style.flex = \"0 1 100%\";\n          } else {\n            actionButton.action.renderedElement.style.flex = \"0 1 auto\";\n          }\n\n          buttonStrip.appendChild(actionButton.action.renderedElement);\n          this._renderedActionCount++;\n\n          if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {\n            break;\n          } else if (hostConfig.actions.buttonSpacing > 0) {\n            var spacer = document.createElement(\"div\");\n\n            if (orientation === Enums.Orientation.Horizontal) {\n              spacer.style.flex = \"0 0 auto\";\n              spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\n            } else {\n              spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\n            }\n\n            Utils.appendChild(buttonStrip, spacer);\n          }\n        }\n      }\n\n      var buttonStripContainer = document.createElement(\"div\");\n      buttonStripContainer.style.overflow = \"hidden\";\n      buttonStripContainer.appendChild(buttonStrip);\n      Utils.appendChild(element, buttonStripContainer);\n    }\n\n    Utils.appendChild(element, this._actionCardContainer);\n\n    for (var i = 0; i < this.buttons.length; i++) {\n      if (this.buttons[i].state == ActionButtonState.Expanded) {\n        this.expandShowCardAction(this.buttons[i].action, false);\n        break;\n      }\n    }\n\n    return this._renderedActionCount > 0 ? element : null;\n  };\n\n  ActionCollection.prototype.addAction = function (action) {\n    if (!action) {\n      throw new Error(\"The action parameter cannot be null.\");\n    }\n\n    if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {\n      this.items.push(action);\n\n      if (!action.parent) {\n        action.setParent(this._owner);\n      }\n\n      invokeSetCollection(action, this);\n    } else {\n      throw new Error(\"The action already belongs to another element.\");\n    }\n  };\n\n  ActionCollection.prototype.removeAction = function (action) {\n    if (this.expandedAction && this._expandedAction == action) {\n      this.collapseExpandedAction();\n    }\n\n    var actionIndex = this.items.indexOf(action);\n\n    if (actionIndex >= 0) {\n      this.items.splice(actionIndex, 1);\n      action.setParent(null);\n      invokeSetCollection(action, null);\n\n      for (var i = 0; i < this.buttons.length; i++) {\n        if (this.buttons[i].action == action) {\n          this.buttons.splice(i, 1);\n          break;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  ActionCollection.prototype.clear = function () {\n    this.items = [];\n    this.buttons = [];\n    this._expandedAction = null;\n    this._renderedActionCount = 0;\n  };\n\n  ActionCollection.prototype.getAllInputs = function () {\n    var result = [];\n\n    for (var i = 0; i < this.items.length; i++) {\n      var action = this.items[i];\n      result = result.concat(action.getAllInputs());\n    }\n\n    return result;\n  };\n\n  ActionCollection.prototype.getResourceInformation = function () {\n    var result = [];\n\n    for (var i = 0; i < this.items.length; i++) {\n      result = result.concat(this.items[i].getResourceInformation());\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(ActionCollection.prototype, \"renderedActionCount\", {\n    get: function get() {\n      return this._renderedActionCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ActionCollection.prototype, \"expandedAction\", {\n    get: function get() {\n      return this._expandedAction;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActionCollection;\n}();\n\nvar ActionSet =\n/** @class */\nfunction (_super) {\n  __extends(ActionSet, _super);\n\n  function ActionSet() {\n    var _this = _super.call(this) || this;\n\n    _this.orientation = null;\n    _this._actionCollection = new ActionCollection(_this);\n    return _this;\n  }\n\n  ActionSet.prototype.internalRender = function () {\n    return this._actionCollection.render(this.orientation ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());\n  };\n\n  ActionSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setEnumProperty(Enums.Orientation, result, \"orientation\", this.orientation);\n    Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\n    return result;\n  };\n\n  ActionSet.prototype.isBleedingAtBottom = function () {\n    if (this._actionCollection.renderedActionCount == 0) {\n      return _super.prototype.isBleedingAtBottom.call(this);\n    } else {\n      if (this._actionCollection.items.length == 1) {\n        return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\n      } else {\n        return this._actionCollection.expandedAction != null;\n      }\n    }\n  };\n\n  ActionSet.prototype.getJsonTypeName = function () {\n    return \"ActionSet\";\n  };\n\n  ActionSet.prototype.getActionCount = function () {\n    return this._actionCollection.items.length;\n  };\n\n  ActionSet.prototype.getActionAt = function (index) {\n    if (index >= 0 && index < this.getActionCount()) {\n      return this._actionCollection.items[index];\n    } else {\n      _super.prototype.getActionAt.call(this, index);\n    }\n  };\n\n  ActionSet.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    this._actionCollection.validateProperties(context);\n  };\n\n  ActionSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    var jsonOrientation = json[\"orientation\"];\n\n    if (jsonOrientation) {\n      this.orientation = Utils.getEnumValue(Enums.Orientation, jsonOrientation, Enums.Orientation.Horizontal);\n    }\n\n    this._actionCollection.parse(json[\"actions\"], errors);\n  };\n\n  ActionSet.prototype.addAction = function (action) {\n    this._actionCollection.addAction(action);\n  };\n\n  ActionSet.prototype.getAllInputs = function () {\n    return this._actionCollection.getAllInputs();\n  };\n\n  ActionSet.prototype.getResourceInformation = function () {\n    return this._actionCollection.getResourceInformation();\n  };\n\n  Object.defineProperty(ActionSet.prototype, \"isInteractive\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActionSet;\n}(CardElement);\n\nexports.ActionSet = ActionSet;\n\nvar StylableCardElementContainer =\n/** @class */\nfunction (_super) {\n  __extends(StylableCardElementContainer, _super);\n\n  function StylableCardElementContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._style = null;\n    _this._bleed = false;\n    return _this;\n  }\n\n  StylableCardElementContainer.prototype.applyBackground = function () {\n    var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\n\n    if (!Utils.isNullOrEmpty(styleDefinition.backgroundColor)) {\n      this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\n    }\n  };\n\n  StylableCardElementContainer.prototype.applyPadding = function () {\n    _super.prototype.applyPadding.call(this);\n\n    if (!this.renderedElement) {\n      return;\n    }\n\n    var physicalPadding = new Shared.SpacingDefinition();\n\n    if (this.getEffectivePadding()) {\n      physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\n    }\n\n    this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\n    this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\n    this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\n    this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\n\n    if (this.isBleeding()) {\n      // Bleed into the first parent that does have padding\n      var padding = new Shared.PaddingDefinition();\n      this.getImmediateSurroundingPadding(padding);\n      var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n      this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\n      this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\n\n      if (!this.isDesignMode()) {\n        this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\n        this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\n      }\n\n      if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {\n        this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\n        this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\n      }\n    } else {\n      this.renderedElement.style.marginRight = \"0\";\n      this.renderedElement.style.marginLeft = \"0\";\n      this.renderedElement.style.marginTop = \"0\";\n      this.renderedElement.style.marginBottom = \"0\";\n\n      if (this.separatorElement) {\n        this.separatorElement.style.marginRight = \"0\";\n        this.separatorElement.style.marginLeft = \"0\";\n      }\n    }\n  };\n\n  StylableCardElementContainer.prototype.getHasBackground = function () {\n    var currentElement = this.parent;\n\n    while (currentElement) {\n      var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;\n\n      if (currentElement instanceof StylableCardElementContainer) {\n        if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {\n          return true;\n        }\n      }\n\n      currentElement = currentElement.parent;\n    }\n\n    return false;\n  };\n\n  StylableCardElementContainer.prototype.getDefaultPadding = function () {\n    return this.getHasBackground() ? new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);\n  };\n\n  StylableCardElementContainer.prototype.getHasExpandedAction = function () {\n    return false;\n  };\n\n  StylableCardElementContainer.prototype.getBleed = function () {\n    return this._bleed;\n  };\n\n  StylableCardElementContainer.prototype.setBleed = function (value) {\n    this._bleed = value;\n  };\n\n  Object.defineProperty(StylableCardElementContainer.prototype, \"renderedActionCount\", {\n    get: function get() {\n      return 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"hasExplicitStyle\", {\n    get: function get() {\n      return this._style != null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"allowCustomStyle\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"supportsMinHeight\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  StylableCardElementContainer.prototype.isBleeding = function () {\n    return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\n  };\n\n  StylableCardElementContainer.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"style\", this.style);\n    return result;\n  };\n\n  StylableCardElementContainer.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this._style) {\n      var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this._style);\n\n      if (!styleDefinition) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.InvalidPropertyValue,\n          message: \"Unknown container style: \" + this._style\n        });\n      }\n    }\n  };\n\n  StylableCardElementContainer.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this._style = Utils.getStringValue(json[\"style\"]);\n  };\n\n  StylableCardElementContainer.prototype.render = function () {\n    var renderedElement = _super.prototype.render.call(this);\n\n    if (renderedElement && this.getHasBackground()) {\n      this.applyBackground();\n    }\n\n    return renderedElement;\n  };\n\n  StylableCardElementContainer.prototype.getEffectiveStyle = function () {\n    var effectiveStyle = this.style;\n    return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);\n  };\n\n  Object.defineProperty(StylableCardElementContainer.prototype, \"style\", {\n    get: function get() {\n      if (this.allowCustomStyle) {\n        if (this._style && this.hostConfig.containerStyles.getStyleByName(this._style)) {\n          return this._style;\n        }\n      }\n\n      return null;\n    },\n    set: function set(value) {\n      this._style = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return StylableCardElementContainer;\n}(CardElementContainer);\n\nexports.StylableCardElementContainer = StylableCardElementContainer;\n\nvar BackgroundImage =\n/** @class */\nfunction (_super) {\n  __extends(BackgroundImage, _super);\n\n  function BackgroundImage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.fillMode = BackgroundImage.defaultFillMode;\n    _this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\n    _this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\n    return _this;\n  }\n\n  BackgroundImage.prototype.reset = function () {\n    this.url = undefined;\n    this.fillMode = BackgroundImage.defaultFillMode;\n    this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\n    this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\n  };\n\n  BackgroundImage.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.url = Utils.getStringValue(json[\"url\"]);\n    this.fillMode = Utils.getEnumValue(Enums.FillMode, json[\"fillMode\"], this.fillMode);\n    this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\n    this.verticalAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalAlignment\"], this.verticalAlignment);\n  };\n\n  BackgroundImage.prototype.toJSON = function () {\n    if (!this.isValid()) {\n      return null;\n    }\n\n    if (this.fillMode == BackgroundImage.defaultFillMode && this.horizontalAlignment == BackgroundImage.defaultHorizontalAlignment && this.verticalAlignment == BackgroundImage.defaultVerticalAlignment) {\n      return this.url;\n    } else {\n      var result = _super.prototype.toJSON.call(this);\n\n      Utils.setProperty(result, \"url\", this.url);\n      Utils.setEnumProperty(Enums.FillMode, result, \"fillMode\", this.fillMode, BackgroundImage.defaultFillMode);\n      Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment, BackgroundImage.defaultHorizontalAlignment);\n      Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalAlignment\", this.verticalAlignment, BackgroundImage.defaultVerticalAlignment);\n      return result;\n    }\n  };\n\n  BackgroundImage.prototype.apply = function (element) {\n    if (this.url) {\n      element.style.backgroundImage = \"url('\" + this.url + \"')\";\n\n      switch (this.fillMode) {\n        case Enums.FillMode.Repeat:\n          element.style.backgroundRepeat = \"repeat\";\n          break;\n\n        case Enums.FillMode.RepeatHorizontally:\n          element.style.backgroundRepeat = \"repeat-x\";\n          break;\n\n        case Enums.FillMode.RepeatVertically:\n          element.style.backgroundRepeat = \"repeat-y\";\n          break;\n\n        case Enums.FillMode.Cover:\n        default:\n          element.style.backgroundRepeat = \"no-repeat\";\n          element.style.backgroundSize = \"cover\";\n          break;\n      }\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.backgroundPositionX = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.backgroundPositionX = \"right\";\n          break;\n      }\n\n      switch (this.verticalAlignment) {\n        case Enums.VerticalAlignment.Center:\n          element.style.backgroundPositionY = \"center\";\n          break;\n\n        case Enums.VerticalAlignment.Bottom:\n          element.style.backgroundPositionY = \"bottom\";\n          break;\n      }\n    }\n  };\n\n  BackgroundImage.prototype.isValid = function () {\n    return !Utils.isNullOrEmpty(this.url);\n  };\n\n  BackgroundImage.defaultFillMode = Enums.FillMode.Cover;\n  BackgroundImage.defaultHorizontalAlignment = Enums.HorizontalAlignment.Left;\n  BackgroundImage.defaultVerticalAlignment = Enums.VerticalAlignment.Top;\n  return BackgroundImage;\n}(SerializableObject);\n\nexports.BackgroundImage = BackgroundImage;\n\nvar Container =\n/** @class */\nfunction (_super) {\n  __extends(Container, _super);\n\n  function Container() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._items = [];\n    _this._renderedItems = [];\n    _this.backgroundImage = new BackgroundImage();\n    _this.verticalContentAlignment = Enums.VerticalAlignment.Top;\n    _this.rtl = null;\n    return _this;\n  }\n\n  Container.prototype.insertItemAt = function (item, index, forceInsert) {\n    if (!item.parent || forceInsert) {\n      if (item.isStandalone) {\n        if (index < 0 || index >= this._items.length) {\n          this._items.push(item);\n        } else {\n          this._items.splice(index, 0, item);\n        }\n\n        item.setParent(this);\n      } else {\n        throw new Error(\"Elements of type \" + item.getJsonTypeName() + \" cannot be used as standalone elements.\");\n      }\n    } else {\n      throw new Error(\"The element already belongs to another container.\");\n    }\n  };\n\n  Container.prototype.supportsExcplitiHeight = function () {\n    return true;\n  };\n\n  Container.prototype.getItemsCollectionPropertyName = function () {\n    return \"items\";\n  };\n\n  Container.prototype.applyBackground = function () {\n    if (this.backgroundImage.isValid()) {\n      this.backgroundImage.apply(this.renderedElement);\n    }\n\n    _super.prototype.applyBackground.call(this);\n  };\n\n  Container.prototype.internalRender = function () {\n    this._renderedItems = []; // Cache hostConfig to avoid walking the parent hierarchy several times\n\n    var hostConfig = this.hostConfig;\n    var element = document.createElement(\"div\");\n\n    if (this.rtl != null && this.rtl) {\n      element.dir = \"rtl\";\n    }\n\n    element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\n    element.style.display = \"flex\";\n    element.style.flexDirection = \"column\";\n\n    if (AdaptiveCard.useAdvancedCardBottomTruncation) {\n      // Forces the container to be at least as tall as its content.\n      //\n      // Fixes a quirk in Chrome where, for nested flex elements, the\n      // inner element's height would never exceed the outer element's\n      // height. This caused overflow truncation to break -- containers\n      // would always be measured as not overflowing, since their heights\n      // were constrained by their parents as opposed to truly reflecting\n      // the height of their content.\n      //\n      // See the \"Browser Rendering Notes\" section of this answer:\n      // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\n      element.style.minHeight = '-webkit-min-content';\n    }\n\n    switch (this.verticalContentAlignment) {\n      case Enums.VerticalAlignment.Center:\n        element.style.justifyContent = \"center\";\n        break;\n\n      case Enums.VerticalAlignment.Bottom:\n        element.style.justifyContent = \"flex-end\";\n        break;\n\n      default:\n        element.style.justifyContent = \"flex-start\";\n        break;\n    }\n\n    if (this._items.length > 0) {\n      for (var i = 0; i < this._items.length; i++) {\n        var renderedElement = this.isElementAllowed(this._items[i], this.getForbiddenElementTypes()) ? this._items[i].render() : null;\n\n        if (renderedElement) {\n          if (this._renderedItems.length > 0 && this._items[i].separatorElement) {\n            this._items[i].separatorElement.style.flex = \"0 0 auto\";\n            Utils.appendChild(element, this._items[i].separatorElement);\n          }\n\n          Utils.appendChild(element, renderedElement);\n\n          this._renderedItems.push(this._items[i]);\n        }\n      }\n    } else {\n      if (this.isDesignMode()) {\n        var placeholderElement = this.createPlaceholderElement();\n        placeholderElement.style.width = \"100%\";\n        placeholderElement.style.height = \"100%\";\n        element.appendChild(placeholderElement);\n      }\n    }\n\n    return element;\n  };\n\n  Container.prototype.truncateOverflow = function (maxHeight) {\n    // Add 1 to account for rounding differences between browsers\n    var boundary = this.renderedElement.offsetTop + maxHeight + 1;\n\n    var handleElement = function handleElement(cardElement) {\n      var elt = cardElement.renderedElement;\n\n      if (elt) {\n        switch (Utils.getFitStatus(elt, boundary)) {\n          case Enums.ContainerFitStatus.FullyInContainer:\n            var sizeChanged = cardElement['resetOverflow'](); // If the element's size changed after resetting content,\n            // we have to check if it still fits fully in the card\n\n            if (sizeChanged) {\n              handleElement(cardElement);\n            }\n\n            break;\n\n          case Enums.ContainerFitStatus.Overflowing:\n            var maxHeight_1 = boundary - elt.offsetTop;\n            cardElement['handleOverflow'](maxHeight_1);\n            break;\n\n          case Enums.ContainerFitStatus.FullyOutOfContainer:\n            cardElement['handleOverflow'](0);\n            break;\n        }\n      }\n    };\n\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      handleElement(item);\n    }\n\n    return true;\n  };\n\n  Container.prototype.undoOverflowTruncation = function () {\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item['resetOverflow']();\n    }\n  };\n\n  Container.prototype.getHasBackground = function () {\n    return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);\n  };\n\n  Object.defineProperty(Container.prototype, \"isSelectable\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Container.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"backgroundImage\", this.backgroundImage.toJSON());\n    Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalContentAlignment\", this.verticalContentAlignment, Enums.VerticalAlignment.Top);\n\n    if (this._items.length > 0) {\n      var elements = [];\n\n      for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n        var element = _a[_i];\n        elements.push(element.toJSON());\n      }\n\n      Utils.setProperty(result, this.getItemsCollectionPropertyName(), elements);\n    }\n\n    Utils.setProperty(result, \"bleed\", this.bleed, false);\n    return result;\n  };\n\n  Container.prototype.getItemCount = function () {\n    return this._items.length;\n  };\n\n  Container.prototype.getItemAt = function (index) {\n    return this._items[index];\n  };\n\n  Container.prototype.getFirstVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\n      for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {\n        var item = _a[_i];\n\n        if (item.isVisible) {\n          return item;\n        }\n      }\n\n      ;\n    }\n\n    return null;\n  };\n\n  Container.prototype.getLastVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\n      for (var i = this._renderedItems.length - 1; i >= 0; i--) {\n        if (this._renderedItems[i].isVisible) {\n          return this._renderedItems[i];\n        }\n      }\n    }\n\n    return null;\n  };\n\n  Container.prototype.getJsonTypeName = function () {\n    return \"Container\";\n  };\n\n  Container.prototype.isFirstElement = function (element) {\n    var designMode = this.isDesignMode();\n\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].isVisible || designMode) {\n        return this._items[i] == element;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.isLastElement = function (element) {\n    var designMode = this.isDesignMode();\n\n    for (var i = this._items.length - 1; i >= 0; i--) {\n      if (this._items[i].isVisible || designMode) {\n        return this._items[i] == element;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.isRtl = function () {\n    if (this.rtl != null) {\n      return this.rtl;\n    } else {\n      var parentContainer = this.getParentContainer();\n      return parentContainer ? parentContainer.isRtl() : false;\n    }\n  };\n\n  Container.prototype.isBleedingAtTop = function () {\n    var firstRenderedItem = this.getFirstVisibleRenderedItem();\n    return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);\n  };\n\n  Container.prototype.isBleedingAtBottom = function () {\n    var lastRenderedItem = this.getLastVisibleRenderedItem();\n    return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);\n  };\n\n  Container.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this.setShouldFallback(false);\n    this._items = [];\n    this._renderedItems = [];\n    this.backgroundImage.reset();\n    var jsonBackgroundImage = json[\"backgroundImage\"];\n\n    if (jsonBackgroundImage) {\n      if (typeof jsonBackgroundImage === \"string\") {\n        this.backgroundImage.url = jsonBackgroundImage;\n        this.backgroundImage.fillMode = Enums.FillMode.Cover;\n      } else if (typeof jsonBackgroundImage === \"object\") {\n        this.backgroundImage.parse(jsonBackgroundImage, errors);\n      }\n    }\n\n    this.verticalContentAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalContentAlignment\"], this.verticalContentAlignment);\n\n    if (json[this.getItemsCollectionPropertyName()] != null) {\n      var items = json[this.getItemsCollectionPropertyName()];\n      this.clear();\n\n      for (var i = 0; i < items.length; i++) {\n        var element = createElementInstance(this, items[i], !this.isDesignMode(), errors);\n\n        if (element) {\n          this.insertItemAt(element, -1, true);\n        }\n      }\n    }\n\n    this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\n  };\n\n  Container.prototype.indexOf = function (cardElement) {\n    return this._items.indexOf(cardElement);\n  };\n\n  Container.prototype.addItem = function (item) {\n    this.insertItemAt(item, -1, false);\n  };\n\n  Container.prototype.insertItemBefore = function (item, insertBefore) {\n    this.insertItemAt(item, this._items.indexOf(insertBefore), false);\n  };\n\n  Container.prototype.insertItemAfter = function (item, insertAfter) {\n    this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\n  };\n\n  Container.prototype.removeItem = function (item) {\n    var itemIndex = this._items.indexOf(item);\n\n    if (itemIndex >= 0) {\n      this._items.splice(itemIndex, 1);\n\n      item.setParent(null);\n      this.updateLayout();\n      return true;\n    }\n\n    return false;\n  };\n\n  Container.prototype.clear = function () {\n    this._items = [];\n  };\n\n  Container.prototype.getResourceInformation = function () {\n    var result = _super.prototype.getResourceInformation.call(this);\n\n    if (this.backgroundImage.isValid()) {\n      result.push({\n        url: this.backgroundImage.url,\n        mimeType: \"image\"\n      });\n    }\n\n    return result;\n  };\n\n  Container.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result) {\n      if (this.selectAction) {\n        result = this.selectAction.getActionById(id);\n      }\n\n      if (!result) {\n        for (var i = 0; i < this._items.length; i++) {\n          result = this._items[i].getActionById(id);\n\n          if (result) {\n            break;\n          }\n        }\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(Container.prototype, \"padding\", {\n    get: function get() {\n      return this.getPadding();\n    },\n    set: function set(value) {\n      this.setPadding(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Container.prototype, \"selectAction\", {\n    get: function get() {\n      return this.getSelectAction();\n    },\n    set: function set(value) {\n      this.setSelectAction(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Container.prototype, \"bleed\", {\n    get: function get() {\n      return this.getBleed();\n    },\n    set: function set(value) {\n      this.setBleed(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Container;\n}(StylableCardElementContainer);\n\nexports.Container = Container;\n\nvar Column =\n/** @class */\nfunction (_super) {\n  __extends(Column, _super);\n\n  function Column(width) {\n    if (width === void 0) {\n      width = \"stretch\";\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._computedWeight = 0;\n    _this.width = \"stretch\";\n    _this.width = width;\n    return _this;\n  }\n\n  Column.prototype.adjustRenderedElementSize = function (renderedElement) {\n    var minDesignTimeColumnHeight = 20;\n\n    if (this.isDesignMode()) {\n      renderedElement.style.minWidth = \"20px\";\n      renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\n    } else {\n      renderedElement.style.minWidth = \"0\";\n\n      if (this.minPixelHeight) {\n        renderedElement.style.minHeight = this.minPixelHeight + \"px\";\n      }\n    }\n\n    if (this.width === \"auto\") {\n      renderedElement.style.flex = \"0 1 auto\";\n    } else if (this.width === \"stretch\") {\n      renderedElement.style.flex = \"1 1 50px\";\n    } else {\n      var sizeAndUnit = this.width;\n\n      if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {\n        renderedElement.style.flex = \"0 0 auto\";\n        renderedElement.style.width = sizeAndUnit.physicalSize + \"px\";\n      } else {\n        renderedElement.style.flex = \"1 1 \" + (this._computedWeight > 0 ? this._computedWeight : sizeAndUnit.physicalSize) + \"%\";\n      }\n    }\n  };\n\n  Object.defineProperty(Column.prototype, \"separatorOrientation\", {\n    get: function get() {\n      return Enums.Orientation.Vertical;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Column.prototype.getJsonTypeName = function () {\n    return \"Column\";\n  };\n\n  Column.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    if (this.width instanceof Shared.SizeAndUnit) {\n      if (this.width.unit == Enums.SizeUnit.Pixel) {\n        Utils.setProperty(result, \"width\", this.width.physicalSize + \"px\");\n      } else {\n        Utils.setNumberProperty(result, \"width\", this.width.physicalSize);\n      }\n    } else {\n      Utils.setProperty(result, \"width\", this.width);\n    }\n\n    return result;\n  };\n\n  Column.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    var jsonWidth = json[\"width\"];\n\n    if (jsonWidth === undefined) {\n      jsonWidth = json[\"size\"];\n\n      if (jsonWidth !== undefined) {\n        raiseParseError({\n          error: Enums.ValidationError.Deprecated,\n          message: \"The \\\"Column.size\\\" property is deprecated and will be removed. Use the \\\"Column.width\\\" property instead.\"\n        }, errors);\n      }\n    }\n\n    if (jsonWidth) {\n      var invalidWidth = false;\n\n      try {\n        this.width = Shared.SizeAndUnit.parse(jsonWidth);\n      } catch (e) {\n        if (typeof jsonWidth === \"string\" && (jsonWidth === \"auto\" || jsonWidth === \"stretch\")) {\n          this.width = jsonWidth;\n        } else {\n          invalidWidth = true;\n        }\n      }\n\n      if (invalidWidth) {\n        raiseParseError({\n          error: Enums.ValidationError.InvalidPropertyValue,\n          message: \"Invalid column width:\" + jsonWidth + \" - defaulting to \\\"auto\\\"\"\n        }, errors);\n      }\n    }\n  };\n\n  Object.defineProperty(Column.prototype, \"hasVisibleSeparator\", {\n    get: function get() {\n      if (this.parent && this.parent instanceof ColumnSet) {\n        return this.separatorElement && !this.parent.isLeftMostElement(this);\n      } else {\n        return false;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Column.prototype, \"isStandalone\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Column;\n}(Container);\n\nexports.Column = Column;\n\nvar ColumnSet =\n/** @class */\nfunction (_super) {\n  __extends(ColumnSet, _super);\n\n  function ColumnSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._columns = [];\n    return _this;\n  }\n\n  ColumnSet.prototype.createColumnInstance = function (json, errors) {\n    return createCardObjectInstance(this, json, [], // Forbidden types not supported for elements for now\n    !this.isDesignMode(), function (typeName) {\n      return !typeName || typeName === \"Column\" ? new Column() : null;\n    }, function (typeName, errorType) {\n      if (errorType == InstanceCreationErrorType.UnknownType) {\n        return {\n          error: Enums.ValidationError.UnknownElementType,\n          message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\n        };\n      } else {\n        return {\n          error: Enums.ValidationError.ElementTypeNotAllowed,\n          message: \"Element type \" + typeName + \" isn't allowed in a ColumnSet.\"\n        };\n      }\n    }, errors);\n  };\n\n  ColumnSet.prototype.internalRender = function () {\n    this._renderedColumns = [];\n\n    if (this._columns.length > 0) {\n      // Cache hostConfig to avoid walking the parent hierarchy several times\n      var hostConfig = this.hostConfig;\n      var element = document.createElement(\"div\");\n      element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\n      element.style.display = \"flex\";\n\n      if (AdaptiveCard.useAdvancedCardBottomTruncation) {\n        // See comment in Container.internalRender()\n        element.style.minHeight = '-webkit-min-content';\n      }\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.justifyContent = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.justifyContent = \"flex-end\";\n          break;\n\n        default:\n          element.style.justifyContent = \"flex-start\";\n          break;\n      }\n\n      var totalWeight = 0;\n\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight) {\n          totalWeight += column.width.physicalSize;\n        }\n      }\n\n      for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\n        var column = _c[_b];\n\n        if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {\n          var computedWeight = 100 / totalWeight * column.width.physicalSize; // Best way to emulate \"internal\" access I know of\n\n          column[\"_computedWeight\"] = computedWeight;\n        }\n\n        var renderedColumn = column.render();\n\n        if (renderedColumn) {\n          if (this._renderedColumns.length > 0 && column.separatorElement) {\n            column.separatorElement.style.flex = \"0 0 auto\";\n            Utils.appendChild(element, column.separatorElement);\n          }\n\n          Utils.appendChild(element, renderedColumn);\n\n          this._renderedColumns.push(column);\n        }\n      }\n\n      return this._renderedColumns.length > 0 ? element : null;\n    } else {\n      return null;\n    }\n  };\n\n  ColumnSet.prototype.truncateOverflow = function (maxHeight) {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      column['handleOverflow'](maxHeight);\n    }\n\n    return true;\n  };\n\n  ColumnSet.prototype.undoOverflowTruncation = function () {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      column['resetOverflow']();\n    }\n  };\n\n  Object.defineProperty(ColumnSet.prototype, \"isSelectable\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ColumnSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    if (this._columns.length > 0) {\n      var columns = [];\n\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        columns.push(column.toJSON());\n      }\n\n      Utils.setProperty(result, \"columns\", columns);\n    }\n\n    Utils.setProperty(result, \"bleed\", this.bleed, false);\n    return result;\n  };\n\n  ColumnSet.prototype.isFirstElement = function (element) {\n    for (var i = 0; i < this._columns.length; i++) {\n      if (this._columns[i].isVisible) {\n        return this._columns[i] == element;\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.isBleedingAtTop = function () {\n    if (this.isBleeding()) {\n      return true;\n    }\n\n    if (this._renderedColumns && this._renderedColumns.length > 0) {\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        if (column.isBleedingAtTop()) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.isBleedingAtBottom = function () {\n    if (this.isBleeding()) {\n      return true;\n    }\n\n    if (this._renderedColumns && this._renderedColumns.length > 0) {\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        if (column.isBleedingAtBottom()) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.getCount = function () {\n    return this._columns.length;\n  };\n\n  ColumnSet.prototype.getItemCount = function () {\n    return this.getCount();\n  };\n\n  ColumnSet.prototype.getFirstVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\n      return this._renderedColumns[0];\n    } else {\n      return null;\n    }\n  };\n\n  ColumnSet.prototype.getLastVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\n      return this._renderedColumns[this._renderedColumns.length - 1];\n    } else {\n      return null;\n    }\n  };\n\n  ColumnSet.prototype.getColumnAt = function (index) {\n    return this._columns[index];\n  };\n\n  ColumnSet.prototype.getItemAt = function (index) {\n    return this.getColumnAt(index);\n  };\n\n  ColumnSet.prototype.getJsonTypeName = function () {\n    return \"ColumnSet\";\n  };\n\n  ColumnSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    if (json[\"columns\"] != null) {\n      var jsonColumns = json[\"columns\"];\n      this._columns = [];\n\n      for (var i = 0; i < jsonColumns.length; i++) {\n        var column = this.createColumnInstance(jsonColumns[i], errors);\n\n        if (column) {\n          this._columns.push(column);\n        }\n      }\n    }\n\n    this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\n  };\n\n  ColumnSet.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    var weightedColumns = 0;\n    var stretchedColumns = 0;\n\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n\n      if (typeof column.width === \"number\") {\n        weightedColumns++;\n      } else if (column.width === \"stretch\") {\n        stretchedColumns++;\n      }\n    }\n\n    if (weightedColumns > 0 && stretchedColumns > 0) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.Hint,\n        message: \"It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.\"\n      });\n    }\n  };\n\n  ColumnSet.prototype.addColumn = function (column) {\n    if (!column.parent) {\n      this._columns.push(column);\n\n      column.setParent(this);\n    } else {\n      throw new Error(\"This column already belongs to another ColumnSet.\");\n    }\n  };\n\n  ColumnSet.prototype.removeItem = function (item) {\n    if (item instanceof Column) {\n      var itemIndex = this._columns.indexOf(item);\n\n      if (itemIndex >= 0) {\n        this._columns.splice(itemIndex, 1);\n\n        item.setParent(null);\n        this.updateLayout();\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.indexOf = function (cardElement) {\n    return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\n  };\n\n  ColumnSet.prototype.isLeftMostElement = function (element) {\n    return this._columns.indexOf(element) == 0;\n  };\n\n  ColumnSet.prototype.isRightMostElement = function (element) {\n    return this._columns.indexOf(element) == this._columns.length - 1;\n  };\n\n  ColumnSet.prototype.isTopElement = function (element) {\n    return this._columns.indexOf(element) >= 0;\n  };\n\n  ColumnSet.prototype.isBottomElement = function (element) {\n    return this._columns.indexOf(element) >= 0;\n  };\n\n  ColumnSet.prototype.getActionById = function (id) {\n    var result = null;\n\n    for (var i = 0; i < this._columns.length; i++) {\n      result = this._columns[i].getActionById(id);\n\n      if (result) {\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(ColumnSet.prototype, \"bleed\", {\n    get: function get() {\n      return this.getBleed();\n    },\n    set: function set(value) {\n      this.setBleed(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ColumnSet.prototype, \"padding\", {\n    get: function get() {\n      return this.getPadding();\n    },\n    set: function set(value) {\n      this.setPadding(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ColumnSet.prototype, \"selectAction\", {\n    get: function get() {\n      return this.getSelectAction();\n    },\n    set: function set(value) {\n      this.setSelectAction(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ColumnSet;\n}(StylableCardElementContainer);\n\nexports.ColumnSet = ColumnSet;\n\nfunction raiseImageLoadedEvent(image) {\n  var card = image.getRootElement();\n  var onImageLoadedHandler = card && card.onImageLoaded ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\n\n  if (onImageLoadedHandler) {\n    onImageLoadedHandler(image);\n  }\n}\n\nfunction raiseAnchorClickedEvent(element, anchor) {\n  var card = element.getRootElement();\n  var onAnchorClickedHandler = card && card.onAnchorClicked ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\n  return onAnchorClickedHandler != null ? onAnchorClickedHandler(element, anchor) : false;\n}\n\nfunction raiseExecuteActionEvent(action) {\n  var card = action.parent.getRootElement();\n  var onExecuteActionHandler = card && card.onExecuteAction ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\n\n  if (onExecuteActionHandler) {\n    if (action.prepareForExecution()) {\n      onExecuteActionHandler(action);\n    }\n  }\n}\n\nfunction raiseInlineCardExpandedEvent(action, isExpanded) {\n  var card = action.parent.getRootElement();\n  var onInlineCardExpandedHandler = card && card.onInlineCardExpanded ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;\n\n  if (onInlineCardExpandedHandler) {\n    onInlineCardExpandedHandler(action, isExpanded);\n  }\n}\n\nfunction raiseInputValueChangedEvent(input) {\n  var card = input.getRootElement();\n  var onInputValueChangedHandler = card && card.onInputValueChanged ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;\n\n  if (onInputValueChangedHandler) {\n    onInputValueChangedHandler(input);\n  }\n}\n\nfunction raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {\n  if (shouldUpdateLayout === void 0) {\n    shouldUpdateLayout = true;\n  }\n\n  var rootElement = element.getRootElement();\n\n  if (shouldUpdateLayout) {\n    rootElement.updateLayout();\n  }\n\n  var card = rootElement;\n  var onElementVisibilityChangedHandler = card && card.onElementVisibilityChanged ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;\n\n  if (onElementVisibilityChangedHandler != null) {\n    onElementVisibilityChangedHandler(element);\n  }\n}\n\nfunction raiseParseElementEvent(element, json, errors) {\n  var card = element.getRootElement();\n  var onParseElementHandler = card && card.onParseElement ? card.onParseElement : AdaptiveCard.onParseElement;\n\n  if (onParseElementHandler != null) {\n    onParseElementHandler(element, json, errors);\n  }\n}\n\nfunction raiseParseActionEvent(action, json, errors) {\n  var card = action.parent ? action.parent.getRootElement() : null;\n  var onParseActionHandler = card && card.onParseAction ? card.onParseAction : AdaptiveCard.onParseAction;\n\n  if (onParseActionHandler != null) {\n    onParseActionHandler(action, json, errors);\n  }\n}\n\nfunction raiseParseError(error, errors) {\n  if (errors) {\n    errors.push(error);\n  }\n\n  if (AdaptiveCard.onParseError != null) {\n    AdaptiveCard.onParseError(error);\n  }\n}\n\nvar ContainerWithActions =\n/** @class */\nfunction (_super) {\n  __extends(ContainerWithActions, _super);\n\n  function ContainerWithActions() {\n    var _this = _super.call(this) || this;\n\n    _this._actionCollection = new ActionCollection(_this);\n    return _this;\n  }\n\n  ContainerWithActions.prototype.internalRender = function () {\n    var element = _super.prototype.internalRender.call(this);\n\n    var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);\n\n    if (renderedActions) {\n      Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {\n        spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing),\n        lineThickness: null,\n        lineColor: null\n      }, Enums.Orientation.Horizontal));\n      Utils.appendChild(element, renderedActions);\n    }\n\n    if (this.renderIfEmpty) {\n      return element;\n    } else {\n      return element.children.length > 0 ? element : null;\n    }\n  };\n\n  ContainerWithActions.prototype.getHasExpandedAction = function () {\n    if (this.renderedActionCount == 0) {\n      return false;\n    } else if (this.renderedActionCount == 1) {\n      return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\n    } else {\n      return this._actionCollection.expandedAction != null;\n    }\n  };\n\n  Object.defineProperty(ContainerWithActions.prototype, \"renderedActionCount\", {\n    get: function get() {\n      return this._actionCollection.renderedActionCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ContainerWithActions.prototype, \"renderIfEmpty\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ContainerWithActions.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\n    return result;\n  };\n\n  ContainerWithActions.prototype.getActionCount = function () {\n    return this._actionCollection.items.length;\n  };\n\n  ContainerWithActions.prototype.getActionAt = function (index) {\n    if (index >= 0 && index < this.getActionCount()) {\n      return this._actionCollection.items[index];\n    } else {\n      _super.prototype.getActionAt.call(this, index);\n    }\n  };\n\n  ContainerWithActions.prototype.getActionById = function (id) {\n    var result = this._actionCollection.getActionById(id);\n\n    return result ? result : _super.prototype.getActionById.call(this, id);\n  };\n\n  ContainerWithActions.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n\n    this._actionCollection.parse(json[\"actions\"], errors);\n  };\n\n  ContainerWithActions.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this._actionCollection) {\n      this._actionCollection.validateProperties(context);\n    }\n  };\n\n  ContainerWithActions.prototype.isLastElement = function (element) {\n    return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;\n  };\n\n  ContainerWithActions.prototype.addAction = function (action) {\n    this._actionCollection.addAction(action);\n  };\n\n  ContainerWithActions.prototype.clear = function () {\n    _super.prototype.clear.call(this);\n\n    this._actionCollection.clear();\n  };\n\n  ContainerWithActions.prototype.getAllInputs = function () {\n    return _super.prototype.getAllInputs.call(this).concat(this._actionCollection.getAllInputs());\n  };\n\n  ContainerWithActions.prototype.getResourceInformation = function () {\n    return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());\n  };\n\n  ContainerWithActions.prototype.isBleedingAtBottom = function () {\n    if (this._actionCollection.renderedActionCount == 0) {\n      return _super.prototype.isBleedingAtBottom.call(this);\n    } else {\n      if (this._actionCollection.items.length == 1) {\n        return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\n      } else {\n        return this._actionCollection.expandedAction != null;\n      }\n    }\n  };\n\n  Object.defineProperty(ContainerWithActions.prototype, \"isStandalone\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ContainerWithActions;\n}(Container);\n\nexports.ContainerWithActions = ContainerWithActions;\n\nvar TypeRegistry =\n/** @class */\nfunction () {\n  function TypeRegistry() {\n    this._items = [];\n    this.reset();\n  }\n\n  TypeRegistry.prototype.findTypeRegistration = function (typeName) {\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].typeName === typeName) {\n        return this._items[i];\n      }\n    }\n\n    return null;\n  };\n\n  TypeRegistry.prototype.clear = function () {\n    this._items = [];\n  };\n\n  TypeRegistry.prototype.registerType = function (typeName, createInstance) {\n    var registrationInfo = this.findTypeRegistration(typeName);\n\n    if (registrationInfo != null) {\n      registrationInfo.createInstance = createInstance;\n    } else {\n      registrationInfo = {\n        typeName: typeName,\n        createInstance: createInstance\n      };\n\n      this._items.push(registrationInfo);\n    }\n  };\n\n  TypeRegistry.prototype.unregisterType = function (typeName) {\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].typeName === typeName) {\n        this._items.splice(i, 1);\n\n        return;\n      }\n    }\n  };\n\n  TypeRegistry.prototype.createInstance = function (typeName) {\n    var registrationInfo = this.findTypeRegistration(typeName);\n    return registrationInfo ? registrationInfo.createInstance() : null;\n  };\n\n  TypeRegistry.prototype.getItemCount = function () {\n    return this._items.length;\n  };\n\n  TypeRegistry.prototype.getItemAt = function (index) {\n    return this._items[index];\n  };\n\n  return TypeRegistry;\n}();\n\nexports.TypeRegistry = TypeRegistry;\n\nvar ElementTypeRegistry =\n/** @class */\nfunction (_super) {\n  __extends(ElementTypeRegistry, _super);\n\n  function ElementTypeRegistry() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ElementTypeRegistry.prototype.reset = function () {\n    this.clear();\n    this.registerType(\"Container\", function () {\n      return new Container();\n    });\n    this.registerType(\"TextBlock\", function () {\n      return new TextBlock();\n    });\n    this.registerType(\"RichTextBlock\", function () {\n      return new RichTextBlock();\n    });\n    this.registerType(\"TextRun\", function () {\n      return new TextRun();\n    });\n    this.registerType(\"Image\", function () {\n      return new Image();\n    });\n    this.registerType(\"ImageSet\", function () {\n      return new ImageSet();\n    });\n    this.registerType(\"Media\", function () {\n      return new Media();\n    });\n    this.registerType(\"FactSet\", function () {\n      return new FactSet();\n    });\n    this.registerType(\"ColumnSet\", function () {\n      return new ColumnSet();\n    });\n    this.registerType(\"ActionSet\", function () {\n      return new ActionSet();\n    });\n    this.registerType(\"Input.Text\", function () {\n      return new TextInput();\n    });\n    this.registerType(\"Input.Date\", function () {\n      return new DateInput();\n    });\n    this.registerType(\"Input.Time\", function () {\n      return new TimeInput();\n    });\n    this.registerType(\"Input.Number\", function () {\n      return new NumberInput();\n    });\n    this.registerType(\"Input.ChoiceSet\", function () {\n      return new ChoiceSetInput();\n    });\n    this.registerType(\"Input.Toggle\", function () {\n      return new ToggleInput();\n    });\n  };\n\n  return ElementTypeRegistry;\n}(TypeRegistry);\n\nexports.ElementTypeRegistry = ElementTypeRegistry;\n\nvar ActionTypeRegistry =\n/** @class */\nfunction (_super) {\n  __extends(ActionTypeRegistry, _super);\n\n  function ActionTypeRegistry() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ActionTypeRegistry.prototype.reset = function () {\n    this.clear();\n    this.registerType(OpenUrlAction.JsonTypeName, function () {\n      return new OpenUrlAction();\n    });\n    this.registerType(SubmitAction.JsonTypeName, function () {\n      return new SubmitAction();\n    });\n    this.registerType(ShowCardAction.JsonTypeName, function () {\n      return new ShowCardAction();\n    });\n    this.registerType(ToggleVisibilityAction.JsonTypeName, function () {\n      return new ToggleVisibilityAction();\n    });\n  };\n\n  return ActionTypeRegistry;\n}(TypeRegistry);\n\nexports.ActionTypeRegistry = ActionTypeRegistry;\n\nvar AdaptiveCard =\n/** @class */\nfunction (_super) {\n  __extends(AdaptiveCard, _super);\n\n  function AdaptiveCard() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._cardTypeName = \"AdaptiveCard\";\n    _this._fallbackCard = null;\n    _this.onAnchorClicked = null;\n    _this.onExecuteAction = null;\n    _this.onElementVisibilityChanged = null;\n    _this.onImageLoaded = null;\n    _this.onInlineCardExpanded = null;\n    _this.onInputValueChanged = null;\n    _this.onParseElement = null;\n    _this.onParseAction = null;\n    _this.version = new HostConfig.Version(1, 0);\n    _this.designMode = false;\n    return _this;\n  }\n\n  Object.defineProperty(AdaptiveCard, \"processMarkdown\", {\n    get: function get() {\n      throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\");\n    },\n    set: function set(value) {\n      throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\");\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  AdaptiveCard.applyMarkdown = function (text) {\n    var result = {\n      didProcess: false\n    };\n\n    if (AdaptiveCard.onProcessMarkdown) {\n      AdaptiveCard.onProcessMarkdown(text, result);\n    } else if (window[\"markdownit\"]) {\n      // Check for markdownit\n      result.outputHtml = window[\"markdownit\"]().render(text);\n      result.didProcess = true;\n    } else {\n      console.warn(\"Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown\");\n    }\n\n    return result;\n  };\n\n  AdaptiveCard.prototype.isVersionSupported = function () {\n    if (this.bypassVersionCheck) {\n      return true;\n    } else {\n      var unsupportedVersion = !this.version || !this.version.isValid || AdaptiveCard.currentVersion.major < this.version.major || AdaptiveCard.currentVersion.major == this.version.major && AdaptiveCard.currentVersion.minor < this.version.minor;\n      return !unsupportedVersion;\n    }\n  };\n\n  AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {\n    return \"body\";\n  };\n\n  AdaptiveCard.prototype.internalRender = function () {\n    var renderedElement = _super.prototype.internalRender.call(this);\n\n    if (AdaptiveCard.useAdvancedCardBottomTruncation) {\n      // Unlike containers, the root card element should be allowed to\n      // be shorter than its content (otherwise the overflow truncation\n      // logic would never get triggered)\n      renderedElement.style.minHeight = null;\n    }\n\n    return renderedElement;\n  };\n\n  AdaptiveCard.prototype.getHasBackground = function () {\n    return true;\n  };\n\n  AdaptiveCard.prototype.getDefaultPadding = function () {\n    return new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);\n  };\n\n  Object.defineProperty(AdaptiveCard.prototype, \"renderIfEmpty\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"bypassVersionCheck\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"allowCustomStyle\", {\n    get: function get() {\n      return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"hasBackground\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  AdaptiveCard.prototype.getJsonTypeName = function () {\n    return \"AdaptiveCard\";\n  };\n\n  AdaptiveCard.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n\n    Utils.setProperty(result, \"$schema\", \"http://adaptivecards.io/schemas/adaptive-card.json\");\n\n    if (!this.bypassVersionCheck && this.version) {\n      Utils.setProperty(result, \"version\", this.version.toString());\n    }\n\n    Utils.setProperty(result, \"fallbackText\", this.fallbackText);\n    Utils.setProperty(result, \"lang\", this.lang);\n    Utils.setProperty(result, \"speak\", this.speak);\n    return result;\n  };\n\n  AdaptiveCard.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this._cardTypeName != \"AdaptiveCard\") {\n      context.addFailure(this, {\n        error: Enums.ValidationError.MissingCardType,\n        message: \"Invalid or missing card type. Make sure the card's type property is set to \\\"AdaptiveCard\\\".\"\n      });\n    }\n\n    if (!this.bypassVersionCheck && !this.version) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"The version property must be specified.\"\n      });\n    } else if (!this.isVersionSupported()) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.UnsupportedCardVersion,\n        message: \"The specified card version (\" + this.version + \") is not supported. The maximum supported card version is \" + AdaptiveCard.currentVersion\n      });\n    }\n  };\n\n  AdaptiveCard.prototype.parse = function (json, errors) {\n    this._fallbackCard = null;\n    this._cardTypeName = Utils.getStringValue(json[\"type\"]);\n    this.speak = Utils.getStringValue(json[\"speak\"]);\n    var langId = Utils.getStringValue(json[\"lang\"]);\n\n    if (langId && typeof langId === \"string\") {\n      try {\n        this.lang = langId;\n      } catch (e) {\n        raiseParseError({\n          error: Enums.ValidationError.InvalidPropertyValue,\n          message: e.message\n        }, errors);\n      }\n    }\n\n    this.version = HostConfig.Version.parse(json[\"version\"], errors);\n    this.fallbackText = Utils.getStringValue(json[\"fallbackText\"]);\n    var fallbackElement = createElementInstance(null, json[\"fallback\"], !this.isDesignMode(), errors);\n\n    if (fallbackElement) {\n      this._fallbackCard = new AdaptiveCard();\n\n      this._fallbackCard.addItem(fallbackElement);\n    }\n\n    _super.prototype.parse.call(this, json, errors);\n  };\n\n  AdaptiveCard.prototype.render = function (target) {\n    var renderedCard;\n\n    if (this.shouldFallback() && this._fallbackCard) {\n      this._fallbackCard.hostConfig = this.hostConfig;\n      renderedCard = this._fallbackCard.render();\n    } else {\n      renderedCard = _super.prototype.render.call(this);\n\n      if (renderedCard) {\n        renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\")); // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\n        // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\n        // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\n        // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\n        // by default.\n\n        if (Shared.GlobalSettings.setTabIndexAtCardRoot) {\n          renderedCard.tabIndex = 0;\n        }\n\n        if (!Utils.isNullOrEmpty(this.speak)) {\n          renderedCard.setAttribute(\"aria-label\", this.speak);\n        }\n      }\n    }\n\n    if (target) {\n      target.appendChild(renderedCard);\n      this.updateLayout();\n    }\n\n    return renderedCard;\n  };\n\n  AdaptiveCard.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n\n    _super.prototype.updateLayout.call(this, processChildren);\n\n    if (AdaptiveCard.useAdvancedCardBottomTruncation && this.isRendered()) {\n      var card = this.renderedElement;\n      var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\n      this['handleOverflow'](card.offsetHeight - padding);\n    }\n  };\n\n  AdaptiveCard.prototype.shouldFallback = function () {\n    return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();\n  };\n\n  Object.defineProperty(AdaptiveCard.prototype, \"hasVisibleSeparator\", {\n    get: function get() {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AdaptiveCard.currentVersion = new HostConfig.Version(1, 2);\n  AdaptiveCard.useAdvancedTextBlockTruncation = true;\n  AdaptiveCard.useAdvancedCardBottomTruncation = false;\n  AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = true;\n  AdaptiveCard.allowMarkForTextHighlighting = false;\n  AdaptiveCard.alwaysBleedSeparators = false;\n  AdaptiveCard.enableFullJsonRoundTrip = false;\n  AdaptiveCard.useBuiltInInputValidation = true;\n  AdaptiveCard.displayInputValidationErrors = true;\n  AdaptiveCard.elementTypeRegistry = new ElementTypeRegistry();\n  AdaptiveCard.actionTypeRegistry = new ActionTypeRegistry();\n  AdaptiveCard.onAnchorClicked = null;\n  AdaptiveCard.onExecuteAction = null;\n  AdaptiveCard.onElementVisibilityChanged = null;\n  AdaptiveCard.onImageLoaded = null;\n  AdaptiveCard.onInlineCardExpanded = null;\n  AdaptiveCard.onInputValueChanged = null;\n  AdaptiveCard.onParseElement = null;\n  AdaptiveCard.onParseAction = null;\n  AdaptiveCard.onParseError = null;\n  AdaptiveCard.onProcessMarkdown = null;\n  return AdaptiveCard;\n}(ContainerWithActions);\n\nexports.AdaptiveCard = AdaptiveCard;\n\nvar InlineAdaptiveCard =\n/** @class */\nfunction (_super) {\n  __extends(InlineAdaptiveCard, _super);\n\n  function InlineAdaptiveCard() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.suppressStyle = false;\n    return _this;\n  }\n\n  InlineAdaptiveCard.prototype.getDefaultPadding = function () {\n    return new Shared.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);\n  };\n\n  Object.defineProperty(InlineAdaptiveCard.prototype, \"bypassVersionCheck\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InlineAdaptiveCard.prototype, \"defaultStyle\", {\n    get: function get() {\n      if (this.suppressStyle) {\n        return Enums.ContainerStyle.Default;\n      } else {\n        return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  InlineAdaptiveCard.prototype.render = function (target) {\n    var renderedCard = _super.prototype.render.call(this, target);\n\n    renderedCard.setAttribute(\"aria-live\", \"polite\");\n    renderedCard.removeAttribute(\"tabindex\");\n    return renderedCard;\n  };\n\n  InlineAdaptiveCard.prototype.getForbiddenActionTypes = function () {\n    return [ShowCardAction];\n  };\n\n  return InlineAdaptiveCard;\n}(AdaptiveCard);\n\nvar defaultHostConfig = new HostConfig.HostConfig({\n  supportsInteractivity: true,\n  spacing: {\n    small: 10,\n    default: 20,\n    medium: 30,\n    large: 40,\n    extraLarge: 50,\n    padding: 20\n  },\n  separator: {\n    lineThickness: 1,\n    lineColor: \"#EEEEEE\"\n  },\n  fontTypes: {\n    default: {\n      fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n      fontSizes: {\n        small: 12,\n        default: 14,\n        medium: 17,\n        large: 21,\n        extraLarge: 26\n      },\n      fontWeights: {\n        lighter: 200,\n        default: 400,\n        bolder: 600\n      }\n    },\n    monospace: {\n      fontFamily: \"'Courier New', Courier, monospace\",\n      fontSizes: {\n        small: 12,\n        default: 14,\n        medium: 17,\n        large: 21,\n        extraLarge: 26\n      },\n      fontWeights: {\n        lighter: 200,\n        default: 400,\n        bolder: 600\n      }\n    }\n  },\n  imageSizes: {\n    small: 40,\n    medium: 80,\n    large: 160\n  },\n  containerStyles: {\n    default: {\n      backgroundColor: \"#FFFFFF\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    emphasis: {\n      backgroundColor: \"#08000000\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    accent: {\n      backgroundColor: \"#C7DEF9\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    good: {\n      backgroundColor: \"#CCFFCC\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    attention: {\n      backgroundColor: \"#FFC5B2\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    warning: {\n      backgroundColor: \"#FFE2B2\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    }\n  },\n  actions: {\n    maxActions: 5,\n    spacing: Enums.Spacing.Default,\n    buttonSpacing: 10,\n    showCard: {\n      actionMode: Enums.ShowCardActionMode.Inline,\n      inlineTopMargin: 16\n    },\n    actionsOrientation: Enums.Orientation.Horizontal,\n    actionAlignment: Enums.ActionAlignment.Left\n  },\n  adaptiveCard: {\n    allowCustomStyle: false\n  },\n  imageSet: {\n    imageSize: Enums.Size.Medium,\n    maxImageHeight: 100\n  },\n  factSet: {\n    title: {\n      color: Enums.TextColor.Default,\n      size: Enums.TextSize.Default,\n      isSubtle: false,\n      weight: Enums.TextWeight.Bolder,\n      wrap: true,\n      maxWidth: 150\n    },\n    value: {\n      color: Enums.TextColor.Default,\n      size: Enums.TextSize.Default,\n      isSubtle: false,\n      weight: Enums.TextWeight.Default,\n      wrap: true\n    },\n    spacing: 10\n  }\n});","map":{"version":3,"sources":["../src/card-elements.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAA;AACA;;AACA,IAAA,KAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,KAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AAEA,SAAS,mBAAT,CAA6B,MAA7B,EAA6C,UAA7C,EAAyE;AACrE,MAAI,MAAJ,EAAY;AACR;AACA,IAAA,MAAM,CAAC,eAAD,CAAN,CAAwB,UAAxB;AACH;AACJ;;AAED,SAAS,eAAT,CAAyB,MAAzB,EAAyC,oBAAzC,EAA4E;AACxE,MAAI,oBAAJ,EAA0B;AACtB,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,oBAAoB,CAAC,MAAzC,EAAiD,CAAC,EAAlD,EAAsD;AAClD,UAAI,MAAM,CAAC,eAAP,OAA6B,oBAAoB,CAAC,CAAD,CAArD,EAA0D;AACtD,eAAO,KAAP;AACH;AACJ;AACJ;;AAED,SAAO,IAAP;AACH;;AAED,IAAK,yBAAL;;AAAA,CAAA,UAAK,yBAAL,EAA8B;AAC1B,EAAA,yBAAA,CAAA,yBAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAA,GAAA,aAAA;AACA,EAAA,yBAAA,CAAA,yBAAA,CAAA,eAAA,CAAA,GAAA,CAAA,CAAA,GAAA,eAAA;AACH,CAHD,EAAK,yBAAyB,KAAzB,yBAAyB,GAAA,EAAA,CAA9B;;AAKA,SAAS,wBAAT,CACI,MADJ,EAEI,IAFJ,EAGI,kBAHJ,EAII,aAJJ,EAKI,sBALJ,EAMI,6BANJ,EAOI,MAPJ,EAO8C;AAC1C,MAAI,MAAM,GAAM,IAAhB;;AAEA,MAAI,IAAI,IAAI,OAAO,IAAP,KAAgB,QAA5B,EAAsC;AAClC,QAAI,aAAa,GAAG,KAApB;AACN,QAAI,QAAQ,GAAG,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAAf;;AAEM,QAAI,kBAAkB,IAAI,kBAAkB,CAAC,OAAnB,CAA2B,QAA3B,KAAwC,CAAlE,EAAqE;AACjE,MAAA,eAAe,CAAC,6BAA6B,CAAC,QAAD,EAAW,yBAAyB,CAAC,aAArC,CAA9B,EAAmF,MAAnF,CAAf;AACH,KAFD,MAGK;AACD,MAAA,MAAM,GAAG,sBAAsB,CAAC,QAAD,CAA/B;;AAEA,UAAI,CAAC,MAAL,EAAa;AACT,QAAA,aAAa,GAAG,aAAhB;AAEA,QAAA,eAAe,CAAC,6BAA6B,CAAC,QAAD,EAAW,yBAAyB,CAAC,WAArC,CAA9B,EAAiF,MAAjF,CAAf;AACH,OAJD,MAKK;AACD,QAAA,MAAM,CAAC,SAAP,CAAiB,MAAjB;AACA,QAAA,MAAM,CAAC,KAAP,CAAa,IAAb,EAAmB,MAAnB;AAEA,QAAA,aAAa,GAAG,MAAM,CAAC,cAAP,MAA2B,aAA3C;AACH;;AAED,UAAI,aAAJ,EAAmB;AACf,YAAI,QAAQ,GAAG,IAAI,CAAC,UAAD,CAAnB;;AAEA,YAAI,CAAC,QAAL,EAAe;AACX,UAAA,MAAM,CAAC,iBAAP,CAAyB,IAAzB;AACH;;AACD,YAAI,OAAO,QAAP,KAAoB,QAApB,IAAgC,QAAQ,CAAC,WAAT,OAA2B,MAA/D,EAAuE;AACnE,UAAA,MAAM,GAAG,IAAT;AACH,SAFD,MAGK,IAAI,OAAO,QAAP,KAAoB,QAAxB,EAAkC;AACnC,UAAA,MAAM,GAAG,wBAAwB,CAC7B,MAD6B,EAE7B,QAF6B,EAG7B,kBAH6B,EAI7B,IAJ6B,EAK7B,sBAL6B,EAM7B,6BAN6B,EAO7B,MAP6B,CAAjC;AAQH;AACJ;AACJ;AACJ;;AAED,SAAO,MAAP;AACH;;AAED,SAAgB,oBAAhB,CACI,MADJ,EAEI,IAFJ,EAGI,oBAHJ,EAII,aAJJ,EAKI,MALJ,EAK8C;AAC1C,SAAO,wBAAwB,CAC3B,MAD2B,EAE3B,IAF2B,EAG3B,oBAH2B,EAI3B,aAJ2B,EAK3B,UAAC,QAAD,EAAiB;AAAO,WAAO,YAAY,CAAC,kBAAb,CAAgC,cAAhC,CAA+C,QAA/C,CAAP;AAAkE,GAL/D,EAM3B,UAAC,QAAD,EAAmB,SAAnB,EAAuD;AACnD,QAAI,SAAS,IAAI,yBAAyB,CAAC,WAA3C,EAAwD;AACpD,aAAO;AACH,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,iBAD1B;AAEH,QAAA,OAAO,EAAE,0BAA0B,QAA1B,GAAqC;AAF3C,OAAP;AAIH,KALD,MAMK;AACD,aAAO;AACH,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBAD1B;AAEH,QAAA,OAAO,EAAE,iBAAiB,QAAjB,GAA4B;AAFlC,OAAP;AAIH;AACJ,GAnB0B,EAoB3B,MApB2B,CAA/B;AAqBH;;AA3BD,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AA6BA,SAAgB,qBAAhB,CACI,MADJ,EAEI,IAFJ,EAGI,aAHJ,EAII,MAJJ,EAI8C;AAC1C,SAAO,wBAAwB,CAC3B,MAD2B,EAE3B,IAF2B,EAG3B,EAH2B,EAGvB;AACJ,EAAA,aAJ2B,EAK3B,UAAC,QAAD,EAAiB;AAAO,WAAO,YAAY,CAAC,mBAAb,CAAiC,cAAjC,CAAgD,QAAhD,CAAP;AAAmE,GALhE,EAM3B,UAAC,QAAD,EAAmB,SAAnB,EAAuD;AACnD,QAAI,SAAS,IAAI,yBAAyB,CAAC,WAA3C,EAAwD;AACpD,aAAO;AACH,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBAD1B;AAEH,QAAA,OAAO,EAAE,2BAA2B,QAA3B,GAAsC;AAF5C,OAAP;AAIH,KALD,MAMK;AACD,aAAO;AACH,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,qBAD1B;AAEH,QAAA,OAAO,EAAE,kBAAkB,QAAlB,GAA6B;AAFnC,OAAP;AAIH;AACJ,GAnB0B,EAoB3B,MApB2B,CAA/B;AAqBH;;AA1BD,OAAA,CAAA,qBAAA,GAAA,qBAAA;;AA4BA,IAAA,kBAAA;AAAA;AAAA,YAAA;AAAA,WAAA,kBAAA,GAAA;AACY,SAAA,cAAA,GAAiB,EAAjB;AAiCX;;AA/BG,EAAA,kBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,SAAK,cAAL,GAAsB,YAAY,CAAC,uBAAb,GAAuC,IAAvC,GAA8C,EAApE;AACH,GAFD;;AAIA,EAAA,kBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAJ;;AAEA,QAAI,YAAY,CAAC,uBAAb,IAAwC,KAAK,cAA7C,IAA+D,OAAO,KAAK,cAAZ,KAA+B,QAAlG,EAA4G;AACxG,MAAA,MAAM,GAAG,KAAK,cAAd;AACH,KAFD,MAGK;AACD,MAAA,MAAM,GAAG,EAAT;AACH;;AAED,WAAO,MAAP;AACH,GAXD;;AAaA,EAAA,kBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,UAAkB,IAAlB,EAAgC,KAAhC,EAA0C;AACtC,QAAI,oBAAoB,GAAI,OAAO,KAAP,KAAiB,QAAjB,IAA6B,KAAK,CAAC,aAAN,CAAoB,KAApB,CAA9B,IAA6D,KAAK,KAAK,SAAvE,IAAoF,KAAK,KAAK,IAAzH;;AAEA,QAAI,oBAAJ,EAA0B;AACtB,aAAO,KAAK,cAAL,CAAoB,IAApB,CAAP;AACH,KAFD,MAGK;AACD,WAAK,cAAL,CAAoB,IAApB,IAA4B,KAA5B;AACH;AACJ,GATD;;AAWA,EAAA,kBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,UAAkB,IAAlB,EAA8B;AAC1B,WAAO,KAAK,cAAL,CAAoB,IAApB,CAAP;AACH,GAFD;;AAGJ,SAAA,kBAAA;AAAC,CAlCD,EAAA;;AAAsB,OAAA,CAAA,kBAAA,GAAA,kBAAA;;AAoCtB,IAAA,iBAAA;AAAA;AAAA,YAAA;AAGI,WAAA,iBAAA,CAAqB,UAArB,EAA2C;AAAtB,SAAA,UAAA,GAAA,UAAA;AAFZ,SAAA,MAAA,GAAwC,EAAxC;AAEuC;;AACpD,SAAA,iBAAA;AAAC,CAJD,EAAA;;AAAa,OAAA,CAAA,iBAAA,GAAA,iBAAA;;AAMb,IAAA,iBAAA;AAAA;AAAA,YAAA;AAAA,WAAA,iBAAA,GAAA;AAWa,SAAA,MAAA,GAAoC,EAApC;AACA,SAAA,QAAA,GAAgC,EAAhC;AAiBZ;;AA5BW,EAAA,iBAAA,CAAA,SAAA,CAAA,eAAA,GAAR,UAAwB,UAAxB,EAA8C;AAC1C,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,QAAL,CAAc,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC3C,UAAI,KAAK,QAAL,CAAc,CAAd,EAAiB,UAAjB,KAAgC,UAApC,EAAgD;AAC5C,eAAO,CAAP;AACH;AACJ;;AAED,WAAO,CAAC,CAAR;AACH,GARO;;AAaR,EAAA,iBAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,UAAX,EAAmC,KAAnC,EAAqE;AACjE,QAAI,KAAK,GAAG,KAAK,eAAL,CAAqB,UAArB,CAAZ;AACA,QAAI,OAAJ;;AAEA,QAAI,KAAK,GAAG,CAAZ,EAAe;AACX,MAAA,OAAO,GAAG,IAAI,iBAAJ,CAAsB,UAAtB,CAAV;AAEA,WAAK,QAAL,CAAc,IAAd,CAAmB,OAAnB;AACH,KAJD,MAKK;AACD,MAAA,OAAO,GAAG,KAAK,QAAL,CAAc,KAAd,CAAV;AACH;;AAED,IAAA,OAAO,CAAC,MAAR,CAAe,IAAf,CAAoB,KAApB;AACH,GAdD;;AAeJ,SAAA,iBAAA;AAAC,CA7BD,EAAA;;AAAa,OAAA,CAAA,iBAAA,GAAA,iBAAA;;AA+Bb,IAAA,UAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAyC,EAAA,SAAA,CAAA,UAAA,EAAA,MAAA,CAAA;;AAAzC,WAAA,UAAA,GAAA;;AAiDC;;AA1CG,EAAA,UAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,EAAzB,CAAL,EAAmC;AAC/B,UAAI,OAAO,CAAC,MAAR,CAAe,cAAf,CAA8B,KAAK,EAAnC,CAAJ,EAA4C;AACxC,YAAI,OAAO,CAAC,MAAR,CAAe,KAAK,EAApB,KAA2B,CAA/B,EAAkC;AAC9B,UAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,YAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,WADjC;AAEI,YAAA,OAAO,EAAE,mBAAmB,KAAK;AAFrC,WAFJ;AAMH;;AAED,QAAA,OAAO,CAAC,MAAR,CAAe,KAAK,EAApB,KAA2B,CAA3B;AACH,OAXD,MAYK;AACD,QAAA,OAAO,CAAC,MAAR,CAAe,KAAK,EAApB,IAA0B,CAA1B;AACH;AACJ;AACJ,GAlBD;;AAoBA,EAAA,UAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,EAAL,GAAU,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,IAAD,CAAzB,CAAV;AACH,GAJD;;AAMA,EAAA,UAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,eAAL,EAAlC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,IAA1B,EAAgC,KAAK,EAArC;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,UAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,IAAI,iBAAJ,EAAb;AAEA,SAAK,0BAAL,CAAgC,MAAhC;AAEA,WAAO,MAAP;AACH,GAND;;AAOJ,SAAA,UAAA;AAAC,CAjDD,CAAyC,kBAAzC,CAAA;;AAAsB,OAAA,CAAA,UAAA,GAAA,UAAA;;AAqDtB,IAAA,WAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA0C,EAAA,SAAA,CAAA,WAAA,EAAA,MAAA,CAAA;;AAA1C,WAAA,WAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,eAAA,GAA2B,KAA3B;AACA,IAAA,KAAA,CAAA,KAAA,GAAgB,SAAhB;AACA,IAAA,KAAA,CAAA,WAAA,GAAsC,IAAtC;AACA,IAAA,KAAA,CAAA,OAAA,GAAuB,IAAvB;AACA,IAAA,KAAA,CAAA,gBAAA,GAAgC,IAAhC;AACA,IAAA,KAAA,CAAA,iBAAA,GAAiC,IAAjC;AACA,IAAA,KAAA,CAAA,UAAA,GAAsB,IAAtB;AACA,IAAA,KAAA,CAAA,uBAAA,GAAmC,KAAnC;AACA,IAAA,KAAA,CAAA,kCAAA,GAA6C,IAA7C;AACA,IAAA,KAAA,CAAA,QAAA,GAAqC,IAArC;AAqMC,IAAA,KAAA,CAAA,QAAA,GAAW,IAAI,UAAU,CAAC,gBAAf,EAAX;AAET,IAAA,KAAA,CAAA,mBAAA,GAAkD,IAAlD;AACA,IAAA,KAAA,CAAA,OAAA,GAAyB,KAAK,CAAC,OAAN,CAAc,OAAvC;AACA,IAAA,KAAA,CAAA,SAAA,GAAqB,KAArB;AACA,IAAA,KAAA,CAAA,iBAAA,GAA4B,IAA5B;AACA,IAAA,KAAA,CAAA,MAAA,GAA4B,MAA5B;AACA,IAAA,KAAA,CAAA,cAAA,GAA0B,IAA1B;;AAscH;;AAhpBW,EAAA,WAAA,CAAA,SAAA,CAAA,uBAAA,GAAR,YAAA;AACI,QAAI,iBAAiB,GAAG,KAAK,CAAC,gBAAN,CACpB,KAAK,UADe,EAEpB;AACI,MAAA,OAAO,EAAE,KAAK,UAAL,CAAgB,mBAAhB,CAAoC,KAAK,OAAzC,CADb;AAEI,MAAA,aAAa,EAAE,KAAK,SAAL,GAAiB,KAAK,UAAL,CAAgB,SAAhB,CAA0B,aAA3C,GAA2D,IAF9E;AAGI,MAAA,SAAS,EAAE,KAAK,SAAL,GAAiB,KAAK,UAAL,CAAgB,SAAhB,CAA0B,SAA3C,GAAuD;AAHtE,KAFoB,EAOpB,KAAK,oBAPe,CAAxB;;AASI,QAAI,YAAY,CAAC,qBAAb,IAAsC,iBAAtC,IAA2D,KAAK,oBAAL,IAA6B,KAAK,CAAC,WAAN,CAAkB,UAA9G,EAA0H;AACtH;AACA,UAAI,eAAe,GAAG,KAAK,kBAAL,EAAtB;;AAEA,UAAI,eAAe,IAAI,eAAe,CAAC,mBAAhB,EAAvB,EAA8D;AAC1D,YAAI,qBAAqB,GAAG,KAAK,UAAL,CAAgB,oCAAhB,CAAqD,eAAe,CAAC,mBAAhB,EAArD,CAA5B;AAEA,QAAA,iBAAiB,CAAC,KAAlB,CAAwB,UAAxB,GAAqC,MAAM,qBAAqB,CAAC,IAA5B,GAAmC,IAAxE;AACA,QAAA,iBAAiB,CAAC,KAAlB,CAAwB,WAAxB,GAAsC,MAAM,qBAAqB,CAAC,KAA5B,GAAoC,IAA1E;AACH;AACJ;;AAED,WAAO,iBAAP;AACP,GAvBO;;AAyBA,EAAA,WAAA,CAAA,SAAA,CAAA,+BAAA,GAAR,YAAA;AACI,QAAI,WAAW,GAAG,KAAK,YAAL,MAAuB,KAAK,SAA5B,GAAwC,KAAK,kCAA7C,GAAkF,MAApG;;AAEA,QAAI,KAAK,gBAAT,EAA2B;AACvB,WAAK,gBAAL,CAAsB,KAAtB,CAA4B,OAA5B,GAAsC,WAAtC;AACH;;AAED,QAAI,KAAK,iBAAT,EAA4B;AACxB,UAAI,KAAK,MAAL,IAAe,KAAK,MAAL,CAAY,cAAZ,CAA2B,IAA3B,CAAnB,EAAqD;AACjD,aAAK,iBAAL,CAAuB,KAAvB,CAA6B,OAA7B,GAAuC,MAAvC;AACH,OAFD,MAGK;AACD,aAAK,iBAAL,CAAuB,KAAvB,CAA6B,OAA7B,GAAuC,WAAvC;AACH;AACJ;AACJ,GAfO;;AAiBA,EAAA,WAAA,CAAA,SAAA,CAAA,wBAAA,GAAR,YAAA;AACI,QAAI,KAAK,gBAAL,IAAyB,KAAK,SAAlC,EAA6C;AACzC,WAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,QAAzC;AACA,WAAK,SAAL,GAAiB,KAAjB;AACA,MAAA,kCAAkC,CAAC,IAAD,EAAO,KAAP,CAAlC;AACH;AACJ,GANO;;AAQA,EAAA,WAAA,CAAA,SAAA,CAAA,8BAAA,GAAR,YAAA;AACI,QAAI,KAAK,gBAAL,IAAyB,CAAC,KAAK,SAAnC,EAA8C;AAC1C,WAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,IAAzC;AACA,WAAK,SAAL,GAAiB,IAAjB;AACA,MAAA,kCAAkC,CAAC,IAAD,EAAO,KAAP,CAAlC;AACH;AACJ,GANO,CA9DZ,CAsEI;;;AACQ,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UAAuB,SAAvB,EAAwC;AACpC,QAAI,KAAK,SAAL,IAAkB,KAAK,qBAAL,EAAtB,EAAoD;AAChD,UAAI,OAAO,GAAG,KAAK,gBAAL,CAAsB,SAAtB,CAAd,CADgD,CAGhD;AACA;;AACA,WAAK,uBAAL,GAA+B,OAAO,IAAI,KAAK,uBAA/C;;AAEA,UAAI,CAAC,OAAL,EAAc;AACV,aAAK,wBAAL;AACH,OAFD,MAGK,IAAI,OAAO,IAAI,CAAC,KAAK,SAArB,EAAgC;AACjC,aAAK,8BAAL;AACH;AACJ;AACJ,GAfO,CAvEZ,CAwFI;;;AACQ,EAAA,WAAA,CAAA,SAAA,CAAA,aAAA,GAAR,YAAA;AACI,QAAI,WAAW,GAAG,KAAlB;;AAEA,QAAI,KAAK,uBAAT,EAAkC;AAC9B,WAAK,sBAAL;AACA,WAAK,uBAAL,GAA+B,KAA/B;AACA,MAAA,WAAW,GAAG,IAAd;AACH;;AAED,QAAI,KAAK,qBAAT,EAAgC;AAC5B,WAAK,8BAAL;AACH;;AAED,WAAO,WAAP;AACH,GAdO;;AAgBE,EAAA,WAAA,CAAA,SAAA,CAAA,wBAAA,GAAV,YAAA;AACI,QAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,oBAAvB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,KAAxB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,MAA1B;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,MAAzB;AACA,IAAA,OAAO,CAAC,SAAR,GAAoB,WAAW,KAAK,eAAL,EAA/B;AAEA,WAAO,OAAP;AACH,GATS;;AAWA,EAAA,WAAA,CAAA,SAAA,CAAA,yBAAA,GAAV,UAAoC,eAApC,EAAgE;AAC5D,QAAI,KAAK,MAAL,KAAgB,MAApB,EAA4B;AACxB,MAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAA7B;AACH,KAFD,MAGK;AACD,MAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAA7B;AACH;;AAED,QAAI,KAAK,cAAT,EAAyB;AACrB,MAAA,eAAe,CAAC,KAAhB,CAAsB,SAAtB,GAAkC,KAAK,cAAL,GAAsB,IAAxD;AACH;AACJ,GAXS;;AAeA,EAAA,WAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AACI,WAAO,KAAK,cAAL,EAAP;AACH,GAFS;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,YAAA,GAAV,YAAA;AACI,QAAI,KAAK,gBAAT,EAA2B;AACvB,UAAI,YAAY,CAAC,qBAAb,IAAsC,KAAK,oBAAL,IAA6B,KAAK,CAAC,WAAN,CAAkB,UAArF,IAAmG,CAAC,KAAK,UAAL,EAAxG,EAA2H;AACvH,YAAI,OAAO,GAAG,IAAI,MAAM,CAAC,iBAAX,EAAd;AAEA,aAAK,8BAAL,CAAoC,OAApC;AAEA,YAAI,eAAe,GAAG,KAAK,UAAL,CAAgB,oCAAhB,CAAqD,OAArD,CAAtB;AAEA,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,MAAM,eAAe,CAAC,IAAtB,GAA6B,IAAtE;AACA,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,WAA5B,GAA0C,MAAM,eAAe,CAAC,KAAtB,GAA8B,IAAxE;AACH,OATD,MAUK;AACD,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,WAA5B,GAA0C,GAA1C;AACA,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,GAAzC;AACH;AACJ;AACJ,GAjBS;AAmBV;;;;AAIG;;;AACO,EAAA,WAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,UAA2B,SAA3B,EAA4C;AACxC;AACA;AACA;AACA,WAAO,KAAP;AACH,GALS;AAOV;;AAEG;;;AACO,EAAA,WAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA,CAAsC,CAA5B;;AAEA,EAAA,WAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACI,WAAO,IAAI,MAAM,CAAC,iBAAX,EAAP;AACH,GAFS;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,YAAA;AACI,WAAO,KAAP;AACH,GAFS;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,UAAA,GAAV,YAAA;AACI,WAAO,KAAK,QAAZ;AACH,GAFS;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,UAAA,GAAV,UAAqB,KAArB,EAAoD;AAChD,SAAK,QAAL,GAAgB,KAAhB;AACH,GAFS;;AAIV,EAAA,MAAA,CAAA,cAAA,CAAc,WAAA,CAAA,SAAd,EAAc,mBAAd,EAA+B;SAA/B,eAAA;AACI,aAAO,KAAP;AACH,KAF8B;oBAAA;;AAAA,GAA/B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,WAAA,CAAA,SAAd,EAAc,kBAAd,EAA8B;SAA9B,eAAA;AACI,aAAO,IAAP;AACH,KAF6B;oBAAA;;AAAA,GAA9B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,WAAA,CAAA,SAAd,EAAc,oBAAd,EAAgC;SAAhC,eAAA;AACI,aAAO,IAAP;AACH,KAF+B;oBAAA;;AAAA,GAAhC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,WAAA,CAAA,SAAd,EAAc,sBAAd,EAAkC;SAAlC,eAAA;AACI,aAAO,KAAK,CAAC,WAAN,CAAkB,UAAzB;AACH,KAFiC;oBAAA;;AAAA,GAAlC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,WAAA,CAAA,SAAd,EAAc,cAAd,EAA0B;SAA1B,eAAA;AACI,aAAO,KAAK,CAAC,cAAN,CAAqB,OAA5B;AACH,KAFyB;oBAAA;;AAAA,GAA1B;;AAeA,EAAA,WAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACI,WAAO,EAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACI,WAAO,KAAP;AACH,GAFD;;AAIH,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACC,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEM,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,WAA1B,EAAuC,KAAK,SAA5C,EAAuD,IAAvD;;AAEA,QAAI,KAAK,mBAAL,KAA6B,IAAjC,EAAuC;AACnC,MAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,mBAA5B,EAAiD,MAAjD,EAAyD,qBAAzD,EAAgF,KAAK,mBAArF;AACH;;AAED,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,OAA5B,EAAqC,MAArC,EAA6C,SAA7C,EAAwD,KAAK,OAA7D,EAAsE,KAAK,CAAC,OAAN,CAAc,OAApF;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,WAA1B,EAAuC,KAAK,SAA5C,EAAuD,KAAvD;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,KAAK,MAAzC,EAAiD,MAAjD;;AAEA,QAAI,KAAK,iBAAT,EAA4B;AACxB,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,WAA1B,EAAuC,OAAO,KAAK,cAAZ,KAA+B,QAA/B,IAA2C,CAAC,KAAK,CAAC,KAAK,cAAN,CAAjD,GAAyE,KAAK,cAAL,GAAsB,IAA/F,GAAsG,SAA7I;AACH;;AAED,WAAO,MAAP;AACH,GAlBJ;;AAoBG,EAAA,WAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAA4B;AACxB,SAAK,OAAL,GAAe,KAAf;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI,QAAI,KAAK,MAAT,EAAiB;AACb,aAAO,KAAK,MAAL,CAAY,iBAAZ,EAAP;AACH;;AAED,WAAO,KAAK,YAAZ;AACH,GAND;;AAQA,EAAA,WAAA,CAAA,SAAA,CAAA,wBAAA,GAAA,YAAA;AACI,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,uBAAA,GAAA,YAAA;AACI,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,8BAAA,GAAA,UACI,MADJ,EAEI,UAFJ,EAGI,YAHJ,EAII,aAJJ,EAKI,WALJ,EAK+B;AAH3B,QAAA,UAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,UAAA,GAAA,IAAA;AAA0B;;AAC1B,QAAA,YAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,YAAA,GAAA,IAAA;AAA4B;;AAC5B,QAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,aAAA,GAAA,IAAA;AAA6B;;AAC7B,QAAA,WAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,WAAA,GAAA,IAAA;AAA2B;;AAC3B,QAAI,KAAK,MAAT,EAAiB;AACb,UAAI,YAAY,GAAG,UAAU,IAAI,KAAK,MAAL,CAAY,YAAZ,CAAyB,IAAzB,CAAjC;AACA,UAAI,cAAc,GAAG,YAAY,IAAI,KAAK,MAAL,CAAY,kBAAZ,CAA+B,IAA/B,CAArC;AACA,UAAI,eAAe,GAAG,aAAa,IAAI,KAAK,MAAL,CAAY,eAAZ,CAA4B,IAA5B,CAAvC;AACA,UAAI,aAAa,GAAG,WAAW,IAAI,KAAK,MAAL,CAAY,iBAAZ,CAA8B,IAA9B,CAAnC;AAEA,UAAI,gBAAgB,GAAG,KAAK,MAAL,CAAY,mBAAZ,EAAvB;;AAEA,UAAI,gBAAJ,EAAsB;AAClB,YAAI,YAAY,IAAI,gBAAgB,CAAC,GAAjB,IAAwB,KAAK,CAAC,OAAN,CAAc,IAA1D,EAAgE;AAC5D,UAAA,MAAM,CAAC,GAAP,GAAa,gBAAgB,CAAC,GAA9B;AAEA,UAAA,YAAY,GAAG,KAAf;AACH;;AAED,YAAI,cAAc,IAAI,gBAAgB,CAAC,KAAjB,IAA0B,KAAK,CAAC,OAAN,CAAc,IAA9D,EAAoE;AAChE,UAAA,MAAM,CAAC,KAAP,GAAe,gBAAgB,CAAC,KAAhC;AAEA,UAAA,cAAc,GAAG,KAAjB;AACH;;AAED,YAAI,eAAe,IAAI,gBAAgB,CAAC,MAAjB,IAA2B,KAAK,CAAC,OAAN,CAAc,IAAhE,EAAsE;AAClE,UAAA,MAAM,CAAC,MAAP,GAAgB,gBAAgB,CAAC,MAAjC;AAEA,UAAA,eAAe,GAAG,KAAlB;AACH;;AAED,YAAI,aAAa,IAAI,gBAAgB,CAAC,IAAjB,IAAyB,KAAK,CAAC,OAAN,CAAc,IAA5D,EAAkE;AAC9D,UAAA,MAAM,CAAC,IAAP,GAAc,gBAAgB,CAAC,IAA/B;AAEA,UAAA,aAAa,GAAG,KAAhB;AACH;AACJ;;AAED,UAAI,YAAY,IAAI,cAAhB,IAAkC,eAAlC,IAAqD,aAAzD,EAAwE;AACpE,aAAK,MAAL,CAAY,8BAAZ,CACI,MADJ,EAEI,YAFJ,EAGI,cAHJ,EAII,eAJJ,EAKI,aALJ;AAMH;AACJ;AACJ,GAjDD;;AAmDA,EAAA,WAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AAC9D,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEM,IAAA,sBAAsB,CAAC,IAAD,EAAO,IAAP,EAAa,MAAb,CAAtB;AAEA,SAAK,QAAL,CAAc,KAAd,CAAoB,IAAI,CAAC,UAAD,CAAxB,EAAsC,MAAtC;AACA,SAAK,SAAL,GAAiB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,WAAD,CAAvB,EAAsC,KAAK,SAA3C,CAAjB;AACA,SAAK,mBAAL,GAA2B,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,mBAAzB,EAA8C,IAAI,CAAC,qBAAD,CAAlD,EAA2E,KAAK,mBAAhF,CAA3B;AAEA,SAAK,OAAL,GAAe,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,OAAzB,EAAkC,IAAI,CAAC,SAAD,CAAtC,EAAmD,KAAK,CAAC,OAAN,CAAc,OAAjE,CAAf;AACA,SAAK,SAAL,GAAiB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,WAAD,CAAvB,EAAsC,KAAK,SAA3C,CAAjB;AAEA,QAAI,cAAc,GAAG,IAAI,CAAC,YAAD,CAAzB;;AAEA,QAAI,cAAc,KAAK,SAAvB,EAAkC;AAC9B,UAAI,cAAc,KAAK,MAAvB,EAA+B;AAC3B,aAAK,OAAL,GAAe,KAAK,CAAC,OAAN,CAAc,IAA7B;AACA,aAAK,SAAL,GAAiB,KAAjB;AACH,OAHD,MAIK,IAAI,cAAc,KAAK,QAAvB,EAAiC;AAClC,aAAK,OAAL,GAAe,KAAK,CAAC,OAAN,CAAc,KAA7B;AACA,aAAK,SAAL,GAAiB,IAAjB;AACH,OAHI,MAIA,IAAI,cAAc,KAAK,SAAvB,EAAkC;AACnC,aAAK,OAAL,GAAe,KAAK,CAAC,OAAN,CAAc,OAA7B;AACA,aAAK,SAAL,GAAiB,KAAjB;AACH;;AAED,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH;;AAED,QAAI,UAAU,GAAG,IAAI,CAAC,QAAD,CAArB;;AAEA,QAAI,UAAU,KAAK,MAAf,IAAyB,UAAU,KAAK,SAA5C,EAAuD;AACnD,WAAK,MAAL,GAAc,UAAd;AACH;;AAED,QAAI,KAAK,iBAAT,EAA4B;AACxB,UAAI,aAAa,GAAG,IAAI,CAAC,WAAD,CAAxB;;AAEA,UAAI,aAAa,IAAI,OAAO,aAAP,KAAyB,QAA9C,EAAwD;AACpD,YAAI,OAAO,GAAG,KAAd;;AAEA,YAAI;AACA,cAAI,IAAI,GAAG,MAAM,CAAC,WAAP,CAAmB,KAAnB,CAAyB,aAAzB,EAAwC,IAAxC,CAAX;;AAEA,cAAI,IAAI,CAAC,IAAL,IAAa,KAAK,CAAC,QAAN,CAAe,KAAhC,EAAuC;AACnC,iBAAK,cAAL,GAAsB,IAAI,CAAC,YAA3B;AAEA,YAAA,OAAO,GAAG,IAAV;AACH;AACJ,SARD,CASA,OAAA,EAAA,EAAM,CACF;AACH;;AAED,YAAI,CAAC,OAAL,EAAc;AACV,UAAA,eAAe,CACX;AACI,YAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBADjC;AAEI,YAAA,OAAO,EAAE,kCAAkC;AAF/C,WADW,EAKX,MALW,CAAf;AAOH;AACJ;AACJ,KA7BD,MA8BK;AACD,WAAK,cAAL,GAAsB,IAAtB;AACH;AACJ,GA5ED;;AA8EA,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,CAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,KAAZ,EAAyB;AACrB,UAAM,IAAI,KAAJ,CAAU,qBAAV,CAAN;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,KAAK,MAAL,IAAe,KAAK,MAAL,YAAuB,oBAA1C,EAAgE;AAC5D,aAAO,KAAK,MAAL,CAAY,UAAZ,CAAuB,IAAvB,CAAP;AACH;;AAED,WAAO,KAAP;AACH,GAND;;AAQA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,SAAK,gBAAL,GAAwB,KAAK,sBAAL,EAAxB;AACA,SAAK,iBAAL,GAAyB,KAAK,uBAAL,EAAzB;;AAEA,QAAI,KAAK,gBAAT,EAA2B;AACvB,UAAI,KAAK,iBAAT,EAA4B;AACxB,aAAK,gBAAL,CAAsB,SAAtB,CAAgC,GAAhC,CAAoC,KAAK,iBAAzC;AACH;;AAED,WAAK,gBAAL,CAAsB,KAAtB,CAA4B,SAA5B,GAAwC,YAAxC;AACA,WAAK,kCAAL,GAA0C,KAAK,gBAAL,CAAsB,KAAtB,CAA4B,OAAtE;AAEA,WAAK,yBAAL,CAA+B,KAAK,gBAApC;AACA,WAAK,YAAL,CAAkB,KAAlB;AACH,KAVD,MAWK,IAAI,KAAK,YAAL,EAAJ,EAAyB;AAC1B,WAAK,gBAAL,GAAwB,KAAK,wBAAL,EAAxB;AACH;;AAED,WAAO,KAAK,gBAAZ;AACH,GApBD;;AAsBA,EAAA,WAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,eAAb,EAA4C;AAA/B,QAAA,eAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,eAAA,GAAA,IAAA;AAA+B;;AACxC,SAAK,+BAAL;AACA,SAAK,YAAL;AACH,GAHD;;AAKA,EAAA,WAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,WAAR,EAAgC;AAC5B,WAAO,CAAC,CAAR;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,QAAI,WAAW,GAAG,KAAK,cAAL,EAAlB;AAEA,WAAO,WAAW,YAAY,YAAvB,IAAuC,WAAW,CAAC,UAA1D;AACH,GAJD;;AAMA,EAAA,WAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACI,WAAO,KAAK,gBAAL,IAAyB,KAAK,gBAAL,CAAsB,YAAtB,GAAqC,CAArE;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,OAAf,EAAmC;AAC/B,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,OAAd,EAAkC;AAC9B,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,iBAAZ,CAA8B,IAA9B,KAAuC,KAAK,MAAL,CAAY,eAAZ,EAArD,GAAqF,IAA5F;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,gBAAA,GAAA,YAAA;AACI,WAAO,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,kBAAZ,CAA+B,IAA/B,KAAwC,KAAK,MAAL,CAAY,gBAAZ,EAAtD,GAAuF,IAA9F;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,cAAZ,CAA2B,IAA3B,KAAoC,KAAK,MAAL,CAAY,cAAZ,EAAlD,GAAiF,IAAxF;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI,WAAO,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,aAAZ,CAA0B,IAA1B,KAAmC,KAAK,MAAL,CAAY,iBAAZ,EAAjD,GAAmF,IAA1F;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,KAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,WAAO,KAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,UAAkB,OAAlB,EAAsC;AAClC,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,UAAmB,OAAnB,EAAuC;AACnC,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,OAAb,EAAiC;AAC7B,WAAO,KAAK,cAAL,CAAoB,OAApB,CAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,eAAA,GAAA,UAAgB,OAAhB,EAAoC;AAChC,WAAO,KAAK,aAAL,CAAmB,OAAnB,CAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,qBAAA,GAAA,YAAA;AACI,WAAO,KAAK,gBAAL,IAAyB,KAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,IAA0C,QAA1E;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,QAAI,WAAW,GAAgB,IAA/B;;AAEA,WAAO,WAAW,CAAC,MAAnB,EAA2B;AACvB,MAAA,WAAW,GAAG,WAAW,CAAC,MAA1B;AACH;;AAED,WAAO,WAAP;AACH,GARD;;AAUA,EAAA,WAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,QAAI,cAAc,GAAgB,KAAK,MAAvC;;AAEA,WAAO,cAAP,EAAuB;AACnB,UAAI,cAAc,YAAY,SAA9B,EAAyC;AACrC,eAAkB,cAAlB;AACH;;AAED,MAAA,cAAc,GAAG,cAAc,CAAC,MAAhC;AACH;;AAED,WAAO,IAAP;AACH,GAZD;;AAcA,EAAA,WAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,EAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,WAAO,EAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,EAAf,EAAyB;AACrB,WAAO,KAAK,EAAL,KAAY,EAAZ,GAAiB,IAAjB,GAAwB,IAA/B;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,WAAO,IAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,eAAL,IAAwB,CAAC,KAAK,QAAL,CAAc,SAAd,CAAwB,KAAK,UAAL,CAAgB,gBAAxC,CAAhC;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,UAAkB,KAAlB,EAAgC;AAC5B,SAAK,eAAL,GAAuB,KAAvB;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,YAAA;AACI,QAAI,OAAO,GAAG,KAAK,UAAL,EAAd;AAEA,WAAQ,OAAO,IAAI,KAAK,kBAAjB,GAAuC,OAAvC,GAAiD,KAAK,iBAAL,EAAxD;AACH,GAJD;;AAMA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,MAAJ,EAAQ;SAAR,eAAA;AACI,UAAI,KAAK,KAAT,EAAgB;AACZ,eAAO,KAAK,KAAZ;AACH,OAFD,MAGK;AACD,YAAI,KAAK,MAAT,EAAiB;AACb,iBAAO,KAAK,MAAL,CAAY,IAAnB;AACH,SAFD,MAGK;AACD,iBAAO,SAAP;AACH;AACJ;AACJ,KAZO;SAcR,aAAS,KAAT,EAAsB;AAClB,UAAI,KAAK,IAAI,KAAK,IAAI,EAAtB,EAA0B;AACtB,YAAI,KAAK,GAAG,gBAAZ;AAEA,YAAI,OAAO,GAAG,KAAK,CAAC,IAAN,CAAW,KAAX,CAAd;;AAEA,YAAI,CAAC,OAAL,EAAc;AACV,gBAAM,IAAI,KAAJ,CAAU,kCAAkC,KAA5C,CAAN;AACH;AACJ;;AAED,WAAK,KAAL,GAAa,KAAb;AACH,KA1BO;oBAAA;;AAAA,GAAR;AA4BA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,YAAJ,EAAc;SAAd,eAAA;AACI,UAAI,KAAK,WAAT,EAAsB;AAClB,eAAO,KAAK,WAAZ;AACH,OAFD,MAGK;AACD,YAAI,KAAK,MAAT,EAAiB;AACb,iBAAO,KAAK,MAAL,CAAY,UAAnB;AACH,SAFD,MAGK;AACD,iBAAO,iBAAP;AACH;AACJ;AACJ,KAZa;SAcd,aAAe,KAAf,EAA2C;AACvC,WAAK,WAAL,GAAmB,KAAnB;AACH,KAhBa;oBAAA;;AAAA,GAAd;AAkBA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,UAAI,KAAK,MAAT,EAAiB;AACb,eAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAP;AACH,OAFD,MAGK;AACD,eAAO,CAAP;AACH;AACJ,KAPQ;oBAAA;;AAAA,GAAT;AASA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,eAAJ,EAAiB;SAAjB,eAAA;AACI,aAAO,KAAP;AACH,KAFgB;oBAAA;;AAAA,GAAjB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,IAAP;AACH,KAFe;oBAAA;;AAAA,GAAhB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,UAAJ,EAAY;SAAZ,eAAA;AACI,aAAO,KAAP;AACH,KAFW;oBAAA;;AAAA,GAAZ;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,QAAJ,EAAU;SAAV,eAAA;AACI,aAAO,KAAK,OAAZ;AACH,KAFS;oBAAA;;AAAA,GAAV;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,WAAJ,EAAa;SAAb,eAAA;AACI,aAAO,KAAK,UAAZ;AACH,KAFY;SAab,aAAc,KAAd,EAA4B;AACxB;AACA;AACA;AACA,UAAI,YAAY,CAAC,+BAAb,IAAgD,CAAC,KAArD,EAA4D;AACxD,aAAK,sBAAL;AACH;;AAED,UAAI,KAAK,UAAL,IAAmB,KAAvB,EAA8B;AAC1B,aAAK,UAAL,GAAkB,KAAlB;AAEA,aAAK,+BAAL;;AAEA,YAAI,KAAK,gBAAT,EAA2B;AACvB,UAAA,kCAAkC,CAAC,IAAD,CAAlC;AACH;AACJ;AACJ,KA9BY;oBAAA;;AAAA,GAAb;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,qBAAJ,EAAuB;SAAvB,eAAA;AACI,UAAI,KAAK,MAAL,IAAe,KAAK,gBAAxB,EAA0C;AACtC,eAAO,CAAC,KAAK,MAAL,CAAY,cAAZ,CAA2B,IAA3B,CAAD,KAAsC,KAAK,SAAL,IAAkB,KAAK,YAAL,EAAxD,CAAP;AACH,OAFD,MAGK;AACD,eAAO,KAAP;AACH;AACJ,KAPsB;oBAAA;;AAAA,GAAvB;AA4BA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,iBAAJ,EAAmB;SAAnB,eAAA;AACI,aAAO,KAAK,gBAAZ;AACH,KAFkB;oBAAA;;AAAA,GAAnB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,kBAAJ,EAAoB;SAApB,eAAA;AACI,aAAO,KAAK,iBAAZ;AACH,KAFmB;oBAAA;;AAAA,GAApB;AAGJ,SAAA,WAAA;AAAC,CA5pBD,CAA0C,UAA1C,CAAA;;AAAsB,OAAA,CAAA,WAAA,GAAA,WAAA;;AA8pBtB,IAAA,aAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,aAAA,EAAA,MAAA,CAAA;;AAA5C,WAAA,aAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAEY,IAAA,KAAA,CAAA,aAAA,GAAwB,IAAxB;AA4CR,IAAA,KAAA,CAAA,IAAA,GAAuB,KAAK,CAAC,QAAN,CAAe,OAAtC;AACA,IAAA,KAAA,CAAA,MAAA,GAA2B,KAAK,CAAC,UAAN,CAAiB,OAA5C;AACA,IAAA,KAAA,CAAA,KAAA,GAAyB,KAAK,CAAC,SAAN,CAAgB,OAAzC;AACA,IAAA,KAAA,CAAA,QAAA,GAAoB,KAApB;AACA,IAAA,KAAA,CAAA,QAAA,GAA4B,IAA5B;;AAwIH;;AAtLa,EAAA,aAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,YAAA;AACI,WAAO,KAAK,UAAL,CAAgB,eAAhB,CAAgC,cAAhC,CAA+C,KAAK,iBAAL,EAA/C,CAAP;AACH,GAFS;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,WAAA,GAAV,UAAsB,QAAtB,EAA6D;AACzD,YAAQ,KAAK,IAAb;AACI,WAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACI,eAAO,QAAQ,CAAC,SAAT,CAAmB,KAA1B;;AACJ,WAAK,KAAK,CAAC,QAAN,CAAe,MAApB;AACI,eAAO,QAAQ,CAAC,SAAT,CAAmB,MAA1B;;AACJ,WAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACI,eAAO,QAAQ,CAAC,SAAT,CAAmB,KAA1B;;AACJ,WAAK,KAAK,CAAC,QAAN,CAAe,UAApB;AACI,eAAO,QAAQ,CAAC,SAAT,CAAmB,UAA1B;;AACJ;AACI,eAAO,QAAQ,CAAC,SAAT,CAAmB,OAA1B;AAVR;AAYH,GAbS;;AAeA,EAAA,aAAA,CAAA,SAAA,CAAA,kBAAA,GAAV,UAA6B,QAA7B,EAAsE,KAAtE,EAA4F;AACxF,YAAQ,KAAR;AACI,WAAK,KAAK,CAAC,SAAN,CAAgB,MAArB;AACI,eAAO,QAAQ,CAAC,MAAhB;;AACJ,WAAK,KAAK,CAAC,SAAN,CAAgB,IAArB;AACI,eAAO,QAAQ,CAAC,IAAhB;;AACJ,WAAK,KAAK,CAAC,SAAN,CAAgB,KAArB;AACI,eAAO,QAAQ,CAAC,KAAhB;;AACJ,WAAK,KAAK,CAAC,SAAN,CAAgB,IAArB;AACI,eAAO,QAAQ,CAAC,IAAhB;;AACJ,WAAK,KAAK,CAAC,SAAN,CAAgB,OAArB;AACI,eAAO,QAAQ,CAAC,OAAhB;;AACJ,WAAK,KAAK,CAAC,SAAN,CAAgB,SAArB;AACI,eAAO,QAAQ,CAAC,SAAhB;;AACJ;AACI,eAAO,QAAQ,CAAC,OAAhB;AAdR;AAgBH,GAjBS;;AAmBA,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAV,UAAkB,KAAlB,EAA+B;AAC3B,SAAK,KAAL,GAAa,KAAb;AACH,GAFS;;AAUV,EAAA,aAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACI,WAAO,KAAK,IAAZ;AACH,GAFD;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,QAA5B,EAAsC,MAAtC,EAA8C,MAA9C,EAAsD,KAAK,IAA3D,EAAiE,KAAK,CAAC,QAAN,CAAe,OAAhF;AACA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,UAA5B,EAAwC,MAAxC,EAAgD,QAAhD,EAA0D,KAAK,MAA/D,EAAuE,KAAK,CAAC,UAAN,CAAiB,OAAxF;AACA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,SAA5B,EAAuC,MAAvC,EAA+C,OAA/C,EAAwD,KAAK,KAA7D,EAAoE,KAAK,CAAC,SAAN,CAAgB,OAApF;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAvC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,UAA1B,EAAsC,KAAK,QAA3C,EAAqD,KAArD;AACA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,QAA5B,EAAsC,MAAtC,EAA8C,UAA9C,EAA0D,KAAK,QAA/D,EAAyE,KAAK,CAAC,QAAN,CAAe,OAAxF;AAEA,WAAO,MAAP;AACH,GAXD;;AAaA,EAAA,aAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,aAAd,EAAwC;AACpC,QAAI,QAAQ,GAAG,KAAK,UAAL,CAAgB,qBAAhB,CAAsC,KAAK,QAA3C,CAAf;;AAEA,QAAI,QAAQ,CAAC,UAAb,EAAyB;AACrB,MAAA,aAAa,CAAC,KAAd,CAAoB,UAApB,GAAiC,QAAQ,CAAC,UAA1C;AACH;;AAED,QAAI,QAAJ;;AAEA,YAAQ,KAAK,IAAb;AACI,WAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACI,QAAA,QAAQ,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAA9B;AACA;;AACJ,WAAK,KAAK,CAAC,QAAN,CAAe,MAApB;AACI,QAAA,QAAQ,GAAG,QAAQ,CAAC,SAAT,CAAmB,MAA9B;AACA;;AACJ,WAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACI,QAAA,QAAQ,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAA9B;AACA;;AACJ,WAAK,KAAK,CAAC,QAAN,CAAe,UAApB;AACI,QAAA,QAAQ,GAAG,QAAQ,CAAC,SAAT,CAAmB,UAA9B;AACA;;AACJ;AACI,QAAA,QAAQ,GAAG,QAAQ,CAAC,SAAT,CAAmB,OAA9B;AACA;AAfR;;AAkBA,IAAA,aAAa,CAAC,KAAd,CAAoB,QAApB,GAA+B,QAAQ,GAAG,IAA1C;AAEA,QAAI,eAAe,GAAG,KAAK,kBAAL,CAAwB,KAAK,2BAAL,GAAmC,gBAA3D,EAA6E,KAAK,cAAlF,CAAtB;AAEA,IAAA,aAAa,CAAC,KAAd,CAAoB,KAApB,GAA4B,KAAK,CAAC,gBAAN,CAAuB,KAAK,QAAL,GAAgB,eAAe,CAAC,MAAhC,GAAyC,eAAe,CAAC,OAAhF,CAA5B;AAEA,QAAI,UAAJ;;AAEA,YAAQ,KAAK,MAAb;AACI,WAAK,KAAK,CAAC,UAAN,CAAiB,OAAtB;AACI,QAAA,UAAU,GAAG,QAAQ,CAAC,WAAT,CAAqB,OAAlC;AACA;;AACJ,WAAK,KAAK,CAAC,UAAN,CAAiB,MAAtB;AACI,QAAA,UAAU,GAAG,QAAQ,CAAC,WAAT,CAAqB,MAAlC;AACA;;AACJ;AACI,QAAA,UAAU,GAAG,QAAQ,CAAC,WAAT,CAAqB,OAAlC;AACA;AATR;;AAYA,IAAA,aAAa,CAAC,KAAd,CAAoB,UAApB,GAAiC,UAAU,CAAC,QAAX,EAAjC;AACH,GAhDD;;AAkDA,EAAA,aAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,IAAL,GAAY,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAAZ;AAEA,QAAI,UAAU,GAAG,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAAjB;;AAEA,QAAI,UAAU,IAAI,UAAU,CAAC,WAAX,OAA6B,QAA/C,EAAyD;AACrD,WAAK,IAAL,GAAY,KAAK,CAAC,QAAN,CAAe,OAA3B;AAEA,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH,KAVD,MAWK;AACD,WAAK,IAAL,GAAY,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,QAAzB,EAAmC,UAAnC,EAA+C,KAAK,IAApD,CAAZ;AACH;;AAED,QAAI,YAAY,GAAG,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,QAAD,CAAzB,CAAnB;;AAEA,QAAI,YAAY,IAAI,YAAY,CAAC,WAAb,OAA+B,QAAnD,EAA6D;AACzD,WAAK,MAAL,GAAc,KAAK,CAAC,UAAN,CAAiB,OAA/B;AAEA,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH,KAVD,MAWK;AACD,WAAK,MAAL,GAAc,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,UAAzB,EAAqC,YAArC,EAAmD,KAAK,MAAxD,CAAd;AACH;;AAED,SAAK,KAAL,GAAa,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,SAAzB,EAAoC,IAAI,CAAC,OAAD,CAAxC,EAAmD,KAAK,KAAxD,CAAb;AACA,SAAK,QAAL,GAAgB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,UAAD,CAAvB,EAAqC,KAAK,QAA1C,CAAhB;AACA,SAAK,QAAL,GAAgB,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,QAAzB,EAAmC,IAAI,CAAC,UAAD,CAAvC,EAAqD,KAAK,QAA1D,CAAhB;AACH,GA1CD;;AA4CA,EAAA,MAAA,CAAA,cAAA,CAAI,aAAA,CAAA,SAAJ,EAAI,gBAAJ,EAAkB;SAAlB,eAAA;AACI,aAAO,KAAK,KAAL,GAAa,KAAK,KAAlB,GAA0B,KAAK,CAAC,SAAN,CAAgB,OAAjD;AACH,KAFiB;oBAAA;;AAAA,GAAlB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,aAAA,CAAA,SAAJ,EAAI,MAAJ,EAAQ;SAAR,eAAA;AACI,aAAO,KAAK,KAAZ;AACH,KAFO;SAIR,aAAS,KAAT,EAAsB;AAClB,WAAK,OAAL,CAAa,KAAb;AACH,KANO;oBAAA;;AAAA,GAAR;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,aAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAK,aAAZ;AACH,KAFe;SAIhB,aAAiB,KAAjB,EAA8B;AAC1B,WAAK,aAAL,GAAqB,KAArB;;AAEA,UAAI,KAAK,aAAT,EAAwB;AACpB,aAAK,aAAL,CAAmB,SAAnB,CAA6B,IAA7B;AACH;AACJ,KAVe;oBAAA;;AAAA,GAAhB;AAWJ,SAAA,aAAA;AAAC,CA1LD,CAA4C,WAA5C,CAAA;;AAAsB,OAAA,CAAA,aAAA,GAAA,aAAA;;AA4LtB,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAA/B,WAAA,SAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAGY,IAAA,KAAA,CAAA,cAAA,GAAyB,IAAzB;AACA,IAAA,KAAA,CAAA,iBAAA,GAA6B,IAA7B;AAmMR,IAAA,KAAA,CAAA,IAAA,GAAgB,KAAhB;AAEA,IAAA,KAAA,CAAA,WAAA,GAAuB,IAAvB;;AAgFH;;AAnRW,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAR,YAAA;AACI,QAAI,SAAS,GAAG,KAAK,QAAL,GACT,KAAK,mBAAL,GAA2B,KAAK,QAAjC,GAA6C,IADnC,GAEV,IAFN;AAIA,SAAK,eAAL,CAAqB,KAArB,CAA2B,SAA3B,GAAuC,SAAvC;AACA,SAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,kBAAtC;AACH,GAPO;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,mBAAA,GAAR,UAA4B,SAA5B,EAA6C;AACzC;AACA;AACA;AACA,QAAI,QAAQ,GAAG,KAAK,eAAL,CAAqB,QAApC;AACA,QAAI,UAAU,GAAG,CAAC,QAAQ,CAAC,MAA3B;AAEA,QAAI,mBAAmB,GAAG,UAAU,IAAI,QAAQ,CAAC,MAAT,IAAmB,CAAnB,IACnB,QAAQ,CAAC,CAAD,CAAR,CAAa,OAAb,CAAqB,WAArB,MAAsC,GAD3D;;AAGA,QAAI,mBAAJ,EAAyB;AACrB,UAAI,OAAO,GAAG,UAAU,GAClB,KAAK,eADa,GAEL,QAAQ,CAAC,CAAD,CAF3B;AAIA,MAAA,KAAK,CAAC,QAAN,CAAe,OAAf,EAAwB,SAAxB,EAAmC,KAAK,mBAAxC;AACA,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH,GApBO;;AAsBE,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAV,UAAkB,KAAlB,EAA+B;AAC3B,IAAA,MAAA,CAAA,SAAA,CAAM,OAAN,CAAa,IAAb,CAAa,IAAb,EAAc,KAAd;;AAEA,SAAK,cAAL,GAAsB,IAAtB;AACH,GAJS;;AAMA,EAAA,SAAA,CAAA,SAAA,CAAA,yBAAA,GAAV,YAAA;AACI,WAAO,KAAP;AACH,GAFS;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,SAAK,cAAL,GAAsB,IAAtB;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,IAAzB,CAAL,EAAqC;AACjC,UAAI,UAAU,GAAG,KAAK,UAAtB;AAEA,UAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAK,yBAAL,EAAvB,CAAd;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,UAAU,CAAC,gBAAX,CAA4B,cAA5B,CAAtB;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,QAAzB;AAEA,WAAK,aAAL,CAAmB,OAAnB;;AAEA,UAAI,KAAK,YAAT,EAAuB;AACnB,QAAA,OAAO,CAAC,OAAR,GAAkB,UAAC,CAAD,EAAE;AAChB,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,UAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH,SALD;;AAOA,YAAI,UAAU,CAAC,qBAAf,EAAsC;AAClC,UAAA,OAAO,CAAC,QAAR,GAAmB,CAAnB;AACA,UAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA6B,KAAK,YAAL,CAAkB,WAAlB,EAA7B;AACA,UAAA,OAAO,CAAC,YAAR,CAAqB,YAArB,EAAmC,KAAK,YAAL,CAAkB,KAArD;AACA,UAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,UAAU,CAAC,gBAAX,CAA4B,eAA5B,CAAtB;AACH;AACJ;;AAED,UAAI,CAAC,KAAK,cAAV,EAA0B;AACtB,aAAK,iBAAL,GAAyB,IAAzB;AAEA,YAAI,aAAa,GAAG,cAAc,CAAC,UAAf,CAA0B,KAAK,IAA/B,EAAqC,KAAK,IAA1C,CAApB;;AAEA,YAAI,KAAK,WAAT,EAAsB;AAClB,cAAI,YAAY,CAAC,4BAAjB,EAA+C;AAC3C,YAAA,aAAa,GAAG,aAAa,CAAC,OAAd,CAAsB,SAAtB,EAAiC,KAAjC,EAAwC,OAAxC,CAAgD,WAAhD,EAA6D,KAA7D,CAAhB;AACH;;AAED,cAAI,wBAAwB,GAAG,YAAY,CAAC,aAAb,CAA2B,aAA3B,CAA/B;;AAEA,cAAI,wBAAwB,CAAC,UAAzB,IAAuC,wBAAwB,CAAC,UAApE,EAAgF;AAC5E,iBAAK,cAAL,GAAsB,wBAAwB,CAAC,UAA/C;AACA,iBAAK,iBAAL,GAAyB,KAAzB,CAF4E,CAI5E;AACA;;AACA,gBAAI,YAAY,CAAC,4BAAjB,EAA+C;AAC3C,kBAAI,SAAS,GAAW,EAAxB;AACA,kBAAI,cAAc,GAAG,KAAK,2BAAL,EAArB;;AAEA,kBAAI,cAAc,CAAC,wBAAnB,EAA6C;AACzC,gBAAA,SAAS,IAAI,uBAAuB,cAAc,CAAC,wBAAtC,GAAiE,GAA9E;AACH;;AAED,kBAAI,cAAc,CAAC,wBAAnB,EAA6C;AACzC,gBAAA,SAAS,IAAI,YAAY,cAAc,CAAC,wBAA3B,GAAsD,GAAnE;AACH;;AAED,kBAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,SAApB,CAAL,EAAqC;AACjC,gBAAA,SAAS,GAAG,YAAY,SAAZ,GAAwB,GAApC;AACH;;AAED,mBAAK,cAAL,GAAsB,KAAK,cAAL,CAAoB,OAApB,CAA4B,MAA5B,EAAoC,WAAW,SAAX,GAAuB,GAA3D,EAAgE,OAAhE,CAAwE,OAAxE,EAAiF,SAAjF,CAAtB;AACH;AACJ,WAxBD,MAwBO;AACH,iBAAK,cAAL,GAAsB,aAAtB;AACA,iBAAK,iBAAL,GAAyB,IAAzB;AACH;AACJ,SAnCD,MAoCK;AACD,eAAK,cAAL,GAAsB,aAAtB;AACA,eAAK,iBAAL,GAAyB,IAAzB;AACH;AACJ;;AAED,UAAI,KAAK,iBAAT,EAA4B;AACxB,QAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,cAAzB;AACH,OAFD,MAGK;AACD,QAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,cAAzB;AACH;;AAED,UAAI,OAAO,CAAC,iBAAR,YAAqC,WAAzC,EAAsD;AAClD,YAAI,iBAAiB,GAAgB,OAAO,CAAC,iBAA7C;AACA,QAAA,iBAAiB,CAAC,KAAlB,CAAwB,SAAxB,GAAoC,KAApC;AACA,QAAA,iBAAiB,CAAC,KAAlB,CAAwB,KAAxB,GAAgC,MAAhC;;AAEA,YAAI,CAAC,KAAK,IAAV,EAAgB;AACZ,UAAA,iBAAiB,CAAC,KAAlB,CAAwB,QAAxB,GAAmC,QAAnC;AACA,UAAA,iBAAiB,CAAC,KAAlB,CAAwB,YAAxB,GAAuC,UAAvC;AACH;AACJ;;AAED,UAAI,OAAO,CAAC,gBAAR,YAAoC,WAAxC,EAAqD;AACnC,QAAA,OAAO,CAAC,gBAAR,CAA0B,KAA1B,CAAgC,YAAhC,GAA+C,KAA/C;AACjB;;AAED,UAAI,OAAO,GAAG,OAAO,CAAC,oBAAR,CAA6B,GAA7B,CAAd;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,OAAO,CAAC,MAA5B,EAAoC,CAAC,EAArC,EAAyC;AACrC,YAAI,MAAM,GAAsB,OAAO,CAAC,CAAD,CAAvC;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAAU,CAAC,gBAAX,CAA4B,WAA5B,CAArB;AACA,QAAA,MAAM,CAAC,MAAP,GAAgB,QAAhB;;AACA,QAAA,MAAM,CAAC,OAAP,GAAiB,UAAC,CAAD,EAAE;AACf,cAAI,uBAAuB,CAAC,KAAD,EAAO,CAAC,CAAC,MAAT,CAA3B,EAAkE;AAC9D,YAAA,CAAC,CAAC,cAAF;AACA,YAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;AACH;AACJ,SALD;AAMH;;AAED,UAAI,KAAK,IAAT,EAAe;AACX,QAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,YAAzB;;AAEA,YAAI,KAAK,QAAL,GAAgB,CAApB,EAAuB;AACnB,UAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA2B,KAAK,mBAAL,GAA2B,KAAK,QAAjC,GAA6C,IAAvE;AACA,UAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,QAAzB;AACH;AACJ,OAPD,MAQK;AACD,QAAA,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,QAA3B;AACA,QAAA,OAAO,CAAC,KAAR,CAAc,YAAd,GAA6B,UAA7B;AACH;;AAED,UAAI,YAAY,CAAC,8BAAb,IAA+C,YAAY,CAAC,+BAAhE,EAAiG;AAC7F,aAAK,kBAAL,GAA0B,OAAO,CAAC,SAAlC;AACH;;AAED,aAAO,OAAP;AACH,KA9HD,MA+HK;AACD,aAAO,IAAP;AACH;AACJ,GArIS;;AAuIA,EAAA,SAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,UAA2B,SAA3B,EAA4C;AACxC,QAAI,SAAS,IAAI,KAAK,mBAAtB,EAA2C;AACvC,aAAO,KAAK,mBAAL,CAAyB,SAAzB,CAAP;AACH;;AAED,WAAO,KAAP;AACH,GANS;;AAQA,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AACI,SAAK,sBAAL;;AAEA,QAAI,YAAY,CAAC,8BAAb,IAA+C,KAAK,QAAxD,EAAkE;AAC9D,UAAI,SAAS,GAAG,KAAK,mBAAL,GAA2B,KAAK,QAAhD;AACA,WAAK,mBAAL,CAAyB,SAAzB;AACH;AACJ,GAPS;;AAaV,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAvC,EAA6C,KAA7C;AACA,IAAA,KAAK,CAAC,iBAAN,CAAwB,MAAxB,EAAgC,UAAhC,EAA4C,KAAK,QAAjD;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,aAAd,EAAwC;AACpC,IAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,aAApB;;AAEA,QAAI,eAAe,GAAG,KAAK,kBAAL,EAAtB;AACA,QAAI,KAAK,GAAG,eAAe,GAAG,eAAe,CAAC,KAAhB,EAAH,GAA6B,KAAxD;;AAEA,YAAQ,KAAK,mBAAb;AACI,WAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,QAAA,aAAa,CAAC,KAAd,CAAoB,SAApB,GAAgC,QAAhC;AACA;;AACJ,WAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,QAAA,aAAa,CAAC,KAAd,CAAoB,SAApB,GAAgC,KAAK,GAAG,MAAH,GAAY,OAAjD;AACA;;AACJ;AACI,QAAA,aAAa,CAAC,KAAd,CAAoB,SAApB,GAAgC,KAAK,GAAG,OAAH,GAAa,MAAlD;AACA;AATR;;AAYA,QAAI,WAAW,GAAG,KAAK,UAAL,CAAgB,WAAlC;;AAEA,QAAI,WAAJ,EAAiB;AACb,cAAQ,KAAK,IAAb;AACI,aAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACI,eAAK,mBAAL,GAA2B,WAAW,CAAC,KAAvC;AACA;;AACJ,aAAK,KAAK,CAAC,QAAN,CAAe,MAApB;AACI,eAAK,mBAAL,GAA2B,WAAW,CAAC,MAAvC;AACA;;AACJ,aAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACI,eAAK,mBAAL,GAA2B,WAAW,CAAC,KAAvC;AACA;;AACJ,aAAK,KAAK,CAAC,QAAN,CAAe,UAApB;AACI,eAAK,mBAAL,GAA2B,WAAW,CAAC,UAAvC;AACA;;AACJ;AACI,eAAK,mBAAL,GAA2B,WAAW,CAAC,OAAvC;AACA;AAfR;AAiBH,KAlBD,MAmBK;AACD;AACA;AACA,WAAK,mBAAL,GAA2B,KAAK,WAAL,CAAiB,KAAK,UAAL,CAAgB,qBAAhB,CAAsC,KAAK,QAA3C,CAAjB,IAAyE,IAApG;AACH;;AAED,IAAA,aAAa,CAAC,KAAd,CAAoB,UAApB,GAAiC,KAAK,mBAAL,GAA2B,IAA5D;AACH,GA9CD;;AAgDA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,IAAL,GAAY,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,MAAD,CAAvB,EAAiC,KAAK,IAAtC,CAAZ;AACA,SAAK,QAAL,GAAgB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,UAAD,CAAzB,CAAhB;AACH,GALD;;AAOA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,WAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,eAAb,EAA6C;AAAhC,QAAA,eAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,eAAA,GAAA,KAAA;AAAgC;;AACzC,IAAA,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB,EAAmB,eAAnB;;AAEA,QAAI,YAAY,CAAC,8BAAb,IAA+C,KAAK,QAApD,IAAgE,KAAK,UAAL,EAApE,EAAuF;AACnF;AACA;AACA,WAAK,sBAAL;AACA,WAAK,mBAAL,CAAyB,KAAK,mBAAL,GAA2B,KAAK,QAAzD;AACH;AACJ,GATD;;AAUJ,SAAA,SAAA;AAAC,CAzRD,CAA+B,aAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;;AA2Rb,IAAA,KAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAoB,EAAA,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;;AAApB,WAAA,KAAA,GAAA;;AAgBC;;AAfa,EAAA,KAAA,CAAA,SAAA,CAAA,yBAAA,GAAV,YAAA;AACI,WAAO,OAAP;AACH,GAFS;;AAIA,EAAA,KAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,eAAe,GAAqB,MAAA,CAAA,SAAA,CAAM,cAAN,CAAoB,IAApB,CAAoB,IAApB,CAAxC;;AAEA,QAAI,eAAe,IAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAxB,EAAgE;AAC5D,MAAA,eAAe,CAAC,OAAhB,GAA0B,KAAK,YAA/B;AACH;;AAED,WAAO,eAAP;AACH,GARS;;AAWd,SAAA,KAAA;AAAC,CAhBD,CAAoB,SAApB,CAAA;;AAkBA,IAAA,OAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA6B,EAAA,SAAA,CAAA,OAAA,EAAA,MAAA,CAAA;;AAA7B,WAAA,OAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAuCI,IAAA,KAAA,CAAA,MAAA,GAAkB,KAAlB;AACA,IAAA,KAAA,CAAA,aAAA,GAAyB,KAAzB;AACA,IAAA,KAAA,CAAA,SAAA,GAAqB,KAArB;;AA2DH;;AAnGa,EAAA,OAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,IAAzB,CAAL,EAAqC;AACjC,UAAI,UAAU,GAAG,KAAK,UAAtB;AAEA,UAAI,aAAa,GAAG,cAAc,CAAC,UAAf,CAA0B,KAAK,IAA/B,EAAqC,KAAK,IAA1C,CAApB;AAEA,UAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAd;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,UAAU,CAAC,gBAAX,CAA4B,YAA5B,CAAtB;AAEA,WAAK,aAAL,CAAmB,OAAnB;;AAEA,UAAI,KAAK,YAAL,IAAqB,UAAU,CAAC,qBAApC,EAA2D;AACvD,YAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAb;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAAU,CAAC,gBAAX,CAA4B,WAA5B,CAArB;AACA,QAAA,MAAM,CAAC,IAAP,GAAc,KAAK,YAAL,CAAkB,OAAlB,EAAd;AACA,QAAA,MAAM,CAAC,MAAP,GAAgB,QAAhB;;AACA,QAAA,MAAM,CAAC,OAAP,GAAiB,UAAC,CAAD,EAAE;AACf,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,UAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH,SALD;;AAOA,QAAA,MAAM,CAAC,SAAP,GAAmB,aAAnB;AAEA,QAAA,OAAO,CAAC,WAAR,CAAoB,MAApB;AACH,OAfD,MAgBK;AACD,QAAA,OAAO,CAAC,SAAR,GAAoB,aAApB;AACH;;AAED,aAAO,OAAP;AACH,KA/BD,MAgCK;AACD,aAAO,IAAP;AACH;AACJ,GApCS;;AA0CV,EAAA,OAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,aAAd,EAAwC;AACpC,IAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,aAApB;;AAEA,QAAI,KAAK,MAAT,EAAiB;AACb,MAAA,aAAa,CAAC,KAAd,CAAoB,SAApB,GAAgC,QAAhC;AACH;;AAED,QAAI,KAAK,aAAT,EAAwB;AACpB,MAAA,aAAa,CAAC,KAAd,CAAoB,cAApB,GAAqC,cAArC;AACH;;AAED,QAAI,KAAK,SAAT,EAAoB;AAChB,UAAI,eAAe,GAAG,KAAK,kBAAL,CAAwB,KAAK,2BAAL,GAAmC,gBAA3D,EAA6E,KAAK,cAAlF,CAAtB;AAEA,MAAA,aAAa,CAAC,KAAd,CAAoB,eAApB,GAAsC,KAAK,CAAC,gBAAN,CAAuB,KAAK,QAAL,GAAgB,eAAe,CAAC,eAAhB,CAAgC,MAAhD,GAAyD,eAAe,CAAC,eAAhB,CAAgC,OAAhH,CAAtC;AACH;AACJ,GAhBD;;AAkBA,EAAA,OAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,KAAK,MAAzC,EAAiD,KAAjD;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,eAA1B,EAA2C,KAAK,aAAhD,EAA+D,KAA/D;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,WAA1B,EAAuC,KAAK,SAA5C,EAAuD,KAAvD;;AAEA,QAAI,KAAK,YAAT,EAAuB;AACnB,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,cAA1B,EAA0C,KAAK,YAAL,CAAkB,MAAlB,EAA1C;AACH;;AAED,WAAO,MAAP;AACH,GAZD;;AAcA,EAAA,OAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,MAAL,GAAc,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,QAAD,CAAvB,EAAmC,KAAK,MAAxC,CAAd;AACA,SAAK,aAAL,GAAqB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,eAAD,CAAvB,EAA0C,KAAK,aAA/C,CAArB;AACA,SAAK,SAAL,GAAiB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,WAAD,CAAvB,EAAsC,KAAK,SAA3C,CAAjB;AACA,SAAK,YAAL,GAAoB,oBAAoB,CACpC,IADoC,EAEpC,IAAI,CAAC,cAAD,CAFgC,EAGpC,CAAC,cAAc,CAAC,YAAhB,CAHoC,EAIpC,CAAC,KAAK,YAAL,EAJmC,EAKpC,MALoC,CAAxC;AAMH,GAZD;;AAcA,EAAA,OAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,SAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,OAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAP;AACH,KAFe;oBAAA;;AAAA,GAAhB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,OAAA,CAAA,SAAJ,EAAI,UAAJ,EAAY;SAAZ,eAAA;AACI,aAAO,IAAP;AACH,KAFW;oBAAA;;AAAA,GAAZ;AAGJ,SAAA,OAAA;AAAC,CApGD,CAA6B,aAA7B,CAAA;;AAAa,OAAA,CAAA,OAAA,GAAA,OAAA;;AAsGb,IAAA,aAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAmC,EAAA,SAAA,CAAA,aAAA,EAAA,MAAA,CAAA;;AAAnC,WAAA,aAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,QAAA,GAA0B,EAA1B;;AAoJX;;AAlJW,EAAA,aAAA,CAAA,SAAA,CAAA,iBAAA,GAAR,UAA0B,MAA1B,EAA+C,QAA/C,EAAwE;AAAzB,QAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,QAAA,GAAA,KAAA;AAAyB;;AACpE,QAAI,CAAC,MAAM,CAAC,QAAZ,EAAsB;AAClB,YAAM,IAAI,KAAJ,CAAU,+FAAV,CAAN;AACH;;AAED,QAAI,KAAK,GAAY,MAAM,CAAC,MAAP,IAAiB,IAAjB,IAAyB,QAA9C;;AAEA,QAAI,CAAC,KAAD,IAAU,MAAM,CAAC,MAAP,IAAiB,IAA/B,EAAqC;AACjC,YAAM,IAAI,KAAJ,CAAU,yFAAV,CAAN;AACH,KAFD,MAGK;AACD,MAAA,MAAM,CAAC,SAAP,CAAiB,IAAjB;;AAEA,WAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB;AACH;AACJ,GAfO;;AAiBE,EAAA,aAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,UAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,kBAAjC,CAApB;AAEA,UAAI,eAAe,GAAG,KAAK,kBAAL,EAAtB;AACA,UAAI,KAAK,GAAG,eAAe,GAAG,eAAe,CAAC,KAAhB,EAAH,GAA6B,KAAxD;;AAEA,cAAQ,KAAK,mBAAb;AACI,aAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,QAA1B;AACA;;AACJ,aAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,KAAK,GAAG,MAAH,GAAY,OAA3C;AACA;;AACJ;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,KAAK,GAAG,OAAH,GAAa,MAA5C;AACA;AATR;;AAYA,UAAI,eAAe,GAAW,CAA9B;;AAEA,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,YAAI,cAAc,GAAG,MAAM,CAAC,MAAP,EAArB;;AAEA,YAAI,cAAJ,EAAoB;AAChB,UAAA,OAAO,CAAC,WAAR,CAAoB,cAApB;AAEA,UAAA,eAAe;AAClB;AACJ;;AAED,UAAI,eAAe,GAAG,CAAtB,EAAyB;AACrB,eAAO,OAAP;AACH;AACJ;;AAED,WAAO,IAAP;AACH,GAtCS;;AAwCV,EAAA,aAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,EAAb;;AAEA,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,MAAA,MAAM,IAAI,MAAM,CAAC,QAAP,EAAV;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,aAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,QAAL,GAAgB,EAAhB;;AAEA,QAAI,KAAK,CAAC,OAAN,CAAc,IAAI,CAAC,SAAD,CAAlB,CAAJ,EAAoC;AAChC,WAAuB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,IAAI,CAAC,SAAD,CAA3B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;AAAnC,YAAI,UAAU,GAAA,EAAA,CAAA,EAAA,CAAd;AACD,YAAI,MAAM,GAAA,KAAA,CAAV;;AAEA,YAAI,OAAO,UAAP,KAAsB,QAA1B,EAAoC;AAChC,cAAI,OAAO,GAAG,IAAI,OAAJ,EAAd;AACA,UAAA,OAAO,CAAC,IAAR,GAAe,UAAf;AAEA,UAAA,MAAM,GAAG,OAAT;AACH,SALD,MAMK;AACD,UAAA,MAAM,GAAG,qBAAqB,CAC1B,IAD0B,EAE1B,UAF0B,EAG1B,KAH0B,EAGnB;AACP,UAAA,MAJ0B,CAA9B;AAKH;;AAED,YAAI,MAAJ,EAAY;AACR,eAAK,iBAAL,CAAuB,MAAvB,EAA+B,IAA/B;AACH;AACJ;AACJ;AACJ,GA5BD;;AA8BA,EAAA,aAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,UAAI,WAAW,GAAU,EAAzB;;AAEA,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,QAAA,WAAW,CAAC,IAAZ,CAAiB,MAAM,CAAC,MAAP,EAAjB;AACH;;AAED,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,WAArC;AACH;;AAED,WAAO,MAAP;AACH,GAdD;;AAgBA,EAAA,aAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,eAAP;AACH,GAFD;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,QAAL,CAAc,MAArB;AACH,GAFD;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,KAAZ,EAAyB;AACrB,QAAI,KAAK,IAAI,CAAT,IAAc,KAAK,GAAG,KAAK,QAAL,CAAc,MAAxC,EAAgD;AAC5C,aAAO,KAAK,QAAL,CAAc,KAAd,CAAP;AACH,KAFD,MAGK;AACD,YAAM,IAAI,KAAJ,CAAU,oDAAoD,KAApD,GAA4D,GAAtE,CAAN;AACH;AACJ,GAPD;;AASA,EAAA,aAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,MAAV,EAA6B;AACzB,SAAK,iBAAL,CAAuB,MAAvB;AACH,GAFD;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,MAAb,EAAgC;AAC5B,QAAI,KAAK,GAAG,KAAK,QAAL,CAAc,OAAd,CAAsB,MAAtB,CAAZ;;AAEA,QAAI,KAAK,IAAI,CAAb,EAAgB;AACZ,WAAK,QAAL,CAAc,KAAd,EAAqB,SAArB,CAA+B,IAA/B;;AACA,WAAK,QAAL,CAAc,MAAd,CAAqB,KAArB,EAA4B,CAA5B;;AAEA,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH,GAXD;;AAYJ,SAAA,aAAA;AAAC,CArJD,CAAmC,WAAnC,CAAA;;AAAa,OAAA,CAAA,aAAA,GAAA,aAAA;;AAuJb,IAAA,IAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA0B,EAAA,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AAItB,WAAA,IAAA,CAAY,IAAZ,EAAsC,KAAtC,EAA+D;AAAnD,QAAA,IAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,IAAA,GAAA,SAAA;AAAwB;;AAAE,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,SAAA;AAAyB;;AAA/D,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAGI,IAAA,KAAI,CAAC,IAAL,GAAY,IAAZ;AACA,IAAA,KAAI,CAAC,KAAL,GAAa,KAAb;;AACH;;AAED,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAe;AACX,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ;;AAEA,SAAK,IAAL,GAAY,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAZ;AACA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAb;AACH,GALD;;AAOA,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,IAAxC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AAEA,WAAO,MAAP;AACH,GAPD;;AAQJ,SAAA,IAAA;AAAC,CA1BD,CAA0B,kBAA1B,CAAA;;AAAa,OAAA,CAAA,IAAA,GAAA,IAAA;;AA4Bb,IAAA,OAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA6B,EAAA,SAAA,CAAA,OAAA,EAAA,MAAA,CAAA;;AAA7B,WAAA,OAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAiFI,IAAA,KAAA,CAAA,KAAA,GAAqB,EAArB;;AA8BH;;AA9GG,EAAA,MAAA,CAAA,cAAA,CAAc,OAAA,CAAA,SAAd,EAAc,kBAAd,EAA8B;SAA9B,eAAA;AACI,aAAO,KAAP;AACH,KAF6B;oBAAA;;AAAA,GAA9B;;AAIU,EAAA,OAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,OAAO,GAAgB,IAA3B;AACA,QAAI,UAAU,GAAG,KAAK,UAAtB;;AAEA,QAAI,KAAK,KAAL,CAAW,MAAX,GAAoB,CAAxB,EAA2B;AACvB,MAAA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAV;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,WAAd,GAA4B,KAA5B;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,aAAd,GAA8B,KAA9B;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,WAAd,GAA4B,MAA5B;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,UAA/B;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,OAAxB;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,QAAzB;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,UAAU,CAAC,gBAAX,CAA4B,YAA5B,CAAtB;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,KAAL,CAAW,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AACxC,YAAI,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAhB;;AAEA,YAAI,CAAC,GAAG,CAAR,EAAW;AACP,UAAA,SAAS,CAAC,KAAV,CAAgB,SAAhB,GAA4B,UAAU,CAAC,OAAX,CAAmB,OAAnB,GAA6B,IAAzD;AACH,SALuC,CAOxC;;;AACA,YAAI,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAhB;AACA,QAAA,SAAS,CAAC,KAAV,CAAgB,OAAhB,GAA0B,GAA1B;AACA,QAAA,SAAS,CAAC,SAAV,CAAoB,GAApB,CAAwB,UAAU,CAAC,gBAAX,CAA4B,eAA5B,CAAxB;;AAEA,YAAI,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,QAA7B,EAAuC;AACnC,UAAA,SAAS,CAAC,KAAV,CAAgB,QAAhB,GAA2B,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,QAAzB,GAAoC,IAA/D;AACH;;AAED,QAAA,SAAS,CAAC,KAAV,CAAgB,aAAhB,GAAgC,KAAhC;AAEA,YAAI,SAAS,GAAG,IAAI,SAAJ,EAAhB;AACA,QAAA,SAAS,CAAC,SAAV,CAAoB,IAApB;AACA,QAAA,SAAS,CAAC,IAAV,GAAkB,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAL,CAAW,CAAX,EAAc,IAAlC,KAA2C,KAAK,YAAL,EAA5C,GAAmE,OAAnE,GAA6E,KAAK,KAAL,CAAW,CAAX,EAAc,IAA5G;AACA,QAAA,SAAS,CAAC,IAAV,GAAiB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,IAA1C;AACA,QAAA,SAAS,CAAC,KAAV,GAAkB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,KAA3C;AACA,QAAA,SAAS,CAAC,QAAV,GAAqB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,QAA9C;AACA,QAAA,SAAS,CAAC,MAAV,GAAmB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,MAA5C;AACA,QAAA,SAAS,CAAC,IAAV,GAAiB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,IAA1C;AACA,QAAA,SAAS,CAAC,OAAV,GAAoB,KAAK,CAAC,OAAN,CAAc,IAAlC;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,SAAlB,EAA6B,SAAS,CAAC,MAAV,EAA7B;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,SAAlB,EAA6B,SAA7B,EA7BwC,CA+BxC;;AACA,QAAA,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAZ;AACA,QAAA,SAAS,CAAC,KAAV,CAAgB,KAAhB,GAAwB,MAAxB;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,SAAlB,EAA6B,SAA7B,EAnCwC,CAqCxC;;AACA,QAAA,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAZ;AACA,QAAA,SAAS,CAAC,KAAV,CAAgB,OAAhB,GAA0B,GAA1B;AACA,QAAA,SAAS,CAAC,KAAV,CAAgB,aAAhB,GAAgC,KAAhC;AACA,QAAA,SAAS,CAAC,SAAV,CAAoB,GAApB,CAAwB,UAAU,CAAC,gBAAX,CAA4B,eAA5B,CAAxB;AAEA,QAAA,SAAS,GAAG,IAAI,SAAJ,EAAZ;AACA,QAAA,SAAS,CAAC,SAAV,CAAoB,IAApB;AACA,QAAA,SAAS,CAAC,IAAV,GAAiB,KAAK,KAAL,CAAW,CAAX,EAAc,KAA/B;AACA,QAAA,SAAS,CAAC,IAAV,GAAiB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,IAA1C;AACA,QAAA,SAAS,CAAC,KAAV,GAAkB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,KAA3C;AACA,QAAA,SAAS,CAAC,QAAV,GAAqB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,QAA9C;AACA,QAAA,SAAS,CAAC,MAAV,GAAmB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,MAA5C;AACA,QAAA,SAAS,CAAC,IAAV,GAAiB,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,IAA1C;AACA,QAAA,SAAS,CAAC,OAAV,GAAoB,KAAK,CAAC,OAAN,CAAc,IAAlC;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,SAAlB,EAA6B,SAAS,CAAC,MAAV,EAA7B;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,SAAlB,EAA6B,SAA7B;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,SAA3B;AACH;AACJ;;AAED,WAAO,OAAP;AACH,GA1ES;;AA8EV,EAAA,OAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,SAAP;AACH,GAFD;;AAIA,EAAA,OAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,OAA/B,EAAwC,KAAK,KAA7C;AAEA,WAAO,MAAP;AACH,GAND;;AAQA,EAAA,OAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,KAAL,GAAa,EAAb;AAEN,QAAI,SAAS,GAAG,IAAI,CAAC,OAAD,CAApB;;AAEA,QAAI,KAAK,CAAC,OAAN,CAAc,SAAd,CAAJ,EAA8B;AAC7B,WAAqB,IAAA,EAAA,GAAA,CAAA,EAAA,WAAA,GAAA,SAArB,EAAqB,EAAA,GAAA,WAAA,CAAA,MAArB,EAAqB,EAAA,EAArB,EAAgC;AAA3B,YAAI,QAAQ,GAAA,WAAA,CAAA,EAAA,CAAZ;AACJ,YAAI,IAAI,GAAG,IAAI,IAAJ,EAAX;AACA,QAAA,IAAI,CAAC,KAAL,CAAW,QAAX;AAEA,aAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;AACA;AACD;AACE,GAfD;;AAgBJ,SAAA,OAAA;AAAC,CA/GD,CAA6B,WAA7B,CAAA;;AAAa,OAAA,CAAA,OAAA,GAAA,OAAA;;AAiHb,IAAA,KAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA2B,EAAA,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;;AAA3B,WAAA,KAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAsKI,IAAA,KAAA,CAAA,KAAA,GAA0B,KAAK,CAAC,UAAN,CAAiB,OAA3C;AAGA,IAAA,KAAA,CAAA,IAAA,GAAmB,KAAK,CAAC,IAAN,CAAW,IAA9B;AAEA,IAAA,KAAA,CAAA,UAAA,GAAsB,IAAtB;AACA,IAAA,KAAA,CAAA,WAAA,GAAuB,IAAvB;AACA,IAAA,KAAA,CAAA,OAAA,GAAkB,EAAlB;;AAqIH;;AA/SW,EAAA,KAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UAAuB,IAAvB,EAAqC,KAArC,EAAiD,MAAjD,EAA2F;AACvF,QAAI,KAAJ,EAAW;AACP,UAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC3B,YAAI;AACA,cAAI,IAAI,GAAG,MAAM,CAAC,WAAP,CAAmB,KAAnB,CAAyB,KAAzB,CAAX;;AAEA,cAAI,IAAI,CAAC,IAAL,IAAa,KAAK,CAAC,QAAN,CAAe,KAAhC,EAAuC;AACnC,mBAAO,IAAI,CAAC,YAAZ;AACH;AACJ,SAND,CAOA,OAAA,EAAA,EAAM,CACF;AACH;AACJ;;AAED,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBADjC;AAEI,QAAA,OAAO,EAAE,mBAAmB,IAAnB,GAA0B,IAA1B,GAAiC;AAF9C,OADW,EAKX,MALW,CAAf;AAOH;;AAED,WAAO,CAAP;AACH,GAzBO;;AA2BA,EAAA,KAAA,CAAA,SAAA,CAAA,SAAA,GAAR,UAAkB,OAAlB,EAAsC;AAClC,QAAI,KAAK,UAAL,IAAmB,KAAK,WAA5B,EAAyC;AACrC,UAAI,KAAK,UAAT,EAAqB;AACjB,QAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,KAAK,UAAL,GAAkB,IAAxC;AACH;;AAED,UAAI,KAAK,WAAT,EAAsB;AAClB,QAAA,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,KAAK,WAAL,GAAmB,IAA1C;AACH;AACJ,KARD,MASK;AACD,cAAQ,KAAK,IAAb;AACI,aAAK,KAAK,CAAC,IAAN,CAAW,OAAhB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,MAAtB;AACA;;AACJ,aAAK,KAAK,CAAC,IAAN,CAAW,IAAhB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,MAAzB;AACA;;AACJ,aAAK,KAAK,CAAC,IAAN,CAAW,KAAhB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,KAAK,UAAL,CAAgB,UAAhB,CAA2B,KAA3B,GAAmC,IAAzD;AACA;;AACJ,aAAK,KAAK,CAAC,IAAN,CAAW,KAAhB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,KAAK,UAAL,CAAgB,UAAhB,CAA2B,KAA3B,GAAmC,IAAzD;AACA;;AACJ,aAAK,KAAK,CAAC,IAAN,CAAW,MAAhB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,KAAK,UAAL,CAAgB,UAAhB,CAA2B,MAA3B,GAAoC,IAA1D;AACA;AAfR;AAiBH;AACJ,GA7BO;;AA+BR,EAAA,MAAA,CAAA,cAAA,CAAc,KAAA,CAAA,SAAd,EAAc,kBAAd,EAA8B;SAA9B,eAAA;AACI,aAAO,KAAP;AACH,KAF6B;oBAAA;;AAAA,GAA9B;;AAIU,EAAA,KAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,OAAO,GAAgB,IAA3B;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,GAAzB,CAAL,EAAoC;AAChC,MAAA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,YAA3B;;AAEA,MAAA,OAAO,CAAC,UAAR,GAAqB,UAAC,CAAD,EAAE;AACnB,YAAI,KAAI,CAAC,YAAL,KAAsB,CAAC,CAAC,OAAF,IAAa,EAAb,IAAmB,CAAC,CAAC,OAAF,IAAa,EAAtD,CAAJ,EAA+D;AAAE;AAC7D,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,UAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH;AACJ,OAPD;;AASA,MAAA,OAAO,CAAC,OAAR,GAAkB,UAAC,CAAD,EAAE;AAChB,YAAI,KAAI,CAAC,YAAT,EAAuB;AACnB,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,UAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH;AACJ,OAPD;;AASA,cAAQ,KAAK,mBAAb;AACI,aAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,QAA/B;AACA;;AACJ,aAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,UAA/B;AACA;;AACJ;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,YAA/B;AACA;AATR,OAvBgC,CAmChC;;;AACA,UAAI,UAAU,GAAG,KAAK,UAAtB;AAEA,UAAI,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAnB;;AACA,MAAA,YAAY,CAAC,MAAb,GAAsB,UAAC,CAAD,EAAS;AAC3B,QAAA,qBAAqB,CAAC,KAAD,CAArB;AACH,OAFD;;AAGA,MAAA,YAAY,CAAC,OAAb,GAAuB,UAAC,CAAD,EAAS;AAC5B,YAAI,IAAI,GAAG,KAAI,CAAC,cAAL,EAAX;;AAEA,QAAA,KAAI,CAAC,eAAL,CAAqB,SAArB,GAAiC,EAAjC;;AAEA,YAAI,IAAI,IAAI,IAAI,CAAC,UAAjB,EAA6B;AACzB,cAAI,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAnB;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,MAA7B;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,UAAnB,GAAgC,QAAhC;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,cAAnB,GAAoC,QAApC;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,eAAnB,GAAqC,SAArC;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,KAAnB,GAA2B,OAA3B;AACA,UAAA,YAAY,CAAC,SAAb,GAAyB,KAAzB;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,MAA7B;;AAEA,UAAA,KAAI,CAAC,SAAL,CAAe,YAAf;;AAEA,UAAA,KAAI,CAAC,eAAL,CAAqB,WAArB,CAAiC,YAAjC;AACH;;AAED,QAAA,qBAAqB,CAAC,KAAD,CAArB;AACH,OArBD;;AAsBA,MAAA,YAAY,CAAC,KAAb,CAAmB,SAAnB,GAA+B,MAA/B;AACA,MAAA,YAAY,CAAC,KAAb,CAAmB,QAAnB,GAA8B,GAA9B;AACA,MAAA,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,UAAU,CAAC,gBAAX,CAA4B,UAA5B,CAA3B;;AAEA,UAAI,KAAK,YAAL,IAAqB,IAArB,IAA6B,UAAU,CAAC,qBAA5C,EAAmE;AAC/D,QAAA,YAAY,CAAC,QAAb,GAAwB,CAAxB;AACA,QAAA,YAAY,CAAC,YAAb,CAA0B,MAA1B,EAAkC,KAAK,YAAL,CAAkB,WAAlB,EAAlC;AACA,QAAA,YAAY,CAAC,YAAb,CAA0B,YAA1B,EAAwC,KAAK,YAAL,CAAkB,KAA1D;AACA,QAAA,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,UAAU,CAAC,gBAAX,CAA4B,eAA5B,CAA3B;AACH;;AAED,WAAK,SAAL,CAAe,YAAf;;AAEA,UAAI,KAAK,KAAL,KAAe,KAAK,CAAC,UAAN,CAAiB,MAApC,EAA4C;AACxC,QAAA,YAAY,CAAC,KAAb,CAAmB,YAAnB,GAAkC,KAAlC;AACA,QAAA,YAAY,CAAC,KAAb,CAAmB,kBAAnB,GAAwC,SAAxC;AACA,QAAA,YAAY,CAAC,KAAb,CAAmB,gBAAnB,GAAsC,WAAtC;AACH;;AAED,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,eAAzB,CAAL,EAAgD;AAC5C,QAAA,YAAY,CAAC,KAAb,CAAmB,eAAnB,GAAqC,KAAK,CAAC,gBAAN,CAAuB,KAAK,eAA5B,CAArC;AACH;;AAED,MAAA,YAAY,CAAC,GAAb,GAAmB,KAAK,GAAxB;;AACA,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,OAAzB,CAAL,EAAwC;AACpC,QAAA,YAAY,CAAC,GAAb,GAAmB,KAAK,OAAxB;AACH;;AAED,MAAA,OAAO,CAAC,WAAR,CAAoB,YAApB;AACH;;AAED,WAAO,OAAP;AACH,GAnGS;;AA8GV,EAAA,KAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,KAAK,aAAT,EAAwB;AACpB,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,cAA1B,EAA0C,KAAK,aAAL,CAAmB,MAAnB,EAA1C;AACH;;AAED,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,UAA5B,EAAwC,MAAxC,EAAgD,OAAhD,EAAyD,KAAK,KAA9D,EAAqE,KAAK,CAAC,UAAN,CAAiB,OAAtF;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,iBAA1B,EAA6C,KAAK,eAAlD;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AACA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,IAA5B,EAAkC,MAAlC,EAA0C,MAA1C,EAAkD,KAAK,IAAvD,EAA6D,KAAK,CAAC,IAAN,CAAW,IAAxE;;AAEA,QAAI,KAAK,UAAT,EAAqB;AACjB,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,UAAL,GAAkB,IAArD;AACH;;AAED,QAAI,KAAK,WAAT,EAAsB;AAClB,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,KAAK,WAAL,GAAmB,IAAvD;AACH;;AAED,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,OAA1C;AAEA,WAAO,MAAP;AACH,GAvBD;;AAyBA,EAAA,KAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,OAAP;AACH,GAFD;;AAIA,EAAA,KAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,EAApB,CAAb;;AAEA,QAAI,CAAC,MAAD,IAAW,KAAK,YAApB,EAAkC;AAC9B,MAAA,MAAM,GAAG,KAAK,YAAL,CAAkB,aAAlB,CAAgC,EAAhC,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,SAAK,eAAL,GAAuB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,iBAAD,CAAzB,CAAvB;AAEA,QAAI,WAAW,GAAG,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAlB;;AAEA,QAAI,WAAW,IAAI,WAAW,CAAC,WAAZ,OAA8B,QAAjD,EAA2D;AACvD,WAAK,KAAL,GAAa,KAAK,CAAC,UAAN,CAAiB,OAA9B;AAEA,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH,KAVD,MAWK;AACD,WAAK,KAAL,GAAa,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,UAAzB,EAAqC,WAArC,EAAkD,KAAK,KAAvD,CAAb;AACH;;AAED,SAAK,IAAL,GAAY,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,IAAzB,EAA+B,IAAI,CAAC,MAAD,CAAnC,EAA6C,KAAK,IAAlD,CAAZ;AACN,SAAK,OAAL,GAAe,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,SAAD,CAAzB,CAAf,CAxB8D,CA0BxD;AACA;;AACA,QAAI,IAAI,CAAC,YAAD,CAAJ,IAAsB,OAAO,IAAI,CAAC,YAAD,CAAX,KAA8B,QAAxD,EAAkE;AAC9D,WAAK,UAAL,GAAkB,IAAI,CAAC,YAAD,CAAtB;AAEA,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH;;AAED,QAAI,IAAI,CAAC,aAAD,CAAJ,IAAuB,OAAO,IAAI,CAAC,aAAD,CAAX,KAA+B,QAA1D,EAAoE;AAChE,WAAK,WAAL,GAAmB,IAAI,CAAC,aAAD,CAAvB;AAEA,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH;;AAED,QAAI,IAAI,GAAG,KAAK,cAAL,CAAoB,OAApB,EAA6B,IAAI,CAAC,OAAD,CAAjC,EAA4C,MAA5C,CAAX;;AAEA,QAAI,IAAI,GAAG,CAAX,EAAc;AACV,WAAK,UAAL,GAAkB,IAAlB;AACH;;AAED,IAAA,IAAI,GAAG,KAAK,cAAL,CAAoB,QAApB,EAA8B,IAAI,CAAC,QAAD,CAAlC,EAA8C,MAA9C,CAAP;;AAEA,QAAI,IAAI,GAAG,CAAX,EAAc;AACV,WAAK,WAAL,GAAmB,IAAnB;AACH;;AAED,SAAK,YAAL,GAAoB,oBAAoB,CACpC,IADoC,EAEpC,IAAI,CAAC,cAAD,CAFgC,EAGpC,CAAC,cAAc,CAAC,YAAhB,CAHoC,EAIpC,CAAC,KAAK,YAAL,EAJmC,EAKpC,MALoC,CAAxC;AAMH,GAtED;;AAwEA,EAAA,KAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,GAAzB,CAAL,EAAoC;AAChC,aAAO,CAAC;AAAE,QAAA,GAAG,EAAE,KAAK,GAAZ;AAAiB,QAAA,QAAQ,EAAE;AAA3B,OAAD,CAAP;AACH,KAFD,MAGK;AACD,aAAO,EAAP;AACH;AACJ,GAPD;;AASA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAK,aAAZ;AACH,KAFe;SAIhB,aAAiB,KAAjB,EAA8B;AAC1B,WAAK,aAAL,GAAqB,KAArB;;AAEA,UAAI,KAAK,aAAT,EAAwB;AACpB,aAAK,aAAL,CAAmB,SAAnB,CAA6B,IAA7B;AACH;AACJ,KAVe;oBAAA;;AAAA,GAAhB;AAWJ,SAAA,KAAA;AAAC,CAlTD,CAA2B,WAA3B,CAAA;;AAAa,OAAA,CAAA,KAAA,GAAA,KAAA;;AAoTb,IAAA,oBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAmD,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAAnD,WAAA,oBAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,aAAA,GAAwB,IAAxB;AA8DR,IAAA,KAAA,CAAA,qBAAA,GAAiC,KAAjC;;AA4IH;;AAxMa,EAAA,oBAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,UAA2B,OAA3B,EAAiD,qBAAjD,EAAqF;AACjF,QAAI,CAAC,KAAK,UAAL,CAAgB,qBAAjB,IAA0C,OAAO,CAAC,aAAtD,EAAqE;AACjE,aAAO,KAAP;AACH;;AAED,QAAI,qBAAJ,EAA2B;AACvB,WAAiC,IAAA,EAAA,GAAA,CAAA,EAAA,uBAAA,GAAA,qBAAjC,EAAiC,EAAA,GAAA,uBAAA,CAAA,MAAjC,EAAiC,EAAA,EAAjC,EAAwD;AAAnD,YAAI,oBAAoB,GAAA,uBAAA,CAAA,EAAA,CAAxB;;AACD,YAAI,OAAO,CAAC,eAAR,OAA8B,oBAAlC,EAAwD;AACpD,iBAAO,KAAP;AACH;AACJ;AACJ;;AAED,WAAO,IAAP;AACH,GAdS;;AAgBA,EAAA,oBAAA,CAAA,SAAA,CAAA,YAAA,GAAV,YAAA;AACI,IAAA,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB;;AAEA,QAAI,CAAC,KAAK,eAAV,EAA2B;AACvB;AACH;;AAED,QAAI,eAAe,GAAG,IAAI,MAAM,CAAC,iBAAX,EAAtB;;AAEA,QAAI,KAAK,mBAAL,EAAJ,EAAgC;AAC5B,MAAA,eAAe,GAAG,KAAK,UAAL,CAAgB,oCAAhB,CAAqD,KAAK,mBAAL,EAArD,CAAlB;AACH;;AAED,SAAK,eAAL,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,eAAe,CAAC,GAAhB,GAAsB,IAA9D;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,YAA3B,GAA0C,eAAe,CAAC,KAAhB,GAAwB,IAAlE;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,aAA3B,GAA2C,eAAe,CAAC,MAAhB,GAAyB,IAApE;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,WAA3B,GAAyC,eAAe,CAAC,IAAhB,GAAuB,IAAhE;AAEA,SAAK,eAAL,CAAqB,KAArB,CAA2B,WAA3B,GAAyC,GAAzC;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,GAAxC;AACH,GApBS;;AAsBA,EAAA,oBAAA,CAAA,SAAA,CAAA,eAAA,GAAV,YAAA;AACI,WAAO,KAAK,aAAZ;AACH,GAFS;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,eAAA,GAAV,UAA0B,KAA1B,EAAuC;AACnC,SAAK,aAAL,GAAqB,KAArB;;AAEA,QAAI,KAAK,aAAT,EAAwB;AACpB,WAAK,aAAL,CAAmB,SAAnB,CAA6B,IAA7B;AACH;AACJ,GANS;;AAQV,EAAA,MAAA,CAAA,cAAA,CAAc,oBAAA,CAAA,SAAd,EAAc,cAAd,EAA0B;SAA1B,eAAA;AACI,aAAO,KAAP;AACH,KAFyB;oBAAA;;AAAA,GAA1B;;AAYA,EAAA,oBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,QAAI,KAAK,YAAT,EAAuB;AACnB,WAAK,aAAL,GAAqB,oBAAoB,CACrC,IADqC,EAErC,IAAI,CAAC,cAAD,CAFiC,EAGrC,CAAC,cAAc,CAAC,YAAhB,CAHqC,EAIrC,CAAC,KAAK,YAAL,EAJoC,EAKrC,MALqC,CAAzC;AAMH;AACJ,GAXD;;AAaA,EAAA,oBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,KAAK,aAAL,IAAsB,KAAK,YAA/B,EAA6C;AACzC,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,cAA1B,EAA0C,KAAK,aAAL,CAAmB,MAAnB,EAA1C;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,oBAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,EAApB,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,UAAI,IAAI,GAAG,KAAK,SAAL,CAAe,CAAf,CAAX;;AAEA,UAAI,CAAC,KAAK,UAAL,CAAgB,qBAAjB,IAA0C,IAAI,CAAC,aAAnD,EAAkE;AAC9D,QAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,uBADjC;AAEI,UAAA,OAAO,EAAE;AAFb,SAFJ;AAMH;;AAED,UAAI,CAAC,KAAK,gBAAL,CAAsB,IAAtB,EAA4B,KAAK,wBAAL,EAA5B,CAAL,EAAmE;AAC/D,QAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,uBADjC;AAEI,UAAA,OAAO,EAAE,sBAAsB,IAAI,CAAC,eAAL,EAAtB,GAA+C;AAF5D,SAFJ;AAMH;;AAED,MAAA,IAAI,CAAC,0BAAL,CAAgC,OAAhC;AACH;;AAED,QAAI,KAAK,aAAT,EAAwB;AACpB,WAAK,aAAL,CAAmB,0BAAnB,CAA8C,OAA9C;AACH;AACJ,GA9BD;;AAgCA,EAAA,oBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,OAAO,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAd;;AACA,QAAI,UAAU,GAAG,KAAK,UAAtB;;AAEA,QAAI,KAAK,qBAAT,EAAgC;AAC5B,MAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,QAA1B;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,MAA1B;AACH;;AAED,QAAI,OAAO,IAAI,KAAK,YAAhB,IAAgC,KAAK,aAArC,IAAsD,UAAU,CAAC,qBAArE,EAA4F;AACxF,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,UAAU,CAAC,gBAAX,CAA4B,eAA5B,CAAtB;AACA,MAAA,OAAO,CAAC,QAAR,GAAmB,CAAnB;AACA,MAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA6B,KAAK,aAAL,CAAmB,WAAnB,EAA7B;AACA,MAAA,OAAO,CAAC,YAAR,CAAqB,YAArB,EAAmC,KAAK,aAAL,CAAmB,KAAtD;;AAEA,MAAA,OAAO,CAAC,OAAR,GAAkB,UAAC,CAAD,EAAE;AAChB,YAAI,KAAI,CAAC,aAAL,IAAsB,IAA1B,EAAgC;AAC5B,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,UAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB;AACH;AACJ,OAPD;;AASA,MAAA,OAAO,CAAC,UAAR,GAAqB,UAAC,CAAD,EAAE;AACnB,YAAI,KAAI,CAAC,aAAL,IAAsB,IAAtB,KAA+B,CAAC,CAAC,OAAF,IAAa,EAAb,IAAmB,CAAC,CAAC,OAAF,IAAa,EAA/D,CAAJ,EAAwE;AACpE;AACA,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,UAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB;AACH;AACJ,OARD;AASH;;AAED,WAAO,OAAP;AACH,GApCD;;AAsCA,EAAA,oBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,eAAb,EAA4C;AAA/B,QAAA,eAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,eAAA,GAAA,IAAA;AAA+B;;AACxC,IAAA,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB,EAAmB,eAAnB;;AAEA,QAAI,eAAJ,EAAqB;AACjB,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,EAApB,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,aAAK,SAAL,CAAe,CAAf,EAAkB,YAAlB;AACH;AACJ;AACJ,GARD;;AAUA,EAAA,oBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAiB,EAA3B;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,EAApB,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,MAAA,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,SAAL,CAAe,CAAf,EAAkB,YAAlB,EAAd,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,oBAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAuC,EAAjD;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,EAApB,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,MAAA,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,SAAL,CAAe,CAAf,EAAkB,sBAAlB,EAAd,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,oBAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,EAAf,EAAyB;AACrB,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,cAAN,CAAoB,IAApB,CAAoB,IAApB,EAAqB,EAArB,CAAb;;AAEA,QAAI,CAAC,MAAL,EAAa;AACT,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,EAApB,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,QAAA,MAAM,GAAG,KAAK,SAAL,CAAe,CAAf,EAAkB,cAAlB,CAAiC,EAAjC,CAAT;;AAEA,YAAI,MAAJ,EAAY;AACR;AACH;AACJ;AACJ;;AAED,WAAO,MAAP;AACH,GAdD;;AAeJ,SAAA,oBAAA;AAAC,CA3MD,CAAmD,WAAnD,CAAA;;AAAsB,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AA6MtB,IAAA,QAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA8B,EAAA,SAAA,CAAA,QAAA,EAAA,MAAA,CAAA;;AAA9B,WAAA,QAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,OAAA,GAAwB,EAAxB;AA2BR,IAAA,KAAA,CAAA,SAAA,GAAwB,KAAK,CAAC,IAAN,CAAW,MAAnC;;AA2FH;;AApHa,EAAA,QAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,OAAO,GAAgB,IAA3B;;AAEA,QAAI,KAAK,OAAL,CAAa,MAAb,GAAsB,CAA1B,EAA6B;AACzB,MAAA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,MAAzB;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,aAAK,OAAL,CAAa,CAAb,EAAgB,IAAhB,GAAuB,KAAK,SAA5B;;AAEA,YAAI,aAAa,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,MAAhB,EAApB;;AAEA,QAAA,aAAa,CAAC,KAAd,CAAoB,OAApB,GAA8B,aAA9B;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,MAApB,GAA6B,KAA7B;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,WAApB,GAAkC,MAAlC;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,SAApB,GAAgC,KAAK,UAAL,CAAgB,QAAhB,CAAyB,cAAzB,GAA0C,IAA1E;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,aAA3B;AACH;AACJ;;AAED,WAAO,OAAP;AACH,GAvBS;;AA2BV,EAAA,QAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,KAAK,OAAL,CAAa,MAApB;AACH,GAFD;;AAIA,EAAA,QAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAAuB;AACnB,WAAO,KAAK,OAAL,CAAa,KAAb,CAAP;AACH,GAFD;;AAIA,EAAA,QAAA,CAAA,SAAA,CAAA,2BAAA,GAAA,YAAA;AACI,WAAO,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAtC,GAA0C,KAAK,OAAL,CAAa,CAAb,CAA1C,GAA4D,IAAnE;AACH,GAFD;;AAIA,EAAA,QAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,YAAA;AACI,WAAO,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAtC,GAA0C,KAAK,OAAL,CAAa,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAnC,CAA1C,GAAkF,IAAzF;AACH,GAFD;;AAIA,EAAA,QAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,IAAX,EAA4B;AACxB,QAAI,IAAI,YAAY,KAApB,EAA2B;AACvB,UAAI,SAAS,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,IAArB,CAAhB;;AAEA,UAAI,SAAS,IAAI,CAAjB,EAAoB;AAChB,aAAK,OAAL,CAAa,MAAb,CAAoB,SAApB,EAA+B,CAA/B;;AAEA,QAAA,IAAI,CAAC,SAAL,CAAe,IAAf;AAEA,aAAK,YAAL;AAEA,eAAO,IAAP;AACH;AACJ;;AAED,WAAO,KAAP;AACH,GAhBD;;AAkBA,EAAA,QAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,UAAP;AACH,GAFD;;AAIA,EAAA,QAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,IAA5B,EAAkC,MAAlC,EAA0C,WAA1C,EAAuD,KAAK,SAA5D,EAAuE,KAAK,CAAC,IAAN,CAAW,MAAlF;;AAEA,QAAI,KAAK,OAAL,CAAa,MAAb,GAAsB,CAA1B,EAA6B;AACzB,UAAI,MAAM,GAAG,EAAb;;AAEA,WAAkB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAAvB,EAAkB,EAAA,GAAA,EAAA,CAAA,MAAlB,EAAkB,EAAA,EAAlB,EAAgC;AAA3B,YAAI,KAAK,GAAA,EAAA,CAAA,EAAA,CAAT;AACD,QAAA,MAAM,CAAC,IAAP,CAAY,KAAK,CAAC,MAAN,EAAZ;AACH;;AAED,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,MAApC;AACH;;AAED,WAAO,MAAP;AACH,GAhBD;;AAkBA,EAAA,QAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,SAAL,GAAiB,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,IAAzB,EAA+B,IAAI,CAAC,WAAD,CAAnC,EAAkD,KAAK,CAAC,IAAN,CAAW,MAA7D,CAAjB;;AAEA,QAAI,IAAI,CAAC,QAAD,CAAJ,IAAkB,IAAtB,EAA4B;AACxB,UAAI,UAAU,GAAG,IAAI,CAAC,QAAD,CAArB;AAEA,WAAK,OAAL,GAAe,EAAf;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,UAAU,CAAC,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AACxC,YAAI,KAAK,GAAG,IAAI,KAAJ,EAAZ;AACA,QAAA,KAAK,CAAC,KAAN,CAAY,UAAU,CAAC,CAAD,CAAtB,EAA2B,MAA3B;AAEA,aAAK,QAAL,CAAc,KAAd;AACH;AACJ;AACJ,GAjBD;;AAmBA,EAAA,QAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,KAAT,EAAqB;AACjB,QAAI,CAAC,KAAK,CAAC,MAAX,EAAmB;AACf,WAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB;;AAEA,MAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB;AACH,KAJD,MAKK;AACD,YAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACH;AACJ,GATD;;AAWA,EAAA,QAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,WAAR,EAAgC;AAC5B,WAAO,WAAW,YAAY,KAAvB,GAA+B,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CAA/B,GAAmE,CAAC,CAA3E;AACH,GAFD;;AAGJ,SAAA,QAAA;AAAC,CAvHD,CAA8B,oBAA9B,CAAA;;AAAa,OAAA,CAAA,QAAA,GAAA,QAAA;;AAyHb,IAAA,WAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAiC,EAAA,SAAA,CAAA,WAAA,EAAA,MAAA,CAAA;;AAI7B,WAAA,WAAA,CAAY,GAAZ,EAAqC,QAArC,EAAiE;AAArD,QAAA,GAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,GAAA,GAAA,SAAA;AAAuB;;AAAE,QAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,QAAA,GAAA,SAAA;AAA4B;;AAAjE,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAGI,IAAA,KAAI,CAAC,GAAL,GAAW,GAAX;AACA,IAAA,KAAI,CAAC,QAAL,GAAgB,QAAhB;;AACH;;AAED,EAAA,WAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEN,SAAK,QAAL,GAAgB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,UAAD,CAAzB,CAAhB;AACA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,GALE;;AAOH,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACO,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,UAA1B,EAAsC,KAAK,QAA3C;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AAEA,WAAO,MAAP;AACH,GAPJ;;AAQD,SAAA,WAAA;AAAC,CA1BD,CAAiC,kBAAjC,CAAA;;AAAa,OAAA,CAAA,WAAA,GAAA,WAAA;;AA4Bb,IAAA,KAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA2B,EAAA,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;;AAA3B,WAAA,KAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AA8KI,IAAA,KAAA,CAAA,OAAA,GAA8B,EAA9B;;AAsEH;;AA9OW,EAAA,KAAA,CAAA,SAAA,CAAA,YAAA,GAAR,YAAA;AACI,WAAO,KAAK,MAAL,GAAc,KAAK,MAAnB,GAA4B,KAAK,UAAL,CAAgB,KAAhB,CAAsB,aAAzD;AACH,GAFO;;AAIA,EAAA,KAAA,CAAA,SAAA,CAAA,cAAA,GAAR,YAAA;AACI,SAAK,gBAAL,GAAwB,EAAxB;AACA,SAAK,kBAAL,GAA0B,SAA1B;;AAEA,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAiC;AAA5B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,UAAI,cAAc,GAAG,MAAM,CAAC,QAAP,GAAkB,MAAM,CAAC,QAAP,CAAgB,KAAhB,CAAsB,GAAtB,CAAlB,GAA+C,EAApE;;AAEA,UAAI,cAAc,CAAC,MAAf,IAAyB,CAA7B,EAAgC;AAC5B,YAAI,CAAC,KAAK,kBAAV,EAA8B;AAC1B,cAAI,KAAK,GAAG,KAAK,CAAC,mBAAN,CAA0B,OAA1B,CAAkC,cAAc,CAAC,CAAD,CAAhD,CAAZ;;AAEA,cAAI,KAAK,IAAI,CAAb,EAAgB;AACZ,iBAAK,kBAAL,GAA0B,KAAK,CAAC,mBAAN,CAA0B,KAA1B,CAA1B;AACH;AACJ;;AACD,YAAI,cAAc,CAAC,CAAD,CAAd,IAAqB,KAAK,kBAA9B,EAAkD;AAC9C,eAAK,gBAAL,CAAsB,IAAtB,CAA2B,MAA3B;AACH;AACJ;AACJ;AACJ,GApBO;;AAsBA,EAAA,KAAA,CAAA,SAAA,CAAA,YAAA,GAAR,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAM,oBAAoB,GAAG,EAA7B;AACA,QAAM,qBAAqB,GAAG,EAA9B;AAEA,QAAI,iBAAiB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAxB;AACA,IAAA,iBAAiB,CAAC,SAAlB,GAA8B,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,iBAAjC,CAA9B;AACA,IAAA,iBAAiB,CAAC,YAAlB,CAA+B,MAA/B,EAAuC,aAAvC;AACA,IAAA,iBAAiB,CAAC,YAAlB,CAA+B,YAA/B,EAA6C,KAAK,OAAL,GAAe,KAAK,OAApB,GAA8B,eAA3E;AACA,IAAA,iBAAiB,CAAC,KAAlB,CAAwB,QAAxB,GAAmC,UAAnC;AACA,IAAA,iBAAiB,CAAC,KAAlB,CAAwB,OAAxB,GAAkC,MAAlC;AAEA,QAAI,SAAS,GAAG,KAAK,YAAL,EAAhB;;AAEA,QAAI,SAAJ,EAAe;AACX,UAAI,oBAAkB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAzB;AACA,MAAA,oBAAkB,CAAC,KAAnB,CAAyB,KAAzB,GAAiC,MAAjC;AACA,MAAA,oBAAkB,CAAC,KAAnB,CAAyB,MAAzB,GAAkC,MAAlC;;AAEA,MAAA,oBAAkB,CAAC,OAAnB,GAA6B,UAAC,CAAD,EAAS;AAClC,QAAA,oBAAkB,CAAC,UAAnB,CAA8B,WAA9B,CAA0C,oBAA1C;AACA,QAAA,iBAAiB,CAAC,SAAlB,CAA4B,GAA5B,CAAgC,OAAhC;AACA,QAAA,iBAAiB,CAAC,KAAlB,CAAwB,SAAxB,GAAoC,OAApC;AACH,OAJD;;AAMA,MAAA,oBAAkB,CAAC,GAAnB,GAAyB,SAAzB;AAEA,MAAA,iBAAiB,CAAC,WAAlB,CAA8B,oBAA9B;AACH,KAdD,MAeK;AACD,MAAA,iBAAiB,CAAC,SAAlB,CAA4B,GAA5B,CAAgC,OAAhC;AACA,MAAA,iBAAiB,CAAC,KAAlB,CAAwB,SAAxB,GAAoC,OAApC;AACH;;AAED,QAAI,KAAK,UAAL,CAAgB,qBAAhB,IAAyC,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAA5E,EAA+E;AAC3E,UAAI,sBAAsB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA7B;AACA,MAAA,sBAAsB,CAAC,YAAvB,CAAoC,MAApC,EAA4C,QAA5C;AACA,MAAA,sBAAsB,CAAC,YAAvB,CAAoC,YAApC,EAAkD,YAAlD;AACA,MAAA,sBAAsB,CAAC,SAAvB,GAAmC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,qBAAjC,CAAnC;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,OAA7B,GAAuC,MAAvC;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,UAA7B,GAA0C,QAA1C;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,cAA7B,GAA8C,QAA9C;;AACA,MAAA,sBAAsB,CAAC,OAAvB,GAAiC,UAAC,CAAD,EAAE;AAC/B,YAAI,KAAI,CAAC,UAAL,CAAgB,KAAhB,CAAsB,mBAA1B,EAA+C;AAC3C,UAAA,CAAC,CAAC,cAAF;AACA,UAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,cAAI,kBAAkB,GAAG,KAAI,CAAC,iBAAL,EAAzB;;AAEA,UAAA,KAAI,CAAC,eAAL,CAAqB,SAArB,GAAiC,EAAjC;;AACA,UAAA,KAAI,CAAC,eAAL,CAAqB,WAArB,CAAiC,kBAAjC;;AAEA,UAAA,kBAAkB,CAAC,IAAnB;AACH,SAVD,MAWK;AACD,cAAI,KAAK,CAAC,MAAV,EAAkB;AACd,YAAA,CAAC,CAAC,cAAF;AACA,YAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;AAEA,YAAA,KAAK,CAAC,MAAN,CAAa,KAAb;AACH;AACJ;AACJ,OApBD;;AAsBA,UAAI,sBAAsB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA7B;AACA,MAAA,sBAAsB,CAAC,SAAvB,GAAmC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,2BAAjC,CAAnC;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,KAA7B,GAAqC,oBAAoB,GAAG,IAA5D;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,MAA7B,GAAsC,qBAAqB,GAAG,IAA9D;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,cAA7B,GAA+C,qBAAqB,GAAG,CAAzB,GAA8B,IAA5E;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,iBAA7B,GAAkD,qBAAqB,GAAG,CAAzB,GAA8B,IAA/E;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,eAA7B,GAA+C,oBAAoB,GAAG,IAAtE;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,gBAA7B,GAAgD,GAAhD;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,WAA7B,GAA2C,OAA3C;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,cAA7B,GAA8C,aAA9C;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,gBAA7B,GAAgD,aAAhD;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,iBAA7B,GAAiD,aAAjD;AACA,MAAA,sBAAsB,CAAC,KAAvB,CAA6B,SAA7B,GAAyC,eAAgB,oBAAoB,GAAG,EAAvC,GAA6C,SAAtF;AAEA,MAAA,sBAAsB,CAAC,WAAvB,CAAmC,sBAAnC;AAEA,UAAI,mBAAmB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA1B;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,QAA1B,GAAqC,UAArC;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,IAA1B,GAAiC,GAAjC;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,GAA1B,GAAgC,GAAhC;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,KAA1B,GAAkC,MAAlC;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,MAA1B,GAAmC,MAAnC;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,OAA1B,GAAoC,MAApC;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,cAA1B,GAA2C,QAA3C;AACA,MAAA,mBAAmB,CAAC,KAApB,CAA0B,UAA1B,GAAuC,QAAvC;AAEA,MAAA,mBAAmB,CAAC,WAApB,CAAgC,sBAAhC;AACA,MAAA,iBAAiB,CAAC,WAAlB,CAA8B,mBAA9B;AACH;;AAED,WAAO,iBAAP;AACH,GA9FO;;AAgGA,EAAA,KAAA,CAAA,SAAA,CAAA,iBAAA,GAAR,YAAA;AACI,QAAI,YAAJ;;AAEA,QAAI,KAAK,kBAAL,IAA2B,OAA/B,EAAwC;AACpC,UAAI,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAlB;AAEA,UAAI,SAAS,GAAG,KAAK,YAAL,EAAhB;;AAEA,UAAI,SAAJ,EAAe;AACX,QAAA,WAAW,CAAC,MAAZ,GAAqB,SAArB;AACH;;AAED,MAAA,YAAY,GAAG,WAAf;AACH,KAVD,MAWK;AACD,MAAA,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAf;AACH;;AAED,IAAA,YAAY,CAAC,QAAb,GAAwB,IAAxB;AACA,IAAA,YAAY,CAAC,OAAb,GAAuB,MAAvB;AACA,IAAA,YAAY,CAAC,KAAb,CAAmB,KAAnB,GAA2B,MAA3B;;AAEA,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAiC;AAA5B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,UAAI,GAAG,GAAsB,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAA7B;AACA,MAAA,GAAG,CAAC,GAAJ,GAAU,MAAM,CAAC,GAAjB;AACA,MAAA,GAAG,CAAC,IAAJ,GAAW,MAAM,CAAC,QAAlB;AAEA,MAAA,YAAY,CAAC,WAAb,CAAyB,GAAzB;AACH;;AAED,WAAO,YAAP;AACH,GA/BO;;AAiCE,EAAA,KAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,OAAO,GAAgB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA3B;AACA,IAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,CAApB;AAEA,SAAK,cAAL;AAEA,IAAA,OAAO,CAAC,WAAR,CAAoB,KAAK,YAAL,EAApB;AAEA,WAAO,OAAP;AACH,GATS;;AAiBV,EAAA,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEN,SAAK,MAAL,GAAc,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,QAAD,CAAzB,CAAd;AACA,SAAK,OAAL,GAAe,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,SAAD,CAAzB,CAAf;AAEM,SAAK,OAAL,GAAe,EAAf;;AAEA,QAAI,KAAK,CAAC,OAAN,CAAc,IAAI,CAAC,SAAD,CAAlB,CAAJ,EAAoC;AAChC,WAAuB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,IAAI,CAAC,SAAD,CAA3B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;AAAnC,YAAI,UAAU,GAAA,EAAA,CAAA,EAAA,CAAd;AACD,YAAI,MAAM,GAAG,IAAI,WAAJ,EAAb;AACA,QAAA,MAAM,CAAC,KAAP,CAAa,UAAb,EAAyB,MAAzB;AAEA,aAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB;AACH;AACJ;AACJ,GAhBD;;AAkBA,EAAA,KAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,KAAK,MAAzC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,OAA1C;AAEA;;;;;;;;;;AAYA,IAAA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,SAA/B,EAA0C,KAAK,OAA/C;AAEA,WAAO,MAAP;AACH,GArBD;;AAuBA,EAAA,KAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,OAAP;AACH,GAFD;;AAIA,EAAA,KAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAuC,EAAjD;AAEA,QAAI,SAAS,GAAG,KAAK,YAAL,EAAhB;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,SAApB,CAAL,EAAqC;AACjC,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,GAAG,EAAE,SAAP;AAAkB,QAAA,QAAQ,EAAE;AAA5B,OAAZ;AACH;;AAED,SAAwB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAA7B,EAAwB,EAAA,GAAA,EAAA,CAAA,MAAxB,EAAwB,EAAA,EAAxB,EAAsC;AAAjC,UAAI,WAAW,GAAA,EAAA,CAAA,EAAA,CAAf;;AACD,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,WAAW,CAAC,GAAhC,CAAL,EAA2C;AACvC,QAAA,MAAM,CAAC,IAAP,CAAY;AAAE,UAAA,GAAG,EAAE,WAAW,CAAC,GAAnB;AAAwB,UAAA,QAAQ,EAAE,WAAW,CAAC;AAA9C,SAAZ;AACH;AACJ;;AAED,WAAO,MAAP;AACH,GAhBD;;AAkBA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,mBAAJ,EAAqB;SAArB,eAAA;AACI,aAAO,KAAK,kBAAZ;AACH,KAFoB;oBAAA;;AAAA,GAArB;AAhPgB,EAAA,KAAA,CAAA,mBAAA,GAAsB,CAAC,OAAD,EAAU,OAAV,CAAtB;AAmPpB,SAAA,KAAA;AAAC,CApPD,CAA2B,WAA3B,CAAA;;AAAa,OAAA,CAAA,KAAA,GAAA,KAAA;;AAsPb,IAAA,sBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;;AAA5C,WAAA,sBAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACI,IAAA,KAAA,CAAA,SAAA,GAA4C,KAAK,CAAC,wBAAN,CAA+B,QAA3E;AACA,IAAA,KAAA,CAAA,YAAA,GAAuB,SAAvB;;AAsBH;;AApBG,EAAA,sBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAe;AACX,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ;;AAEA,SAAK,SAAL,GAAiB,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,wBAAzB,EAAmD,IAAI,CAAC,WAAD,CAAvD,EAAsE,KAAK,SAA3E,CAAjB;AACA,SAAK,YAAL,GAAoB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,cAAD,CAAzB,CAApB;AACH,GALD;;AAOA,EAAA,sBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,KAAK,SAAL,IAAkB,KAAK,CAAC,wBAAN,CAA+B,QAAjD,IAA6D,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAlE,EAA0G;AACtG,UAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,MAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,wBAA5B,EAAsD,MAAtD,EAA8D,WAA9D,EAA2E,KAAK,SAAhF,EAA2F,KAAK,CAAC,wBAAN,CAA+B,QAA1H;AACA,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,cAA1B,EAA0C,KAAK,YAA/C;AAEA,aAAO,MAAP;AACH,KAPD,MAQK;AACD,aAAO,IAAP;AACH;AACJ,GAZD;;AAaJ,SAAA,sBAAA;AAAC,CAxBD,CAA4C,kBAA5C,CAAA;;AAAa,OAAA,CAAA,sBAAA,GAAA,sBAAA;;AA0Bb,IAAA,KAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAoC,EAAA,SAAA,CAAA,KAAA,EAAA,MAAA,CAAA;;AAApC,WAAA,KAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAoFa,IAAA,KAAA,CAAA,UAAA,GAAa,IAAI,sBAAJ,EAAb;;AA+EZ;;AA5JG,EAAA,MAAA,CAAA,cAAA,CAAc,KAAA,CAAA,SAAd,EAAc,YAAd,EAAwB;SAAxB,eAAA;AACI,aAAO,IAAP;AACH,KAFuB;oBAAA;;AAAA,GAAxB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,KAAA,CAAA,SAAd,EAAc,6BAAd,EAAyC;SAAzC,eAAA;AACI,aAAO,KAAK,4BAAZ;AACH,KAFwC;oBAAA;;AAAA,GAAzC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,KAAA,CAAA,SAAd,EAAc,8BAAd,EAA0C;SAA1C,eAAA;AACI,aAAO,KAAK,6BAAZ;AACH,KAFyC;oBAAA;;AAAA,GAA1C;;AAIU,EAAA,KAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AACI,QAAI,UAAU,GAAG,KAAK,UAAtB;AAEA,SAAK,sBAAL,GAA8B,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA9B;AACA,SAAK,sBAAL,CAA4B,KAA5B,CAAkC,OAAlC,GAA4C,MAA5C;AACA,SAAK,sBAAL,CAA4B,KAA5B,CAAkC,aAAlC,GAAkD,QAAlD;AAEA,SAAK,6BAAL,GAAqC,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAArC;AACA,SAAK,6BAAL,CAAmC,SAAnC,GAA+C,UAAU,CAAC,gBAAX,CAA4B,oBAA5B,CAA/C;AACA,SAAK,6BAAL,CAAmC,KAAnC,CAAyC,OAAzC,GAAmD,MAAnD;AAEA,SAAK,4BAAL,GAAoC,KAAK,cAAL,EAApC;AACA,SAAK,4BAAL,CAAkC,KAAlC,CAAwC,QAAxC,GAAmD,KAAnD;;AAEA,QAAI,YAAY,CAAC,yBAAb,IAA0C,KAAK,UAA/C,IAA6D,KAAK,UAAL,CAAgB,SAAhB,IAA6B,KAAK,CAAC,wBAAN,CAA+B,qBAA7H,EAAoJ;AAChJ,WAAK,4BAAL,CAAkC,SAAlC,CAA4C,GAA5C,CAAgD,UAAU,CAAC,gBAAX,CAA4B,mBAA5B,CAAhD;AACH;;AAED,SAAK,6BAAL,CAAmC,WAAnC,CAA+C,KAAK,4BAApD;;AAEA,SAAK,sBAAL,CAA4B,WAA5B,CAAwC,KAAK,6BAA7C;;AAEA,WAAO,KAAK,sBAAZ;AACH,GAvBS;;AAyBA,EAAA,KAAA,CAAA,SAAA,CAAA,YAAA,GAAV,YAAA;AACI,SAAK,yBAAL;;AAEA,QAAI,KAAK,cAAT,EAAyB;AACrB,WAAK,cAAL,CAAoB,IAApB;AACH;;AAED,IAAA,2BAA2B,CAAC,IAAD,CAA3B;AACH,GARS;;AAUA,EAAA,KAAA,CAAA,SAAA,CAAA,yBAAA,GAAV,YAAA;AACI,QAAI,YAAY,CAAC,yBAAb,IAA0C,KAAK,eAAnD,EAAoE;AAChE,WAAK,4BAAL,CAAkC,SAAlC,CAA4C,MAA5C,CAAmD,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,4BAAjC,CAAnD;;AAEA,UAAI,KAAK,oBAAT,EAA+B;AAC3B,aAAK,sBAAL,CAA4B,WAA5B,CAAwC,KAAK,oBAA7C;;AAEA,aAAK,oBAAL,GAA4B,IAA5B;AACH;AACJ;AACJ,GAVS;;AAYA,EAAA,KAAA,CAAA,SAAA,CAAA,0BAAA,GAAV,YAAA;AACI,QAAI,KAAK,eAAL,IAAwB,YAAY,CAAC,yBAArC,IAAkE,YAAY,CAAC,4BAA/E,IAA+G,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,UAAL,CAAgB,YAApC,CAApH,EAAuK;AACnK,WAAK,oBAAL,GAA4B,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAA5B;AACA,WAAK,oBAAL,CAA0B,SAA1B,GAAsC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,mCAAjC,CAAtC;AACA,WAAK,oBAAL,CAA0B,WAA1B,GAAwC,KAAK,UAAL,CAAgB,YAAxD;;AAEA,WAAK,sBAAL,CAA4B,WAA5B,CAAwC,KAAK,oBAA7C;AACH;AACJ,GARS;;AAUA,EAAA,KAAA,CAAA,SAAA,CAAA,eAAA,GAAV,UAA0B,KAA1B,EAAuC;AACnC,WAAO,KAAP;AACH,GAFS;;AAYV,EAAA,KAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,eAAL,IAAwB,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAzB,CAAzB,GAA2D,KAAK,KAAhE,GAAwE,KAAK,YAAhH;;AAEA,QAAI,YAAY,CAAC,yBAAjB,EAA4C;AACxC,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,YAA1B,EAAwC,KAAK,UAAL,CAAgB,MAAhB,EAAxC;AACH;;AAED,WAAO,MAAP;AACH,GAXD;;AAaA,EAAA,KAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,CAAC,aAAN,CAAoB,KAAK,EAAzB,CAAJ,EAAkC;AAC9B,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;AACJ,GAXD;;AAaA,EAAA,KAAA,CAAA,SAAA,CAAA,aAAA,GAAA,YAAA;AACI,QAAI,YAAY,CAAC,yBAAjB,EAA4C;AACxC,WAAK,yBAAL;AAEA,UAAI,MAAM,GAAG,KAAK,UAAL,CAAgB,SAAhB,IAA6B,KAAK,CAAC,wBAAN,CAA+B,QAA5D,GAAuE,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAzB,CAAxE,GAA0G,IAAvH;;AAEA,UAAI,CAAC,MAAD,IAAW,KAAK,eAApB,EAAqC;AACjC,aAAK,4BAAL,CAAkC,SAAlC,CAA4C,GAA5C,CAAgD,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,4BAAjC,CAAhD;;AAEA,aAAK,0BAAL;AACH;;AAED,aAAO,MAAP;AACH,KAZD,MAaK;AACD,aAAO,IAAP;AACH;AACJ,GAjBD;;AAmBA,EAAA,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,EAAL,GAAU,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,IAAD,CAAzB,CAAV;AACA,SAAK,YAAL,GAAoB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAApB;;AAEA,QAAI,YAAY,CAAC,yBAAjB,EAA4C;AACxC,UAAI,cAAc,GAAG,IAAI,CAAC,YAAD,CAAzB;;AAEA,UAAI,cAAJ,EAAoB;AAChB,aAAK,UAAL,CAAgB,KAAhB,CAAsB,cAAtB;AACH;AACJ;AACJ,GAbD;;AAeA,EAAA,KAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,CAAC,IAAD,CAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAK,aAAZ;AACH,KAFe;SAIhB,aAAiB,KAAjB,EAA8B;AAC1B,WAAK,aAAL,GAAqB,KAAK,eAAL,CAAqB,KAArB,CAArB;AACH,KANe;oBAAA;;AAAA,GAAhB;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,eAAJ,EAAiB;SAAjB,eAAA;AACI,aAAO,IAAP;AACH,KAFgB;oBAAA;;AAAA,GAAjB;AAGJ,SAAA,KAAA;AAAC,CAnKD,CAAoC,WAApC,CAAA;;AAAsB,OAAA,CAAA,KAAA,GAAA,KAAA;;AAqKtB,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAA/B,WAAA,SAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAwHI,IAAA,KAAA,CAAA,WAAA,GAAuB,KAAvB;AAEA,IAAA,KAAA,CAAA,KAAA,GAA8B,KAAK,CAAC,cAAN,CAAqB,IAAnD;;AAuEH;;AA9La,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,KAAK,WAAT,EAAsB;AAClB,UAAI,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAtB;AACA,MAAA,eAAe,CAAC,SAAhB,GAA4B,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,cAA7C,EAA6D,cAA7D,CAA5B;AACA,MAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAA7B;AACA,MAAA,eAAe,CAAC,QAAhB,GAA2B,CAA3B;;AAEA,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,WAAzB,CAAL,EAA4C;AACxC,QAAA,eAAe,CAAC,WAAhB,GAA8B,KAAK,WAAnC;AACA,QAAA,eAAe,CAAC,YAAhB,CAA6B,YAA7B,EAA2C,KAAK,WAAhD;AACH;;AAED,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAL,EAA6C;AACzC,QAAA,eAAe,CAAC,KAAhB,GAAwB,KAAK,YAA7B;AACH;;AAED,UAAI,KAAK,SAAL,IAAkB,KAAK,SAAL,GAAiB,CAAvC,EAA0C;AACtC,QAAA,eAAe,CAAC,SAAhB,GAA4B,KAAK,SAAjC;AACH;;AAED,MAAA,eAAe,CAAC,OAAhB,GAA0B,YAAA;AAAQ,QAAA,KAAI,CAAC,YAAL;AAAsB,OAAxD;;AACA,MAAA,eAAe,CAAC,UAAhB,GAA6B,UAAC,CAAD,EAAiB;AAC1C;AACA,YAAI,CAAC,CAAC,OAAF,IAAa,EAAb,IAAmB,KAAI,CAAC,YAA5B,EAA0C;AACtC,UAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH;AACJ,OALD;;AAOA,aAAO,eAAP;AACH,KA5BD,MA6BK;AACD,UAAI,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAnB;AACA,MAAA,YAAY,CAAC,IAAb,GAAoB,KAAK,CAAC,cAAN,CAAqB,KAAK,KAA1B,EAAiC,WAAjC,EAApB;AACA,MAAA,YAAY,CAAC,SAAb,GAAyB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,cAA7C,CAAzB;AACA,MAAA,YAAY,CAAC,KAAb,CAAmB,IAAnB,GAA0B,UAA1B;AACA,MAAA,YAAY,CAAC,QAAb,GAAwB,CAAxB;;AAEA,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,WAAzB,CAAL,EAA4C;AACxC,QAAA,YAAY,CAAC,WAAb,GAA2B,KAAK,WAAhC;AACA,QAAA,YAAY,CAAC,YAAb,CAA0B,YAA1B,EAAwC,KAAK,WAA7C;AACH;;AAED,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAL,EAA6C;AACzC,QAAA,YAAY,CAAC,KAAb,GAAqB,KAAK,YAA1B;AACH;;AAED,UAAI,KAAK,SAAL,IAAkB,KAAK,SAAL,GAAiB,CAAvC,EAA0C;AACtC,QAAA,YAAY,CAAC,SAAb,GAAyB,KAAK,SAA9B;AACH;;AAED,MAAA,YAAY,CAAC,OAAb,GAAuB,YAAA;AAAQ,QAAA,KAAI,CAAC,YAAL;AAAsB,OAArD;;AACA,MAAA,YAAY,CAAC,UAAb,GAA0B,UAAC,CAAD,EAAiB;AACvC;AACA,YAAI,CAAC,CAAC,OAAF,IAAa,EAAb,IAAmB,KAAI,CAAC,YAA5B,EAA0C;AACtC,UAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH;AACJ,OALD;;AAOA,aAAO,YAAP;AACH;AACJ,GA5DS;;AA8DA,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,oBAAoB,GAAG,MAAA,CAAA,SAAA,CAAM,sBAAN,CAA4B,IAA5B,CAA4B,IAA5B,CAA3B;;AAEA,QAAI,KAAK,YAAT,EAAuB;AACnB,UAAI,QAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAb;AACA,MAAA,QAAM,CAAC,SAAP,GAAmB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,uBAAjC,CAAnB;;AACA,MAAA,QAAM,CAAC,OAAP,GAAiB,UAAC,CAAD,EAAE;AACf,QAAA,CAAC,CAAC,cAAF;AACA,QAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,QAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB;AACH,OALD;;AAOA,UAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAL,CAAkB,OAAtC,CAAL,EAAqD;AACjD,QAAA,QAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AAEA,YAAI,MAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAX;AACA,QAAA,MAAI,CAAC,KAAL,CAAW,MAAX,GAAoB,MAApB,CAJiD,CAMjD;AACA;AACA;AACA;;AACA,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,GAAqB,MAArB;;AACA,QAAA,MAAI,CAAC,MAAL,GAAc,YAAA;AACV,UAAA,MAAI,CAAC,KAAL,CAAW,cAAX,CAA0B,SAA1B;AACH,SAFD;;AAGA,QAAA,MAAI,CAAC,OAAL,GAAe,YAAA;AACX,UAAA,QAAM,CAAC,WAAP,CAAmB,MAAnB;AACA,UAAA,QAAM,CAAC,SAAP,CAAiB,MAAjB,CAAwB,UAAxB;AACA,UAAA,QAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AACA,UAAA,QAAM,CAAC,WAAP,GAAqB,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAI,CAAC,YAAL,CAAkB,KAAtC,CAAD,GAAgD,KAAI,CAAC,YAAL,CAAkB,KAAlE,GAA0E,OAA/F;AACH,SALD;;AAMA,QAAA,MAAI,CAAC,GAAL,GAAW,KAAK,YAAL,CAAkB,OAA7B;AAEA,QAAA,QAAM,CAAC,WAAP,CAAmB,MAAnB;;AAEA,YAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAL,CAAkB,KAAtC,CAAL,EAAmD;AAC/C,UAAA,QAAM,CAAC,KAAP,GAAe,KAAK,YAAL,CAAkB,KAAjC;AACH;AACJ,OA3BD,MA4BK;AACD,QAAA,QAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AACA,QAAA,QAAM,CAAC,WAAP,GAAqB,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAL,CAAkB,KAAtC,CAAD,GAAgD,KAAK,YAAL,CAAkB,KAAlE,GAA0E,OAA/F;AACH;;AAED,MAAA,QAAM,CAAC,KAAP,CAAa,UAAb,GAA0B,KAA1B;AAEA,WAAK,4BAAL,CAAkC,WAAlC,CAA8C,QAA9C;AACH;;AAED,WAAO,oBAAP;AACH,GApDS;;AA2DV,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,YAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,EAApB,CAAb;;AAEA,QAAI,CAAC,MAAD,IAAW,KAAK,YAApB,EAAkC;AAC9B,MAAA,MAAM,GAAG,KAAK,YAAL,CAAkB,aAAlB,CAAgC,EAAhC,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,aAA1B,EAAyC,KAAK,WAA9C;AACA,IAAA,KAAK,CAAC,iBAAN,CAAwB,MAAxB,EAAgC,WAAhC,EAA6C,KAAK,SAAlD;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,aAA1B,EAAyC,KAAK,WAA9C,EAA2D,KAA3D;AACA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,cAA5B,EAA4C,MAA5C,EAAoD,OAApD,EAA6D,KAAK,KAAlE,EAAyE,KAAK,CAAC,cAAN,CAAqB,IAA9F;;AAEA,QAAI,KAAK,aAAT,EAAwB;AACpB,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,cAA1B,EAA0C,KAAK,aAAL,CAAmB,MAAnB,EAA1C;AACH;;AAED,WAAO,MAAP;AACH,GAbD;;AAeA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,SAAL,GAAiB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,WAAD,CAAzB,CAAjB;AACA,SAAK,WAAL,GAAmB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,aAAD,CAAvB,EAAwC,KAAK,WAA7C,CAAnB;AACA,SAAK,WAAL,GAAmB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,aAAD,CAAzB,CAAnB;AACA,SAAK,KAAL,GAAa,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,cAAzB,EAAyC,IAAI,CAAC,OAAD,CAA7C,EAAwD,KAAK,KAA7D,CAAb;AACA,SAAK,YAAL,GAAoB,oBAAoB,CACpC,IADoC,EAEpC,IAAI,CAAC,cAAD,CAFgC,EAGpC,CAAC,cAAc,CAAC,YAAhB,CAHoC,EAIpC,CAAC,KAAK,YAAL,EAJmC,EAKpC,MALoC,CAAxC;AAMH,GAbD;;AAeA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAK,aAAZ;AACH,KAFe;SAIhB,aAAiB,KAAjB,EAA8B;AAC1B,WAAK,aAAL,GAAqB,KAArB;;AAEA,UAAI,KAAK,aAAT,EAAwB;AACpB,aAAK,aAAL,CAAmB,SAAnB,CAA6B,IAA7B;AACH;AACJ,KAVe;oBAAA;;AAAA,GAAhB;AAYA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,UAAI,KAAK,2BAAT,EAAsC;AAClC,YAAI,KAAK,WAAT,EAAsB;AAClB,iBAA6B,KAAK,2BAAL,CAAkC,KAA/D;AACH,SAFD,MAGK;AACD,iBAA0B,KAAK,2BAAL,CAAkC,KAA5D;AACH;AACJ,OAPD,MAQK;AACD,eAAO,IAAP;AACH;AACJ,KAZQ;oBAAA;;AAAA,GAAT;AAaJ,SAAA,SAAA;AAAC,CAjMD,CAA+B,KAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;;AAmMb,IAAA,WAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAiC,EAAA,SAAA,CAAA,WAAA,EAAA,MAAA,CAAA;;AAAjC,WAAA,WAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAyDI,IAAA,KAAA,CAAA,OAAA,GAAkB,MAAlB;AACA,IAAA,KAAA,CAAA,QAAA,GAAmB,OAAnB;AACA,IAAA,KAAA,CAAA,IAAA,GAAgB,KAAhB;;AAiCH;;AAzFa,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,IAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,gBAA7C,CAApB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,MAAtB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,QAA3B;AAEA,SAAK,qBAAL,GAA6B,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAA7B;AACA,SAAK,qBAAL,CAA2B,EAA3B,GAAgC,KAAK,CAAC,gBAAN,EAAhC;AACA,SAAK,qBAAL,CAA2B,IAA3B,GAAkC,UAAlC;AACA,SAAK,qBAAL,CAA2B,KAA3B,CAAiC,OAAjC,GAA2C,cAA3C;AACA,SAAK,qBAAL,CAA2B,KAA3B,CAAiC,aAAjC,GAAiD,QAAjD;AACA,SAAK,qBAAL,CAA2B,KAA3B,CAAiC,MAAjC,GAA0C,GAA1C;AACA,SAAK,qBAAL,CAA2B,KAA3B,CAAiC,IAAjC,GAAwC,UAAxC;;AACA,SAAK,qBAAL,CAA2B,YAA3B,CAAwC,YAAxC,EAAsD,KAAK,KAA3D;;AACA,SAAK,qBAAL,CAA2B,QAA3B,GAAsC,CAAtC;;AAEA,QAAI,KAAK,YAAL,IAAqB,KAAK,OAA9B,EAAuC;AACnC,WAAK,qBAAL,CAA2B,OAA3B,GAAqC,IAArC;AACH;;AAED,SAAK,qBAAL,CAA2B,QAA3B,GAAsC,YAAA;AAAQ,MAAA,KAAI,CAAC,YAAL;AAAsB,KAApE;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,KAAK,qBAAhC;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAzB,CAAD,IAAoC,KAAK,YAAL,EAAxC,EAA6D;AACzD,UAAI,KAAK,GAAG,IAAI,KAAJ,EAAZ;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB;AACA,MAAA,KAAK,CAAC,YAAN,GAAqB,KAAK,qBAAL,CAA2B,EAAhD;AACA,MAAA,KAAK,CAAC,UAAN,GAAmB,KAAK,UAAxB;AACA,MAAA,KAAK,CAAC,IAAN,GAAa,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAzB,IAAkC,KAAK,eAAL,EAAlC,GAA2D,KAAK,KAA7E;AACA,MAAA,KAAK,CAAC,WAAN,GAAoB,YAAY,CAAC,mCAAjC;AACA,MAAA,KAAK,CAAC,IAAN,GAAa,KAAK,IAAlB;AAEA,UAAI,YAAY,GAAG,KAAK,CAAC,MAAN,EAAnB;AACA,MAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,cAA7B;AACA,MAAA,YAAY,CAAC,KAAb,CAAmB,IAAnB,GAA0B,UAA1B;AACA,MAAA,YAAY,CAAC,KAAb,CAAmB,UAAnB,GAAgC,KAAhC;AACA,MAAA,YAAY,CAAC,KAAb,CAAmB,aAAnB,GAAmC,QAAnC;AAEA,UAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,MAAA,aAAa,CAAC,KAAd,CAAoB,KAApB,GAA4B,KAA5B;AAEA,MAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,aAA3B;AACA,MAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,YAA3B;AACH;;AAED,WAAO,OAAP;AACH,GAhDS;;AAkDV,EAAA,MAAA,CAAA,cAAA,CAAc,WAAA,CAAA,SAAd,EAAc,YAAd,EAAwB;SAAxB,eAAA;AACI,aAAO,KAAP;AACH,KAFuB;oBAAA;;AAAA,GAAxB;;AAQA,EAAA,WAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,cAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,OAA1C,EAAmD,MAAnD;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,UAA1B,EAAsC,KAAK,QAA3C,EAAqD,OAArD;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAvC;AAEA,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,WAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAb;AACA,SAAK,OAAL,GAAe,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,SAAD,CAAzB,EAAsC,KAAK,OAA3C,CAAf;AACA,SAAK,QAAL,GAAgB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,UAAD,CAAzB,EAAuC,KAAK,QAA5C,CAAhB;AACA,SAAK,IAAL,GAAY,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,MAAD,CAAvB,EAAiC,KAAK,IAAtC,CAAZ;AACH,GAPD;;AASA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,UAAI,KAAK,qBAAT,EAAgC;AAC5B,eAAO,KAAK,qBAAL,CAA2B,OAA3B,GAAqC,KAAK,OAA1C,GAAoD,KAAK,QAAhE;AACH,OAFD,MAGK;AACD,eAAO,IAAP;AACH;AACJ,KAPQ;oBAAA;;AAAA,GAAT;AAQJ,SAAA,WAAA;AAAC,CA5FD,CAAiC,KAAjC,CAAA;;AAAa,OAAA,CAAA,WAAA,GAAA,WAAA;;AA8Fb,IAAA,MAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4B,EAAA,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;;AAIxB,WAAA,MAAA,CAAY,KAAZ,EAAuC,KAAvC,EAAgE;AAApD,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,SAAA;AAAyB;;AAAE,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,SAAA;AAAyB;;AAAhE,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAGI,IAAA,KAAI,CAAC,KAAL,GAAa,KAAb;AACA,IAAA,KAAI,CAAC,KAAL,GAAa,KAAb;;AACH;;AAED,EAAA,MAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAe;AACX,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ;;AAEA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,EAAoC,EAApC,CAAb;AACA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,EAAoC,EAApC,CAAb;AACH,GALD;;AAOA,EAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AAEA,WAAO,MAAP;AACH,GAPD;;AAQJ,SAAA,MAAA;AAAC,CA1BD,CAA4B,kBAA5B,CAAA;;AAAa,OAAA,CAAA,MAAA,GAAA,MAAA;;AA4Bb,IAAA,cAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAoC,EAAA,SAAA,CAAA,cAAA,EAAA,MAAA,CAAA;;AAApC,WAAA,cAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAmMI,IAAA,KAAA,CAAA,OAAA,GAAyB,EAAzB;AACA,IAAA,KAAA,CAAA,SAAA,GAAqB,KAArB;AACA,IAAA,KAAA,CAAA,aAAA,GAAyB,KAAzB;AAEA,IAAA,KAAA,CAAA,IAAA,GAAgB,KAAhB;;AAwHH;;AA5TkB,EAAA,cAAA,CAAA,qBAAA,GAAf,YAAA;AACI,QAAI,kBAAkB,GAAG,kBAAkB,cAAc,CAAC,qBAA1D;AAEA,IAAA,cAAc,CAAC,qBAAf;AAEA,WAAO,kBAAP;AACH,GANc,CAHnB,CAcI;;;AACU,EAAA,cAAA,CAAA,SAAA,CAAA,wBAAA,GAAV,YAAA;AACI,QAAM,OAAO,GAAG,KAAK,cAAL,CAAoB,OAApC;;AAEA,QAAI,OAAJ,EAAa;AACT,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,OAAO,CAAC,MAA5B,EAAoC,CAAC,EAArC,EAAyC;AACrC,YAAI,OAAO,CAAC,CAAD,CAAP,CAAW,QAAf,EAAyB;AACrB,UAAA,OAAO,CAAC,CAAD,CAAP,CAAW,YAAX,CAAwB,cAAxB,EAAwC,MAAxC;AACH,SAFD,MAGK;AACD,UAAA,OAAO,CAAC,CAAD,CAAP,CAAW,eAAX,CAA2B,cAA3B;AACH;AACJ;AACJ;AACJ,GAbS;;AAeA,EAAA,cAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,CAAC,KAAK,aAAV,EAAyB;AACrB,UAAI,KAAK,SAAT,EAAoB;AAChB;AACA,aAAK,cAAL,GAAsB,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAtB;AACA,aAAK,cAAL,CAAoB,SAApB,GAAgC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,qBAA7C,EAAoE,2BAApE,CAAhC;AACA,aAAK,cAAL,CAAoB,KAApB,CAA0B,KAA1B,GAAkC,MAAlC;AAEA,YAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAb;AACA,QAAA,MAAM,CAAC,QAAP,GAAkB,IAAlB;AACA,QAAA,MAAM,CAAC,QAAP,GAAkB,IAAlB;AACA,QAAA,MAAM,CAAC,MAAP,GAAgB,IAAhB;AACA,QAAA,MAAM,CAAC,KAAP,GAAe,EAAf;;AAEA,YAAI,KAAK,WAAT,EAAsB;AAClB,UAAA,MAAM,CAAC,IAAP,GAAc,KAAK,WAAnB;AACH;;AAED,QAAA,KAAK,CAAC,WAAN,CAAkB,KAAK,cAAvB,EAAuC,MAAvC;;AAEA,aAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,cAAI,QAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAb;AACA,UAAA,QAAM,CAAC,KAAP,GAAe,KAAK,OAAL,CAAa,CAAb,EAAgB,KAA/B;AACA,UAAA,QAAM,CAAC,IAAP,GAAc,KAAK,OAAL,CAAa,CAAb,EAAgB,KAA9B;AACA,UAAA,QAAM,CAAC,YAAP,CAAoB,YAApB,EAAkC,KAAK,OAAL,CAAa,CAAb,EAAgB,KAAlD;;AAEA,cAAI,KAAK,OAAL,CAAa,CAAb,EAAgB,KAAhB,IAAyB,KAAK,YAAlC,EAAgD;AAC5C,YAAA,QAAM,CAAC,QAAP,GAAkB,IAAlB;AACH;;AAED,UAAA,KAAK,CAAC,WAAN,CAAkB,KAAK,cAAvB,EAAuC,QAAvC;AACH;;AAED,aAAK,cAAL,CAAoB,QAApB,GAA+B,YAAA;AAC3B,UAAA,KAAI,CAAC,wBAAL;;AACA,UAAA,KAAI,CAAC,YAAL;AACH,SAHD;;AAKA,aAAK,wBAAL;AACA,eAAO,KAAK,cAAZ;AACH,OAtCD,MAuCK;AACD;AACA,YAAI,kBAAkB,GAAG,cAAc,CAAC,qBAAf,EAAzB;AAEA,YAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,QAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,4BAA7C,CAApB;AACA,QAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,MAAtB;AAEA,aAAK,aAAL,GAAqB,EAArB;;AAEA,aAAK,IAAI,GAAC,GAAG,CAAb,EAAgB,GAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,GAAC,EAA1C,EAA8C;AAC1C,cAAI,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAjB;AACA,UAAA,UAAU,CAAC,EAAX,GAAgB,KAAK,CAAC,gBAAN,EAAhB;AACA,UAAA,UAAU,CAAC,IAAX,GAAkB,OAAlB;AACA,UAAA,UAAU,CAAC,KAAX,CAAiB,MAAjB,GAA0B,GAA1B;AACA,UAAA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,cAA3B;AACA,UAAA,UAAU,CAAC,KAAX,CAAiB,aAAjB,GAAiC,QAAjC;AACA,UAAA,UAAU,CAAC,IAAX,GAAkB,KAAK,CAAC,aAAN,CAAoB,KAAK,EAAzB,IAA+B,kBAA/B,GAAoD,KAAK,EAA3E;AACA,UAAA,UAAU,CAAC,KAAX,GAAmB,KAAK,OAAL,CAAa,GAAb,EAAgB,KAAnC;AACA,UAAA,UAAU,CAAC,KAAX,CAAiB,IAAjB,GAAwB,UAAxB;AACA,UAAA,UAAU,CAAC,YAAX,CAAwB,YAAxB,EAAsC,KAAK,OAAL,CAAa,GAAb,EAAgB,KAAtD;;AAEA,cAAI,KAAK,OAAL,CAAa,GAAb,EAAgB,KAAhB,IAAyB,KAAK,YAAlC,EAAgD;AAC5C,YAAA,UAAU,CAAC,OAAX,GAAqB,IAArB;AACH;;AAED,UAAA,UAAU,CAAC,QAAX,GAAsB,YAAA;AAAQ,YAAA,KAAI,CAAC,YAAL;AAAsB,WAApD;;AAEA,eAAK,aAAL,CAAmB,IAAnB,CAAwB,UAAxB;;AAEA,cAAI,KAAK,GAAG,IAAI,KAAJ,EAAZ;AACA,UAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB;AACA,UAAA,KAAK,CAAC,YAAN,GAAqB,UAAU,CAAC,EAAhC;AACA,UAAA,KAAK,CAAC,UAAN,GAAmB,KAAK,UAAxB;AACA,UAAA,KAAK,CAAC,IAAN,GAAa,KAAK,CAAC,aAAN,CAAoB,KAAK,OAAL,CAAa,GAAb,EAAgB,KAApC,IAA6C,YAAY,GAAzD,GAA6D,KAAK,OAAL,CAAa,GAAb,EAAgB,KAA1F;AACA,UAAA,KAAK,CAAC,WAAN,GAAoB,YAAY,CAAC,mCAAjC;AACA,UAAA,KAAK,CAAC,IAAN,GAAa,KAAK,IAAlB;AAEA,cAAI,YAAY,GAAG,KAAK,CAAC,MAAN,EAAnB;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,cAA7B;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,IAAnB,GAA0B,UAA1B;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,UAAnB,GAAgC,KAAhC;AACA,UAAA,YAAY,CAAC,KAAb,CAAmB,aAAnB,GAAmC,QAAnC;AAEA,cAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,UAAA,aAAa,CAAC,KAAd,CAAoB,KAApB,GAA4B,KAA5B;AAEA,cAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,UAAA,aAAa,CAAC,KAAd,CAAoB,OAApB,GAA8B,MAA9B;AACA,UAAA,aAAa,CAAC,KAAd,CAAoB,UAApB,GAAiC,QAAjC;AAEA,UAAA,KAAK,CAAC,WAAN,CAAkB,aAAlB,EAAiC,UAAjC;AACA,UAAA,KAAK,CAAC,WAAN,CAAkB,aAAlB,EAAiC,aAAjC;AACA,UAAA,KAAK,CAAC,WAAN,CAAkB,aAAlB,EAAiC,YAAjC;AAEA,UAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,aAA3B;AACH;;AAED,eAAO,OAAP;AACH;AACJ,KApGD,MAqGK;AACD;AACA,UAAI,aAAa,GAAG,KAAK,YAAL,GAAoB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,KAAK,UAAL,CAAgB,4BAAxC,CAApB,GAA4F,IAAhH;AAEA,UAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,+BAA7C,CAApB;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,KAAd,GAAsB,MAAtB;AAEA,WAAK,aAAL,GAAqB,EAArB;;AAEA,WAAK,IAAI,GAAC,GAAG,CAAb,EAAgB,GAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,GAAC,EAA1C,EAA8C;AAC1C,YAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAApB;AACA,QAAA,aAAa,CAAC,EAAd,GAAmB,KAAK,CAAC,gBAAN,EAAnB;AACA,QAAA,aAAa,CAAC,IAAd,GAAqB,UAArB;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,MAApB,GAA6B,GAA7B;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,OAApB,GAA8B,cAA9B;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,aAApB,GAAoC,QAApC;AACA,QAAA,aAAa,CAAC,KAAd,GAAsB,KAAK,OAAL,CAAa,GAAb,EAAgB,KAAtC;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,IAApB,GAA2B,UAA3B;AACA,QAAA,aAAa,CAAC,YAAd,CAA2B,YAA3B,EAAyC,KAAK,OAAL,CAAa,GAAb,EAAgB,KAAzD;;AAEA,YAAI,aAAJ,EAAmB;AACf,cAAI,aAAa,CAAC,OAAd,CAAsB,KAAK,OAAL,CAAa,GAAb,EAAgB,KAAtC,KAAgD,CAApD,EAAuD;AACnD,YAAA,aAAa,CAAC,OAAd,GAAwB,IAAxB;AACH;AACJ;;AAED,QAAA,aAAa,CAAC,QAAd,GAAyB,YAAA;AAAQ,UAAA,KAAI,CAAC,YAAL;AAAsB,SAAvD;;AAEA,aAAK,aAAL,CAAmB,IAAnB,CAAwB,aAAxB;;AAEA,YAAI,KAAK,GAAG,IAAI,KAAJ,EAAZ;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB;AACA,QAAA,KAAK,CAAC,YAAN,GAAqB,aAAa,CAAC,EAAnC;AACA,QAAA,KAAK,CAAC,UAAN,GAAmB,KAAK,UAAxB;AACA,QAAA,KAAK,CAAC,IAAN,GAAa,KAAK,CAAC,aAAN,CAAoB,KAAK,OAAL,CAAa,GAAb,EAAgB,KAApC,IAA6C,YAAY,GAAzD,GAA6D,KAAK,OAAL,CAAa,GAAb,EAAgB,KAA1F;AACA,QAAA,KAAK,CAAC,WAAN,GAAoB,YAAY,CAAC,mCAAjC;AACA,QAAA,KAAK,CAAC,IAAN,GAAa,KAAK,IAAlB;AAEA,YAAI,YAAY,GAAG,KAAK,CAAC,MAAN,EAAnB;AACA,QAAA,YAAY,CAAC,KAAb,CAAmB,OAAnB,GAA6B,cAA7B;AACA,QAAA,YAAY,CAAC,KAAb,CAAmB,IAAnB,GAA0B,UAA1B;AACA,QAAA,YAAY,CAAC,KAAb,CAAmB,UAAnB,GAAgC,KAAhC;AACA,QAAA,YAAY,CAAC,KAAb,CAAmB,aAAnB,GAAmC,QAAnC;AAEA,YAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,KAApB,GAA4B,KAA5B;AAEA,YAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,OAApB,GAA8B,MAA9B;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,UAApB,GAAiC,QAAjC;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,aAAlB,EAAiC,aAAjC;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,aAAlB,EAAiC,aAAjC;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,aAAlB,EAAiC,YAAjC;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,aAA3B;AACH;;AAED,aAAO,OAAP;AACH;AACJ,GAnKS;;AA2KV,EAAA,cAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,iBAAP;AACH,GAFD;;AAIA,EAAA,cAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,aAA1B,EAAyC,KAAK,WAA9C;AAEA;;;;;;;;;;AAYA,IAAA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,SAA/B,EAA0C,KAAK,OAA/C;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,SAAL,GAAiB,IAAjB,GAAwB,UAA3D;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,eAA1B,EAA2C,KAAK,aAAhD,EAA+D,KAA/D;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAvC,EAA6C,KAA7C;AAEA,WAAO,MAAP;AACH,GAxBD;;AA0BA,EAAA,cAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,OAAL,CAAa,MAAb,IAAuB,CAA3B,EAA8B;AAC1B,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,qBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;;AAED,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAiC;AAA5B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,UAAI,CAAC,MAAM,CAAC,KAAR,IAAiB,CAAC,MAAM,CAAC,KAA7B,EAAoC;AAChC,QAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,UAAA,OAAO,EAAE;AAFb,SAFJ;AAMH;AACJ;AACJ,GAtBD;;AAwBA,EAAA,cAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,SAAL,GAAiB,EAAE,IAAI,CAAC,OAAD,CAAJ,KAAkB,UAApB,CAAjB;AACA,SAAK,aAAL,GAAqB,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,eAAD,CAAvB,EAA0C,KAAK,aAA/C,CAArB;AACA,SAAK,WAAL,GAAmB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,aAAD,CAAzB,CAAnB;AAEA,SAAK,OAAL,GAAe,EAAf;;AAEA,QAAI,KAAK,CAAC,OAAN,CAAc,IAAI,CAAC,SAAD,CAAlB,CAAJ,EAAoC;AAChC,WAAuB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,IAAI,CAAC,SAAD,CAA3B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;AAAnC,YAAI,UAAU,GAAA,EAAA,CAAA,EAAA,CAAd;AACD,YAAI,MAAM,GAAG,IAAI,MAAJ,EAAb;AACA,QAAA,MAAM,CAAC,KAAP,CAAa,UAAb;AAEA,aAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB;AACH;AACJ;;AAED,SAAK,IAAL,GAAY,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,MAAD,CAAvB,EAAiC,KAAK,IAAtC,CAAZ;AACH,GAnBD;;AAqBA,EAAA,MAAA,CAAA,cAAA,CAAI,cAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,UAAI,CAAC,KAAK,aAAV,EAAyB;AACrB,YAAI,KAAK,SAAT,EAAoB;AAChB,cAAI,KAAK,cAAT,EAAyB;AACrB,mBAAO,KAAK,cAAL,CAAoB,aAApB,GAAoC,CAApC,GAAwC,KAAK,cAAL,CAAoB,KAA5D,GAAoE,IAA3E;AACH;;AAED,iBAAO,IAAP;AACH,SAND,MAOK;AACD,cAAI,CAAC,KAAK,aAAN,IAAuB,KAAK,aAAL,CAAmB,MAAnB,IAA6B,CAAxD,EAA2D;AACvD,mBAAO,IAAP;AACH;;AAED,eAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,aAAL,CAAmB,MAAvC,EAA+C,CAAC,EAAhD,EAAoD;AAChD,gBAAI,KAAK,aAAL,CAAmB,CAAnB,EAAsB,OAA1B,EAAmC;AAC/B,qBAAO,KAAK,aAAL,CAAmB,CAAnB,EAAsB,KAA7B;AACH;AACJ;;AAED,iBAAO,IAAP;AACH;AACJ,OArBD,MAsBK;AACD,YAAI,CAAC,KAAK,aAAN,IAAuB,KAAK,aAAL,CAAmB,MAAnB,IAA6B,CAAxD,EAA2D;AACvD,iBAAO,IAAP;AACH;;AAED,YAAI,MAAM,GAAW,EAArB;;AAEA,aAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,aAAL,CAAmB,MAAvC,EAA+C,CAAC,EAAhD,EAAoD;AAChD,cAAI,KAAK,aAAL,CAAmB,CAAnB,EAAsB,OAA1B,EAAmC;AAC/B,gBAAI,MAAM,IAAI,EAAd,EAAkB;AACd,cAAA,MAAM,IAAI,KAAK,UAAL,CAAgB,4BAA1B;AACH;;AAED,YAAA,MAAM,IAAI,KAAK,aAAL,CAAmB,CAAnB,EAAsB,KAAhC;AACH;AACJ;;AAED,eAAO,MAAM,IAAI,EAAV,GAAe,IAAf,GAAsB,MAA7B;AACH;AACJ,KA1CQ;oBAAA;;AAAA,GAAT;AAnRe,EAAA,cAAA,CAAA,qBAAA,GAAwB,CAAxB;AA8TnB,SAAA,cAAA;AAAC,CA/TD,CAAoC,KAApC,CAAA;;AAAa,OAAA,CAAA,cAAA,GAAA,cAAA;;AAiUb,IAAA,WAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAiC,EAAA,SAAA,CAAA,WAAA,EAAA,MAAA,CAAA;;AAAjC,WAAA,WAAA,GAAA;;AAkFC;;AA7Ea,EAAA,WAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,SAAK,mBAAL,GAA2B,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAA3B;;AACA,SAAK,mBAAL,CAAyB,YAAzB,CAAsC,MAAtC,EAA8C,QAA9C;;AAEA,QAAI,KAAK,GAAT,EAAc;AACV,WAAK,mBAAL,CAAyB,YAAzB,CAAsC,KAAtC,EAA6C,KAAK,GAAL,CAAS,QAAT,EAA7C;AACH;;AAED,QAAI,KAAK,GAAT,EAAc;AACV,WAAK,mBAAL,CAAyB,YAAzB,CAAsC,KAAtC,EAA6C,KAAK,GAAL,CAAS,QAAT,EAA7C;AACH;;AAED,SAAK,mBAAL,CAAyB,SAAzB,GAAqC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,gBAA7C,CAArC;AACA,SAAK,mBAAL,CAAyB,KAAzB,CAA+B,KAA/B,GAAuC,MAAvC;AACA,SAAK,mBAAL,CAAyB,QAAzB,GAAoC,CAApC;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAL,EAA6C;AACzC,WAAK,mBAAL,CAAyB,KAAzB,GAAiC,KAAK,YAAtC;AACH;;AAED,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,WAAzB,CAAL,EAA4C;AACxC,WAAK,mBAAL,CAAyB,WAAzB,GAAuC,KAAK,WAA5C;;AACA,WAAK,mBAAL,CAAyB,YAAzB,CAAsC,YAAtC,EAAoD,KAAK,WAAzD;AACH;;AAED,SAAK,mBAAL,CAAyB,OAAzB,GAAmC,YAAA;AAAQ,MAAA,KAAI,CAAC,YAAL;AAAsB,KAAjE;;AAEA,WAAO,KAAK,mBAAZ;AACH,GA5BS;;AAgCV,EAAA,WAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,cAAP;AACH,GAFD;;AAIA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,aAA1B,EAAyC,KAAK,WAA9C;AACA,IAAA,KAAK,CAAC,iBAAN,CAAwB,MAAxB,EAAgC,KAAhC,EAAuC,KAAK,GAA5C;AACA,IAAA,KAAK,CAAC,iBAAN,CAAwB,MAAxB,EAAgC,KAAhC,EAAuC,KAAK,GAA5C;AAEA,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,WAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,WAAL,GAAmB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,aAAD,CAAzB,CAAnB;AACA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACH,GAND;;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAZ;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,GAAY,KAAZ;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAZ;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,GAAY,KAAZ;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,mBAAL,GAA2B,KAAK,mBAAL,CAAyB,KAApD,GAA4D,SAAnE;AACH,KAFQ;oBAAA;;AAAA,GAAT;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,WAAA,CAAA,SAAJ,EAAI,eAAJ,EAAiB;SAAjB,eAAA;AACI,aAAO,KAAK,mBAAL,GAA2B,KAAK,mBAAL,CAAyB,aAApD,GAAoE,SAA3E;AACH,KAFgB;oBAAA;;AAAA,GAAjB;AAGJ,SAAA,WAAA;AAAC,CAlFD,CAAiC,KAAjC,CAAA;;AAAa,OAAA,CAAA,WAAA,GAAA,WAAA;;AAoFb,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAA/B,WAAA,SAAA,GAAA;;AA6DC;;AAxDa,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,SAAK,iBAAL,GAAyB,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAzB;;AACA,SAAK,iBAAL,CAAuB,YAAvB,CAAoC,MAApC,EAA4C,MAA5C;;AACA,SAAK,iBAAL,CAAuB,YAAvB,CAAoC,KAApC,EAA2C,KAAK,GAAhD;;AACA,SAAK,iBAAL,CAAuB,YAAvB,CAAoC,KAApC,EAA2C,KAAK,GAAhD;;AACA,SAAK,iBAAL,CAAuB,SAAvB,GAAmC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,cAA7C,CAAnC;AACA,SAAK,iBAAL,CAAuB,KAAvB,CAA6B,KAA7B,GAAqC,MAArC;;AAEA,SAAK,iBAAL,CAAuB,OAAvB,GAAiC,YAAA;AAAQ,MAAA,KAAI,CAAC,YAAL;AAAsB,KAA/D;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAL,EAA6C;AACzC,WAAK,iBAAL,CAAuB,KAAvB,GAA+B,KAAK,YAApC;AACH;;AAED,WAAO,KAAK,iBAAZ;AACH,GAfS;;AAiBV,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,YAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACH,GALD;;AAOA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAZ;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,GAAY,KAAK,eAAL,CAAqB,KAArB,CAAZ;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAZ;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,GAAY,KAAK,eAAL,CAAqB,KAArB,CAAZ;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,iBAAL,GAAyB,KAAK,iBAAL,CAAuB,KAAhD,GAAwD,IAA/D;AACH,KAFQ;oBAAA;;AAAA,GAAT;AAGJ,SAAA,SAAA;AAAC,CA7DD,CAA+B,KAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;;AA+Db,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAA/B,WAAA,SAAA,GAAA;;AAqEC;;AAhEa,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,SAAK,iBAAL,GAAyB,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAzB;;AACA,SAAK,iBAAL,CAAuB,YAAvB,CAAoC,MAApC,EAA4C,MAA5C;;AACA,SAAK,iBAAL,CAAuB,YAAvB,CAAoC,KAApC,EAA2C,KAAK,GAAhD;;AACA,SAAK,iBAAL,CAAuB,YAAvB,CAAoC,KAApC,EAA2C,KAAK,GAAhD;;AACA,SAAK,iBAAL,CAAuB,SAAvB,GAAmC,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,cAA7C,CAAnC;AACA,SAAK,iBAAL,CAAuB,KAAvB,CAA6B,KAA7B,GAAqC,MAArC;;AACA,SAAK,iBAAL,CAAuB,OAAvB,GAAiC,YAAA;AAAQ,MAAA,KAAI,CAAC,YAAL;AAAsB,KAA/D;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,YAAzB,CAAL,EAA6C;AACzC,WAAK,iBAAL,CAAuB,KAAvB,GAA+B,KAAK,YAApC;AACH;;AAED,WAAO,KAAK,iBAAZ;AACH,GAdS;;AAgBA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAV,UAA0B,KAA1B,EAAuC;AACnC,QAAI,sBAAsB,IAAtB,CAA2B,KAA3B,CAAJ,EAAuC;AACnC,aAAO,KAAP;AACH,KAFD,MAGK;AACD,aAAO,IAAP;AACH;AACJ,GAPS;;AASV,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,YAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACH,GALD;;AAOA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAZ;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,GAAY,KAAK,eAAL,CAAqB,KAArB,CAAZ;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAZ;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,GAAY,KAAK,eAAL,CAAqB,KAArB,CAAZ;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,iBAAL,GAAyB,KAAK,iBAAL,CAAuB,KAAhD,GAAwD,IAA/D;AACH,KAFQ;oBAAA;;AAAA,GAAT;AAGJ,SAAA,SAAA;AAAC,CArED,CAA+B,KAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;AAuEb,IAAK,iBAAL;;AAAA,CAAA,UAAK,iBAAL,EAAsB;AAClB,EAAA,iBAAA,CAAA,iBAAA,CAAA,QAAA,CAAA,GAAA,CAAA,CAAA,GAAA,QAAA;AACA,EAAA,iBAAA,CAAA,iBAAA,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,GAAA,UAAA;AACA,EAAA,iBAAA,CAAA,iBAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAA;AACH,CAJD,EAAK,iBAAiB,KAAjB,iBAAiB,GAAA,EAAA,CAAtB;;AAMA,IAAA,YAAA;AAAA;AAAA,YAAA;AAyCI,WAAA,YAAA,CAAY,MAAZ,EAA4B,oBAA5B,EAAwD;AAvChD,SAAA,MAAA,GAA4B,iBAAiB,CAAC,MAA9C;AA4CR,SAAA,OAAA,GAAgD,IAAhD;AAJI,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,qBAAL,GAA6B,oBAA7B;AACH;;AAxCO,EAAA,YAAA,CAAA,SAAA,CAAA,cAAA,GAAR,YAAA;;;AACI,QAAI,UAAU,GAAG,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAApC;AAEA,SAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,GAAwC,UAAU,CAAC,gBAAX,CAA4B,eAA5B,CAAxC;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,qBAAzB,CAAL,EAAsD;AAClD,WAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,CAAsC,GAAtC,CAA0C,WAAW,KAAK,qBAA1D;AACH;;AAED,QAAI,KAAK,MAAL,YAAuB,cAA3B,EAA2C;AACvC,WAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,CAAsC,GAAtC,CAA0C,UAAU,CAAC,gBAAX,CAA4B,YAA5B,CAA1C;AACH;;AAED,SAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,CAAsC,MAAtC,CAA6C,UAAU,CAAC,gBAAX,CAA4B,UAA5B,CAA7C;AACA,SAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,CAAsC,MAAtC,CAA6C,UAAU,CAAC,gBAAX,CAA4B,SAA5B,CAA7C;;AAEA,YAAQ,KAAK,MAAb;AACI,WAAK,iBAAiB,CAAC,QAAvB;AACI,aAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,CAAsC,GAAtC,CAA0C,UAAU,CAAC,gBAAX,CAA4B,UAA5B,CAA1C;AACA;;AACJ,WAAK,iBAAiB,CAAC,OAAvB;AACI,aAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,CAAsC,GAAtC,CAA0C,UAAU,CAAC,gBAAX,CAA4B,SAA5B,CAA1C;AACA;AANR;;AASA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,MAAL,CAAY,KAAhC,CAAL,EAA6C;AACzC,UAAI,KAAK,MAAL,CAAY,KAAZ,KAAsB,KAAK,CAAC,WAAN,CAAkB,QAA5C,EAAsD;AAClD,SAAA,EAAA,GAAA,KAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,EAAsC,GAAtC,CAAyC,KAAzC,CAAyC,EAAzC,EAA6C,UAAU,CAAC,iBAAX,CAA6B,SAA7B,EAAwC,gBAAxC,CAA7C;AACH,OAFD,MAGK;AACD,SAAA,EAAA,GAAA,KAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B,EAAsC,GAAtC,CAAyC,KAAzC,CAAyC,EAAzC,EAA6C,UAAU,CAAC,iBAAX,CAA6B,WAAW,KAAK,MAAL,CAAY,KAAZ,CAAkB,WAAlB,EAAxC,CAA7C;AACF;AACL;AACJ,GAjCO;;AA4CR,EAAA,YAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,SAAK,MAAL,CAAY,MAAZ;;AACA,SAAK,MAAL,CAAY,eAAZ,CAA4B,OAA5B,GAAsC,UAAC,CAAD,EAAE;AACpC,MAAA,CAAC,CAAC,cAAF;AACA,MAAA,CAAC,CAAC,YAAF,GAAiB,IAAjB;;AAEA,MAAA,KAAI,CAAC,KAAL;AACH,KALD;;AAOA,SAAK,cAAL;AACH,GAVD;;AAYA,EAAA,YAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,QAAI,KAAK,OAAL,IAAgB,IAApB,EAA0B;AACtB,WAAK,OAAL,CAAa,IAAb;AACH;AACJ,GAJD;;AAMA,EAAA,MAAA,CAAA,cAAA,CAAI,YAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,MAAZ;AACH,KAFQ;SAIT,aAAU,KAAV,EAAkC;AAC9B,WAAK,MAAL,GAAc,KAAd;AAEA,WAAK,cAAL;AACH,KARQ;oBAAA;;AAAA,GAAT;AASJ,SAAA,YAAA;AAAC,CA3ED,EAAA;;AA6EA,IAAA,MAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAqC,EAAA,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;;AAArC,WAAA,MAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,eAAA,GAA2B,KAA3B;AACA,IAAA,KAAA,CAAA,OAAA,GAAuB,IAAvB;AACA,IAAA,KAAA,CAAA,iBAAA,GAAsC,IAAtC,CAHZ,CAGwD;;AAC5C,IAAA,KAAA,CAAA,gBAAA,GAAgC,IAAhC;AAoCC,IAAA,KAAA,CAAA,QAAA,GAAW,IAAI,UAAU,CAAC,gBAAf,EAAX;AAIT,IAAA,KAAA,CAAA,KAAA,GAAgB,KAAK,CAAC,WAAN,CAAkB,OAAlC;;AAuMH;;AA7OW,EAAA,MAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,gBAAtB,EAAwD;AACpD,SAAK,iBAAL,GAAyB,gBAAzB;AACH,GAFO;;AAIE,EAAA,MAAA,CAAA,SAAA,CAAA,aAAA,GAAV,UAAwB,OAAxB,EAA4C,CACxC;AACH,GAFS;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,UAAsC,SAAtC,EAA6D;AACzD,WAAO,EAAP;AACH,GAFS;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,UAAsC,MAAtC,EAAsE,CAClE;AACH,GAFS;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,UAAiC,gBAAjC,EAA2E;AACvE,QAAI,MAAM,GAAY,EAAtB;;AAEA,QAAI,YAAY,CAAC,yBAAb,IAA0C,CAAC,KAAK,qBAApD,EAA2E;AACvE,WAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,gBAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAA+C;AAA1C,YAAI,GAAG,GAAA,EAAA,CAAA,EAAA,CAAP;AACD,YAAI,KAAK,GAAG,gBAAgB,CAAC,GAAD,CAA5B;;AAEA,YAAI,CAAC,KAAK,CAAC,aAAN,EAAL,EAA4B;AACxB,UAAA,MAAM,CAAC,IAAP,CAAY,KAAZ;AACH;AACJ;AACJ;;AAED,WAAO,MAAP;AACH,GAdS;;AA0BV,EAAA,MAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACI,WAAO,QAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACI,WAAO,EAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACF,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEM,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,eAAL,EAAlC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,OAA1C;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC,EAA+C,KAAK,CAAC,WAAN,CAAkB,OAAjE;AAEA,WAAO,MAAP;AACH,GATD;;AAWA,EAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,YAAP,EAA6C;AAAtC,QAAA,YAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,YAAA,GAAA,eAAA;AAAsC,KAAA,CACzC;;;AACA,QAAI,UAAU,GAAG,KAAK,MAAL,CAAY,UAA7B;AAEA,QAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAApB;AAEA,SAAK,aAAL,CAAmB,aAAnB;AAEA,IAAA,aAAa,CAAC,YAAd,CAA2B,YAA3B,EAAyC,KAAK,KAA9C;AACA,IAAA,aAAa,CAAC,IAAd,GAAqB,QAArB;AACA,IAAA,aAAa,CAAC,KAAd,CAAoB,OAApB,GAA8B,MAA9B;AACA,IAAA,aAAa,CAAC,KAAd,CAAoB,UAApB,GAAiC,QAAjC;AACA,IAAA,aAAa,CAAC,KAAd,CAAoB,cAApB,GAAqC,QAArC;AAEA,IAAA,aAAa,CAAC,YAAd,CAA2B,MAA3B,EAAmC,KAAK,WAAL,EAAnC;AAEA,QAAI,QAAQ,GAAG,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAzB,CAAhB;AAEA,QAAI,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAnB;AACA,IAAA,YAAY,CAAC,KAAb,CAAmB,QAAnB,GAA8B,QAA9B;AACA,IAAA,YAAY,CAAC,KAAb,CAAmB,YAAnB,GAAkC,UAAlC;;AAEA,QAAI,EAAE,UAAU,CAAC,OAAX,CAAmB,aAAnB,IAAoC,KAAK,CAAC,mBAAN,CAA0B,UAA9D,IAA4E,UAAU,CAAC,OAAX,CAAmB,gBAAjG,CAAJ,EAAwH;AACpH,MAAA,YAAY,CAAC,KAAb,CAAmB,UAAnB,GAAgC,QAAhC;AACH;;AAED,QAAI,QAAJ,EAAc;AACV,MAAA,YAAY,CAAC,SAAb,GAAyB,KAAK,KAA9B;AACH;;AAED,QAAI,KAAK,CAAC,aAAN,CAAoB,KAAK,OAAzB,CAAJ,EAAuC;AACnC,MAAA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,QAA5B;AAEA,MAAA,aAAa,CAAC,WAAd,CAA0B,YAA1B;AACH,KAJD,MAKK;AACD,UAAI,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,MAAA,WAAW,CAAC,GAAZ,GAAkB,KAAK,OAAvB;AACA,MAAA,WAAW,CAAC,KAAZ,CAAkB,KAAlB,GAA0B,UAAU,CAAC,OAAX,CAAmB,QAAnB,GAA8B,IAAxD;AACA,MAAA,WAAW,CAAC,KAAZ,CAAkB,MAAlB,GAA2B,UAAU,CAAC,OAAX,CAAmB,QAAnB,GAA8B,IAAzD;AACA,MAAA,WAAW,CAAC,KAAZ,CAAkB,IAAlB,GAAyB,UAAzB;;AAEA,UAAI,UAAU,CAAC,OAAX,CAAmB,aAAnB,IAAoC,KAAK,CAAC,mBAAN,CAA0B,UAAlE,EAA8E;AAC1E,QAAA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,WAA5B;AACA,QAAA,aAAa,CAAC,KAAd,CAAoB,aAApB,GAAoC,QAApC;;AAEA,YAAI,QAAJ,EAAc;AACV,UAAA,WAAW,CAAC,KAAZ,CAAkB,YAAlB,GAAiC,KAAjC;AACH;AACJ,OAPD,MAQK;AACD,QAAA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,UAA5B;;AAEA,YAAI,QAAJ,EAAc;AACV,UAAA,WAAW,CAAC,KAAZ,CAAkB,WAAlB,GAAgC,KAAhC;AACH;AACJ;;AAED,MAAA,aAAa,CAAC,WAAd,CAA0B,WAA1B;AACA,MAAA,aAAa,CAAC,WAAd,CAA0B,YAA1B;AACH;;AAED,SAAK,gBAAL,GAAwB,aAAxB;AACH,GA/DD;;AAiEA,EAAA,MAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAA4B;AACxB,SAAK,OAAL,GAAe,KAAf;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACI,QAAI,KAAK,SAAT,EAAoB;AAChB,WAAK,SAAL,CAAe,IAAf;AACH;;AAED,IAAA,uBAAuB,CAAC,IAAD,CAAvB;AACH,GAND;;AAQA,EAAA,MAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,YAAA;AACI,QAAI,gBAAgB,GAAG,KAAK,mBAAL,EAAvB;;AAEA,QAAI,KAAK,sBAAL,CAA4B,gBAA5B,EAA8C,MAA9C,GAAuD,CAA3D,EAA8D;AAC1D,aAAO,KAAP;AACH;;AAED,SAAK,2BAAL,CAAiC,gBAAjC;AAEA,WAAO,IAAP;AACH,GAVD;;AAUC;;AAED,EAAA,MAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AAC9D,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEM,IAAA,qBAAqB,CAAC,IAAD,EAAO,IAAP,EAAa,MAAb,CAArB;AAEA,SAAK,QAAL,CAAc,KAAd,CAAoB,IAAI,CAAC,UAAD,CAAxB,EAAsC,MAAtC;;AAEA,QAAI,CAAC,IAAI,CAAC,OAAD,CAAL,IAAkB,IAAI,CAAC,OAAD,CAAJ,KAAkB,EAAxC,EAA4C;AACxC,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH;;AAED,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAb;AACA,SAAK,OAAL,GAAe,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,SAAD,CAAzB,CAAf;AACA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,EAAoC,KAAK,KAAzC,CAAb;AACH,GApBD;;AAsBA,EAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,KAAK,iBAAT,EAA4B;AACxB,aAAO,KAAK,iBAAL,CAAuB,YAAvB,CAAoC,IAApC,CAAP;AACH;;AAED,WAAO,KAAP;AACH,GAND;;AAQA,EAAA,MAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,EAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,OAAzB,CAAL,EAAwC;AACpC,aAAO,CAAC;AAAE,QAAA,GAAG,EAAE,KAAK,OAAZ;AAAqB,QAAA,QAAQ,EAAE;AAA/B,OAAD,CAAP;AACH,KAFD,MAGK;AACD,aAAO,EAAP;AACH;AACJ,GAPD;;AASA,EAAA,MAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,KAAK,EAAL,IAAW,EAAf,EAAmB;AACf,aAAO,IAAP;AACH;AACJ,GAJD;;AAMA,EAAA,MAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,YAAA;AACI,WAAO,KAAK,2BAAL,CAAiC,KAAK,MAAL,CAAY,cAAZ,GAA6B,YAA7B,EAAjC,CAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,sBAAL,CAA4B,KAAK,mBAAL,EAA5B,CAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,eAAL,IAAwB,CAAC,KAAK,QAAL,CAAc,SAAd,CAAwB,KAAK,MAAL,CAAY,UAAZ,CAAuB,gBAA/C,CAAhC;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,WAAJ,EAAa;SAAb,eAAA;AACI,aAAO,KAAK,KAAL,IAAc,KAAK,CAAC,WAAN,CAAkB,QAAvC;AACH,KAFY;SAIb,aAAc,KAAd,EAA4B;AACxB,UAAI,KAAJ,EAAW;AACP,aAAK,KAAL,GAAa,KAAK,CAAC,WAAN,CAAkB,QAA/B;AACH,OAFD,MAGK;AACD,YAAI,KAAK,KAAL,IAAc,KAAK,CAAC,WAAN,CAAkB,QAApC,EAA8C;AAC1C,eAAK,KAAL,GAAa,KAAK,CAAC,WAAN,CAAkB,OAA/B;AACH;AACJ;AACJ,KAbY;oBAAA;;AAAA,GAAb;AAeA,EAAA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,uBAAJ,EAAyB;SAAzB,eAAA;AACI,aAAO,IAAP;AACH,KAFwB;oBAAA;;AAAA,GAAzB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,QAAJ,EAAU;SAAV,eAAA;AACI,aAAO,KAAK,OAAZ;AACH,KAFS;oBAAA;;AAAA,GAAV;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,iBAAJ,EAAmB;SAAnB,eAAA;AACI,aAAO,KAAK,gBAAZ;AACH,KAFkB;oBAAA;;AAAA,GAAnB;AAGJ,SAAA,MAAA;AAAC,CAnPD,CAAqC,UAArC,CAAA;;AAAsB,OAAA,CAAA,MAAA,GAAA,MAAA;;AAqPtB,IAAA,YAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAkC,EAAA,SAAA,CAAA,YAAA,EAAA,MAAA,CAAA;;AAAlC,WAAA,YAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAKY,IAAA,KAAA,CAAA,WAAA,GAAuB,KAAvB;AAGA,IAAA,KAAA,CAAA,sBAAA,GAAkC,KAAlC;;AAmEX;;AAjEa,EAAA,YAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,UAAsC,SAAtC,EAA6D;AACzD,QAAI,MAAM,GAA6B,EAAvC;;AAEA,SAAkB,IAAA,EAAA,GAAA,CAAA,EAAA,WAAA,GAAA,SAAlB,EAAkB,EAAA,GAAA,WAAA,CAAA,MAAlB,EAAkB,EAAA,EAAlB,EAA6B;AAAxB,UAAI,KAAK,GAAA,WAAA,CAAA,EAAA,CAAT;AACD,MAAA,MAAM,CAAC,KAAK,CAAC,EAAP,CAAN,GAAmB,KAAnB;AACH;;AAED,WAAO,MAAP;AACH,GARS;;AAUA,EAAA,YAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,UAAsC,MAAtC,EAAsE;AAClE,QAAI,KAAK,aAAT,EAAwB;AACpB,WAAK,cAAL,GAAsB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,SAAL,CAAe,KAAK,aAApB,CAAX,CAAtB;AACH,KAFD,MAGK;AACD,WAAK,cAAL,GAAsB,EAAtB;AACH;;AAED,SAAgB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAhB,EAAgB,EAAA,GAAA,EAAA,CAAA,MAAhB,EAAgB,EAAA,EAAhB,EAAqC;AAAhC,UAAI,GAAG,GAAA,EAAA,CAAA,EAAA,CAAP;AACD,UAAI,KAAK,GAAG,MAAM,CAAC,GAAD,CAAlB;;AAEA,UAAI,KAAK,CAAC,KAAN,IAAe,IAAnB,EAAyB;AACrB,aAAK,cAAL,CAAoB,KAAK,CAAC,EAA1B,IAAgC,KAAK,CAAC,KAAtC;AACH;AACJ;;AAED,SAAK,WAAL,GAAmB,IAAnB;AACH,GAjBS;;AAmBV,EAAA,YAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,YAAY,CAAC,YAApB;AACH,GAFD;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,uBAA1B,EAAmD,KAAK,qBAAxD,EAA+E,KAA/E;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,aAAvC;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,YAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,sBAAL,GAA8B,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,uBAAD,CAAvB,EAAkD,KAAK,sBAAvD,CAA9B;AACA,SAAK,IAAL,GAAY,IAAI,CAAC,MAAD,CAAhB;AACH,GALD;;AAOA,EAAA,MAAA,CAAA,cAAA,CAAI,YAAA,CAAA,SAAJ,EAAI,uBAAJ,EAAyB;SAAzB,eAAA;AACI,aAAO,KAAK,sBAAZ;AACH,KAFwB;SAIzB,aAA0B,KAA1B,EAAwC;AACpC,WAAK,sBAAL,GAA8B,KAA9B;AACH,KANwB;oBAAA;;AAAA,GAAzB;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,YAAA,CAAA,SAAJ,EAAI,MAAJ,EAAQ;SAAR,eAAA;AACI,aAAO,KAAK,WAAL,GAAmB,KAAK,cAAxB,GAAyC,KAAK,aAArD;AACH,KAFO;SAIR,aAAS,KAAT,EAAsB;AAClB,WAAK,aAAL,GAAqB,KAArB;AACA,WAAK,WAAL,GAAmB,KAAnB;AACH,KAPO;oBAAA;;AAAA,GAAR,EAnEJ,CACI;AACA;;AACgB,EAAA,YAAA,CAAA,YAAA,GAAgC,eAAhC;AAwEpB,SAAA,YAAA;AAAC,CA3ED,CAAkC,MAAlC,CAAA;;AAAa,OAAA,CAAA,YAAA,GAAA,YAAA;;AA6Eb,IAAA,aAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAmC,EAAA,SAAA,CAAA,aAAA,EAAA,MAAA,CAAA;;AAAnC,WAAA,aAAA,GAAA;;AA6CC;;AAtCG,EAAA,aAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,aAAa,CAAC,YAArB;AACH,GAFD;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACI,WAAO,MAAP;AACH,GAFD;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AAEA,WAAO,MAAP;AACH,GAND;;AAQA,EAAA,aAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,CAAC,aAAN,CAAoB,KAAK,GAAzB,CAAJ,EAAmC;AAC/B,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;AACJ,GAXD;;AAaA,EAAA,aAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACH,GAJD;;AAMA,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACI,WAAO,KAAK,GAAZ;AACH,GAFD,CA1CJ,CACI;AACA;;;AACgB,EAAA,aAAA,CAAA,YAAA,GAAiC,gBAAjC;AA0CpB,SAAA,aAAA;AAAC,CA7CD,CAAmC,MAAnC,CAAA;;AAAa,OAAA,CAAA,aAAA,GAAA,aAAA;;AA+Cb,IAAA,sBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4C,EAAA,SAAA,CAAA,sBAAA,EAAA,MAAA,CAAA;;AAA5C,WAAA,sBAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAKI,IAAA,KAAA,CAAA,cAAA,GAAiB,EAAjB;;AA2EH;;AAzEG,EAAA,sBAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,sBAAsB,CAAC,YAA9B;AACH,GAFD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACI,SAAsB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,KAAK,cAAjB,CAAtB,EAAsB,EAAA,GAAA,EAAA,CAAA,MAAtB,EAAsB,EAAA,EAAtB,EAAwD;AAAnD,UAAI,SAAS,GAAA,EAAA,CAAA,EAAA,CAAb;AACD,UAAI,aAAa,GAAG,KAAK,MAAL,CAAY,cAAZ,GAA6B,cAA7B,CAA4C,SAA5C,CAApB;;AAEA,UAAI,aAAJ,EAAmB;AACf,YAAI,OAAO,KAAK,cAAL,CAAoB,SAApB,CAAP,KAA0C,SAA9C,EAAyD;AACrD,UAAA,aAAa,CAAC,SAAd,GAA0B,KAAK,cAAL,CAAoB,SAApB,CAA1B;AACH,SAFD,MAGK;AACD,UAAA,aAAa,CAAC,SAAd,GAA0B,CAAC,aAAa,CAAC,SAAzC;AACH;AACJ;AACJ;AACJ,GAbD;;AAeA,EAAA,sBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAe;AACX,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ;;AAEA,SAAK,cAAL,GAAsB,EAAtB;AAEA,QAAI,kBAAkB,GAAG,IAAI,CAAC,gBAAD,CAA7B;;AAEA,QAAI,kBAAkB,IAAI,KAAK,CAAC,OAAN,CAAc,kBAAd,CAA1B,EAA6D;AACzD,WAAiB,IAAA,EAAA,GAAA,CAAA,EAAA,oBAAA,GAAA,kBAAjB,EAAiB,EAAA,GAAA,oBAAA,CAAA,MAAjB,EAAiB,EAAA,EAAjB,EAAqC;AAAhC,YAAI,IAAI,GAAA,oBAAA,CAAA,EAAA,CAAR;;AACD,YAAI,OAAO,IAAP,KAAgB,QAApB,EAA8B;AAC1B,eAAK,cAAL,CAAoB,IAApB,IAA4B,SAA5B;AACH,SAFD,MAGK,IAAI,OAAO,IAAP,KAAgB,QAApB,EAA8B;AAC/B,cAAI,aAAa,GAAG,IAAI,CAAC,WAAD,CAAxB;;AAEA,cAAI,aAAa,IAAI,OAAO,aAAP,KAAyB,QAA9C,EAAwD;AACpD,iBAAK,cAAL,CAAoB,aAApB,IAAqC,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,WAAD,CAAvB,EAAsC,SAAtC,CAArC;AACH;AACJ;AACJ;AACJ;AACJ,GArBD;;AAuBA,EAAA,sBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,cAAc,GAAU,EAA5B;;AAEA,SAAe,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,MAAM,CAAC,IAAP,CAAY,KAAK,cAAjB,CAAf,EAAe,EAAA,GAAA,EAAA,CAAA,MAAf,EAAe,EAAA,EAAf,EAAiD;AAA5C,UAAI,EAAE,GAAA,EAAA,CAAA,EAAA,CAAN;;AACD,UAAI,OAAO,KAAK,cAAL,CAAoB,EAApB,CAAP,KAAmC,SAAvC,EAAkD;AAC9C,QAAA,cAAc,CAAC,IAAf,CACI;AACI,UAAA,SAAS,EAAE,EADf;AAEI,UAAA,SAAS,EAAE,KAAK,cAAL,CAAoB,EAApB;AAFf,SADJ;AAMH,OAPD,MAQK;AACD,QAAA,cAAc,CAAC,IAAf,CAAoB,EAApB;AACH;AACJ;;AAED,IAAA,MAAM,CAAC,gBAAD,CAAN,GAA2B,cAA3B;AAEA,WAAO,MAAP;AACH,GAtBD;;AAwBA,EAAA,sBAAA,CAAA,SAAA,CAAA,gBAAA,GAAA,UAAiB,SAAjB,EAAoC,SAApC,EAAkE;AAA9B,QAAA,SAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,SAAA,GAAA,SAAA;AAA8B;;AAC9D,SAAK,cAAL,CAAoB,SAApB,IAAiC,SAAjC;AACH,GAFD;;AAIA,EAAA,sBAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,UAAoB,SAApB,EAA6B;AACzB,WAAO,KAAK,cAAL,CAAoB,SAApB,CAAP;AACH,GAFD,CA7EJ,CACI;AACA;;;AACgB,EAAA,sBAAA,CAAA,YAAA,GAA0C,yBAA1C;AA6EpB,SAAA,sBAAA;AAAC,CAhFD,CAA4C,MAA5C,CAAA;;AAAa,OAAA,CAAA,sBAAA,GAAA,sBAAA;;AAkFb,IAAA,UAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAgC,EAAA,SAAA,CAAA,UAAA,EAAA,MAAA,CAAA;;AAK5B,WAAA,UAAA,CAAY,IAAZ,EAA+B,KAA/B,EAAiD;AAArC,QAAA,IAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,IAAA,GAAA,EAAA;AAAiB;;AAAE,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,EAAA;AAAkB;;AAAjD,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAJQ,IAAA,KAAA,CAAA,MAAA,GAAS,IAAI,MAAM,CAAC,uBAAX,EAAT;AAOJ,IAAA,KAAI,CAAC,IAAL,GAAY,IAAZ;AACA,IAAA,KAAI,CAAC,KAAL,GAAa,KAAb;;AACH;;AAED,EAAA,UAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAe;AACX,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ;;AAEA,SAAK,IAAL,GAAY,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAAZ;AACA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAb;AACH,GALD;;AAOA,EAAA,UAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAvC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,MAAL,CAAY,WAAZ,EAAnC;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,UAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,UAAoB,MAApB,EAA0C,gBAA1C,EAAoF;AAChF,SAAK,MAAL,CAAY,mBAAZ,CAAgC,MAAhC,EAAwC,gBAAxC;AACH,GAFD;;AAIA,EAAA,UAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,UAAoB,MAApB,EAAoD;AAChD,SAAK,MAAL,CAAY,qBAAZ,CAAkC,MAAlC,EAA0C,MAAM,CAAC,YAAP,CAAoB,6BAA9D;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,UAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,MAAL,CAAY,GAAZ,EAAP;AACH,KAFQ;SAIT,aAAU,QAAV,EAA0B;AACtB,WAAK,MAAL,CAAY,GAAZ,CAAgB,QAAhB;AACH,KANQ;oBAAA;;AAAA,GAAT;AAOJ,SAAA,UAAA;AAAC,CA3CD,CAAgC,kBAAhC,CAAA;;AAAa,OAAA,CAAA,UAAA,GAAA,UAAA;;AA6Cb,IAAA,UAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAgC,EAAA,SAAA,CAAA,UAAA,EAAA,MAAA,CAAA;;AAAhC,WAAA,UAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAKY,IAAA,KAAA,CAAA,IAAA,GAAO,IAAI,MAAM,CAAC,uBAAX,EAAP;AACA,IAAA,KAAA,CAAA,KAAA,GAAQ,IAAI,MAAM,CAAC,uBAAX,EAAR;AACA,IAAA,KAAA,CAAA,QAAA,GAA8B,EAA9B;AACA,IAAA,KAAA,CAAA,sBAAA,GAAkC,KAAlC;;AA+HX;;AA7Ha,EAAA,UAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,UAAsC,SAAtC,EAA6D;AACzD,QAAI,MAAM,GAA6B,EAAvC;;AAEA,SAAK,IAAL,CAAU,mBAAV,CAA8B,SAA9B,EAAyC,MAAzC;;AAEA,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,MAAA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACH;;AAED,SAAK,KAAL,CAAW,mBAAX,CAA+B,SAA/B,EAA0C,MAA1C;;AAEA,WAAO,MAAP;AACH,GAZS;;AAcA,EAAA,UAAA,CAAA,SAAA,CAAA,2BAAA,GAAV,UAAsC,MAAtC,EAAsE;AAClE,SAAK,IAAL,CAAU,qBAAV,CAAgC,MAAhC,EAAwC,MAAM,CAAC,YAAP,CAAoB,6BAA5D;;AAEA,QAAI,WAAW,GAAG,MAAM,CAAC,YAAP,CAAoB,eAAtC;;AAEA,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,MAAA,MAAM,CAAC,mBAAP,CAA2B,MAA3B;;AAEA,UAAI,MAAM,CAAC,IAAP,IAAe,MAAM,CAAC,IAAP,CAAY,WAAZ,MAA6B,cAAhD,EAAgE;AAC5D,QAAA,WAAW,GAAG,MAAM,CAAC,KAArB;AACH;AACJ;;AAED,SAAK,KAAL,CAAW,qBAAX,CAAiC,MAAjC,EAAyC,WAAzC;AACH,GAdS;;AAcT;;AAID,EAAA,UAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,UAAU,CAAC,YAAlB;AACH,GAFD;;AAIA,EAAA,UAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,KAAK,MAAzC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,IAAL,CAAU,WAAV,EAAjC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,KAAL,CAAW,WAAX,EAAlC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,uBAA1B,EAAmD,KAAK,qBAAxD,EAA+E,KAA/E;AACA,IAAA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,SAA/B,EAA0C,KAAK,OAA/C;AAEA,WAAO,MAAP;AACH,GAVD;;AAYA,EAAA,UAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,CAAC,aAAN,CAAoB,KAAK,GAAzB,CAAJ,EAAmC;AAC/B,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;;AAED,QAAI,KAAK,OAAL,CAAa,MAAb,GAAsB,CAA1B,EAA6B;AACzB,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAiC;AAA5B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,YAAI,CAAC,MAAM,CAAC,IAAZ,EAAkB;AACd,UAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,YAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,YAAA,OAAO,EAAE;AAFb,WAFJ;AAMH;AACJ;AACJ;AACJ,GAxBD;;AA0BA,EAAA,UAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,SAAK,MAAL,GAAc,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,QAAD,CAAzB,CAAd;AACA,SAAK,IAAL,GAAY,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAAZ;AACA,SAAK,sBAAL,GAA8B,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,uBAAD,CAAvB,EAAkD,KAAK,sBAAvD,CAA9B;AAEA,SAAK,QAAL,GAAgB,EAAhB;;AAEA,QAAI,KAAK,CAAC,OAAN,CAAc,IAAI,CAAC,SAAD,CAAlB,CAAJ,EAAoC;AAChC,WAAuB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,IAAI,CAAC,SAAD,CAA3B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;AAAnC,YAAI,UAAU,GAAA,EAAA,CAAA,EAAA,CAAd;AACD,YAAI,UAAU,GAAG,IAAI,UAAJ,EAAjB;AACA,QAAA,UAAU,CAAC,KAAX,CAAiB,UAAjB;AAEA,aAAK,OAAL,CAAa,IAAb,CAAkB,UAAlB;AACH;AACJ;AACJ,GAlBD;;AAoBA,EAAA,MAAA,CAAA,cAAA,CAAI,UAAA,CAAA,SAAJ,EAAI,uBAAJ,EAAyB;SAAzB,eAAA;AACI,aAAO,KAAK,sBAAZ;AACH,KAFwB;SAIzB,aAA0B,KAA1B,EAAwC;AACpC,WAAK,sBAAL,GAA8B,KAA9B;AACH,KANwB;oBAAA;;AAAA,GAAzB;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,UAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACI,aAAO,KAAK,IAAL,CAAU,GAAV,EAAP;AACH,KAFM;SAIP,aAAQ,KAAR,EAAqB;AACjB,WAAK,IAAL,CAAU,GAAV,CAAc,KAAd;AACH,KANM;oBAAA;;AAAA,GAAP;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,UAAA,CAAA,SAAJ,EAAI,MAAJ,EAAQ;SAAR,eAAA;AACI,aAAO,KAAK,KAAL,CAAW,GAAX,EAAP;AACH,KAFO;SAIR,aAAS,KAAT,EAAsB;AAClB,WAAK,KAAL,CAAW,GAAX,CAAe,KAAf;AACH,KANO;oBAAA;;AAAA,GAAR;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,UAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,eAAA;AACI,aAAO,KAAK,QAAL,GAAgB,KAAK,QAArB,GAAgC,EAAvC;AACH,KAFU;SAIX,aAAY,KAAZ,EAAoC;AAChC,WAAK,QAAL,GAAgB,KAAhB;AACH,KANU;oBAAA;;AAAA,GAAX,EAhIJ,CACI;AACA;;AACgB,EAAA,UAAA,CAAA,YAAA,GAA8B,aAA9B;AAoIpB,SAAA,UAAA;AAAC,CAvID,CAAgC,MAAhC,CAAA;;AAAa,OAAA,CAAA,UAAA,GAAA,UAAA;;AAyIb,IAAA,cAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAoC,EAAA,SAAA,CAAA,cAAA,EAAA,MAAA,CAAA;;AAApC,WAAA,cAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAWa,IAAA,KAAA,CAAA,IAAA,GAAqB,IAAI,kBAAJ,EAArB;;AAgEZ;;AAtEa,EAAA,cAAA,CAAA,SAAA,CAAA,aAAA,GAAV,UAAwB,OAAxB,EAA4C;AACxC,IAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,OAApB;;AAEA,IAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,KAAK,MAAL,CAAY,UAAZ,CAAuB,gBAAvB,CAAwC,YAAxC,CAAtB;AACH,GAJS;;AAQV,EAAA,cAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,cAAc,CAAC,YAAtB;AACH,GAFD;;AAIA,EAAA,cAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,KAAK,IAAT,EAAe;AACX,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAL,CAAU,MAAV,EAAlC;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,cAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,SAAK,IAAL,CAAU,0BAAV,CAAqC,OAArC;AACH,GAJD;;AAMA,EAAA,cAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,QAAI,QAAQ,GAAG,IAAI,CAAC,MAAD,CAAnB;;AAEA,QAAI,QAAJ,EAAc;AACV,WAAK,IAAL,CAAU,KAAV,CAAgB,QAAhB,EAA0B,MAA1B;AACH,KAFD,MAGK;AACD,MAAA,eAAe,CACX;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OADW,EAKX,MALW,CAAf;AAOH;AACJ,GAjBD;;AAmBA,EAAA,cAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAA4B;AACxB,IAAA,MAAA,CAAA,SAAA,CAAM,SAAN,CAAe,IAAf,CAAe,IAAf,EAAgB,KAAhB;;AAEA,SAAK,IAAL,CAAU,SAAV,CAAoB,KAApB;AACH,GAJD;;AAMA,EAAA,cAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,KAAK,IAAL,CAAU,YAAV,EAAP;AACH,GAFD;;AAIA,EAAA,cAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,WAAO,MAAA,CAAA,SAAA,CAAM,sBAAN,CAA4B,IAA5B,CAA4B,IAA5B,EAA+B,MAA/B,CAAsC,KAAK,IAAL,CAAU,sBAAV,EAAtC,CAAP;AACH,GAFD;;AAIA,EAAA,cAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,EAApB,CAAb;;AAEA,QAAI,CAAC,MAAL,EAAa;AACT,MAAA,MAAM,GAAG,KAAK,IAAL,CAAU,aAAV,CAAwB,EAAxB,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GARD,CAlEJ,CACI;AACA;;;AACgB,EAAA,cAAA,CAAA,YAAA,GAAkC,iBAAlC;AAwEpB,SAAA,cAAA;AAAC,CA3ED,CAAoC,MAApC,CAAA;;AAAa,OAAA,CAAA,cAAA,GAAA,cAAA;;AA6Eb,IAAA,gBAAA;AAAA;AAAA,YAAA;AAqJI,WAAA,gBAAA,CAAY,KAAZ,EAA8B;AAlJtB,SAAA,eAAA,GAAkC,IAAlC;AACA,SAAA,oBAAA,GAA+B,CAA/B;AACA,SAAA,WAAA,GAA2B,IAA3B;AA6IR,SAAA,KAAA,GAAuB,EAAvB;AACA,SAAA,OAAA,GAA+B,EAA/B;AAGI,SAAK,MAAL,GAAc,KAAd;AACH;;AAhJO,EAAA,gBAAA,CAAA,SAAA,CAAA,gBAAA,GAAR,YAAA;AACI,SAAK,oBAAL,CAA0B,SAA1B,GAAsC,EAAtC;;AAEA,QAAI,KAAK,WAAL,KAAqB,IAAzB,EAA+B;AAC3B,WAAK,oBAAL,CAA0B,KAA1B,CAAgC,SAAhC,GAA4C,KAA5C;AAEA;AACH;;AAED,SAAK,oBAAL,CAA0B,KAA1B,CAAgC,SAAhC,GAA4C,KAAK,oBAAL,GAA4B,CAA5B,GAAgC,KAAK,MAAL,CAAY,UAAZ,CAAuB,OAAvB,CAA+B,QAA/B,CAAwC,eAAxC,GAA0D,IAA1F,GAAiG,KAA7I;;AAEA,QAAI,OAAO,GAAG,KAAK,MAAL,CAAY,mBAAZ,EAAd;;AAEA,SAAK,MAAL,CAAY,8BAAZ,CAA2C,OAA3C;;AAEA,QAAI,eAAe,GAAG,KAAK,MAAL,CAAY,UAAZ,CAAuB,oCAAvB,CAA4D,OAA5D,CAAtB;;AAEA,QAAI,KAAK,WAAL,KAAqB,IAAzB,EAA+B;AAC3B,WAAK,WAAL,CAAiB,KAAjB,CAAuB,WAAvB,GAAqC,eAAe,CAAC,IAAhB,GAAuB,IAA5D;AACA,WAAK,WAAL,CAAiB,KAAjB,CAAuB,YAAvB,GAAsC,eAAe,CAAC,KAAhB,GAAwB,IAA9D;AAEA,WAAK,WAAL,CAAiB,KAAjB,CAAuB,UAAvB,GAAoC,MAAM,eAAe,CAAC,IAAtB,GAA6B,IAAjE;AACA,WAAK,WAAL,CAAiB,KAAjB,CAAuB,WAAvB,GAAqC,MAAM,eAAe,CAAC,KAAtB,GAA8B,IAAnE;;AAEA,UAAI,eAAe,CAAC,MAAhB,IAA0B,CAA1B,IAA+B,CAAC,KAAK,MAAL,CAAY,YAAZ,EAApC,EAAgE;AAC5D,aAAK,WAAL,CAAiB,KAAjB,CAAuB,aAAvB,GAAuC,eAAe,CAAC,MAAhB,GAAyB,IAAhE;AACA,aAAK,WAAL,CAAiB,KAAjB,CAAuB,YAAvB,GAAsC,MAAM,eAAe,CAAC,MAAtB,GAA+B,IAArE;AACH;;AAED,MAAA,KAAK,CAAC,WAAN,CAAkB,KAAK,oBAAvB,EAA6C,KAAK,WAAlD;AACH;AACJ,GA/BO;;AAiCA,EAAA,gBAAA,CAAA,SAAA,CAAA,aAAA,GAAR,YAAA;AACI,SAAK,MAAL,CAAY,cAAZ,GAA6B,YAA7B;AACH,GAFO;;AAIA,EAAA,gBAAA,CAAA,SAAA,CAAA,cAAA,GAAR,YAAA;AACI,QAAI,wBAAwB,GAAG,KAAK,eAApC;AAEA,SAAK,eAAL,GAAuB,IAAvB;AACA,SAAK,WAAL,GAAmB,IAAnB;AAEA,SAAK,gBAAL;;AAEA,QAAI,wBAAJ,EAA8B;AAC1B,WAAK,aAAL;AAEA,MAAA,4BAA4B,CAAC,wBAAD,EAA2B,KAA3B,CAA5B;AACH;AACJ,GAbO;;AAeA,EAAA,gBAAA,CAAA,SAAA,CAAA,cAAA,GAAR,UAAuB,MAAvB,EAA+C,aAA/C,EAA+E,UAA/E,EAAyG;AAA1D,QAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,aAAA,GAAA,KAAA;AAA8B;;AAAE,QAAA,UAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,UAAA,GAAA,IAAA;AAA0B;;AACrG,QAAI,MAAM,CAAC,IAAP,IAAe,IAAnB,EAAyB;AACrB;AACH;;AAEoB,IAAA,MAAM,CAAC,IAAP,CAAa,aAAb,GAA6B,aAA7B;AAErB,QAAI,YAAY,GAAG,MAAM,CAAC,IAAP,CAAY,eAAZ,GAA8B,MAAM,CAAC,IAAP,CAAY,eAA1C,GAA4D,MAAM,CAAC,IAAP,CAAY,MAAZ,EAA/E;AAEA,SAAK,WAAL,GAAmB,YAAnB;AACA,SAAK,eAAL,GAAuB,MAAvB;AAEA,SAAK,gBAAL;;AAEA,QAAI,UAAJ,EAAgB;AACZ,WAAK,aAAL;AAEA,MAAA,4BAA4B,CAAC,MAAD,EAAS,IAAT,CAA5B;AACH;AACJ,GAnBO;;AAqBA,EAAA,gBAAA,CAAA,SAAA,CAAA,sBAAA,GAAR,YAAA;AACI,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,WAAK,OAAL,CAAa,CAAb,EAAgB,KAAhB,GAAwB,iBAAiB,CAAC,MAA1C;AACH;;AAED,SAAK,cAAL;AACH,GANO;;AAQA,EAAA,gBAAA,CAAA,SAAA,CAAA,oBAAA,GAAR,UAA6B,MAA7B,EAAqD,UAArD,EAAwE;AACpE,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,UAAI,KAAK,OAAL,CAAa,CAAb,EAAgB,MAAhB,KAA2B,MAA/B,EAAuC;AACnC,aAAK,OAAL,CAAa,CAAb,EAAgB,KAAhB,GAAwB,iBAAiB,CAAC,OAA1C;AACH,OAFD,MAGK;AACD,aAAK,OAAL,CAAa,CAAb,EAAgB,KAAhB,GAAwB,iBAAiB,CAAC,QAA1C;AACH;AACJ;;AAED,SAAK,cAAL,CACI,MADJ,EAEI,EAAE,KAAK,MAAL,CAAY,eAAZ,MAAiC,KAAK,MAAL,CAAY,gBAAZ,EAAnC,CAFJ,EAGI,UAHJ;AAIH,GAdO;;AAgBA,EAAA,gBAAA,CAAA,SAAA,CAAA,aAAA,GAAR,UAAsB,YAAtB,EAAgD;AAC5C,QAAI,EAAE,YAAY,CAAC,MAAb,YAA+B,cAAjC,CAAJ,EAAsD;AAClD,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,aAAK,OAAL,CAAa,CAAb,EAAgB,KAAhB,GAAwB,iBAAiB,CAAC,MAA1C;AACH;;AAED,WAAK,cAAL;AAEA,MAAA,YAAY,CAAC,MAAb,CAAoB,OAApB;AACH,KARD,MASK;AACD,UAAI,KAAK,MAAL,CAAY,UAAZ,CAAuB,OAAvB,CAA+B,QAA/B,CAAwC,UAAxC,KAAuD,KAAK,CAAC,kBAAN,CAAyB,KAApF,EAA2F;AACvF,QAAA,YAAY,CAAC,MAAb,CAAoB,OAApB;AACH,OAFD,MAGK,IAAI,YAAY,CAAC,MAAb,KAAwB,KAAK,eAAjC,EAAkD;AACnD,aAAK,sBAAL;AACH,OAFI,MAGA;AACD,aAAK,oBAAL,CAA0B,YAAY,CAAC,MAAvC,EAA+C,IAA/C;AACH;AACJ;AACJ,GArBO;;AAuBA,EAAA,gBAAA,CAAA,SAAA,CAAA,kBAAA,GAAR,YAAA;AACI,QAAI,KAAK,MAAL,YAAuB,SAA3B,EAAsC;AAClC,aAAO,KAAK,MAAZ;AACH,KAFD,MAGK;AACD,aAAO,KAAK,MAAL,CAAY,kBAAZ,EAAP;AACH;AACJ,GAPO;;AASA,EAAA,gBAAA,CAAA,SAAA,CAAA,gBAAA,GAAR,UAAyB,MAAzB,EAAuC;AACnC,SAAyB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,OAA9B,EAAyB,EAAA,GAAA,EAAA,CAAA,MAAzB,EAAyB,EAAA,EAAzB,EAAuC;AAAlC,UAAI,YAAY,GAAA,EAAA,CAAA,EAAA,CAAhB;;AACD,UAAI,YAAY,CAAC,MAAb,IAAuB,MAA3B,EAAmC;AAC/B,eAAO,YAAP;AACH;AACJ;;AAED,WAAO,IAAP;AACH,GARO;;AAiBR,EAAA,gBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,SAAK,KAAL;;AAEA,QAAI,IAAI,IAAI,IAAI,YAAY,KAA5B,EAAmC;AAC/B,WAAuB,IAAA,EAAA,GAAA,CAAA,EAAA,MAAA,GAAA,IAAvB,EAAuB,EAAA,GAAA,MAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAA6B;AAAxB,YAAI,UAAU,GAAA,MAAA,CAAA,EAAA,CAAd;AACD,YAAI,MAAM,GAAG,oBAAoB,CAC7B,KAAK,MADwB,EAE7B,UAF6B,EAG7B,EAH6B,EAI7B,CAAC,KAAK,MAAL,CAAY,YAAZ,EAJ4B,EAK7B,MAL6B,CAAjC;;AAOA,YAAI,MAAJ,EAAY;AACR,eAAK,SAAL,CAAe,MAAf;AACH;AACJ;AACJ;AACJ,GAjBD;;AAmBA,EAAA,gBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,KAAK,KAAL,CAAW,MAAX,GAAoB,CAAxB,EAA2B;AACvB,UAAI,MAAM,GAAG,EAAb;;AAEA,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,KAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAA+B;AAA1B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,QAAA,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,MAAP,EAAZ;AACH;;AAED,aAAO,MAAP;AACH,KARD,MASK;AACD,aAAO,IAAP;AACH;AACJ,GAbD;;AAeA,EAAA,gBAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAW,IAArB;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,KAAL,CAAW,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AACxC,MAAA,MAAM,GAAG,KAAK,KAAL,CAAW,CAAX,EAAc,aAAd,CAA4B,EAA5B,CAAT;;AAEA,UAAI,MAAJ,EAAY;AACR;AACH;AACJ;;AAED,WAAO,MAAP;AACH,GAZD;;AAcA,EAAA,gBAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,UAAmB,OAAnB,EAA6C;AACzC,QAAI,KAAK,MAAL,CAAY,UAAZ,CAAuB,OAAvB,CAA+B,UAA/B,IAA6C,KAAK,KAAL,CAAW,MAAX,GAAoB,KAAK,MAAL,CAAY,UAAZ,CAAuB,OAAvB,CAA+B,UAApG,EAAgH;AAC5G,MAAA,OAAO,CAAC,UAAR,CACI,KAAK,MADT,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,cADjC;AAEI,QAAA,OAAO,EAAE,kBAAkB,KAAK,MAAL,CAAY,UAAZ,CAAuB,OAAvB,CAA+B,UAAjD,GAA8D;AAF3E,OAFJ;AAMH;;AAED,QAAI,KAAK,KAAL,CAAW,MAAX,GAAoB,CAApB,IAAyB,CAAC,KAAK,MAAL,CAAY,UAAZ,CAAuB,qBAArD,EAA4E;AACxE,MAAA,OAAO,CAAC,UAAR,CACI,KAAK,MADT,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,uBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;;AAED,SAAiB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,KAAtB,EAAiB,EAAA,GAAA,EAAA,CAAA,MAAjB,EAAiB,EAAA,EAAjB,EAA6B;AAAxB,UAAI,IAAI,GAAA,EAAA,CAAA,EAAA,CAAR;;AACD,UAAI,CAAC,eAAe,CAAC,IAAD,EAAO,KAAK,MAAL,CAAY,uBAAZ,EAAP,CAApB,EAAmE;AAC/D,QAAA,OAAO,CAAC,UAAR,CACI,KAAK,MADT,EAEI;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBADjC;AAEI,UAAA,OAAO,EAAE,qBAAqB,IAAI,CAAC,eAAL,EAArB,GAA8C;AAF3D,SAFJ;AAMH;;AAED,MAAA,IAAI,CAAC,0BAAL,CAAgC,OAAhC;AACH;AACJ,GA/BD;;AAiCA,EAAA,gBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,WAAP,EAAuC,YAAvC,EAA4D;AAA5D,QAAA,KAAA,GAAA,IAAA,CAA4D,CACxD;;;AACA,QAAI,UAAU,GAAG,KAAK,MAAL,CAAY,UAA7B;;AAEA,QAAI,CAAC,UAAU,CAAC,qBAAhB,EAAuC;AACnC,aAAO,IAAP;AACH;;AAED,QAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,QAAI,UAAU,GAAG,UAAU,CAAC,OAAX,CAAmB,UAAnB,GAAgC,IAAI,CAAC,GAAL,CAAS,UAAU,CAAC,OAAX,CAAmB,UAA5B,EAAwC,KAAK,KAAL,CAAW,MAAnD,CAAhC,GAA6F,KAAK,KAAL,CAAW,MAAzH;;AACA,QAAI,oBAAoB,GAAG,KAAK,MAAL,CAAY,uBAAZ,EAA3B;;AAEA,SAAK,oBAAL,GAA4B,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA5B;AACA,SAAK,oBAAL,GAA4B,CAA5B;;AAEA,QAAI,UAAU,CAAC,OAAX,CAAmB,6BAAnB,IAAoD,UAAU,IAAI,CAAlE,IAAuE,KAAK,KAAL,CAAW,CAAX,aAAyB,cAAhG,IAAkH,eAAe,CAAC,KAAK,KAAL,CAAW,CAAX,CAAD,EAAgB,oBAAhB,CAArI,EAA4K;AACxK,WAAK,cAAL,CAAoC,KAAK,KAAL,CAAW,CAAX,CAApC,EAAmD,IAAnD;AACA,WAAK,oBAAL,GAA4B,CAA5B;AACH,KAHD,MAIK;AACD,UAAI,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,MAAA,WAAW,CAAC,SAAZ,GAAwB,UAAU,CAAC,gBAAX,CAA4B,cAA5B,CAAxB;AACA,MAAA,WAAW,CAAC,KAAZ,CAAkB,OAAlB,GAA4B,MAA5B;;AAEA,UAAI,WAAW,IAAI,KAAK,CAAC,WAAN,CAAkB,UAArC,EAAiD;AAC7C,QAAA,WAAW,CAAC,KAAZ,CAAkB,aAAlB,GAAkC,KAAlC;;AAEA,YAAI,KAAK,MAAL,CAAY,mBAAZ,IAAmC,UAAU,CAAC,OAAX,CAAmB,eAAnB,IAAsC,KAAK,CAAC,eAAN,CAAsB,OAAnG,EAA4G;AACxG,kBAAQ,KAAK,MAAL,CAAY,mBAApB;AACI,iBAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,cAAlB,GAAmC,QAAnC;AACA;;AACJ,iBAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,cAAlB,GAAmC,UAAnC;AACA;;AACJ;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,cAAlB,GAAmC,YAAnC;AACA;AATR;AAWH,SAZD,MAaK;AACD,kBAAQ,UAAU,CAAC,OAAX,CAAmB,eAA3B;AACI,iBAAK,KAAK,CAAC,eAAN,CAAsB,MAA3B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,cAAlB,GAAmC,QAAnC;AACA;;AACJ,iBAAK,KAAK,CAAC,eAAN,CAAsB,KAA3B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,cAAlB,GAAmC,UAAnC;AACA;;AACJ;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,cAAlB,GAAmC,YAAnC;AACA;AATR;AAWH;AACJ,OA7BD,MA8BK;AACD,QAAA,WAAW,CAAC,KAAZ,CAAkB,aAAlB,GAAkC,QAAlC;;AAEA,YAAI,KAAK,MAAL,CAAY,mBAAZ,IAAmC,UAAU,CAAC,OAAX,CAAmB,eAAnB,IAAsC,KAAK,CAAC,eAAN,CAAsB,OAAnG,EAA4G;AACxG,kBAAQ,KAAK,MAAL,CAAY,mBAApB;AACI,iBAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,QAA/B;AACA;;AACJ,iBAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,UAA/B;AACA;;AACJ;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,YAA/B;AACA;AATR;AAWH,SAZD,MAaK;AACD,kBAAQ,UAAU,CAAC,OAAX,CAAmB,eAA3B;AACI,iBAAK,KAAK,CAAC,eAAN,CAAsB,MAA3B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,QAA/B;AACA;;AACJ,iBAAK,KAAK,CAAC,eAAN,CAAsB,KAA3B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,UAA/B;AACA;;AACJ,iBAAK,KAAK,CAAC,eAAN,CAAsB,OAA3B;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,SAA/B;AACA;;AACJ;AACI,cAAA,WAAW,CAAC,KAAZ,CAAkB,UAAlB,GAA+B,YAA/B;AACA;AAZR;AAcH;AACJ;;AAED,UAAI,oBAAoB,GAAG,KAAK,kBAAL,GAA0B,iBAA1B,EAA3B;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,KAAL,CAAW,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AACxC,YAAI,eAAe,CAAC,KAAK,KAAL,CAAW,CAAX,CAAD,EAAgB,oBAAhB,CAAnB,EAA0D;AACtD,cAAI,YAAY,GAAiB,KAAK,gBAAL,CAAsB,KAAK,KAAL,CAAW,CAAX,CAAtB,CAAjC;;AAEA,cAAI,CAAC,YAAL,EAAmB;AACf,YAAA,YAAY,GAAG,IAAI,YAAJ,CAAiB,KAAK,KAAL,CAAW,CAAX,CAAjB,EAAgC,oBAAhC,CAAf;;AACA,YAAA,YAAY,CAAC,OAAb,GAAuB,UAAC,EAAD,EAAG;AAAO,cAAA,KAAI,CAAC,aAAL,CAAmB,EAAnB;AAAyB,aAA1D;;AAEA,iBAAK,OAAL,CAAa,IAAb,CAAkB,YAAlB;AACH;;AAED,UAAA,YAAY,CAAC,MAAb;;AAEA,cAAI,UAAU,CAAC,OAAX,CAAmB,kBAAnB,IAAyC,KAAK,CAAC,WAAN,CAAkB,UAA3D,IAAyE,UAAU,CAAC,OAAX,CAAmB,eAAnB,IAAsC,KAAK,CAAC,eAAN,CAAsB,OAAzI,EAAkJ;AAC9I,YAAA,YAAY,CAAC,MAAb,CAAoB,eAApB,CAAoC,KAApC,CAA0C,IAA1C,GAAiD,UAAjD;AACH,WAFD,MAGK;AACD,YAAA,YAAY,CAAC,MAAb,CAAoB,eAApB,CAAoC,KAApC,CAA0C,IAA1C,GAAiD,UAAjD;AACH;;AAED,UAAA,WAAW,CAAC,WAAZ,CAAwB,YAAY,CAAC,MAAb,CAAoB,eAA5C;AAEA,eAAK,oBAAL;;AAEA,cAAI,KAAK,oBAAL,IAA6B,UAAU,CAAC,OAAX,CAAmB,UAAhD,IAA8D,CAAC,IAAI,KAAK,KAAL,CAAW,MAAX,GAAoB,CAA3F,EAA8F;AAC1F;AACH,WAFD,MAGK,IAAI,UAAU,CAAC,OAAX,CAAmB,aAAnB,GAAmC,CAAvC,EAA0C;AAC3C,gBAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;;AAEA,gBAAI,WAAW,KAAK,KAAK,CAAC,WAAN,CAAkB,UAAtC,EAAkD;AAC9C,cAAA,MAAM,CAAC,KAAP,CAAa,IAAb,GAAoB,UAApB;AACA,cAAA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,UAAU,CAAC,OAAX,CAAmB,aAAnB,GAAmC,IAAxD;AACH,aAHD,MAIK;AACD,cAAA,MAAM,CAAC,KAAP,CAAa,MAAb,GAAsB,UAAU,CAAC,OAAX,CAAmB,aAAnB,GAAmC,IAAzD;AACH;;AAED,YAAA,KAAK,CAAC,WAAN,CAAkB,WAAlB,EAA+B,MAA/B;AACH;AACJ;AACJ;;AAED,UAAI,oBAAoB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA3B;AACA,MAAA,oBAAoB,CAAC,KAArB,CAA2B,QAA3B,GAAsC,QAAtC;AACA,MAAA,oBAAoB,CAAC,WAArB,CAAiC,WAAjC;AAEA,MAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,oBAA3B;AACH;;AAED,IAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,KAAK,oBAAhC;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,UAAI,KAAK,OAAL,CAAa,CAAb,EAAgB,KAAhB,IAAyB,iBAAiB,CAAC,QAA/C,EAAyD;AACrD,aAAK,oBAAL,CAA0C,KAAK,OAAL,CAAa,CAAb,EAAgB,MAA1D,EAAkE,KAAlE;AAEA;AACH;AACJ;;AAED,WAAO,KAAK,oBAAL,GAA4B,CAA5B,GAAgC,OAAhC,GAA0C,IAAjD;AACH,GAvJD;;AAyJA,EAAA,gBAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,MAAV,EAAwB;AACpB,QAAI,CAAC,MAAL,EAAa;AACT,YAAM,IAAI,KAAJ,CAAU,sCAAV,CAAN;AACH;;AAED,QAAI,CAAC,CAAC,MAAM,CAAC,MAAR,IAAkB,MAAM,CAAC,MAAP,KAAkB,KAAK,MAA1C,KAAqD,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,IAA6B,CAAtF,EAAyF;AACrF,WAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB;;AAEA,UAAI,CAAC,MAAM,CAAC,MAAZ,EAAoB;AAChB,QAAA,MAAM,CAAC,SAAP,CAAiB,KAAK,MAAtB;AACH;;AAED,MAAA,mBAAmB,CAAC,MAAD,EAAS,IAAT,CAAnB;AACH,KARD,MASK;AACD,YAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACH;AACJ,GAjBD;;AAmBA,EAAA,gBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,MAAb,EAA2B;AACvB,QAAI,KAAK,cAAL,IAAuB,KAAK,eAAL,IAAwB,MAAnD,EAA2D;AACvD,WAAK,sBAAL;AACH;;AAED,QAAI,WAAW,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAAlB;;AAEA,QAAI,WAAW,IAAI,CAAnB,EAAsB;AAClB,WAAK,KAAL,CAAW,MAAX,CAAkB,WAAlB,EAA+B,CAA/B;AAEA,MAAA,MAAM,CAAC,SAAP,CAAiB,IAAjB;AAEA,MAAA,mBAAmB,CAAC,MAAD,EAAS,IAAT,CAAnB;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC1C,YAAI,KAAK,OAAL,CAAa,CAAb,EAAgB,MAAhB,IAA0B,MAA9B,EAAsC;AAClC,eAAK,OAAL,CAAa,MAAb,CAAoB,CAApB,EAAuB,CAAvB;AAEA;AACH;AACJ;;AAED,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH,GA1BD;;AA4BA,EAAA,gBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,SAAK,KAAL,GAAa,EAAb;AACA,SAAK,OAAL,GAAe,EAAf;AAEA,SAAK,eAAL,GAAuB,IAAvB;AACA,SAAK,oBAAL,GAA4B,CAA5B;AACH,GAND;;AAQA,EAAA,gBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAiB,EAA3B;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,KAAL,CAAW,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AACxC,UAAI,MAAM,GAAG,KAAK,KAAL,CAAW,CAAX,CAAb;AAEA,MAAA,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,MAAM,CAAC,YAAP,EAAd,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GAVD;;AAYA,EAAA,gBAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAuC,EAAjD;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,KAAL,CAAW,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AACxC,MAAA,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,KAAL,CAAW,CAAX,EAAc,sBAAd,EAAd,CAAT;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,MAAA,CAAA,cAAA,CAAI,gBAAA,CAAA,SAAJ,EAAI,qBAAJ,EAAuB;SAAvB,eAAA;AACI,aAAO,KAAK,oBAAZ;AACH,KAFsB;oBAAA;;AAAA,GAAvB;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,gBAAA,CAAA,SAAJ,EAAI,gBAAJ,EAAkB;SAAlB,eAAA;AACI,aAAO,KAAK,eAAZ;AACH,KAFiB;oBAAA;;AAAA,GAAlB;AAGJ,SAAA,gBAAA;AAAC,CAvdD,EAAA;;AAydA,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAS3B,WAAA,SAAA,GAAA;AAAA,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAFA,IAAA,KAAA,CAAA,WAAA,GAAkC,IAAlC;AAKI,IAAA,KAAI,CAAC,iBAAL,GAAyB,IAAI,gBAAJ,CAAqB,KAArB,CAAzB;;AACH;;AAVS,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,WAAO,KAAK,iBAAL,CAAuB,MAAvB,CAA8B,KAAK,WAAL,GAAmB,KAAK,WAAxB,GAAsC,KAAK,UAAL,CAAgB,OAAhB,CAAwB,kBAA5F,EAAgH,KAAK,YAAL,EAAhH,CAAP;AACH,GAFS;;AAYV,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,WAA5B,EAAyC,MAAzC,EAAiD,aAAjD,EAAgE,KAAK,WAArE;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,iBAAL,CAAuB,MAAvB,EAArC;AAEA,WAAO,MAAP;AACH,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,QAAI,KAAK,iBAAL,CAAuB,mBAAvB,IAA8C,CAAlD,EAAqD;AACjD,aAAO,MAAA,CAAA,SAAA,CAAM,kBAAN,CAAwB,IAAxB,CAAwB,IAAxB,CAAP;AACH,KAFD,MAGK;AACD,UAAI,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,MAA7B,IAAuC,CAA3C,EAA8C;AAC1C,eAAO,KAAK,iBAAL,CAAuB,cAAvB,IAAyC,IAAzC,IAAiD,CAAC,KAAK,UAAL,CAAgB,OAAhB,CAAwB,6BAAjF;AACH,OAFD,MAGK;AACD,eAAO,KAAK,iBAAL,CAAuB,cAAvB,IAAyC,IAAhD;AACH;AACJ;AACJ,GAZD;;AAcA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,WAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,MAApC;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,KAAZ,EAAyB;AACrB,QAAI,KAAK,IAAI,CAAT,IAAc,KAAK,GAAG,KAAK,cAAL,EAA1B,EAAiD;AAC7C,aAAO,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,KAA7B,CAAP;AACH,KAFD,MAGK;AACD,MAAA,MAAA,CAAA,SAAA,CAAM,WAAN,CAAiB,IAAjB,CAAiB,IAAjB,EAAkB,KAAlB;AACH;AACJ,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,SAAK,iBAAL,CAAuB,kBAAvB,CAA0C,OAA1C;AACH,GAJD;;AAMA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,QAAI,eAAe,GAAG,IAAI,CAAC,aAAD,CAA1B;;AAEA,QAAI,eAAJ,EAAqB;AACjB,WAAK,WAAL,GAAmB,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,WAAzB,EAAsC,eAAtC,EAAuD,KAAK,CAAC,WAAN,CAAkB,UAAzE,CAAnB;AACH;;AAED,SAAK,iBAAL,CAAuB,KAAvB,CAA6B,IAAI,CAAC,SAAD,CAAjC,EAA8C,MAA9C;AACH,GAVD;;AAYA,EAAA,SAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,MAAV,EAAwB;AACpB,SAAK,iBAAL,CAAuB,SAAvB,CAAiC,MAAjC;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,KAAK,iBAAL,CAAuB,YAAvB,EAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,WAAO,KAAK,iBAAL,CAAuB,sBAAvB,EAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,eAAJ,EAAiB;SAAjB,eAAA;AACI,aAAO,IAAP;AACH,KAFgB;oBAAA;;AAAA,GAAjB;AAGJ,SAAA,SAAA;AAAC,CAxFD,CAA+B,WAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;;AA0Fb,IAAA,4BAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA2D,EAAA,SAAA,CAAA,4BAAA,EAAA,MAAA,CAAA;;AAA3D,WAAA,4BAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,MAAA,GAAkB,IAAlB;AACA,IAAA,KAAA,CAAA,MAAA,GAAkB,KAAlB;;AAqLX;;AAnLa,EAAA,4BAAA,CAAA,SAAA,CAAA,eAAA,GAAV,YAAA;AACI,QAAI,eAAe,GAAG,KAAK,UAAL,CAAgB,eAAhB,CAAgC,cAAhC,CAA+C,KAAK,KAApD,EAA2D,KAAK,UAAL,CAAgB,eAAhB,CAAgC,cAAhC,CAA+C,KAAK,YAApD,CAA3D,CAAtB;;AAEA,QAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,eAAe,CAAC,eAApC,CAAL,EAA2D;AACvD,WAAK,eAAL,CAAqB,KAArB,CAA2B,eAA3B,GAA6C,KAAK,CAAC,gBAAN,CAAuB,eAAe,CAAC,eAAvC,CAA7C;AACH;AACJ,GANS;;AAQA,EAAA,4BAAA,CAAA,SAAA,CAAA,YAAA,GAAV,YAAA;AACI,IAAA,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB;;AAEA,QAAI,CAAC,KAAK,eAAV,EAA2B;AACvB;AACH;;AAED,QAAI,eAAe,GAAG,IAAI,MAAM,CAAC,iBAAX,EAAtB;;AAEA,QAAI,KAAK,mBAAL,EAAJ,EAAgC;AAC5B,MAAA,eAAe,GAAG,KAAK,UAAL,CAAgB,oCAAhB,CAAqD,KAAK,mBAAL,EAArD,CAAlB;AACH;;AAED,SAAK,eAAL,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,eAAe,CAAC,GAAhB,GAAsB,IAA9D;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,YAA3B,GAA0C,eAAe,CAAC,KAAhB,GAAwB,IAAlE;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,aAA3B,GAA2C,eAAe,CAAC,MAAhB,GAAyB,IAApE;AACA,SAAK,eAAL,CAAqB,KAArB,CAA2B,WAA3B,GAAyC,eAAe,CAAC,IAAhB,GAAuB,IAAhE;;AAEA,QAAI,KAAK,UAAL,EAAJ,EAAuB;AACnB;AACA,UAAI,OAAO,GAAG,IAAI,MAAM,CAAC,iBAAX,EAAd;AAEA,WAAK,8BAAL,CAAoC,OAApC;AAEA,UAAI,kBAAkB,GAAG,KAAK,UAAL,CAAgB,oCAAhB,CAAqD,OAArD,CAAzB;AAEA,WAAK,eAAL,CAAqB,KAArB,CAA2B,WAA3B,GAAyC,MAAM,kBAAkB,CAAC,KAAzB,GAAiC,IAA1E;AACA,WAAK,eAAL,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,MAAM,kBAAkB,CAAC,IAAzB,GAAgC,IAAxE;;AAEA,UAAI,CAAC,KAAK,YAAL,EAAL,EAA0B;AACtB,aAAK,eAAL,CAAqB,KAArB,CAA2B,SAA3B,GAAuC,MAAM,kBAAkB,CAAC,GAAzB,GAA+B,IAAtE;AACA,aAAK,eAAL,CAAqB,KAArB,CAA2B,YAA3B,GAA0C,MAAM,kBAAkB,CAAC,MAAzB,GAAkC,IAA5E;AACH;;AAED,UAAI,KAAK,gBAAL,IAAyB,KAAK,oBAAL,IAA6B,KAAK,CAAC,WAAN,CAAkB,UAA5E,EAAwF;AACpF,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,MAAM,kBAAkB,CAAC,IAAzB,GAAgC,IAAzE;AACA,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,WAA5B,GAA0C,MAAM,kBAAkB,CAAC,KAAzB,GAAiC,IAA3E;AACH;AACJ,KApBD,MAqBK;AACD,WAAK,eAAL,CAAqB,KAArB,CAA2B,WAA3B,GAAyC,GAAzC;AACA,WAAK,eAAL,CAAqB,KAArB,CAA2B,UAA3B,GAAwC,GAAxC;AACA,WAAK,eAAL,CAAqB,KAArB,CAA2B,SAA3B,GAAuC,GAAvC;AACA,WAAK,eAAL,CAAqB,KAArB,CAA2B,YAA3B,GAA0C,GAA1C;;AAEA,UAAI,KAAK,gBAAT,EAA2B;AACvB,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,WAA5B,GAA0C,GAA1C;AACA,aAAK,gBAAL,CAAsB,KAAtB,CAA4B,UAA5B,GAAyC,GAAzC;AACH;AACJ;AACJ,GAlDS;;AAoDA,EAAA,4BAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,YAAA;AACI,QAAI,cAAc,GAAgB,KAAK,MAAvC;;AAEA,WAAO,cAAP,EAAuB;AACnB,UAAI,gCAAgC,GAAG,cAAc,YAAY,SAA1B,GAAsC,cAAc,CAAC,eAAf,CAA+B,OAA/B,EAAtC,GAAiF,KAAxH;;AAEA,UAAI,cAAc,YAAY,4BAA9B,EAA4D;AACxD,YAAI,KAAK,gBAAL,KAA0B,cAAc,CAAC,iBAAf,MAAsC,KAAK,iBAAL,EAAtC,IAAkE,gCAA5F,CAAJ,EAAmI;AAC/H,iBAAO,IAAP;AACH;AACJ;;AAED,MAAA,cAAc,GAAG,cAAc,CAAC,MAAhC;AACH;;AAED,WAAO,KAAP;AACH,GAhBS;;AAkBA,EAAA,4BAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACI,WAAO,KAAK,gBAAL,KACH,IAAI,MAAM,CAAC,iBAAX,CACI,KAAK,CAAC,OAAN,CAAc,OADlB,EAEI,KAAK,CAAC,OAAN,CAAc,OAFlB,EAGI,KAAK,CAAC,OAAN,CAAc,OAHlB,EAII,KAAK,CAAC,OAAN,CAAc,OAJlB,CADG,GAK0B,MAAA,CAAA,SAAA,CAAM,iBAAN,CAAuB,IAAvB,CAAuB,IAAvB,CALjC;AAMH,GAPS;;AASA,EAAA,4BAAA,CAAA,SAAA,CAAA,oBAAA,GAAV,YAAA;AACI,WAAO,KAAP;AACH,GAFS;;AAIA,EAAA,4BAAA,CAAA,SAAA,CAAA,QAAA,GAAV,YAAA;AACI,WAAO,KAAK,MAAZ;AACH,GAFS;;AAIA,EAAA,4BAAA,CAAA,SAAA,CAAA,QAAA,GAAV,UAAmB,KAAnB,EAAiC;AAC7B,SAAK,MAAL,GAAc,KAAd;AACH,GAFS;;AAIV,EAAA,MAAA,CAAA,cAAA,CAAc,4BAAA,CAAA,SAAd,EAAc,qBAAd,EAAiC;SAAjC,eAAA;AACI,aAAO,CAAP;AACH,KAFgC;oBAAA;;AAAA,GAAjC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,4BAAA,CAAA,SAAd,EAAc,kBAAd,EAA8B;SAA9B,eAAA;AACI,aAAO,KAAK,MAAL,IAAe,IAAtB;AACH,KAF6B;oBAAA;;AAAA,GAA9B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,4BAAA,CAAA,SAAd,EAAc,kBAAd,EAA8B;SAA9B,eAAA;AACI,aAAO,IAAP;AACH,KAF6B;oBAAA;;AAAA,GAA9B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,4BAAA,CAAA,SAAd,EAAc,mBAAd,EAA+B;SAA/B,eAAA;AACI,aAAO,IAAP;AACH,KAF8B;oBAAA;;AAAA,GAA/B;;AAIA,EAAA,4BAAA,CAAA,SAAA,CAAA,UAAA,GAAA,YAAA;AACF,WAAO,CAAC,KAAK,gBAAL,MAA2B,KAAK,UAAL,CAAgB,gBAA5C,KAAiE,KAAK,QAAL,EAAxE;AACG,GAFD;;AAIA,EAAA,4BAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AAEA,WAAO,MAAP;AACH,GAND;;AAQA,EAAA,4BAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,MAAT,EAAiB;AACb,UAAI,eAAe,GAAG,KAAK,UAAL,CAAgB,eAAhB,CAAgC,cAAhC,CAA+C,KAAK,MAApD,CAAtB;;AAEA,UAAI,CAAC,eAAL,EAAsB;AAClB,QAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBADjC;AAEI,UAAA,OAAO,EAAE,8BAA8B,KAAK;AAFhD,SAFJ;AAMH;AACJ;AACJ,GAfD;;AAiBA,EAAA,4BAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,MAAL,GAAc,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAd;AACH,GAJD;;AAMA,EAAA,4BAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,eAAe,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAtB;;AAEA,QAAI,eAAe,IAAI,KAAK,gBAAL,EAAvB,EAAgD;AAC5C,WAAK,eAAL;AACH;;AAED,WAAO,eAAP;AACH,GARD;;AAUA,EAAA,4BAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACI,QAAI,cAAc,GAAG,KAAK,KAA1B;AAEA,WAAO,cAAc,GAAG,cAAH,GAAoB,MAAA,CAAA,SAAA,CAAM,iBAAN,CAAuB,IAAvB,CAAuB,IAAvB,CAAzC;AACH,GAJD;;AAMA,EAAA,MAAA,CAAA,cAAA,CAAI,4BAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,UAAI,KAAK,gBAAT,EAA2B;AACvB,YAAI,KAAK,MAAL,IAAe,KAAK,UAAL,CAAgB,eAAhB,CAAgC,cAAhC,CAA+C,KAAK,MAApD,CAAnB,EAAgF;AAC5E,iBAAO,KAAK,MAAZ;AACH;AACJ;;AAED,aAAO,IAAP;AACH,KARQ;SAUT,aAAU,KAAV,EAAuB;AACnB,WAAK,MAAL,GAAc,KAAd;AACH,KAZQ;oBAAA;;AAAA,GAAT;AAaJ,SAAA,4BAAA;AAAC,CAvLD,CAA2D,oBAA3D,CAAA;;AAAsB,OAAA,CAAA,4BAAA,GAAA,4BAAA;;AAyLtB,IAAA,eAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAqC,EAAA,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA;;AAArC,WAAA,eAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAMI,IAAA,KAAA,CAAA,QAAA,GAA2B,eAAe,CAAC,eAA3C;AACA,IAAA,KAAA,CAAA,mBAAA,GAAiD,eAAe,CAAC,0BAAjE;AACA,IAAA,KAAA,CAAA,iBAAA,GAA6C,eAAe,CAAC,wBAA7D;;AAqFH;;AAnFG,EAAA,eAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,SAAK,GAAL,GAAW,SAAX;AACA,SAAK,QAAL,GAAgB,eAAe,CAAC,eAAhC;AACA,SAAK,mBAAL,GAA2B,eAAe,CAAC,0BAA3C;AACA,SAAK,iBAAL,GAAyB,eAAe,CAAC,wBAAzC;AACH,GALD;;AAOA,EAAA,eAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,GAAL,GAAW,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,KAAD,CAAzB,CAAX;AACA,SAAK,QAAL,GAAgB,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,QAAzB,EAAmC,IAAI,CAAC,UAAD,CAAvC,EAAqD,KAAK,QAA1D,CAAhB;AACA,SAAK,mBAAL,GAA2B,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,mBAAzB,EAA8C,IAAI,CAAC,qBAAD,CAAlD,EAA2E,KAAK,mBAAhF,CAA3B;AACA,SAAK,iBAAL,GAAyB,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,iBAAzB,EAA4C,IAAI,CAAC,mBAAD,CAAhD,EAAuE,KAAK,iBAA5E,CAAzB;AACH,GAPD;;AASA,EAAA,eAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,CAAC,KAAK,OAAL,EAAL,EAAqB;AACjB,aAAO,IAAP;AACH;;AAED,QAAI,KAAK,QAAL,IAAiB,eAAe,CAAC,eAAjC,IACA,KAAK,mBAAL,IAA4B,eAAe,CAAC,0BAD5C,IAEA,KAAK,iBAAL,IAA0B,eAAe,CAAC,wBAF9C,EAEwE;AAEpE,aAAO,KAAK,GAAZ;AACH,KALD,MAMK;AACD,UAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAA1B,EAAiC,KAAK,GAAtC;AACA,MAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,QAA5B,EAAsC,MAAtC,EAA8C,UAA9C,EAA0D,KAAK,QAA/D,EAAyE,eAAe,CAAC,eAAzF;AACA,MAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,mBAA5B,EAAiD,MAAjD,EAAyD,qBAAzD,EAAgF,KAAK,mBAArF,EAA0G,eAAe,CAAC,0BAA1H;AACA,MAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,iBAA5B,EAA+C,MAA/C,EAAuD,mBAAvD,EAA4E,KAAK,iBAAjF,EAAoG,eAAe,CAAC,wBAApH;AAEA,aAAO,MAAP;AACH;AACJ,GArBD;;AAuBA,EAAA,eAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,OAAN,EAA0B;AACtB,QAAI,KAAK,GAAT,EAAc;AACV,MAAA,OAAO,CAAC,KAAR,CAAc,eAAd,GAAgC,UAAU,KAAK,GAAf,GAAqB,IAArD;;AAEA,cAAQ,KAAK,QAAb;AACI,aAAK,KAAK,CAAC,QAAN,CAAe,MAApB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,gBAAd,GAAiC,QAAjC;AACA;;AACJ,aAAK,KAAK,CAAC,QAAN,CAAe,kBAApB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,gBAAd,GAAiC,UAAjC;AACA;;AACJ,aAAK,KAAK,CAAC,QAAN,CAAe,gBAApB;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,gBAAd,GAAiC,UAAjC;AACA;;AACJ,aAAK,KAAK,CAAC,QAAN,CAAe,KAApB;AACA;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,gBAAd,GAAiC,WAAjC;AACA,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,OAA/B;AACA;AAdR;;AAiBA,cAAQ,KAAK,mBAAb;AACI,aAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,mBAAd,GAAoC,QAApC;AACA;;AACJ,aAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,mBAAd,GAAoC,OAApC;AACA;AANR;;AASA,cAAQ,KAAK,iBAAb;AACI,aAAK,KAAK,CAAC,iBAAN,CAAwB,MAA7B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,mBAAd,GAAoC,QAApC;AACA;;AACJ,aAAK,KAAK,CAAC,iBAAN,CAAwB,MAA7B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,mBAAd,GAAoC,QAApC;AACA;AANR;AAQH;AACJ,GAvCD;;AAyCA,EAAA,eAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;AACI,WAAO,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,GAAzB,CAAR;AACH,GAFD;;AAzFwB,EAAA,eAAA,CAAA,eAAA,GAAkB,KAAK,CAAC,QAAN,CAAe,KAAjC;AACA,EAAA,eAAA,CAAA,0BAAA,GAA6B,KAAK,CAAC,mBAAN,CAA0B,IAAvD;AACA,EAAA,eAAA,CAAA,wBAAA,GAA2B,KAAK,CAAC,iBAAN,CAAwB,GAAnD;AA0F5B,SAAA,eAAA;AAAC,CA7FD,CAAqC,kBAArC,CAAA;;AAAa,OAAA,CAAA,eAAA,GAAA,eAAA;;AA+Fb,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAA/B,WAAA,SAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,MAAA,GAA6B,EAA7B;AACA,IAAA,KAAA,CAAA,cAAA,GAAqC,EAArC;AAoKC,IAAA,KAAA,CAAA,eAAA,GAAmC,IAAI,eAAJ,EAAnC;AAET,IAAA,KAAA,CAAA,wBAAA,GAAoD,KAAK,CAAC,iBAAN,CAAwB,GAA5E;AACA,IAAA,KAAA,CAAA,GAAA,GAAgB,IAAhB;;AAmPH;;AAxZW,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAR,UACI,IADJ,EAEI,KAFJ,EAGI,WAHJ,EAGwB;AACpB,QAAI,CAAC,IAAI,CAAC,MAAN,IAAgB,WAApB,EAAiC;AAC7B,UAAI,IAAI,CAAC,YAAT,EAAuB;AACnB,YAAI,KAAK,GAAG,CAAR,IAAa,KAAK,IAAI,KAAK,MAAL,CAAY,MAAtC,EAA8C;AAC1C,eAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB;AACH,SAFD,MAGK;AACD,eAAK,MAAL,CAAY,MAAZ,CAAmB,KAAnB,EAA0B,CAA1B,EAA6B,IAA7B;AACH;;AAED,QAAA,IAAI,CAAC,SAAL,CAAe,IAAf;AACH,OATD,MAUK;AACD,cAAM,IAAI,KAAJ,CAAU,sBAAsB,IAAI,CAAC,eAAL,EAAtB,GAA+C,yCAAzD,CAAN;AACH;AACJ,KAdD,MAeK;AACD,YAAM,IAAI,KAAJ,CAAU,mDAAV,CAAN;AACH;AACJ,GAtBO;;AAwBE,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AACI,WAAO,IAAP;AACH,GAFS;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,8BAAA,GAAV,YAAA;AACI,WAAO,OAAP;AACH,GAFS;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAV,YAAA;AACI,QAAI,KAAK,eAAL,CAAqB,OAArB,EAAJ,EAAoC;AAChC,WAAK,eAAL,CAAqB,KAArB,CAA2B,KAAK,eAAhC;AACH;;AAED,IAAA,MAAA,CAAA,SAAA,CAAM,eAAN,CAAqB,IAArB,CAAqB,IAArB;AACH,GANS;;AAQA,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,SAAK,cAAL,GAAsB,EAAtB,CADJ,CAGI;;AACA,QAAI,UAAU,GAAG,KAAK,UAAtB;AAEA,QAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;;AAEA,QAAI,KAAK,GAAL,IAAY,IAAZ,IAAoB,KAAK,GAA7B,EAAkC;AAC9B,MAAA,OAAO,CAAC,GAAR,GAAc,KAAd;AACH;;AAED,IAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,UAAU,CAAC,gBAAX,CAA4B,cAA5B,CAAtB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;AACA,IAAA,OAAO,CAAC,KAAR,CAAc,aAAd,GAA8B,QAA9B;;AAEA,QAAI,YAAY,CAAC,+BAAjB,EAAkD;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,qBAA1B;AACH;;AAED,YAAQ,KAAK,wBAAb;AACI,WAAK,KAAK,CAAC,iBAAN,CAAwB,MAA7B;AACI,QAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,QAA/B;AACA;;AACJ,WAAK,KAAK,CAAC,iBAAN,CAAwB,MAA7B;AACI,QAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,UAA/B;AACA;;AACJ;AACI,QAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,YAA/B;AACA;AATR;;AAYA,QAAI,KAAK,MAAL,CAAY,MAAZ,GAAqB,CAAzB,EAA4B;AACxB,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,MAAL,CAAY,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,YAAI,eAAe,GAAG,KAAK,gBAAL,CAAsB,KAAK,MAAL,CAAY,CAAZ,CAAtB,EAAsC,KAAK,wBAAL,EAAtC,IAAyE,KAAK,MAAL,CAAY,CAAZ,EAAe,MAAf,EAAzE,GAAmG,IAAzH;;AAEA,YAAI,eAAJ,EAAqB;AACjB,cAAI,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAA7B,IAAkC,KAAK,MAAL,CAAY,CAAZ,EAAe,gBAArD,EAAuE;AACnE,iBAAK,MAAL,CAAY,CAAZ,EAAe,gBAAf,CAAgC,KAAhC,CAAsC,IAAtC,GAA6C,UAA7C;AAEA,YAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,KAAK,MAAL,CAAY,CAAZ,EAAe,gBAA1C;AACH;;AAED,UAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,eAA3B;;AAEA,eAAK,cAAL,CAAoB,IAApB,CAAyB,KAAK,MAAL,CAAY,CAAZ,CAAzB;AACH;AACJ;AACJ,KAhBD,MAiBK;AACD,UAAI,KAAK,YAAL,EAAJ,EAAyB;AACrB,YAAI,kBAAkB,GAAG,KAAK,wBAAL,EAAzB;AACA,QAAA,kBAAkB,CAAC,KAAnB,CAAyB,KAAzB,GAAiC,MAAjC;AACA,QAAA,kBAAkB,CAAC,KAAnB,CAAyB,MAAzB,GAAkC,MAAlC;AAEA,QAAA,OAAO,CAAC,WAAR,CAAoB,kBAApB;AACH;AACJ;;AAED,WAAO,OAAP;AACH,GAvES;;AAyEA,EAAA,SAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,UAA2B,SAA3B,EAA4C;AACxC;AACA,QAAI,QAAQ,GAAG,KAAK,eAAL,CAAqB,SAArB,GAAiC,SAAjC,GAA6C,CAA5D;;AAEA,QAAI,aAAa,GAAG,SAAhB,aAAgB,CAAC,WAAD,EAAyB;AACzC,UAAI,GAAG,GAAG,WAAW,CAAC,eAAtB;;AAEA,UAAI,GAAJ,EAAS;AACL,gBAAQ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,QAAxB,CAAR;AACI,eAAK,KAAK,CAAC,kBAAN,CAAyB,gBAA9B;AACI,gBAAI,WAAW,GAAG,WAAW,CAAC,eAAD,CAAX,EAAlB,CADJ,CAEI;AACA;;AACA,gBAAI,WAAJ,EAAiB;AACb,cAAA,aAAa,CAAC,WAAD,CAAb;AACH;;AACD;;AACJ,eAAK,KAAK,CAAC,kBAAN,CAAyB,WAA9B;AACI,gBAAI,WAAS,GAAG,QAAQ,GAAG,GAAG,CAAC,SAA/B;AACA,YAAA,WAAW,CAAC,gBAAD,CAAX,CAA8B,WAA9B;AACA;;AACJ,eAAK,KAAK,CAAC,kBAAN,CAAyB,mBAA9B;AACI,YAAA,WAAW,CAAC,gBAAD,CAAX,CAA8B,CAA9B;AACA;AAfR;AAiBH;AACJ,KAtBD;;AAwBA,SAAiB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,MAAtB,EAAiB,EAAA,GAAA,EAAA,CAAA,MAAjB,EAAiB,EAAA,EAAjB,EAA8B;AAAzB,UAAI,IAAI,GAAA,EAAA,CAAA,EAAA,CAAR;AACD,MAAA,aAAa,CAAC,IAAD,CAAb;AACH;;AAED,WAAO,IAAP;AACH,GAjCS;;AAmCA,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AACI,SAAiB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,MAAtB,EAAiB,EAAA,GAAA,EAAA,CAAA,MAAjB,EAAiB,EAAA,EAAjB,EAA8B;AAAzB,UAAI,IAAI,GAAA,EAAA,CAAA,EAAA,CAAR;AACD,MAAA,IAAI,CAAC,eAAD,CAAJ;AACH;AACJ,GAJS;;AAMA,EAAA,SAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,YAAA;AACI,WAAO,KAAK,eAAL,CAAqB,OAArB,MAAkC,MAAA,CAAA,SAAA,CAAM,gBAAN,CAAsB,IAAtB,CAAsB,IAAtB,CAAzC;AACH,GAFS;;AAIV,EAAA,MAAA,CAAA,cAAA,CAAc,SAAA,CAAA,SAAd,EAAc,cAAd,EAA0B;SAA1B,eAAA;AACI,aAAO,IAAP;AACH,KAFyB;oBAAA;;AAAA,GAA1B;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,iBAA1B,EAA6C,KAAK,eAAL,CAAqB,MAArB,EAA7C;AAEA,IAAA,KAAK,CAAC,eAAN,CAAsB,KAAK,CAAC,iBAA5B,EAA+C,MAA/C,EAAuD,0BAAvD,EAAmF,KAAK,wBAAxF,EAAkH,KAAK,CAAC,iBAAN,CAAwB,GAA1I;;AAEA,QAAI,KAAK,MAAL,CAAY,MAAZ,GAAqB,CAAzB,EAA4B;AACxB,UAAI,QAAQ,GAAG,EAAf;;AAEA,WAAoB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,MAAzB,EAAoB,EAAA,GAAA,EAAA,CAAA,MAApB,EAAoB,EAAA,EAApB,EAAiC;AAA5B,YAAI,OAAO,GAAA,EAAA,CAAA,EAAA,CAAX;AACD,QAAA,QAAQ,CAAC,IAAT,CAAc,OAAO,CAAC,MAAR,EAAd;AACH;;AAED,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,KAAK,8BAAL,EAA1B,EAAiE,QAAjE;AACH;;AAED,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC,EAA+C,KAA/C;AAEA,WAAO,MAAP;AACH,GApBD;;AAsBA,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,KAAK,MAAL,CAAY,MAAnB;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAAuB;AACnB,WAAO,KAAK,MAAL,CAAY,KAAZ,CAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,2BAAA,GAAA,YAAA;AACI,QAAI,KAAK,eAAL,IAAwB,KAAK,cAA7B,IAA+C,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAAhF,EAAmF;AAC/E,WAAiB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,cAAtB,EAAiB,EAAA,GAAA,EAAA,CAAA,MAAjB,EAAiB,EAAA,EAAjB,EAAsC;AAAjC,YAAI,IAAI,GAAA,EAAA,CAAA,EAAA,CAAR;;AACD,YAAI,IAAI,CAAC,SAAT,EAAoB;AAChB,iBAAO,IAAP;AACH;AACJ;;AAAA;AACJ;;AAED,WAAO,IAAP;AACH,GAVD;;AAYA,EAAA,SAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,YAAA;AACI,QAAI,KAAK,eAAL,IAAwB,KAAK,cAA7B,IAA+C,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAAhF,EAAmF;AAC/E,WAAK,IAAI,CAAC,GAAG,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAA1C,EAA6C,CAAC,IAAI,CAAlD,EAAqD,CAAC,EAAtD,EAA0D;AACtD,YAAI,KAAK,cAAL,CAAoB,CAApB,EAAuB,SAA3B,EAAsC;AAClC,iBAAO,KAAK,cAAL,CAAoB,CAApB,CAAP;AACH;AACJ;AACJ;;AAED,WAAO,IAAP;AACH,GAVD;;AAYA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,WAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,OAAf,EAAmC;AAC/B,QAAI,UAAU,GAAG,KAAK,YAAL,EAAjB;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,MAAL,CAAY,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,UAAI,KAAK,MAAL,CAAY,CAAZ,EAAe,SAAf,IAA4B,UAAhC,EAA4C;AACxC,eAAO,KAAK,MAAL,CAAY,CAAZ,KAAkB,OAAzB;AACH;AACJ;;AAED,WAAO,KAAP;AACH,GAVD;;AAYA,EAAA,SAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,OAAd,EAAkC;AAC9B,QAAI,UAAU,GAAG,KAAK,YAAL,EAAjB;;AAEA,SAAK,IAAI,CAAC,GAAG,KAAK,MAAL,CAAY,MAAZ,GAAqB,CAAlC,EAAqC,CAAC,IAAI,CAA1C,EAA6C,CAAC,EAA9C,EAAkD;AAC9C,UAAI,KAAK,MAAL,CAAY,CAAZ,EAAe,SAAf,IAA4B,UAAhC,EAA4C;AACxC,eAAO,KAAK,MAAL,CAAY,CAAZ,KAAkB,OAAzB;AACH;AACJ;;AAED,WAAO,KAAP;AACH,GAVD;;AAYA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,QAAI,KAAK,GAAL,IAAY,IAAhB,EAAsB;AAClB,aAAO,KAAK,GAAZ;AACH,KAFD,MAGK;AACD,UAAI,eAAe,GAAG,KAAK,kBAAL,EAAtB;AAEA,aAAO,eAAe,GAAG,eAAe,CAAC,KAAhB,EAAH,GAA6B,KAAnD;AACH;AACJ,GATD;;AAWA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,QAAI,iBAAiB,GAAG,KAAK,2BAAL,EAAxB;AAEA,WAAO,KAAK,UAAL,OAAsB,iBAAiB,GAAG,iBAAiB,CAAC,eAAlB,EAAH,GAAyC,KAAhF,CAAP;AACH,GAJD;;AAMA,EAAA,SAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,QAAI,gBAAgB,GAAG,KAAK,0BAAL,EAAvB;AAEA,WAAO,KAAK,UAAL,OAAsB,gBAAgB,GAAG,gBAAgB,CAAC,kBAAjB,MAAyC,gBAAgB,CAAC,iBAAjB,MAAwC,KAAK,iBAAL,EAApF,GAA+G,KAArJ,CAAP;AACH,GAJD;;AAMA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,iBAAL,CAAuB,KAAvB;AAEA,SAAK,MAAL,GAAc,EAAd;AACA,SAAK,cAAL,GAAsB,EAAtB;AAEA,SAAK,eAAL,CAAqB,KAArB;AAEA,QAAI,mBAAmB,GAAG,IAAI,CAAC,iBAAD,CAA9B;;AAEA,QAAI,mBAAJ,EAAyB;AACrB,UAAI,OAAO,mBAAP,KAA+B,QAAnC,EAA6C;AACzC,aAAK,eAAL,CAAqB,GAArB,GAA2B,mBAA3B;AACA,aAAK,eAAL,CAAqB,QAArB,GAAgC,KAAK,CAAC,QAAN,CAAe,KAA/C;AACH,OAHD,MAIK,IAAI,OAAO,mBAAP,KAA+B,QAAnC,EAA6C;AAC9C,aAAK,eAAL,CAAqB,KAArB,CAA2B,mBAA3B,EAAgD,MAAhD;AACH;AACJ;;AAED,SAAK,wBAAL,GAAgC,KAAK,CAAC,YAAN,CAAmB,KAAK,CAAC,iBAAzB,EAA4C,IAAI,CAAC,0BAAD,CAAhD,EAA8E,KAAK,wBAAnF,CAAhC;;AAEA,QAAI,IAAI,CAAC,KAAK,8BAAL,EAAD,CAAJ,IAA+C,IAAnD,EAAyD;AACrD,UAAI,KAAK,GAAG,IAAI,CAAC,KAAK,8BAAL,EAAD,CAAhB;AAEA,WAAK,KAAL;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,CAAC,MAA1B,EAAkC,CAAC,EAAnC,EAAuC;AACnC,YAAI,OAAO,GAAG,qBAAqB,CAC/B,IAD+B,EAE/B,KAAK,CAAC,CAAD,CAF0B,EAG/B,CAAC,KAAK,YAAL,EAH8B,EAI/B,MAJ+B,CAAnC;;AAMA,YAAI,OAAJ,EAAa;AACT,eAAK,YAAL,CAAkB,OAAlB,EAA2B,CAAC,CAA5B,EAA+B,IAA/B;AACH;AACJ;AACJ;;AAED,SAAK,KAAL,GAAa,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,OAAD,CAAvB,EAAkC,KAAK,KAAvC,CAAb;AACH,GA3CD;;AA6CA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,WAAR,EAAgC;AAC5B,WAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,WAApB,CAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,IAAR,EAAyB;AACrB,SAAK,YAAL,CAAkB,IAAlB,EAAwB,CAAC,CAAzB,EAA4B,KAA5B;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,gBAAA,GAAA,UAAiB,IAAjB,EAAoC,YAApC,EAA6D;AACzD,SAAK,YAAL,CAAkB,IAAlB,EAAwB,KAAK,MAAL,CAAY,OAAZ,CAAoB,YAApB,CAAxB,EAA2D,KAA3D;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,UAAgB,IAAhB,EAAmC,WAAnC,EAA2D;AACvD,SAAK,YAAL,CAAkB,IAAlB,EAAwB,KAAK,MAAL,CAAY,OAAZ,CAAoB,WAApB,IAAmC,CAA3D,EAA8D,KAA9D;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,IAAX,EAA4B;AACxB,QAAI,SAAS,GAAG,KAAK,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAhB;;AAEA,QAAI,SAAS,IAAI,CAAjB,EAAoB;AAChB,WAAK,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,CAA9B;;AAEA,MAAA,IAAI,CAAC,SAAL,CAAe,IAAf;AAEA,WAAK,YAAL;AAEA,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH,GAdD;;AAgBA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,SAAK,MAAL,GAAc,EAAd;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,sBAAN,CAA4B,IAA5B,CAA4B,IAA5B,CAAb;;AAEA,QAAI,KAAK,eAAL,CAAqB,OAArB,EAAJ,EAAoC;AAChC,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,GAAG,EAAE,KAAK,eAAL,CAAqB,GAA5B;AAAiC,QAAA,QAAQ,EAAE;AAA3C,OAAZ;AACH;;AAED,WAAO,MAAP;AACH,GARD;;AAUA,EAAA,SAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAW,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,EAApB,CAArB;;AAEA,QAAI,CAAC,MAAL,EAAa;AACT,UAAI,KAAK,YAAT,EAAuB;AACnB,QAAA,MAAM,GAAG,KAAK,YAAL,CAAkB,aAAlB,CAAgC,EAAhC,CAAT;AACH;;AAED,UAAI,CAAC,MAAL,EAAa;AACT,aAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,MAAL,CAAY,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,UAAA,MAAM,GAAG,KAAK,MAAL,CAAY,CAAZ,EAAe,aAAf,CAA6B,EAA7B,CAAT;;AAEA,cAAI,MAAJ,EAAY;AACR;AACH;AACJ;AACJ;AACJ;;AAED,WAAO,MAAP;AACH,GApBD;;AAsBA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,eAAA;AACI,aAAO,KAAK,UAAL,EAAP;AACH,KAFU;SAIX,aAAY,KAAZ,EAA2C;AACvC,WAAK,UAAL,CAAgB,KAAhB;AACH,KANU;oBAAA;;AAAA,GAAX;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAK,eAAL,EAAP;AACH,KAFe;SAIhB,aAAiB,KAAjB,EAA8B;AAC1B,WAAK,eAAL,CAAqB,KAArB;AACH,KANe;oBAAA;;AAAA,GAAhB;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,QAAL,EAAP;AACH,KAFQ;SAIT,aAAU,KAAV,EAAwB;AACpB,WAAK,QAAL,CAAc,KAAd;AACH,KANQ;oBAAA;;AAAA,GAAT;AAOJ,SAAA,SAAA;AAAC,CA5ZD,CAA+B,4BAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;;AAgab,IAAA,MAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA4B,EAAA,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;;AA2CxB,WAAA,MAAA,CAAY,KAAZ,EAA0C;AAA9B,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,SAAA;AAA8B;;AAA1C,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AA1CQ,IAAA,KAAA,CAAA,eAAA,GAA0B,CAA1B;AAwCR,IAAA,KAAA,CAAA,KAAA,GAAqB,SAArB;AAKI,IAAA,KAAI,CAAC,KAAL,GAAa,KAAb;;AACH;;AA5CS,EAAA,MAAA,CAAA,SAAA,CAAA,yBAAA,GAAV,UAAoC,eAApC,EAAgE;AAC5D,QAAM,yBAAyB,GAAG,EAAlC;;AAEA,QAAI,KAAK,YAAL,EAAJ,EAAyB;AACrB,MAAA,eAAe,CAAC,KAAhB,CAAsB,QAAtB,GAAiC,MAAjC;AACA,MAAA,eAAe,CAAC,KAAhB,CAAsB,SAAtB,GAAkC,CAAC,CAAC,KAAK,cAAN,GAAuB,yBAAvB,GAAmD,IAAI,CAAC,GAAL,CAAS,KAAK,cAAd,EAA8B,yBAA9B,CAApD,IAAgH,IAAlJ;AACH,KAHD,MAIK;AACD,MAAA,eAAe,CAAC,KAAhB,CAAsB,QAAtB,GAAiC,GAAjC;;AAEA,UAAI,KAAK,cAAT,EAAyB;AACrB,QAAA,eAAe,CAAC,KAAhB,CAAsB,SAAtB,GAAkC,KAAK,cAAL,GAAsB,IAAxD;AACH;AACJ;;AAED,QAAI,KAAK,KAAL,KAAe,MAAnB,EAA2B;AACvB,MAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAA7B;AACH,KAFD,MAGK,IAAI,KAAK,KAAL,KAAe,SAAnB,EAA8B;AAC/B,MAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAA7B;AACH,KAFI,MAGA;AACD,UAAI,WAAW,GAAuB,KAAK,KAA3C;;AAEA,UAAI,WAAW,CAAC,IAAZ,IAAoB,KAAK,CAAC,QAAN,CAAe,KAAvC,EAA8C;AAC1C,QAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAA7B;AACA,QAAA,eAAe,CAAC,KAAhB,CAAsB,KAAtB,GAA8B,WAAW,CAAC,YAAZ,GAA2B,IAAzD;AACH,OAHD,MAIK;AACD,QAAA,eAAe,CAAC,KAAhB,CAAsB,IAAtB,GAA6B,UAAU,KAAK,eAAL,GAAuB,CAAvB,GAA2B,KAAK,eAAhC,GAAkD,WAAW,CAAC,YAAxE,IAAwF,GAArH;AACH;AACJ;AACJ,GAhCS;;AAkCV,EAAA,MAAA,CAAA,cAAA,CAAc,MAAA,CAAA,SAAd,EAAc,sBAAd,EAAkC;SAAlC,eAAA;AACI,aAAO,KAAK,CAAC,WAAN,CAAkB,QAAzB;AACH,KAFiC;oBAAA;;AAAA,GAAlC;;AAYA,EAAA,MAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,QAAP;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,KAAK,KAAL,YAAsB,MAAM,CAAC,WAAjC,EAA8C;AAC1C,UAAI,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,CAAC,QAAN,CAAe,KAAtC,EAA6C;AACzC,QAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAL,CAAW,YAAX,GAA0B,IAA7D;AACH,OAFD,MAGK;AACD,QAAA,KAAK,CAAC,iBAAN,CAAwB,MAAxB,EAAgC,OAAhC,EAAyC,KAAK,KAAL,CAAW,YAApD;AACH;AACJ,KAPD,MAQK;AACD,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AACH;;AAED,WAAO,MAAP;AACH,GAhBD;;AAkBA,EAAA,MAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,QAAI,SAAS,GAAG,IAAI,CAAC,OAAD,CAApB;;AAEA,QAAI,SAAS,KAAK,SAAlB,EAA6B;AACzB,MAAA,SAAS,GAAG,IAAI,CAAC,MAAD,CAAhB;;AAEA,UAAI,SAAS,KAAK,SAAlB,EAA6B;AACzB,QAAA,eAAe,CACX;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,UADjC;AAEI,UAAA,OAAO,EAAE;AAFb,SADW,EAKX,MALW,CAAf;AAOH;AACJ;;AAED,QAAI,SAAJ,EAAe;AACX,UAAI,YAAY,GAAG,KAAnB;;AAEA,UAAI;AACA,aAAK,KAAL,GAAa,MAAM,CAAC,WAAP,CAAmB,KAAnB,CAAyB,SAAzB,CAAb;AACH,OAFD,CAGA,OAAO,CAAP,EAAU;AACN,YAAI,OAAO,SAAP,KAAqB,QAArB,KAAkC,SAAS,KAAK,MAAd,IAAwB,SAAS,KAAK,SAAxE,CAAJ,EAAwF;AACpF,eAAK,KAAL,GAAa,SAAb;AACH,SAFD,MAGK;AACD,UAAA,YAAY,GAAG,IAAf;AACH;AACJ;;AAED,UAAI,YAAJ,EAAkB;AACd,QAAA,eAAe,CACX;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBADjC;AAEI,UAAA,OAAO,EAAE,0BAA0B,SAA1B,GAAsC;AAFnD,SADW,EAKX,MALW,CAAf;AAOH;AACJ;AACJ,GA5CD;;AA8CA,EAAA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,qBAAJ,EAAuB;SAAvB,eAAA;AACI,UAAI,KAAK,MAAL,IAAe,KAAK,MAAL,YAAuB,SAA1C,EAAqD;AACjD,eAAO,KAAK,gBAAL,IAAyB,CAAC,KAAK,MAAL,CAAY,iBAAZ,CAA8B,IAA9B,CAAjC;AACH,OAFD,MAGK;AACD,eAAO,KAAP;AACH;AACJ,KAPsB;oBAAA;;AAAA,GAAvB;AASA,EAAA,MAAA,CAAA,cAAA,CAAI,MAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAP;AACH,KAFe;oBAAA;;AAAA,GAAhB;AAGJ,SAAA,MAAA;AAAC,CAjID,CAA4B,SAA5B,CAAA;;AAAa,OAAA,CAAA,MAAA,GAAA,MAAA;;AAmIb,IAAA,SAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+B,EAAA,SAAA,CAAA,SAAA,EAAA,MAAA,CAAA;;AAA/B,WAAA,SAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AACY,IAAA,KAAA,CAAA,QAAA,GAA0B,EAA1B;;AAsVX;;AAnVW,EAAA,SAAA,CAAA,SAAA,CAAA,oBAAA,GAAR,UAA6B,IAA7B,EAAwC,MAAxC,EAAkF;AAC9E,WAAO,wBAAwB,CAC3B,IAD2B,EAE3B,IAF2B,EAG3B,EAH2B,EAGvB;AACJ,KAAC,KAAK,YAAL,EAJ0B,EAK3B,UAAC,QAAD,EAAiB;AACb,aAAO,CAAC,QAAD,IAAa,QAAQ,KAAK,QAA1B,GAAqC,IAAI,MAAJ,EAArC,GAAoD,IAA3D;AACH,KAP0B,EAQ3B,UAAC,QAAD,EAAmB,SAAnB,EAAuD;AACnD,UAAI,SAAS,IAAI,yBAAyB,CAAC,WAA3C,EAAwD;AACpD,eAAO;AACH,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBAD1B;AAEH,UAAA,OAAO,EAAE,2BAA2B,QAA3B,GAAsC;AAF5C,SAAP;AAIH,OALD,MAMK;AACD,eAAO;AACH,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,qBAD1B;AAEH,UAAA,OAAO,EAAE,kBAAkB,QAAlB,GAA6B;AAFnC,SAAP;AAIH;AACJ,KArB0B,EAsB3B,MAtB2B,CAA/B;AAuBH,GAxBO;;AA0BE,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,SAAK,gBAAL,GAAwB,EAAxB;;AAEA,QAAI,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3B,EAA8B;AAC1B;AACA,UAAI,UAAU,GAAG,KAAK,UAAtB;AAEA,UAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAA,OAAO,CAAC,SAAR,GAAoB,UAAU,CAAC,gBAAX,CAA4B,cAA5B,CAApB;AACA,MAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;;AAEA,UAAI,YAAY,CAAC,+BAAjB,EAAkD;AAC9C;AACA,QAAA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,qBAA1B;AACH;;AAED,cAAQ,KAAK,mBAAb;AACI,aAAK,KAAK,CAAC,mBAAN,CAA0B,MAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,QAA/B;AACA;;AACJ,aAAK,KAAK,CAAC,mBAAN,CAA0B,KAA/B;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,UAA/B;AACA;;AACJ;AACI,UAAA,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,YAA/B;AACA;AATR;;AAYA,UAAI,WAAW,GAAW,CAA1B;;AAEA,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,YAAI,MAAM,CAAC,KAAP,YAAwB,MAAM,CAAC,WAA/B,IAA+C,MAAM,CAAC,KAAP,CAAa,IAAb,IAAqB,KAAK,CAAC,QAAN,CAAe,MAAvF,EAAgG;AAC5F,UAAA,WAAW,IAAI,MAAM,CAAC,KAAP,CAAa,YAA5B;AACH;AACJ;;AAED,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,YAAI,MAAM,CAAC,KAAP,YAAwB,MAAM,CAAC,WAA/B,IAA8C,MAAM,CAAC,KAAP,CAAa,IAAb,IAAqB,KAAK,CAAC,QAAN,CAAe,MAAlF,IAA4F,WAAW,GAAG,CAA9G,EAAiH;AAC7G,cAAI,cAAc,GAAG,MAAM,WAAN,GAAoB,MAAM,CAAC,KAAP,CAAa,YAAtD,CAD6G,CAG7G;;AACA,UAAA,MAAM,CAAC,iBAAD,CAAN,GAA4B,cAA5B;AACH;;AAED,YAAI,cAAc,GAAG,MAAM,CAAC,MAAP,EAArB;;AAEA,YAAI,cAAJ,EAAoB;AAChB,cAAI,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAA/B,IAAoC,MAAM,CAAC,gBAA/C,EAAiE;AAC7D,YAAA,MAAM,CAAC,gBAAP,CAAwB,KAAxB,CAA8B,IAA9B,GAAqC,UAArC;AAEA,YAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,MAAM,CAAC,gBAAlC;AACH;;AAED,UAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,cAA3B;;AAEA,eAAK,gBAAL,CAAsB,IAAtB,CAA2B,MAA3B;AACH;AACJ;;AAED,aAAO,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAA/B,GAAmC,OAAnC,GAA6C,IAApD;AACH,KAzDD,MA0DK;AACD,aAAO,IAAP;AACH;AACJ,GAhES;;AAkEA,EAAA,SAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,UAA2B,SAA3B,EAA4C;AACxC,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,MAAA,MAAM,CAAC,gBAAD,CAAN,CAAyB,SAAzB;AACH;;AAED,WAAO,IAAP;AACH,GANS;;AAQA,EAAA,SAAA,CAAA,SAAA,CAAA,sBAAA,GAAV,YAAA;AACI,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,MAAA,MAAM,CAAC,eAAD,CAAN;AACH;AACJ,GAJS;;AAMV,EAAA,MAAA,CAAA,cAAA,CAAc,SAAA,CAAA,SAAd,EAAc,cAAd,EAA0B;SAA1B,eAAA;AACI,aAAO,IAAP;AACH,KAFyB;oBAAA;;AAAA,GAA1B;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,QAAI,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,UAAI,OAAO,GAAG,EAAd;;AAEA,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;AACD,QAAA,OAAO,CAAC,IAAR,CAAa,MAAM,CAAC,MAAP,EAAb;AACH;;AAED,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,OAArC;AACH;;AAED,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC,EAA+C,KAA/C;AAEA,WAAO,MAAP;AACH,GAhBD;;AAkBA,EAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,OAAf,EAAmC;AAC/B,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,QAAL,CAAc,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC3C,UAAI,KAAK,QAAL,CAAc,CAAd,EAAiB,SAArB,EAAgC;AAC5B,eAAO,KAAK,QAAL,CAAc,CAAd,KAAoB,OAA3B;AACH;AACJ;;AAED,WAAO,KAAP;AACH,GARD;;AAUA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,QAAI,KAAK,UAAL,EAAJ,EAAuB;AACnB,aAAO,IAAP;AACH;;AAED,QAAI,KAAK,gBAAL,IAAyB,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAA5D,EAA+D;AAC3D,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,YAAI,MAAM,CAAC,eAAP,EAAJ,EAA8B;AAC1B,iBAAO,IAAP;AACH;AACJ;AACJ;;AAED,WAAO,KAAP;AACH,GAdD;;AAgBA,EAAA,SAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,QAAI,KAAK,UAAL,EAAJ,EAAuB;AACnB,aAAO,IAAP;AACH;;AAED,QAAI,KAAK,gBAAL,IAAyB,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAA5D,EAA+D;AAC3D,WAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,YAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,YAAI,MAAM,CAAC,kBAAP,EAAJ,EAAiC;AAC7B,iBAAO,IAAP;AACH;AACJ;AACJ;;AAED,WAAO,KAAP;AACH,GAdD;;AAgBA,EAAA,SAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACI,WAAO,KAAK,QAAL,CAAc,MAArB;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,KAAK,QAAL,EAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,2BAAA,GAAA,YAAA;AACI,QAAI,KAAK,eAAL,IAAwB,KAAK,gBAA7B,IAAiD,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAApF,EAAuF;AACnF,aAAO,KAAK,gBAAL,CAAsB,CAAtB,CAAP;AACH,KAFD,MAGK;AACD,aAAO,IAAP;AACH;AACJ,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,YAAA;AACI,QAAI,KAAK,eAAL,IAAwB,KAAK,gBAA7B,IAAiD,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAApF,EAAuF;AACnF,aAAO,KAAK,gBAAL,CAAsB,KAAK,gBAAL,CAAsB,MAAtB,GAA+B,CAArD,CAAP;AACH,KAFD,MAGK;AACD,aAAO,IAAP;AACH;AACJ,GAPD;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,KAAZ,EAAyB;AACrB,WAAO,KAAK,QAAL,CAAc,KAAd,CAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAAuB;AACnB,WAAO,KAAK,WAAL,CAAiB,KAAjB,CAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,WAAP;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,QAAI,IAAI,CAAC,SAAD,CAAJ,IAAmB,IAAvB,EAA6B;AACzB,UAAI,WAAW,GAAG,IAAI,CAAC,SAAD,CAAtB;AAEA,WAAK,QAAL,GAAgB,EAAhB;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,WAAW,CAAC,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,YAAI,MAAM,GAAG,KAAK,oBAAL,CAA0B,WAAW,CAAC,CAAD,CAArC,EAA0C,MAA1C,CAAb;;AAEA,YAAI,MAAJ,EAAY;AACR,eAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB;AACH;AACJ;AACJ;;AAED,SAAK,KAAL,GAAa,KAAK,CAAC,YAAN,CAAmB,IAAI,CAAC,OAAD,CAAvB,EAAkC,KAAK,KAAvC,CAAb;AACH,GAlBD;;AAoBA,EAAA,SAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,eAAe,GAAW,CAA9B;AACA,QAAI,gBAAgB,GAAW,CAA/B;;AAEA,SAAmB,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,QAAxB,EAAmB,EAAA,GAAA,EAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAAkC;AAA7B,UAAI,MAAM,GAAA,EAAA,CAAA,EAAA,CAAV;;AACD,UAAI,OAAO,MAAM,CAAC,KAAd,KAAwB,QAA5B,EAAsC;AAClC,QAAA,eAAe;AAClB,OAFD,MAGK,IAAI,MAAM,CAAC,KAAP,KAAiB,SAArB,EAAgC;AACjC,QAAA,gBAAgB;AACnB;AACJ;;AAED,QAAI,eAAe,GAAG,CAAlB,IAAuB,gBAAgB,GAAG,CAA9C,EAAiD;AAC7C,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,IADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;AACJ,GAvBD;;AAyBA,EAAA,SAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,MAAV,EAAwB;AACpB,QAAI,CAAC,MAAM,CAAC,MAAZ,EAAoB;AAChB,WAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB;;AAEA,MAAA,MAAM,CAAC,SAAP,CAAiB,IAAjB;AACH,KAJD,MAKK;AACD,YAAM,IAAI,KAAJ,CAAU,mDAAV,CAAN;AACH;AACJ,GATD;;AAWA,EAAA,SAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,IAAX,EAA4B;AACxB,QAAI,IAAI,YAAY,MAApB,EAA4B;AACxB,UAAI,SAAS,GAAG,KAAK,QAAL,CAAc,OAAd,CAAsB,IAAtB,CAAhB;;AAEA,UAAI,SAAS,IAAI,CAAjB,EAAoB;AAChB,aAAK,QAAL,CAAc,MAAd,CAAqB,SAArB,EAAgC,CAAhC;;AAEA,QAAA,IAAI,CAAC,SAAL,CAAe,IAAf;AAEA,aAAK,YAAL;AAEA,eAAO,IAAP;AACH;AACJ;;AAED,WAAO,KAAP;AACH,GAhBD;;AAkBA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,WAAR,EAAgC;AAC5B,WAAO,WAAW,YAAY,MAAvB,GAAgC,KAAK,QAAL,CAAc,OAAd,CAAsB,WAAtB,CAAhC,GAAqE,CAAC,CAA7E;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,UAAkB,OAAlB,EAAsC;AAClC,WAAO,KAAK,QAAL,CAAc,OAAd,CAA8B,OAA9B,KAA0C,CAAjD;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,UAAmB,OAAnB,EAAuC;AACnC,WAAO,KAAK,QAAL,CAAc,OAAd,CAA8B,OAA9B,KAA0C,KAAK,QAAL,CAAc,MAAd,GAAuB,CAAxE;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,OAAb,EAAiC;AAC7B,WAAO,KAAK,QAAL,CAAc,OAAd,CAA8B,OAA9B,KAA0C,CAAjD;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,eAAA,GAAA,UAAgB,OAAhB,EAAoC;AAChC,WAAO,KAAK,QAAL,CAAc,OAAd,CAA8B,OAA9B,KAA0C,CAAjD;AACH,GAFD;;AAIA,EAAA,SAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAW,IAArB;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,QAAL,CAAc,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC3C,MAAA,MAAM,GAAG,KAAK,QAAL,CAAc,CAAd,EAAiB,aAAjB,CAA+B,EAA/B,CAAT;;AAEA,UAAI,MAAJ,EAAY;AACR;AACH;AACJ;;AAED,WAAO,MAAP;AACH,GAZD;;AAcA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,OAAJ,EAAS;SAAT,eAAA;AACI,aAAO,KAAK,QAAL,EAAP;AACH,KAFQ;SAIT,aAAU,KAAV,EAAwB;AACpB,WAAK,QAAL,CAAc,KAAd;AACH,KANQ;oBAAA;;AAAA,GAAT;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,eAAA;AACI,aAAO,KAAK,UAAL,EAAP;AACH,KAFU;SAIX,aAAY,KAAZ,EAA2C;AACvC,WAAK,UAAL,CAAgB,KAAhB;AACH,KANU;oBAAA;;AAAA,GAAX;AAQA,EAAA,MAAA,CAAA,cAAA,CAAI,SAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAK,eAAL,EAAP;AACH,KAFe;SAIhB,aAAiB,KAAjB,EAA8B;AAC1B,WAAK,eAAL,CAAqB,KAArB;AACH,KANe;oBAAA;;AAAA,GAAhB;AAOJ,SAAA,SAAA;AAAC,CAvVD,CAA+B,4BAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA;;AAyVb,SAAS,qBAAT,CAA+B,KAA/B,EAA2C;AACvC,MAAI,IAAI,GAAG,KAAK,CAAC,cAAN,EAAX;AACA,MAAI,oBAAoB,GAAI,IAAI,IAAI,IAAI,CAAC,aAAd,GAA+B,IAAI,CAAC,aAApC,GAAoD,YAAY,CAAC,aAA5F;;AAEA,MAAI,oBAAJ,EAA0B;AACtB,IAAA,oBAAoB,CAAC,KAAD,CAApB;AACH;AACJ;;AAED,SAAS,uBAAT,CAAiC,OAAjC,EAAuD,MAAvD,EAAgF;AAC5E,MAAI,IAAI,GAAG,OAAO,CAAC,cAAR,EAAX;AACA,MAAI,sBAAsB,GAAI,IAAI,IAAI,IAAI,CAAC,eAAd,GAAiC,IAAI,CAAC,eAAtC,GAAwD,YAAY,CAAC,eAAlG;AAEA,SAAO,sBAAsB,IAAI,IAA1B,GAAiC,sBAAsB,CAAC,OAAD,EAAU,MAAV,CAAvD,GAA2E,KAAlF;AACH;;AAED,SAAS,uBAAT,CAAiC,MAAjC,EAA+C;AAC3C,MAAI,IAAI,GAAG,MAAM,CAAC,MAAP,CAAc,cAAd,EAAX;AACA,MAAI,sBAAsB,GAAI,IAAI,IAAI,IAAI,CAAC,eAAd,GAAiC,IAAI,CAAC,eAAtC,GAAwD,YAAY,CAAC,eAAlG;;AAEA,MAAI,sBAAJ,EAA4B;AACxB,QAAI,MAAM,CAAC,mBAAP,EAAJ,EAAkC;AAC9B,MAAA,sBAAsB,CAAC,MAAD,CAAtB;AACH;AACJ;AACJ;;AAED,SAAS,4BAAT,CAAsC,MAAtC,EAA8D,UAA9D,EAAiF;AAC7E,MAAI,IAAI,GAAG,MAAM,CAAC,MAAP,CAAc,cAAd,EAAX;AACA,MAAI,2BAA2B,GAAI,IAAI,IAAI,IAAI,CAAC,oBAAd,GAAsC,IAAI,CAAC,oBAA3C,GAAkE,YAAY,CAAC,oBAAjH;;AAEA,MAAI,2BAAJ,EAAiC;AAC7B,IAAA,2BAA2B,CAAC,MAAD,EAAS,UAAT,CAA3B;AACH;AACJ;;AAED,SAAS,2BAAT,CAAqC,KAArC,EAAiD;AAC7C,MAAI,IAAI,GAAG,KAAK,CAAC,cAAN,EAAX;AACA,MAAI,0BAA0B,GAAI,IAAI,IAAI,IAAI,CAAC,mBAAd,GAAqC,IAAI,CAAC,mBAA1C,GAAgE,YAAY,CAAC,mBAA9G;;AAEA,MAAI,0BAAJ,EAAgC;AAC5B,IAAA,0BAA0B,CAAC,KAAD,CAA1B;AACH;AACJ;;AAED,SAAS,kCAAT,CAA4C,OAA5C,EAAkE,kBAAlE,EAAoG;AAAlC,MAAA,kBAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,kBAAA,GAAA,IAAA;AAAkC;;AAChG,MAAI,WAAW,GAAG,OAAO,CAAC,cAAR,EAAlB;;AAEA,MAAI,kBAAJ,EAAwB;AACpB,IAAA,WAAW,CAAC,YAAZ;AACH;;AAED,MAAI,IAAI,GAAG,WAAX;AACA,MAAI,iCAAiC,GAAI,IAAI,IAAI,IAAI,CAAC,0BAAd,GAA4C,IAAI,CAAC,0BAAjD,GAA8E,YAAY,CAAC,0BAAnI;;AAEA,MAAI,iCAAiC,IAAI,IAAzC,EAA+C;AAC3C,IAAA,iCAAiC,CAAC,OAAD,CAAjC;AACH;AACJ;;AAED,SAAS,sBAAT,CAAgC,OAAhC,EAAsD,IAAtD,EAAiE,MAAjE,EAA4G;AACxG,MAAI,IAAI,GAAG,OAAO,CAAC,cAAR,EAAX;AACA,MAAI,qBAAqB,GAAI,IAAI,IAAI,IAAI,CAAC,cAAd,GAAgC,IAAI,CAAC,cAArC,GAAsD,YAAY,CAAC,cAA/F;;AAEA,MAAI,qBAAqB,IAAI,IAA7B,EAAmC;AAC/B,IAAA,qBAAqB,CAAC,OAAD,EAAU,IAAV,EAAgB,MAAhB,CAArB;AACH;AACJ;;AAED,SAAS,qBAAT,CAA+B,MAA/B,EAA+C,IAA/C,EAA0D,MAA1D,EAAqG;AACjG,MAAI,IAAI,GAAG,MAAM,CAAC,MAAP,GAAgB,MAAM,CAAC,MAAP,CAAc,cAAd,EAAhB,GAAiE,IAA5E;AACA,MAAI,oBAAoB,GAAI,IAAI,IAAI,IAAI,CAAC,aAAd,GAA+B,IAAI,CAAC,aAApC,GAAoD,YAAY,CAAC,aAA5F;;AAEA,MAAI,oBAAoB,IAAI,IAA5B,EAAkC;AAC9B,IAAA,oBAAoB,CAAC,MAAD,EAAS,IAAT,EAAe,MAAf,CAApB;AACH;AACJ;;AAED,SAAS,eAAT,CAAyB,KAAzB,EAA6D,MAA7D,EAAuG;AACnG,MAAI,MAAJ,EAAY;AACR,IAAA,MAAM,CAAC,IAAP,CAAY,KAAZ;AACH;;AAED,MAAI,YAAY,CAAC,YAAb,IAA6B,IAAjC,EAAuC;AACnC,IAAA,YAAY,CAAC,YAAb,CAA0B,KAA1B;AACH;AACJ;;AAOD,IAAA,oBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAmD,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAkD/C,WAAA,oBAAA,GAAA;AAAA,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAGI,IAAA,KAAI,CAAC,iBAAL,GAAyB,IAAI,gBAAJ,CAAqB,KAArB,CAAzB;;AACH;;AAnDS,EAAA,oBAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,OAAO,GAAG,MAAA,CAAA,SAAA,CAAM,cAAN,CAAoB,IAApB,CAAoB,IAApB,CAAd;;AAEA,QAAI,eAAe,GAAG,KAAK,iBAAL,CAAuB,MAAvB,CAA8B,KAAK,UAAL,CAAgB,OAAhB,CAAwB,kBAAtD,EAA0E,KAA1E,CAAtB;;AAEA,QAAI,eAAJ,EAAqB;AACjB,MAAA,KAAK,CAAC,WAAN,CACI,OADJ,EAEI,KAAK,CAAC,gBAAN,CACI,KAAK,UADT,EAEI;AACI,QAAA,OAAO,EAAE,KAAK,UAAL,CAAgB,mBAAhB,CAAoC,KAAK,UAAL,CAAgB,OAAhB,CAAwB,OAA5D,CADb;AAEI,QAAA,aAAa,EAAE,IAFnB;AAGI,QAAA,SAAS,EAAE;AAHf,OAFJ,EAOI,KAAK,CAAC,WAAN,CAAkB,UAPtB,CAFJ;AAUA,MAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAA2B,eAA3B;AACH;;AAED,QAAI,KAAK,aAAT,EAAwB;AACpB,aAAO,OAAP;AACH,KAFD,MAGK;AACD,aAAO,OAAO,CAAC,QAAR,CAAiB,MAAjB,GAA0B,CAA1B,GAA8B,OAA9B,GAAwC,IAA/C;AACH;AACJ,GAzBS;;AA2BA,EAAA,oBAAA,CAAA,SAAA,CAAA,oBAAA,GAAV,YAAA;AACI,QAAI,KAAK,mBAAL,IAA4B,CAAhC,EAAmC;AAC/B,aAAO,KAAP;AACH,KAFD,MAGK,IAAI,KAAK,mBAAL,IAA4B,CAAhC,EAAmC;AACpC,aAAO,KAAK,iBAAL,CAAuB,cAAvB,IAAyC,IAAzC,IAAiD,CAAC,KAAK,UAAL,CAAgB,OAAhB,CAAwB,6BAAjF;AACH,KAFI,MAGA;AACD,aAAO,KAAK,iBAAL,CAAuB,cAAvB,IAAyC,IAAhD;AACH;AACJ,GAVS;;AAYV,EAAA,MAAA,CAAA,cAAA,CAAc,oBAAA,CAAA,SAAd,EAAc,qBAAd,EAAiC;SAAjC,eAAA;AACI,aAAO,KAAK,iBAAL,CAAuB,mBAA9B;AACH,KAFgC;oBAAA;;AAAA,GAAjC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,oBAAA,CAAA,SAAd,EAAc,eAAd,EAA2B;SAA3B,eAAA;AACI,aAAO,KAAP;AACH,KAF0B;oBAAA;;AAAA,GAA3B;;AAUA,EAAA,oBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,iBAAL,CAAuB,MAAvB,EAArC;AAEA,WAAO,MAAP;AACH,GAND;;AAQA,EAAA,oBAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,MAApC;AACH,GAFD;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,KAAZ,EAAyB;AACrB,QAAI,KAAK,IAAI,CAAT,IAAc,KAAK,GAAG,KAAK,cAAL,EAA1B,EAAiD;AAC7C,aAAO,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,KAA7B,CAAP;AACH,KAFD,MAGK;AACD,MAAA,MAAA,CAAA,SAAA,CAAM,WAAN,CAAiB,IAAjB,CAAiB,IAAjB,EAAkB,KAAlB;AACH;AACJ,GAPD;;AASA,EAAA,oBAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,EAAd,EAAwB;AACpB,QAAI,MAAM,GAAW,KAAK,iBAAL,CAAuB,aAAvB,CAAqC,EAArC,CAArB;;AAEA,WAAO,MAAM,GAAG,MAAH,GAAY,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,EAApB,CAAzB;AACH,GAJD;;AAMA,EAAA,oBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;;AAEA,SAAK,iBAAL,CAAuB,KAAvB,CAA6B,IAAI,CAAC,SAAD,CAAjC,EAA8C,MAA9C;AACH,GAJD;;AAMA,EAAA,oBAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,iBAAT,EAA4B;AACxB,WAAK,iBAAL,CAAuB,kBAAvB,CAA0C,OAA1C;AACH;AACJ,GAND;;AAQA,EAAA,oBAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,OAAd,EAAkC;AAC9B,WAAO,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,IAAnB,EAAoB,OAApB,KAAgC,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,MAA7B,IAAuC,CAA9E;AACH,GAFD;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,MAAV,EAAwB;AACpB,SAAK,iBAAL,CAAuB,SAAvB,CAAiC,MAAjC;AACH,GAFD;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX;;AAEA,SAAK,iBAAL,CAAuB,KAAvB;AACH,GAJD;;AAMA,EAAA,oBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB,EAAqB,MAArB,CAA4B,KAAK,iBAAL,CAAuB,YAAvB,EAA5B,CAAP;AACH,GAFD;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,sBAAA,GAAA,YAAA;AACI,WAAO,MAAA,CAAA,SAAA,CAAM,sBAAN,CAA4B,IAA5B,CAA4B,IAA5B,EAA+B,MAA/B,CAAsC,KAAK,iBAAL,CAAuB,sBAAvB,EAAtC,CAAP;AACH,GAFD;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,kBAAA,GAAA,YAAA;AACI,QAAI,KAAK,iBAAL,CAAuB,mBAAvB,IAA8C,CAAlD,EAAqD;AACjD,aAAO,MAAA,CAAA,SAAA,CAAM,kBAAN,CAAwB,IAAxB,CAAwB,IAAxB,CAAP;AACH,KAFD,MAGK;AACD,UAAI,KAAK,iBAAL,CAAuB,KAAvB,CAA6B,MAA7B,IAAuC,CAA3C,EAA8C;AAC1C,eAAO,KAAK,iBAAL,CAAuB,cAAvB,IAAyC,IAAzC,IAAiD,CAAC,KAAK,UAAL,CAAgB,OAAhB,CAAwB,6BAAjF;AACH,OAFD,MAGK;AACD,eAAO,KAAK,iBAAL,CAAuB,cAAvB,IAAyC,IAAhD;AACH;AACJ;AACJ,GAZD;;AAcA,EAAA,MAAA,CAAA,cAAA,CAAI,oBAAA,CAAA,SAAJ,EAAI,cAAJ,EAAgB;SAAhB,eAAA;AACI,aAAO,KAAP;AACH,KAFe;oBAAA;;AAAA,GAAhB;AAGJ,SAAA,oBAAA;AAAC,CAxID,CAAmD,SAAnD,CAAA;;AAAsB,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AA0ItB,IAAA,YAAA;AAAA;AAAA,YAAA;AAaI,WAAA,YAAA,GAAA;AAZQ,SAAA,MAAA,GAAsC,EAAtC;AAaJ,SAAK,KAAL;AACH;;AAZO,EAAA,YAAA,CAAA,SAAA,CAAA,oBAAA,GAAR,UAA6B,QAA7B,EAA6C;AACzC,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,MAAL,CAAY,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,UAAI,KAAK,MAAL,CAAY,CAAZ,EAAe,QAAf,KAA4B,QAAhC,EAA0C;AACtC,eAAO,KAAK,MAAL,CAAY,CAAZ,CAAP;AACH;AACJ;;AAED,WAAO,IAAP;AACH,GARO;;AAcR,EAAA,YAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,SAAK,MAAL,GAAc,EAAd;AACH,GAFD;;AAMA,EAAA,YAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,QAAb,EAA+B,cAA/B,EAAsD;AAClD,QAAI,gBAAgB,GAAG,KAAK,oBAAL,CAA0B,QAA1B,CAAvB;;AAEA,QAAI,gBAAgB,IAAI,IAAxB,EAA8B;AAC1B,MAAA,gBAAgB,CAAC,cAAjB,GAAkC,cAAlC;AACH,KAFD,MAGK;AACD,MAAA,gBAAgB,GAAG;AACf,QAAA,QAAQ,EAAE,QADK;AAEf,QAAA,cAAc,EAAE;AAFD,OAAnB;;AAKA,WAAK,MAAL,CAAY,IAAZ,CAAiB,gBAAjB;AACH;AACJ,GAdD;;AAgBA,EAAA,YAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,QAAf,EAA+B;AAC3B,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,MAAL,CAAY,MAAhC,EAAwC,CAAC,EAAzC,EAA6C;AACzC,UAAI,KAAK,MAAL,CAAY,CAAZ,EAAe,QAAf,KAA4B,QAAhC,EAA0C;AACtC,aAAK,MAAL,CAAY,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB;;AAEA;AACH;AACJ;AACJ,GARD;;AAUA,EAAA,YAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,QAAf,EAA+B;AAC3B,QAAI,gBAAgB,GAAG,KAAK,oBAAL,CAA0B,QAA1B,CAAvB;AAEA,WAAO,gBAAgB,GAAG,gBAAgB,CAAC,cAAjB,EAAH,GAAuC,IAA9D;AACH,GAJD;;AAMA,EAAA,YAAA,CAAA,SAAA,CAAA,YAAA,GAAA,YAAA;AACI,WAAO,KAAK,MAAL,CAAY,MAAnB;AACH,GAFD;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,SAAA,GAAA,UAAU,KAAV,EAAuB;AACnB,WAAO,KAAK,MAAL,CAAY,KAAZ,CAAP;AACH,GAFD;;AAGJ,SAAA,YAAA;AAAC,CA9DD,EAAA;;AAAsB,OAAA,CAAA,YAAA,GAAA,YAAA;;AAgEtB,IAAA,mBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAyC,EAAA,SAAA,CAAA,mBAAA,EAAA,MAAA,CAAA;;AAAzC,WAAA,mBAAA,GAAA;;AAqBC;;AApBG,EAAA,mBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,SAAK,KAAL;AAEA,SAAK,YAAL,CAAkB,WAAlB,EAA+B,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAhE;AACA,SAAK,YAAL,CAAkB,WAAlB,EAA+B,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAhE;AACA,SAAK,YAAL,CAAkB,eAAlB,EAAmC,YAAA;AAAQ,aAAO,IAAI,aAAJ,EAAP;AAA6B,KAAxE;AACA,SAAK,YAAL,CAAkB,SAAlB,EAA6B,YAAA;AAAQ,aAAO,IAAI,OAAJ,EAAP;AAAuB,KAA5D;AACA,SAAK,YAAL,CAAkB,OAAlB,EAA2B,YAAA;AAAQ,aAAO,IAAI,KAAJ,EAAP;AAAqB,KAAxD;AACA,SAAK,YAAL,CAAkB,UAAlB,EAA8B,YAAA;AAAQ,aAAO,IAAI,QAAJ,EAAP;AAAwB,KAA9D;AACA,SAAK,YAAL,CAAkB,OAAlB,EAA2B,YAAA;AAAQ,aAAO,IAAI,KAAJ,EAAP;AAAqB,KAAxD;AACA,SAAK,YAAL,CAAkB,SAAlB,EAA6B,YAAA;AAAQ,aAAO,IAAI,OAAJ,EAAP;AAAuB,KAA5D;AACA,SAAK,YAAL,CAAkB,WAAlB,EAA+B,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAhE;AACA,SAAK,YAAL,CAAkB,WAAlB,EAA+B,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAhE;AACA,SAAK,YAAL,CAAkB,YAAlB,EAAgC,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAjE;AACA,SAAK,YAAL,CAAkB,YAAlB,EAAgC,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAjE;AACA,SAAK,YAAL,CAAkB,YAAlB,EAAgC,YAAA;AAAQ,aAAO,IAAI,SAAJ,EAAP;AAAyB,KAAjE;AACA,SAAK,YAAL,CAAkB,cAAlB,EAAkC,YAAA;AAAQ,aAAO,IAAI,WAAJ,EAAP;AAA2B,KAArE;AACA,SAAK,YAAL,CAAkB,iBAAlB,EAAqC,YAAA;AAAQ,aAAO,IAAI,cAAJ,EAAP;AAA8B,KAA3E;AACA,SAAK,YAAL,CAAkB,cAAlB,EAAkC,YAAA;AAAQ,aAAO,IAAI,WAAJ,EAAP;AAA2B,KAArE;AACH,GAnBD;;AAoBJ,SAAA,mBAAA;AAAC,CArBD,CAAyC,YAAzC,CAAA;;AAAa,OAAA,CAAA,mBAAA,GAAA,mBAAA;;AAuBb,IAAA,kBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAwC,EAAA,SAAA,CAAA,kBAAA,EAAA,MAAA,CAAA;;AAAxC,WAAA,kBAAA,GAAA;;AASC;;AARG,EAAA,kBAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACI,SAAK,KAAL;AAEA,SAAK,YAAL,CAAkB,aAAa,CAAC,YAAhC,EAA8C,YAAA;AAAQ,aAAO,IAAI,aAAJ,EAAP;AAA6B,KAAnF;AACA,SAAK,YAAL,CAAkB,YAAY,CAAC,YAA/B,EAA6C,YAAA;AAAQ,aAAO,IAAI,YAAJ,EAAP;AAA4B,KAAjF;AACA,SAAK,YAAL,CAAkB,cAAc,CAAC,YAAjC,EAA+C,YAAA;AAAQ,aAAO,IAAI,cAAJ,EAAP;AAA8B,KAArF;AACA,SAAK,YAAL,CAAkB,sBAAsB,CAAC,YAAzC,EAAuD,YAAA;AAAQ,aAAO,IAAI,sBAAJ,EAAP;AAAsC,KAArG;AACH,GAPD;;AAQJ,SAAA,kBAAA;AAAC,CATD,CAAwC,YAAxC,CAAA;;AAAa,OAAA,CAAA,kBAAA,GAAA,kBAAA;;AAgBb,IAAA,YAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAkC,EAAA,SAAA,CAAA,YAAA,EAAA,MAAA,CAAA;;AAAlC,WAAA,YAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAsDY,IAAA,KAAA,CAAA,aAAA,GAAyB,cAAzB;AACA,IAAA,KAAA,CAAA,aAAA,GAA8B,IAA9B;AA8DR,IAAA,KAAA,CAAA,eAAA,GAAgF,IAAhF;AACA,IAAA,KAAA,CAAA,eAAA,GAA4C,IAA5C;AACA,IAAA,KAAA,CAAA,0BAAA,GAA6D,IAA7D;AACA,IAAA,KAAA,CAAA,aAAA,GAAwC,IAAxC;AACA,IAAA,KAAA,CAAA,oBAAA,GAA8E,IAA9E;AACA,IAAA,KAAA,CAAA,mBAAA,GAA8C,IAA9C;AACA,IAAA,KAAA,CAAA,cAAA,GAAyG,IAAzG;AACA,IAAA,KAAA,CAAA,aAAA,GAAmG,IAAnG;AAEA,IAAA,KAAA,CAAA,OAAA,GAA+B,IAAI,UAAU,CAAC,OAAf,CAAuB,CAAvB,EAA0B,CAA1B,CAA/B;AAGA,IAAA,KAAA,CAAA,UAAA,GAAsB,KAAtB;;AAqJH;;AA5PG,EAAA,MAAA,CAAA,cAAA,CAAW,YAAX,EAAW,iBAAX,EAA0B;SAA1B,eAAA;AACI,YAAM,IAAI,KAAJ,CAAU,wGAAV,CAAN;AACH,KAFyB;SAI1B,aAA2B,KAA3B,EAA0D;AACtD,YAAM,IAAI,KAAJ,CAAU,wGAAV,CAAN;AACH,KANyB;oBAAA;;AAAA,GAA1B;;AAQO,EAAA,YAAA,CAAA,aAAA,GAAP,UAAqB,IAArB,EAAiC;AAC7B,QAAI,MAAM,GAA8B;AACpC,MAAA,UAAU,EAAE;AADwB,KAAxC;;AAIA,QAAI,YAAY,CAAC,iBAAjB,EAAoC;AAChC,MAAA,YAAY,CAAC,iBAAb,CAA+B,IAA/B,EAAqC,MAArC;AACH,KAFD,MAGK,IAAI,MAAM,CAAC,YAAD,CAAV,EAA0B;AAC3B;AACA,MAAA,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,YAAD,CAAN,GAAuB,MAAvB,CAA8B,IAA9B,CAApB;AACA,MAAA,MAAM,CAAC,UAAP,GAAoB,IAApB;AACH,KAJI,MAKA;AACD,MAAA,OAAO,CAAC,IAAR,CAAa,+GAAb;AACH;;AAED,WAAO,MAAP;AACH,GAlBM;;AAuBC,EAAA,YAAA,CAAA,SAAA,CAAA,kBAAA,GAAR,YAAA;AACI,QAAI,KAAK,kBAAT,EAA6B;AACzB,aAAO,IAAP;AACH,KAFD,MAGK;AACD,UAAI,kBAAkB,GAClB,CAAC,KAAK,OAAN,IACA,CAAC,KAAK,OAAL,CAAa,OADd,IAEC,YAAY,CAAC,cAAb,CAA4B,KAA5B,GAAoC,KAAK,OAAL,CAAa,KAFlD,IAGC,YAAY,CAAC,cAAb,CAA4B,KAA5B,IAAqC,KAAK,OAAL,CAAa,KAAlD,IAA2D,YAAY,CAAC,cAAb,CAA4B,KAA5B,GAAoC,KAAK,OAAL,CAAa,KAJjH;AAMA,aAAO,CAAC,kBAAR;AACH;AACJ,GAbO;;AAeE,EAAA,YAAA,CAAA,SAAA,CAAA,8BAAA,GAAV,YAAA;AACI,WAAO,MAAP;AACH,GAFS;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,cAAA,GAAV,YAAA;AACI,QAAI,eAAe,GAAG,MAAA,CAAA,SAAA,CAAM,cAAN,CAAoB,IAApB,CAAoB,IAApB,CAAtB;;AAEA,QAAI,YAAY,CAAC,+BAAjB,EAAkD;AAC9C;AACA;AACA;AACA,MAAA,eAAe,CAAC,KAAhB,CAAsB,SAAtB,GAAkC,IAAlC;AACH;;AAED,WAAO,eAAP;AACH,GAXS;;AAaA,EAAA,YAAA,CAAA,SAAA,CAAA,gBAAA,GAAV,YAAA;AACI,WAAO,IAAP;AACH,GAFS;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACI,WAAO,IAAI,MAAM,CAAC,iBAAX,CACH,KAAK,CAAC,OAAN,CAAc,OADX,EAEH,KAAK,CAAC,OAAN,CAAc,OAFX,EAGH,KAAK,CAAC,OAAN,CAAc,OAHX,EAIH,KAAK,CAAC,OAAN,CAAc,OAJX,CAAP;AAKH,GANS;;AAQV,EAAA,MAAA,CAAA,cAAA,CAAc,YAAA,CAAA,SAAd,EAAc,eAAd,EAA2B;SAA3B,eAAA;AACI,aAAO,IAAP;AACH,KAF0B;oBAAA;;AAAA,GAA3B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,YAAA,CAAA,SAAd,EAAc,oBAAd,EAAgC;SAAhC,eAAA;AACI,aAAO,KAAP;AACH,KAF+B;oBAAA;;AAAA,GAAhC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,YAAA,CAAA,SAAd,EAAc,kBAAd,EAA8B;SAA9B,eAAA;AACI,aAAO,KAAK,UAAL,CAAgB,YAAhB,IAAgC,KAAK,UAAL,CAAgB,YAAhB,CAA6B,gBAApE;AACH,KAF6B;oBAAA;;AAAA,GAA9B;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,YAAA,CAAA,SAAd,EAAc,eAAd,EAA2B;SAA3B,eAAA;AACI,aAAO,IAAP;AACH,KAF0B;oBAAA;;AAAA,GAA3B;;AAkBA,EAAA,YAAA,CAAA,SAAA,CAAA,eAAA,GAAA,YAAA;AACI,WAAO,cAAP;AACH,GAFD;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACI,QAAI,MAAM,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAb;;AAEA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,oDAArC;;AAEA,QAAI,CAAC,KAAK,kBAAN,IAA4B,KAAK,OAArC,EAA8C;AAC1C,MAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,SAA1B,EAAqC,KAAK,OAAL,CAAa,QAAb,EAArC;AACH;;AAED,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,cAA1B,EAA0C,KAAK,YAA/C;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAK,IAAvC;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,KAAK,KAAxC;AAEA,WAAO,MAAP;AACH,GAdD;;AAgBA,EAAA,YAAA,CAAA,SAAA,CAAA,0BAAA,GAAA,UAA2B,OAA3B,EAAqD;AACjD,IAAA,MAAA,CAAA,SAAA,CAAM,0BAAN,CAAgC,IAAhC,CAAgC,IAAhC,EAAiC,OAAjC;;AAEA,QAAI,KAAK,aAAL,IAAsB,cAA1B,EAA0C;AACtC,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,eADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH;;AAED,QAAI,CAAC,KAAK,kBAAN,IAA4B,CAAC,KAAK,OAAtC,EAA+C;AAC3C,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,kBADjC;AAEI,QAAA,OAAO,EAAE;AAFb,OAFJ;AAMH,KAPD,MAQK,IAAI,CAAC,KAAK,kBAAL,EAAL,EAAgC;AACjC,MAAA,OAAO,CAAC,UAAR,CACI,IADJ,EAEI;AACI,QAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,sBADjC;AAEI,QAAA,OAAO,EAAE,iCAAiC,KAAK,OAAtC,GAAgD,4DAAhD,GAA+G,YAAY,CAAC;AAFzI,OAFJ;AAMH;AACJ,GA5BD;;AA8BA,EAAA,YAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAiB,MAAjB,EAA4D;AACxD,SAAK,aAAL,GAAqB,IAArB;AAEA,SAAK,aAAL,GAAqB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAArB;AACA,SAAK,KAAL,GAAa,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,OAAD,CAAzB,CAAb;AAEN,QAAI,MAAM,GAAG,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,MAAD,CAAzB,CAAb;;AAEM,QAAI,MAAM,IAAI,OAAO,MAAP,KAAkB,QAAhC,EAA0C;AACtC,UAAI;AACA,aAAK,IAAL,GAAY,MAAZ;AACH,OAFD,CAGA,OAAO,CAAP,EAAU;AACN,QAAA,eAAe,CACX;AACI,UAAA,KAAK,EAAE,KAAK,CAAC,eAAN,CAAsB,oBADjC;AAEI,UAAA,OAAO,EAAE,CAAC,CAAC;AAFf,SADW,EAKX,MALW,CAAf;AAOH;AACJ;;AAED,SAAK,OAAL,GAAe,UAAU,CAAC,OAAX,CAAmB,KAAnB,CAAyB,IAAI,CAAC,SAAD,CAA7B,EAA0C,MAA1C,CAAf;AAEA,SAAK,YAAL,GAAoB,KAAK,CAAC,cAAN,CAAqB,IAAI,CAAC,cAAD,CAAzB,CAApB;AAEA,QAAI,eAAe,GAAG,qBAAqB,CACvC,IADuC,EAEvC,IAAI,CAAC,UAAD,CAFmC,EAGvC,CAAC,KAAK,YAAL,EAHsC,EAIvC,MAJuC,CAA3C;;AAMA,QAAI,eAAJ,EAAqB;AACjB,WAAK,aAAL,GAAqB,IAAI,YAAJ,EAArB;;AACA,WAAK,aAAL,CAAmB,OAAnB,CAA2B,eAA3B;AACH;;AAED,IAAA,MAAA,CAAA,SAAA,CAAM,KAAN,CAAW,IAAX,CAAW,IAAX,EAAY,IAAZ,EAAkB,MAAlB;AACH,GAvCD;;AAyCA,EAAA,YAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,MAAP,EAA2B;AACvB,QAAI,YAAJ;;AAEA,QAAI,KAAK,cAAL,MAAyB,KAAK,aAAlC,EAAiD;AAC7C,WAAK,aAAL,CAAmB,UAAnB,GAAgC,KAAK,UAArC;AAEA,MAAA,YAAY,GAAG,KAAK,aAAL,CAAmB,MAAnB,EAAf;AACH,KAJD,MAKK;AACD,MAAA,YAAY,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,CAAf;;AAEA,UAAI,YAAJ,EAAkB;AACd,QAAA,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,iBAAjC,CAA3B,EADc,CAGd;AACA;AACA;AACA;AACA;;AACA,YAAI,MAAM,CAAC,cAAP,CAAsB,qBAA1B,EAAiD;AAC7C,UAAA,YAAY,CAAC,QAAb,GAAwB,CAAxB;AACH;;AAED,YAAI,CAAC,KAAK,CAAC,aAAN,CAAoB,KAAK,KAAzB,CAAL,EAAsC;AAClC,UAAA,YAAY,CAAC,YAAb,CAA0B,YAA1B,EAAwC,KAAK,KAA7C;AACH;AACJ;AACJ;;AAED,QAAI,MAAJ,EAAY;AACR,MAAA,MAAM,CAAC,WAAP,CAAmB,YAAnB;AAEA,WAAK,YAAL;AACH;;AAED,WAAO,YAAP;AACH,GApCD;;AAsCA,EAAA,YAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,eAAb,EAA4C;AAA/B,QAAA,eAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,eAAA,GAAA,IAAA;AAA+B;;AACxC,IAAA,MAAA,CAAA,SAAA,CAAM,YAAN,CAAkB,IAAlB,CAAkB,IAAlB,EAAmB,eAAnB;;AAEA,QAAI,YAAY,CAAC,+BAAb,IAAgD,KAAK,UAAL,EAApD,EAAuE;AACnE,UAAI,IAAI,GAAG,KAAK,eAAhB;AACA,UAAI,OAAO,GAAG,KAAK,UAAL,CAAgB,mBAAhB,CAAoC,KAAK,CAAC,OAAN,CAAc,OAAlD,CAAd;AAEA,WAAK,gBAAL,EAAuB,IAAI,CAAC,YAAL,GAAoB,OAA3C;AACH;AACJ,GATD;;AAWA,EAAA,YAAA,CAAA,SAAA,CAAA,cAAA,GAAA,YAAA;AACI,WAAO,MAAA,CAAA,SAAA,CAAM,cAAN,CAAoB,IAApB,CAAoB,IAApB,KAA0B,CAAC,KAAK,kBAAL,EAAlC;AACH,GAFD;;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,YAAA,CAAA,SAAJ,EAAI,qBAAJ,EAAuB;SAAvB,eAAA;AACI,aAAO,KAAP;AACH,KAFsB;oBAAA;;AAAA,GAAvB;AAlRe,EAAA,YAAA,CAAA,cAAA,GAAqC,IAAI,UAAU,CAAC,OAAf,CAAuB,CAAvB,EAA0B,CAA1B,CAArC;AAER,EAAA,YAAA,CAAA,8BAAA,GAA0C,IAA1C;AACA,EAAA,YAAA,CAAA,+BAAA,GAA2C,KAA3C;AACA,EAAA,YAAA,CAAA,mCAAA,GAA+C,IAA/C;AACA,EAAA,YAAA,CAAA,4BAAA,GAAwC,KAAxC;AACA,EAAA,YAAA,CAAA,qBAAA,GAAiC,KAAjC;AACA,EAAA,YAAA,CAAA,uBAAA,GAAmC,KAAnC;AACA,EAAA,YAAA,CAAA,yBAAA,GAAqC,IAArC;AACA,EAAA,YAAA,CAAA,4BAAA,GAAwC,IAAxC;AAES,EAAA,YAAA,CAAA,mBAAA,GAAsB,IAAI,mBAAJ,EAAtB;AACA,EAAA,YAAA,CAAA,kBAAA,GAAqB,IAAI,kBAAJ,EAArB;AAET,EAAA,YAAA,CAAA,eAAA,GAAgF,IAAhF;AACA,EAAA,YAAA,CAAA,eAAA,GAA4C,IAA5C;AACA,EAAA,YAAA,CAAA,0BAAA,GAA6D,IAA7D;AACA,EAAA,YAAA,CAAA,aAAA,GAAwC,IAAxC;AACA,EAAA,YAAA,CAAA,oBAAA,GAA8E,IAA9E;AACA,EAAA,YAAA,CAAA,mBAAA,GAA8C,IAA9C;AACA,EAAA,YAAA,CAAA,cAAA,GAAyG,IAAzG;AACA,EAAA,YAAA,CAAA,aAAA,GAAmG,IAAnG;AACA,EAAA,YAAA,CAAA,YAAA,GAA6D,IAA7D;AACA,EAAA,YAAA,CAAA,iBAAA,GAA+E,IAA/E;AA8PX,SAAA,YAAA;AAAC,CAtRD,CAAkC,oBAAlC,CAAA;;AAAa,OAAA,CAAA,YAAA,GAAA,YAAA;;AAwRb,IAAA,kBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAiC,EAAA,SAAA,CAAA,kBAAA,EAAA,MAAA,CAAA;;AAAjC,WAAA,kBAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAsBI,IAAA,KAAA,CAAA,aAAA,GAAyB,KAAzB;;AAaH;;AAlCa,EAAA,kBAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACI,WAAO,IAAI,MAAM,CAAC,iBAAX,CACH,KAAK,aAAL,GAAqB,KAAK,CAAC,OAAN,CAAc,IAAnC,GAA0C,KAAK,CAAC,OAAN,CAAc,OADrD,EAEH,KAAK,CAAC,OAAN,CAAc,OAFX,EAGH,KAAK,aAAL,GAAqB,KAAK,CAAC,OAAN,CAAc,IAAnC,GAA0C,KAAK,CAAC,OAAN,CAAc,OAHrD,EAIH,KAAK,CAAC,OAAN,CAAc,OAJX,CAAP;AAKH,GANS;;AAQV,EAAA,MAAA,CAAA,cAAA,CAAc,kBAAA,CAAA,SAAd,EAAc,oBAAd,EAAgC;SAAhC,eAAA;AACI,aAAO,IAAP;AACH,KAF+B;oBAAA;;AAAA,GAAhC;AAIA,EAAA,MAAA,CAAA,cAAA,CAAc,kBAAA,CAAA,SAAd,EAAc,cAAd,EAA0B;SAA1B,eAAA;AACI,UAAI,KAAK,aAAT,EAAwB;AACpB,eAAO,KAAK,CAAC,cAAN,CAAqB,OAA5B;AACH,OAFD,MAGK;AACD,eAAO,KAAK,UAAL,CAAgB,OAAhB,CAAwB,QAAxB,CAAiC,KAAjC,GAAyC,KAAK,UAAL,CAAgB,OAAhB,CAAwB,QAAxB,CAAiC,KAA1E,GAAkF,KAAK,CAAC,cAAN,CAAqB,QAA9G;AACH;AACJ,KAPyB;oBAAA;;AAAA,GAA1B;;AAWA,EAAA,kBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,MAAP,EAA2B;AACvB,QAAI,YAAY,GAAG,MAAA,CAAA,SAAA,CAAM,MAAN,CAAY,IAAZ,CAAY,IAAZ,EAAa,MAAb,CAAnB;;AACA,IAAA,YAAY,CAAC,YAAb,CAA0B,WAA1B,EAAuC,QAAvC;AACA,IAAA,YAAY,CAAC,eAAb,CAA6B,UAA7B;AAEA,WAAO,YAAP;AACH,GAND;;AAQA,EAAA,kBAAA,CAAA,SAAA,CAAA,uBAAA,GAAA,YAAA;AACI,WAAO,CAAC,cAAD,CAAP;AACH,GAFD;;AAGJ,SAAA,kBAAA;AAAC,CAnCD,CAAiC,YAAjC,CAAA;;AAqCA,IAAM,iBAAiB,GAA0B,IAAI,UAAU,CAAC,UAAf,CAC7C;AACI,EAAA,qBAAqB,EAAE,IAD3B;AAEI,EAAA,OAAO,EAAE;AACL,IAAA,KAAK,EAAE,EADF;AAEL,IAAA,OAAO,EAAE,EAFJ;AAGL,IAAA,MAAM,EAAE,EAHH;AAIL,IAAA,KAAK,EAAE,EAJF;AAKL,IAAA,UAAU,EAAE,EALP;AAML,IAAA,OAAO,EAAE;AANJ,GAFb;AAUI,EAAA,SAAS,EAAE;AACP,IAAA,aAAa,EAAE,CADR;AAEP,IAAA,SAAS,EAAE;AAFJ,GAVf;AAcI,EAAA,SAAS,EAAE;AACP,IAAA,OAAO,EAAE;AACL,MAAA,UAAU,EAAE,iDADP;AAEL,MAAA,SAAS,EAAE;AACP,QAAA,KAAK,EAAE,EADA;AAEP,QAAA,OAAO,EAAE,EAFF;AAGP,QAAA,MAAM,EAAE,EAHD;AAIP,QAAA,KAAK,EAAE,EAJA;AAKP,QAAA,UAAU,EAAE;AALL,OAFN;AASL,MAAA,WAAW,EAAE;AACT,QAAA,OAAO,EAAE,GADA;AAET,QAAA,OAAO,EAAE,GAFA;AAGT,QAAA,MAAM,EAAE;AAHC;AATR,KADF;AAgBP,IAAA,SAAS,EAAE;AACP,MAAA,UAAU,EAAE,mCADL;AAEP,MAAA,SAAS,EAAE;AACP,QAAA,KAAK,EAAE,EADA;AAEP,QAAA,OAAO,EAAE,EAFF;AAGP,QAAA,MAAM,EAAE,EAHD;AAIP,QAAA,KAAK,EAAE,EAJA;AAKP,QAAA,UAAU,EAAE;AALL,OAFJ;AASP,MAAA,WAAW,EAAE;AACT,QAAA,OAAO,EAAE,GADA;AAET,QAAA,OAAO,EAAE,GAFA;AAGT,QAAA,MAAM,EAAE;AAHC;AATN;AAhBJ,GAdf;AA8CI,EAAA,UAAU,EAAE;AACR,IAAA,KAAK,EAAE,EADC;AAER,IAAA,MAAM,EAAE,EAFA;AAGR,IAAA,KAAK,EAAE;AAHC,GA9ChB;AAmDI,EAAA,eAAe,EAAE;AACb,IAAA,OAAO,EAAE;AACL,MAAA,eAAe,EAAE,SADZ;AAEL,MAAA,gBAAgB,EAAE;AACd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH,SADK;AAKd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SALQ;AASd,QAAA,KAAK,EAAE;AACH,UAAA,OAAO,EAAE,SADN;AAEH,UAAA,MAAM,EAAE;AAFL,SATO;AAad,QAAA,MAAM,EAAE;AACJ,UAAA,OAAO,EAAE,SADL;AAEJ,UAAA,MAAM,EAAE;AAFJ,SAbM;AAiBd,QAAA,SAAS,EAAE;AACP,UAAA,OAAO,EAAE,SADF;AAEP,UAAA,MAAM,EAAE;AAFD,SAjBG;AAqBd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SArBQ;AAyBd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH;AAzBK;AAFb,KADI;AAkCb,IAAA,QAAQ,EAAE;AACN,MAAA,eAAe,EAAE,WADX;AAEN,MAAA,gBAAgB,EAAE;AACd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH,SADK;AAKd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SALQ;AASd,QAAA,KAAK,EAAE;AACH,UAAA,OAAO,EAAE,SADN;AAEH,UAAA,MAAM,EAAE;AAFL,SATO;AAad,QAAA,MAAM,EAAE;AACJ,UAAA,OAAO,EAAE,SADL;AAEJ,UAAA,MAAM,EAAE;AAFJ,SAbM;AAiBd,QAAA,SAAS,EAAE;AACP,UAAA,OAAO,EAAE,SADF;AAEP,UAAA,MAAM,EAAE;AAFD,SAjBG;AAqBd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SArBQ;AAyBd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH;AAzBK;AAFZ,KAlCG;AAmEb,IAAA,MAAM,EAAE;AACJ,MAAA,eAAe,EAAE,SADb;AAEJ,MAAA,gBAAgB,EAAE;AACd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH,SADK;AAKd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SALQ;AASd,QAAA,KAAK,EAAE;AACH,UAAA,OAAO,EAAE,SADN;AAEH,UAAA,MAAM,EAAE;AAFL,SATO;AAad,QAAA,MAAM,EAAE;AACJ,UAAA,OAAO,EAAE,SADL;AAEJ,UAAA,MAAM,EAAE;AAFJ,SAbM;AAiBd,QAAA,SAAS,EAAE;AACP,UAAA,OAAO,EAAE,SADF;AAEP,UAAA,MAAM,EAAE;AAFD,SAjBG;AAqBd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SArBQ;AAyBd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH;AAzBK;AAFd,KAnEK;AAoGb,IAAA,IAAI,EAAE;AACF,MAAA,eAAe,EAAE,SADf;AAEF,MAAA,gBAAgB,EAAE;AACd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH,SADK;AAKd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SALQ;AASd,QAAA,KAAK,EAAE;AACH,UAAA,OAAO,EAAE,SADN;AAEH,UAAA,MAAM,EAAE;AAFL,SATO;AAad,QAAA,MAAM,EAAE;AACJ,UAAA,OAAO,EAAE,SADL;AAEJ,UAAA,MAAM,EAAE;AAFJ,SAbM;AAiBd,QAAA,SAAS,EAAE;AACP,UAAA,OAAO,EAAE,SADF;AAEP,UAAA,MAAM,EAAE;AAFD,SAjBG;AAqBd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SArBQ;AAyBd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH;AAzBK;AAFhB,KApGO;AAqIb,IAAA,SAAS,EAAE;AACP,MAAA,eAAe,EAAE,SADV;AAEP,MAAA,gBAAgB,EAAE;AACd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH,SADK;AAKd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SALQ;AASd,QAAA,KAAK,EAAE;AACH,UAAA,OAAO,EAAE,SADN;AAEH,UAAA,MAAM,EAAE;AAFL,SATO;AAad,QAAA,MAAM,EAAE;AACJ,UAAA,OAAO,EAAE,SADL;AAEJ,UAAA,MAAM,EAAE;AAFJ,SAbM;AAiBd,QAAA,SAAS,EAAE;AACP,UAAA,OAAO,EAAE,SADF;AAEP,UAAA,MAAM,EAAE;AAFD,SAjBG;AAqBd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SArBQ;AAyBd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH;AAzBK;AAFX,KArIE;AAsKb,IAAA,OAAO,EAAE;AACL,MAAA,eAAe,EAAE,SADZ;AAEL,MAAA,gBAAgB,EAAE;AACd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH,SADK;AAKd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SALQ;AASd,QAAA,KAAK,EAAE;AACH,UAAA,OAAO,EAAE,SADN;AAEH,UAAA,MAAM,EAAE;AAFL,SATO;AAad,QAAA,MAAM,EAAE;AACJ,UAAA,OAAO,EAAE,SADL;AAEJ,UAAA,MAAM,EAAE;AAFJ,SAbM;AAiBd,QAAA,SAAS,EAAE;AACP,UAAA,OAAO,EAAE,SADF;AAEP,UAAA,MAAM,EAAE;AAFD,SAjBG;AAqBd,QAAA,IAAI,EAAE;AACF,UAAA,OAAO,EAAE,SADP;AAEF,UAAA,MAAM,EAAE;AAFN,SArBQ;AAyBd,QAAA,OAAO,EAAE;AACL,UAAA,OAAO,EAAE,SADJ;AAEL,UAAA,MAAM,EAAE;AAFH;AAzBK;AAFb;AAtKI,GAnDrB;AA2PI,EAAA,OAAO,EAAE;AACL,IAAA,UAAU,EAAE,CADP;AAEL,IAAA,OAAO,EAAE,KAAK,CAAC,OAAN,CAAc,OAFlB;AAGL,IAAA,aAAa,EAAE,EAHV;AAIL,IAAA,QAAQ,EAAE;AACN,MAAA,UAAU,EAAE,KAAK,CAAC,kBAAN,CAAyB,MAD/B;AAEN,MAAA,eAAe,EAAE;AAFX,KAJL;AAQL,IAAA,kBAAkB,EAAE,KAAK,CAAC,WAAN,CAAkB,UARjC;AASL,IAAA,eAAe,EAAE,KAAK,CAAC,eAAN,CAAsB;AATlC,GA3Pb;AAsQI,EAAA,YAAY,EAAE;AACV,IAAA,gBAAgB,EAAE;AADR,GAtQlB;AAyQI,EAAA,QAAQ,EAAE;AACN,IAAA,SAAS,EAAE,KAAK,CAAC,IAAN,CAAW,MADhB;AAEN,IAAA,cAAc,EAAE;AAFV,GAzQd;AA6QI,EAAA,OAAO,EAAE;AACL,IAAA,KAAK,EAAE;AACH,MAAA,KAAK,EAAE,KAAK,CAAC,SAAN,CAAgB,OADpB;AAEH,MAAA,IAAI,EAAE,KAAK,CAAC,QAAN,CAAe,OAFlB;AAGH,MAAA,QAAQ,EAAE,KAHP;AAIH,MAAA,MAAM,EAAE,KAAK,CAAC,UAAN,CAAiB,MAJtB;AAKH,MAAA,IAAI,EAAE,IALH;AAMH,MAAA,QAAQ,EAAE;AANP,KADF;AASL,IAAA,KAAK,EAAE;AACH,MAAA,KAAK,EAAE,KAAK,CAAC,SAAN,CAAgB,OADpB;AAEH,MAAA,IAAI,EAAE,KAAK,CAAC,QAAN,CAAe,OAFlB;AAGH,MAAA,QAAQ,EAAE,KAHP;AAIH,MAAA,MAAM,EAAE,KAAK,CAAC,UAAN,CAAiB,OAJtB;AAKH,MAAA,IAAI,EAAE;AALH,KATF;AAgBL,IAAA,OAAO,EAAE;AAhBJ;AA7Qb,CAD6C,CAAjD","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar Shared = require(\"./shared\");\r\nvar Utils = require(\"./utils\");\r\nvar HostConfig = require(\"./host-config\");\r\nvar TextFormatters = require(\"./text-formatters\");\r\nfunction invokeSetCollection(action, collection) {\r\n    if (action) {\r\n        // Closest emulation of \"internal\" in TypeScript.\r\n        action[\"setCollection\"](collection);\r\n    }\r\n}\r\nfunction isActionAllowed(action, forbiddenActionTypes) {\r\n    if (forbiddenActionTypes) {\r\n        for (var i = 0; i < forbiddenActionTypes.length; i++) {\r\n            if (action.getJsonTypeName() === forbiddenActionTypes[i]) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\nvar InstanceCreationErrorType;\r\n(function (InstanceCreationErrorType) {\r\n    InstanceCreationErrorType[InstanceCreationErrorType[\"UnknownType\"] = 0] = \"UnknownType\";\r\n    InstanceCreationErrorType[InstanceCreationErrorType[\"ForbiddenType\"] = 1] = \"ForbiddenType\";\r\n})(InstanceCreationErrorType || (InstanceCreationErrorType = {}));\r\nfunction createCardObjectInstance(parent, json, forbiddenTypeNames, allowFallback, createInstanceCallback, createValidationErrorCallback, errors) {\r\n    var result = null;\r\n    if (json && typeof json === \"object\") {\r\n        var tryToFallback = false;\r\n        var typeName = Utils.getStringValue(json[\"type\"]);\r\n        if (forbiddenTypeNames && forbiddenTypeNames.indexOf(typeName) >= 0) {\r\n            raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.ForbiddenType), errors);\r\n        }\r\n        else {\r\n            result = createInstanceCallback(typeName);\r\n            if (!result) {\r\n                tryToFallback = allowFallback;\r\n                raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.UnknownType), errors);\r\n            }\r\n            else {\r\n                result.setParent(parent);\r\n                result.parse(json, errors);\r\n                tryToFallback = result.shouldFallback() && allowFallback;\r\n            }\r\n            if (tryToFallback) {\r\n                var fallback = json[\"fallback\"];\r\n                if (!fallback) {\r\n                    parent.setShouldFallback(true);\r\n                }\r\n                if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\r\n                    result = null;\r\n                }\r\n                else if (typeof fallback === \"object\") {\r\n                    result = createCardObjectInstance(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, createValidationErrorCallback, errors);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction createActionInstance(parent, json, forbiddenActionTypes, allowFallback, errors) {\r\n    return createCardObjectInstance(parent, json, forbiddenActionTypes, allowFallback, function (typeName) { return AdaptiveCard.actionTypeRegistry.createInstance(typeName); }, function (typeName, errorType) {\r\n        if (errorType == InstanceCreationErrorType.UnknownType) {\r\n            return {\r\n                error: Enums.ValidationError.UnknownActionType,\r\n                message: \"Unknown action type: \" + typeName + \". Fallback will be used if present.\"\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                error: Enums.ValidationError.ActionTypeNotAllowed,\r\n                message: \"Action type \" + typeName + \" is not allowed in this context.\"\r\n            };\r\n        }\r\n    }, errors);\r\n}\r\nexports.createActionInstance = createActionInstance;\r\nfunction createElementInstance(parent, json, allowFallback, errors) {\r\n    return createCardObjectInstance(parent, json, [], // Forbidden types not supported for elements for now\r\n    allowFallback, function (typeName) { return AdaptiveCard.elementTypeRegistry.createInstance(typeName); }, function (typeName, errorType) {\r\n        if (errorType == InstanceCreationErrorType.UnknownType) {\r\n            return {\r\n                error: Enums.ValidationError.UnknownElementType,\r\n                message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                error: Enums.ValidationError.ElementTypeNotAllowed,\r\n                message: \"Element type \" + typeName + \" is not allowed in this context.\"\r\n            };\r\n        }\r\n    }, errors);\r\n}\r\nexports.createElementInstance = createElementInstance;\r\nvar SerializableObject = /** @class */ (function () {\r\n    function SerializableObject() {\r\n        this._rawProperties = {};\r\n    }\r\n    SerializableObject.prototype.parse = function (json, errors) {\r\n        this._rawProperties = AdaptiveCard.enableFullJsonRoundTrip ? json : {};\r\n    };\r\n    SerializableObject.prototype.toJSON = function () {\r\n        var result;\r\n        if (AdaptiveCard.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === \"object\") {\r\n            result = this._rawProperties;\r\n        }\r\n        else {\r\n            result = {};\r\n        }\r\n        return result;\r\n    };\r\n    SerializableObject.prototype.setCustomProperty = function (name, value) {\r\n        var shouldDeleteProperty = (typeof value === \"string\" && Utils.isNullOrEmpty(value)) || value === undefined || value === null;\r\n        if (shouldDeleteProperty) {\r\n            delete this._rawProperties[name];\r\n        }\r\n        else {\r\n            this._rawProperties[name] = value;\r\n        }\r\n    };\r\n    SerializableObject.prototype.getCustomProperty = function (name) {\r\n        return this._rawProperties[name];\r\n    };\r\n    return SerializableObject;\r\n}());\r\nexports.SerializableObject = SerializableObject;\r\nvar ValidationFailure = /** @class */ (function () {\r\n    function ValidationFailure(cardObject) {\r\n        this.cardObject = cardObject;\r\n        this.errors = [];\r\n    }\r\n    return ValidationFailure;\r\n}());\r\nexports.ValidationFailure = ValidationFailure;\r\nvar ValidationResults = /** @class */ (function () {\r\n    function ValidationResults() {\r\n        this.allIds = {};\r\n        this.failures = [];\r\n    }\r\n    ValidationResults.prototype.getFailureIndex = function (cardObject) {\r\n        for (var i = 0; i < this.failures.length; i++) {\r\n            if (this.failures[i].cardObject === cardObject) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    ValidationResults.prototype.addFailure = function (cardObject, error) {\r\n        var index = this.getFailureIndex(cardObject);\r\n        var failure;\r\n        if (index < 0) {\r\n            failure = new ValidationFailure(cardObject);\r\n            this.failures.push(failure);\r\n        }\r\n        else {\r\n            failure = this.failures[index];\r\n        }\r\n        failure.errors.push(error);\r\n    };\r\n    return ValidationResults;\r\n}());\r\nexports.ValidationResults = ValidationResults;\r\nvar CardObject = /** @class */ (function (_super) {\r\n    __extends(CardObject, _super);\r\n    function CardObject() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CardObject.prototype.internalValidateProperties = function (context) {\r\n        if (!Utils.isNullOrEmpty(this.id)) {\r\n            if (context.allIds.hasOwnProperty(this.id)) {\r\n                if (context.allIds[this.id] == 1) {\r\n                    context.addFailure(this, {\r\n                        error: Enums.ValidationError.DuplicateId,\r\n                        message: \"Duplicate Id: \" + this.id\r\n                    });\r\n                }\r\n                context.allIds[this.id] += 1;\r\n            }\r\n            else {\r\n                context.allIds[this.id] = 1;\r\n            }\r\n        }\r\n    };\r\n    CardObject.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.id = Utils.getStringValue(json[\"id\"]);\r\n    };\r\n    CardObject.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"type\", this.getJsonTypeName());\r\n        Utils.setProperty(result, \"id\", this.id);\r\n        return result;\r\n    };\r\n    CardObject.prototype.validateProperties = function () {\r\n        var result = new ValidationResults();\r\n        this.internalValidateProperties(result);\r\n        return result;\r\n    };\r\n    return CardObject;\r\n}(SerializableObject));\r\nexports.CardObject = CardObject;\r\nvar CardElement = /** @class */ (function (_super) {\r\n    __extends(CardElement, _super);\r\n    function CardElement() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._shouldFallback = false;\r\n        _this._lang = undefined;\r\n        _this._hostConfig = null;\r\n        _this._parent = null;\r\n        _this._renderedElement = null;\r\n        _this._separatorElement = null;\r\n        _this._isVisible = true;\r\n        _this._truncatedDueToOverflow = false;\r\n        _this._defaultRenderedElementDisplayMode = null;\r\n        _this._padding = null;\r\n        _this.requires = new HostConfig.HostCapabilities();\r\n        _this.horizontalAlignment = null;\r\n        _this.spacing = Enums.Spacing.Default;\r\n        _this.separator = false;\r\n        _this.customCssSelector = null;\r\n        _this.height = \"auto\";\r\n        _this.minPixelHeight = null;\r\n        return _this;\r\n    }\r\n    CardElement.prototype.internalRenderSeparator = function () {\r\n        var renderedSeparator = Utils.renderSeparation(this.hostConfig, {\r\n            spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\r\n            lineThickness: this.separator ? this.hostConfig.separator.lineThickness : null,\r\n            lineColor: this.separator ? this.hostConfig.separator.lineColor : null\r\n        }, this.separatorOrientation);\r\n        if (AdaptiveCard.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {\r\n            // Adjust separator's margins if the option to always bleed separators is turned on\r\n            var parentContainer = this.getParentContainer();\r\n            if (parentContainer && parentContainer.getEffectivePadding()) {\r\n                var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\r\n                renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\r\n                renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\r\n            }\r\n        }\r\n        return renderedSeparator;\r\n    };\r\n    CardElement.prototype.updateRenderedElementVisibility = function () {\r\n        var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : \"none\";\r\n        if (this._renderedElement) {\r\n            this._renderedElement.style.display = displayMode;\r\n        }\r\n        if (this._separatorElement) {\r\n            if (this.parent && this.parent.isFirstElement(this)) {\r\n                this._separatorElement.style.display = \"none\";\r\n            }\r\n            else {\r\n                this._separatorElement.style.display = displayMode;\r\n            }\r\n        }\r\n    };\r\n    CardElement.prototype.hideElementDueToOverflow = function () {\r\n        if (this._renderedElement && this.isVisible) {\r\n            this._renderedElement.style.visibility = 'hidden';\r\n            this.isVisible = false;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    };\r\n    CardElement.prototype.showElementHiddenDueToOverflow = function () {\r\n        if (this._renderedElement && !this.isVisible) {\r\n            this._renderedElement.style.visibility = null;\r\n            this.isVisible = true;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    };\r\n    // Marked private to emulate internal access\r\n    CardElement.prototype.handleOverflow = function (maxHeight) {\r\n        if (this.isVisible || this.isHiddenDueToOverflow()) {\r\n            var handled = this.truncateOverflow(maxHeight);\r\n            // Even if we were unable to truncate the element to fit this time,\r\n            // it still could have been previously truncated\r\n            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\r\n            if (!handled) {\r\n                this.hideElementDueToOverflow();\r\n            }\r\n            else if (handled && !this.isVisible) {\r\n                this.showElementHiddenDueToOverflow();\r\n            }\r\n        }\r\n    };\r\n    // Marked private to emulate internal access\r\n    CardElement.prototype.resetOverflow = function () {\r\n        var sizeChanged = false;\r\n        if (this._truncatedDueToOverflow) {\r\n            this.undoOverflowTruncation();\r\n            this._truncatedDueToOverflow = false;\r\n            sizeChanged = true;\r\n        }\r\n        if (this.isHiddenDueToOverflow) {\r\n            this.showElementHiddenDueToOverflow();\r\n        }\r\n        return sizeChanged;\r\n    };\r\n    CardElement.prototype.createPlaceholderElement = function () {\r\n        var element = document.createElement(\"div\");\r\n        element.style.border = \"1px dashed #DDDDDD\";\r\n        element.style.padding = \"4px\";\r\n        element.style.minHeight = \"32px\";\r\n        element.style.fontSize = \"10px\";\r\n        element.innerText = \"Empty \" + this.getJsonTypeName();\r\n        return element;\r\n    };\r\n    CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        if (this.height === \"auto\") {\r\n            renderedElement.style.flex = \"0 0 auto\";\r\n        }\r\n        else {\r\n            renderedElement.style.flex = \"1 1 auto\";\r\n        }\r\n        if (this.minPixelHeight) {\r\n            renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n        }\r\n    };\r\n    CardElement.prototype.overrideInternalRender = function () {\r\n        return this.internalRender();\r\n    };\r\n    CardElement.prototype.applyPadding = function () {\r\n        if (this.separatorElement) {\r\n            if (AdaptiveCard.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {\r\n                var padding = new Shared.PaddingDefinition();\r\n                this.getImmediateSurroundingPadding(padding);\r\n                var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n                this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            }\r\n            else {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    };\r\n    /*\r\n     * Called when this element overflows the bottom of the card.\r\n     * maxHeight will be the amount of space still available on the card (0 if\r\n     * the element is fully off the card).\r\n     */\r\n    CardElement.prototype.truncateOverflow = function (maxHeight) {\r\n        // Child implementations should return true if the element handled\r\n        // the truncation request such that its content fits within maxHeight,\r\n        // false if the element should fall back to being hidden\r\n        return false;\r\n    };\r\n    /*\r\n     * This should reverse any changes performed in truncateOverflow().\r\n     */\r\n    CardElement.prototype.undoOverflowTruncation = function () { };\r\n    CardElement.prototype.getDefaultPadding = function () {\r\n        return new Shared.PaddingDefinition();\r\n    };\r\n    CardElement.prototype.getHasBackground = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.getPadding = function () {\r\n        return this._padding;\r\n    };\r\n    CardElement.prototype.setPadding = function (value) {\r\n        this._padding = value;\r\n    };\r\n    Object.defineProperty(CardElement.prototype, \"supportsMinHeight\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"allowCustomPadding\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"separatorOrientation\", {\r\n        get: function () {\r\n            return Enums.Orientation.Horizontal;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"defaultStyle\", {\r\n        get: function () {\r\n            return Enums.ContainerStyle.Default;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CardElement.prototype.asString = function () {\r\n        return \"\";\r\n    };\r\n    CardElement.prototype.isBleeding = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"isVisible\", this.isVisible, true);\r\n        if (this.horizontalAlignment !== null) {\r\n            Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment);\r\n        }\r\n        Utils.setEnumProperty(Enums.Spacing, result, \"spacing\", this.spacing, Enums.Spacing.Default);\r\n        Utils.setProperty(result, \"separator\", this.separator, false);\r\n        Utils.setProperty(result, \"height\", this.height, \"auto\");\r\n        if (this.supportsMinHeight) {\r\n            Utils.setProperty(result, \"minHeight\", typeof this.minPixelHeight === \"number\" && !isNaN(this.minPixelHeight) ? this.minPixelHeight + \"px\" : undefined);\r\n        }\r\n        return result;\r\n    };\r\n    CardElement.prototype.setParent = function (value) {\r\n        this._parent = value;\r\n    };\r\n    CardElement.prototype.getEffectiveStyle = function () {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveStyle();\r\n        }\r\n        return this.defaultStyle;\r\n    };\r\n    CardElement.prototype.getForbiddenElementTypes = function () {\r\n        return null;\r\n    };\r\n    CardElement.prototype.getForbiddenActionTypes = function () {\r\n        return null;\r\n    };\r\n    CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {\r\n        if (processTop === void 0) { processTop = true; }\r\n        if (processRight === void 0) { processRight = true; }\r\n        if (processBottom === void 0) { processBottom = true; }\r\n        if (processLeft === void 0) { processLeft = true; }\r\n        if (this.parent) {\r\n            var doProcessTop = processTop && this.parent.isTopElement(this);\r\n            var doProcessRight = processRight && this.parent.isRightMostElement(this);\r\n            var doProcessBottom = processBottom && this.parent.isBottomElement(this);\r\n            var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\r\n            var effectivePadding = this.parent.getEffectivePadding();\r\n            if (effectivePadding) {\r\n                if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {\r\n                    result.top = effectivePadding.top;\r\n                    doProcessTop = false;\r\n                }\r\n                if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {\r\n                    result.right = effectivePadding.right;\r\n                    doProcessRight = false;\r\n                }\r\n                if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {\r\n                    result.bottom = effectivePadding.bottom;\r\n                    doProcessBottom = false;\r\n                }\r\n                if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {\r\n                    result.left = effectivePadding.left;\r\n                    doProcessLeft = false;\r\n                }\r\n            }\r\n            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\r\n                this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);\r\n            }\r\n        }\r\n    };\r\n    CardElement.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        raiseParseElementEvent(this, json, errors);\r\n        this.requires.parse(json[\"requires\"], errors);\r\n        this.isVisible = Utils.getBoolValue(json[\"isVisible\"], this.isVisible);\r\n        this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\r\n        this.spacing = Utils.getEnumValue(Enums.Spacing, json[\"spacing\"], Enums.Spacing.Default);\r\n        this.separator = Utils.getBoolValue(json[\"separator\"], this.separator);\r\n        var jsonSeparation = json[\"separation\"];\r\n        if (jsonSeparation !== undefined) {\r\n            if (jsonSeparation === \"none\") {\r\n                this.spacing = Enums.Spacing.None;\r\n                this.separator = false;\r\n            }\r\n            else if (jsonSeparation === \"strong\") {\r\n                this.spacing = Enums.Spacing.Large;\r\n                this.separator = true;\r\n            }\r\n            else if (jsonSeparation === \"default\") {\r\n                this.spacing = Enums.Spacing.Default;\r\n                this.separator = false;\r\n            }\r\n            raiseParseError({\r\n                error: Enums.ValidationError.Deprecated,\r\n                message: \"The \\\"separation\\\" property is deprecated and will be removed. Use the \\\"spacing\\\" and \\\"separator\\\" properties instead.\"\r\n            }, errors);\r\n        }\r\n        var jsonHeight = json[\"height\"];\r\n        if (jsonHeight === \"auto\" || jsonHeight === \"stretch\") {\r\n            this.height = jsonHeight;\r\n        }\r\n        if (this.supportsMinHeight) {\r\n            var jsonMinHeight = json[\"minHeight\"];\r\n            if (jsonMinHeight && typeof jsonMinHeight === \"string\") {\r\n                var isValid = false;\r\n                try {\r\n                    var size = Shared.SizeAndUnit.parse(jsonMinHeight, true);\r\n                    if (size.unit == Enums.SizeUnit.Pixel) {\r\n                        this.minPixelHeight = size.physicalSize;\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                catch (_a) {\r\n                    // Do nothing. A parse error is emitted below\r\n                }\r\n                if (!isValid) {\r\n                    raiseParseError({\r\n                        error: Enums.ValidationError.InvalidPropertyValue,\r\n                        message: \"Invalid \\\"minHeight\\\" value: \" + jsonMinHeight\r\n                    }, errors);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.minPixelHeight = null;\r\n        }\r\n    };\r\n    CardElement.prototype.getActionCount = function () {\r\n        return 0;\r\n    };\r\n    CardElement.prototype.getActionAt = function (index) {\r\n        throw new Error(\"Index out of range.\");\r\n    };\r\n    CardElement.prototype.remove = function () {\r\n        if (this.parent && this.parent instanceof CardElementContainer) {\r\n            return this.parent.removeItem(this);\r\n        }\r\n        return false;\r\n    };\r\n    CardElement.prototype.render = function () {\r\n        this._renderedElement = this.overrideInternalRender();\r\n        this._separatorElement = this.internalRenderSeparator();\r\n        if (this._renderedElement) {\r\n            if (this.customCssSelector) {\r\n                this._renderedElement.classList.add(this.customCssSelector);\r\n            }\r\n            this._renderedElement.style.boxSizing = \"border-box\";\r\n            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display;\r\n            this.adjustRenderedElementSize(this._renderedElement);\r\n            this.updateLayout(false);\r\n        }\r\n        else if (this.isDesignMode()) {\r\n            this._renderedElement = this.createPlaceholderElement();\r\n        }\r\n        return this._renderedElement;\r\n    };\r\n    CardElement.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        this.updateRenderedElementVisibility();\r\n        this.applyPadding();\r\n    };\r\n    CardElement.prototype.indexOf = function (cardElement) {\r\n        return -1;\r\n    };\r\n    CardElement.prototype.isDesignMode = function () {\r\n        var rootElement = this.getRootElement();\r\n        return rootElement instanceof AdaptiveCard && rootElement.designMode;\r\n    };\r\n    CardElement.prototype.isRendered = function () {\r\n        return this._renderedElement && this._renderedElement.offsetHeight > 0;\r\n    };\r\n    CardElement.prototype.isFirstElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isLastElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryLeft = function () {\r\n        return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryRight = function () {\r\n        return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryTop = function () {\r\n        return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryBottom = function () {\r\n        return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;\r\n    };\r\n    CardElement.prototype.isBleedingAtTop = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.isBleedingAtBottom = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.isLeftMostElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isRightMostElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isTopElement = function (element) {\r\n        return this.isFirstElement(element);\r\n    };\r\n    CardElement.prototype.isBottomElement = function (element) {\r\n        return this.isLastElement(element);\r\n    };\r\n    CardElement.prototype.isHiddenDueToOverflow = function () {\r\n        return this._renderedElement && this._renderedElement.style.visibility == 'hidden';\r\n    };\r\n    CardElement.prototype.getRootElement = function () {\r\n        var rootElement = this;\r\n        while (rootElement.parent) {\r\n            rootElement = rootElement.parent;\r\n        }\r\n        return rootElement;\r\n    };\r\n    CardElement.prototype.getParentContainer = function () {\r\n        var currentElement = this.parent;\r\n        while (currentElement) {\r\n            if (currentElement instanceof Container) {\r\n                return currentElement;\r\n            }\r\n            currentElement = currentElement.parent;\r\n        }\r\n        return null;\r\n    };\r\n    CardElement.prototype.getAllInputs = function () {\r\n        return [];\r\n    };\r\n    CardElement.prototype.getResourceInformation = function () {\r\n        return [];\r\n    };\r\n    CardElement.prototype.getElementById = function (id) {\r\n        return this.id === id ? this : null;\r\n    };\r\n    CardElement.prototype.getActionById = function (id) {\r\n        return null;\r\n    };\r\n    CardElement.prototype.shouldFallback = function () {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\r\n    };\r\n    CardElement.prototype.setShouldFallback = function (value) {\r\n        this._shouldFallback = value;\r\n    };\r\n    CardElement.prototype.getEffectivePadding = function () {\r\n        var padding = this.getPadding();\r\n        return (padding && this.allowCustomPadding) ? padding : this.getDefaultPadding();\r\n    };\r\n    Object.defineProperty(CardElement.prototype, \"lang\", {\r\n        get: function () {\r\n            if (this._lang) {\r\n                return this._lang;\r\n            }\r\n            else {\r\n                if (this.parent) {\r\n                    return this.parent.lang;\r\n                }\r\n                else {\r\n                    return undefined;\r\n                }\r\n            }\r\n        },\r\n        set: function (value) {\r\n            if (value && value != \"\") {\r\n                var regEx = /^[a-z]{2,3}$/ig;\r\n                var matches = regEx.exec(value);\r\n                if (!matches) {\r\n                    throw new Error(\"Invalid language identifier: \" + value);\r\n                }\r\n            }\r\n            this._lang = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"hostConfig\", {\r\n        get: function () {\r\n            if (this._hostConfig) {\r\n                return this._hostConfig;\r\n            }\r\n            else {\r\n                if (this.parent) {\r\n                    return this.parent.hostConfig;\r\n                }\r\n                else {\r\n                    return defaultHostConfig;\r\n                }\r\n            }\r\n        },\r\n        set: function (value) {\r\n            this._hostConfig = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"index\", {\r\n        get: function () {\r\n            if (this.parent) {\r\n                return this.parent.indexOf(this);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isInline\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            // If the element is going to be hidden, reset any changes that were due\r\n            // to overflow truncation (this ensures that if the element is later\r\n            // un-hidden it has the right content)\r\n            if (AdaptiveCard.useAdvancedCardBottomTruncation && !value) {\r\n                this.undoOverflowTruncation();\r\n            }\r\n            if (this._isVisible != value) {\r\n                this._isVisible = value;\r\n                this.updateRenderedElementVisibility();\r\n                if (this._renderedElement) {\r\n                    raiseElementVisibilityChangedEvent(this);\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            if (this.parent && this.separatorElement) {\r\n                return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"renderedElement\", {\r\n        get: function () {\r\n            return this._renderedElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"separatorElement\", {\r\n        get: function () {\r\n            return this._separatorElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return CardElement;\r\n}(CardObject));\r\nexports.CardElement = CardElement;\r\nvar BaseTextBlock = /** @class */ (function (_super) {\r\n    __extends(BaseTextBlock, _super);\r\n    function BaseTextBlock() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._selectAction = null;\r\n        _this.size = Enums.TextSize.Default;\r\n        _this.weight = Enums.TextWeight.Default;\r\n        _this.color = Enums.TextColor.Default;\r\n        _this.isSubtle = false;\r\n        _this.fontType = null;\r\n        return _this;\r\n    }\r\n    BaseTextBlock.prototype.getEffectiveStyleDefinition = function () {\r\n        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\r\n    };\r\n    BaseTextBlock.prototype.getFontSize = function (fontType) {\r\n        switch (this.size) {\r\n            case Enums.TextSize.Small:\r\n                return fontType.fontSizes.small;\r\n            case Enums.TextSize.Medium:\r\n                return fontType.fontSizes.medium;\r\n            case Enums.TextSize.Large:\r\n                return fontType.fontSizes.large;\r\n            case Enums.TextSize.ExtraLarge:\r\n                return fontType.fontSizes.extraLarge;\r\n            default:\r\n                return fontType.fontSizes.default;\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {\r\n        switch (color) {\r\n            case Enums.TextColor.Accent:\r\n                return colorSet.accent;\r\n            case Enums.TextColor.Dark:\r\n                return colorSet.dark;\r\n            case Enums.TextColor.Light:\r\n                return colorSet.light;\r\n            case Enums.TextColor.Good:\r\n                return colorSet.good;\r\n            case Enums.TextColor.Warning:\r\n                return colorSet.warning;\r\n            case Enums.TextColor.Attention:\r\n                return colorSet.attention;\r\n            default:\r\n                return colorSet.default;\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.setText = function (value) {\r\n        this._text = value;\r\n    };\r\n    BaseTextBlock.prototype.asString = function () {\r\n        return this.text;\r\n    };\r\n    BaseTextBlock.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setEnumProperty(Enums.TextSize, result, \"size\", this.size, Enums.TextSize.Default);\r\n        Utils.setEnumProperty(Enums.TextWeight, result, \"weight\", this.weight, Enums.TextWeight.Default);\r\n        Utils.setEnumProperty(Enums.TextColor, result, \"color\", this.color, Enums.TextColor.Default);\r\n        Utils.setProperty(result, \"text\", this.text);\r\n        Utils.setProperty(result, \"isSubtle\", this.isSubtle, false);\r\n        Utils.setEnumProperty(Enums.FontType, result, \"fontType\", this.fontType, Enums.FontType.Default);\r\n        return result;\r\n    };\r\n    BaseTextBlock.prototype.applyStylesTo = function (targetElement) {\r\n        var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);\r\n        if (fontType.fontFamily) {\r\n            targetElement.style.fontFamily = fontType.fontFamily;\r\n        }\r\n        var fontSize;\r\n        switch (this.size) {\r\n            case Enums.TextSize.Small:\r\n                fontSize = fontType.fontSizes.small;\r\n                break;\r\n            case Enums.TextSize.Medium:\r\n                fontSize = fontType.fontSizes.medium;\r\n                break;\r\n            case Enums.TextSize.Large:\r\n                fontSize = fontType.fontSizes.large;\r\n                break;\r\n            case Enums.TextSize.ExtraLarge:\r\n                fontSize = fontType.fontSizes.extraLarge;\r\n                break;\r\n            default:\r\n                fontSize = fontType.fontSizes.default;\r\n                break;\r\n        }\r\n        targetElement.style.fontSize = fontSize + \"px\";\r\n        var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n        targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);\r\n        var fontWeight;\r\n        switch (this.weight) {\r\n            case Enums.TextWeight.Lighter:\r\n                fontWeight = fontType.fontWeights.lighter;\r\n                break;\r\n            case Enums.TextWeight.Bolder:\r\n                fontWeight = fontType.fontWeights.bolder;\r\n                break;\r\n            default:\r\n                fontWeight = fontType.fontWeights.default;\r\n                break;\r\n        }\r\n        targetElement.style.fontWeight = fontWeight.toString();\r\n    };\r\n    BaseTextBlock.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.text = Utils.getStringValue(json[\"text\"]);\r\n        var sizeString = Utils.getStringValue(json[\"size\"]);\r\n        if (sizeString && sizeString.toLowerCase() === \"normal\") {\r\n            this.size = Enums.TextSize.Default;\r\n            raiseParseError({\r\n                error: Enums.ValidationError.Deprecated,\r\n                message: \"The TextBlock.size value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\r\n            }, errors);\r\n        }\r\n        else {\r\n            this.size = Utils.getEnumValue(Enums.TextSize, sizeString, this.size);\r\n        }\r\n        var weightString = Utils.getStringValue(json[\"weight\"]);\r\n        if (weightString && weightString.toLowerCase() === \"normal\") {\r\n            this.weight = Enums.TextWeight.Default;\r\n            raiseParseError({\r\n                error: Enums.ValidationError.Deprecated,\r\n                message: \"The TextBlock.weight value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\r\n            }, errors);\r\n        }\r\n        else {\r\n            this.weight = Utils.getEnumValue(Enums.TextWeight, weightString, this.weight);\r\n        }\r\n        this.color = Utils.getEnumValue(Enums.TextColor, json[\"color\"], this.color);\r\n        this.isSubtle = Utils.getBoolValue(json[\"isSubtle\"], this.isSubtle);\r\n        this.fontType = Utils.getEnumValue(Enums.FontType, json[\"fontType\"], this.fontType);\r\n    };\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveColor\", {\r\n        get: function () {\r\n            return this.color ? this.color : Enums.TextColor.Default;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseTextBlock.prototype, \"text\", {\r\n        get: function () {\r\n            return this._text;\r\n        },\r\n        set: function (value) {\r\n            this.setText(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseTextBlock.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this._selectAction;\r\n        },\r\n        set: function (value) {\r\n            this._selectAction = value;\r\n            if (this._selectAction) {\r\n                this._selectAction.setParent(this);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return BaseTextBlock;\r\n}(CardElement));\r\nexports.BaseTextBlock = BaseTextBlock;\r\nvar TextBlock = /** @class */ (function (_super) {\r\n    __extends(TextBlock, _super);\r\n    function TextBlock() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._processedText = null;\r\n        _this._treatAsPlainText = true;\r\n        _this.wrap = false;\r\n        _this.useMarkdown = true;\r\n        return _this;\r\n    }\r\n    TextBlock.prototype.restoreOriginalContent = function () {\r\n        var maxHeight = this.maxLines\r\n            ? (this._computedLineHeight * this.maxLines) + 'px'\r\n            : null;\r\n        this.renderedElement.style.maxHeight = maxHeight;\r\n        this.renderedElement.innerHTML = this._originalInnerHtml;\r\n    };\r\n    TextBlock.prototype.truncateIfSupported = function (maxHeight) {\r\n        // For now, only truncate TextBlocks that contain just a single\r\n        // paragraph -- since the maxLines calculation doesn't take into\r\n        // account Markdown lists\r\n        var children = this.renderedElement.children;\r\n        var isTextOnly = !children.length;\r\n        var truncationSupported = isTextOnly || children.length == 1\r\n            && children[0].tagName.toLowerCase() == 'p';\r\n        if (truncationSupported) {\r\n            var element = isTextOnly\r\n                ? this.renderedElement\r\n                : children[0];\r\n            Utils.truncate(element, maxHeight, this._computedLineHeight);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    TextBlock.prototype.setText = function (value) {\r\n        _super.prototype.setText.call(this, value);\r\n        this._processedText = null;\r\n    };\r\n    TextBlock.prototype.getRenderedDomElementType = function () {\r\n        return \"div\";\r\n    };\r\n    TextBlock.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._processedText = null;\r\n        if (!Utils.isNullOrEmpty(this.text)) {\r\n            var hostConfig = this.hostConfig;\r\n            var element = document.createElement(this.getRenderedDomElementType());\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\r\n            element.style.overflow = \"hidden\";\r\n            this.applyStylesTo(element);\r\n            if (this.selectAction) {\r\n                element.onclick = function (e) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.selectAction.execute();\r\n                };\r\n                if (hostConfig.supportsInteractivity) {\r\n                    element.tabIndex = 0;\r\n                    element.setAttribute(\"role\", this.selectAction.getAriaRole());\r\n                    element.setAttribute(\"aria-label\", this.selectAction.title);\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n            if (!this._processedText) {\r\n                this._treatAsPlainText = true;\r\n                var formattedText = TextFormatters.formatText(this.lang, this.text);\r\n                if (this.useMarkdown) {\r\n                    if (AdaptiveCard.allowMarkForTextHighlighting) {\r\n                        formattedText = formattedText.replace(/<mark>/g, \"===\").replace(/<\\/mark>/g, \"/==\");\r\n                    }\r\n                    var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\r\n                    if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {\r\n                        this._processedText = markdownProcessingResult.outputHtml;\r\n                        this._treatAsPlainText = false;\r\n                        // Only process <mark> tag if markdown processing was applied because\r\n                        // markdown processing is also responsible for sanitizing the input string\r\n                        if (AdaptiveCard.allowMarkForTextHighlighting) {\r\n                            var markStyle = \"\";\r\n                            var effectiveStyle = this.getEffectiveStyleDefinition();\r\n                            if (effectiveStyle.highlightBackgroundColor) {\r\n                                markStyle += \"background-color: \" + effectiveStyle.highlightBackgroundColor + \";\";\r\n                            }\r\n                            if (effectiveStyle.highlightForegroundColor) {\r\n                                markStyle += \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\r\n                            }\r\n                            if (!Utils.isNullOrEmpty(markStyle)) {\r\n                                markStyle = 'style=\"' + markStyle + '\"';\r\n                            }\r\n                            this._processedText = this._processedText.replace(/===/g, \"<mark \" + markStyle + \">\").replace(/\\/==/g, \"</mark>\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._processedText = formattedText;\r\n                        this._treatAsPlainText = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._processedText = formattedText;\r\n                    this._treatAsPlainText = true;\r\n                }\r\n            }\r\n            if (this._treatAsPlainText) {\r\n                element.innerText = this._processedText;\r\n            }\r\n            else {\r\n                element.innerHTML = this._processedText;\r\n            }\r\n            if (element.firstElementChild instanceof HTMLElement) {\r\n                var firstElementChild = element.firstElementChild;\r\n                firstElementChild.style.marginTop = \"0px\";\r\n                firstElementChild.style.width = \"100%\";\r\n                if (!this.wrap) {\r\n                    firstElementChild.style.overflow = \"hidden\";\r\n                    firstElementChild.style.textOverflow = \"ellipsis\";\r\n                }\r\n            }\r\n            if (element.lastElementChild instanceof HTMLElement) {\r\n                element.lastElementChild.style.marginBottom = \"0px\";\r\n            }\r\n            var anchors = element.getElementsByTagName(\"a\");\r\n            for (var i = 0; i < anchors.length; i++) {\r\n                var anchor = anchors[i];\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = function (e) {\r\n                    if (raiseAnchorClickedEvent(_this, e.target)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                    }\r\n                };\r\n            }\r\n            if (this.wrap) {\r\n                element.style.wordWrap = \"break-word\";\r\n                if (this.maxLines > 0) {\r\n                    element.style.maxHeight = (this._computedLineHeight * this.maxLines) + \"px\";\r\n                    element.style.overflow = \"hidden\";\r\n                }\r\n            }\r\n            else {\r\n                element.style.whiteSpace = \"nowrap\";\r\n                element.style.textOverflow = \"ellipsis\";\r\n            }\r\n            if (AdaptiveCard.useAdvancedTextBlockTruncation || AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n                this._originalInnerHtml = element.innerHTML;\r\n            }\r\n            return element;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    TextBlock.prototype.truncateOverflow = function (maxHeight) {\r\n        if (maxHeight >= this._computedLineHeight) {\r\n            return this.truncateIfSupported(maxHeight);\r\n        }\r\n        return false;\r\n    };\r\n    TextBlock.prototype.undoOverflowTruncation = function () {\r\n        this.restoreOriginalContent();\r\n        if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines) {\r\n            var maxHeight = this._computedLineHeight * this.maxLines;\r\n            this.truncateIfSupported(maxHeight);\r\n        }\r\n    };\r\n    TextBlock.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"wrap\", this.wrap, false);\r\n        Utils.setNumberProperty(result, \"maxLines\", this.maxLines);\r\n        return result;\r\n    };\r\n    TextBlock.prototype.applyStylesTo = function (targetElement) {\r\n        _super.prototype.applyStylesTo.call(this, targetElement);\r\n        var parentContainer = this.getParentContainer();\r\n        var isRtl = parentContainer ? parentContainer.isRtl() : false;\r\n        switch (this.horizontalAlignment) {\r\n            case Enums.HorizontalAlignment.Center:\r\n                targetElement.style.textAlign = \"center\";\r\n                break;\r\n            case Enums.HorizontalAlignment.Right:\r\n                targetElement.style.textAlign = isRtl ? \"left\" : \"right\";\r\n                break;\r\n            default:\r\n                targetElement.style.textAlign = isRtl ? \"right\" : \"left\";\r\n                break;\r\n        }\r\n        var lineHeights = this.hostConfig.lineHeights;\r\n        if (lineHeights) {\r\n            switch (this.size) {\r\n                case Enums.TextSize.Small:\r\n                    this._computedLineHeight = lineHeights.small;\r\n                    break;\r\n                case Enums.TextSize.Medium:\r\n                    this._computedLineHeight = lineHeights.medium;\r\n                    break;\r\n                case Enums.TextSize.Large:\r\n                    this._computedLineHeight = lineHeights.large;\r\n                    break;\r\n                case Enums.TextSize.ExtraLarge:\r\n                    this._computedLineHeight = lineHeights.extraLarge;\r\n                    break;\r\n                default:\r\n                    this._computedLineHeight = lineHeights.default;\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            // Looks like 1.33 is the magic number to compute line-height\r\n            // from font size.\r\n            this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;\r\n        }\r\n        targetElement.style.lineHeight = this._computedLineHeight + \"px\";\r\n    };\r\n    TextBlock.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\r\n        this.maxLines = Utils.getNumberValue(json[\"maxLines\"]);\r\n    };\r\n    TextBlock.prototype.getJsonTypeName = function () {\r\n        return \"TextBlock\";\r\n    };\r\n    TextBlock.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = false; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines && this.isRendered()) {\r\n            // Reset the element's innerHTML in case the available room for\r\n            // content has increased\r\n            this.restoreOriginalContent();\r\n            this.truncateIfSupported(this._computedLineHeight * this.maxLines);\r\n        }\r\n    };\r\n    return TextBlock;\r\n}(BaseTextBlock));\r\nexports.TextBlock = TextBlock;\r\nvar Label = /** @class */ (function (_super) {\r\n    __extends(Label, _super);\r\n    function Label() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Label.prototype.getRenderedDomElementType = function () {\r\n        return \"label\";\r\n    };\r\n    Label.prototype.internalRender = function () {\r\n        var renderedElement = _super.prototype.internalRender.call(this);\r\n        if (renderedElement && !Utils.isNullOrEmpty(this.forElementId)) {\r\n            renderedElement.htmlFor = this.forElementId;\r\n        }\r\n        return renderedElement;\r\n    };\r\n    return Label;\r\n}(TextBlock));\r\nvar TextRun = /** @class */ (function (_super) {\r\n    __extends(TextRun, _super);\r\n    function TextRun() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.italic = false;\r\n        _this.strikethrough = false;\r\n        _this.highlight = false;\r\n        return _this;\r\n    }\r\n    TextRun.prototype.internalRender = function () {\r\n        var _this = this;\r\n        if (!Utils.isNullOrEmpty(this.text)) {\r\n            var hostConfig = this.hostConfig;\r\n            var formattedText = TextFormatters.formatText(this.lang, this.text);\r\n            var element = document.createElement(\"span\");\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\r\n            this.applyStylesTo(element);\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                var anchor = document.createElement(\"a\");\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.href = this.selectAction.getHref();\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = function (e) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.selectAction.execute();\r\n                };\r\n                anchor.innerText = formattedText;\r\n                element.appendChild(anchor);\r\n            }\r\n            else {\r\n                element.innerText = formattedText;\r\n            }\r\n            return element;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    TextRun.prototype.applyStylesTo = function (targetElement) {\r\n        _super.prototype.applyStylesTo.call(this, targetElement);\r\n        if (this.italic) {\r\n            targetElement.style.fontStyle = \"italic\";\r\n        }\r\n        if (this.strikethrough) {\r\n            targetElement.style.textDecoration = \"line-through\";\r\n        }\r\n        if (this.highlight) {\r\n            var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n            targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);\r\n        }\r\n    };\r\n    TextRun.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"italic\", this.italic, false);\r\n        Utils.setProperty(result, \"strikethrough\", this.strikethrough, false);\r\n        Utils.setProperty(result, \"highlight\", this.highlight, false);\r\n        if (this.selectAction) {\r\n            Utils.setProperty(result, \"selectAction\", this.selectAction.toJSON());\r\n        }\r\n        return result;\r\n    };\r\n    TextRun.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.italic = Utils.getBoolValue(json[\"italic\"], this.italic);\r\n        this.strikethrough = Utils.getBoolValue(json[\"strikethrough\"], this.strikethrough);\r\n        this.highlight = Utils.getBoolValue(json[\"highlight\"], this.highlight);\r\n        this.selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\r\n    };\r\n    TextRun.prototype.getJsonTypeName = function () {\r\n        return \"TextRun\";\r\n    };\r\n    Object.defineProperty(TextRun.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TextRun.prototype, \"isInline\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return TextRun;\r\n}(BaseTextBlock));\r\nexports.TextRun = TextRun;\r\nvar RichTextBlock = /** @class */ (function (_super) {\r\n    __extends(RichTextBlock, _super);\r\n    function RichTextBlock() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._inlines = [];\r\n        return _this;\r\n    }\r\n    RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {\r\n        if (forceAdd === void 0) { forceAdd = false; }\r\n        if (!inline.isInline) {\r\n            throw new Error(\"RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.\");\r\n        }\r\n        var doAdd = inline.parent == null || forceAdd;\r\n        if (!doAdd && inline.parent != this) {\r\n            throw new Error(\"RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.\");\r\n        }\r\n        else {\r\n            inline.setParent(this);\r\n            this._inlines.push(inline);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalRender = function () {\r\n        if (this._inlines.length > 0) {\r\n            var element = document.createElement(\"div\");\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\r\n            var parentContainer = this.getParentContainer();\r\n            var isRtl = parentContainer ? parentContainer.isRtl() : false;\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.textAlign = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.textAlign = isRtl ? \"left\" : \"right\";\r\n                    break;\r\n                default:\r\n                    element.style.textAlign = isRtl ? \"right\" : \"left\";\r\n                    break;\r\n            }\r\n            var renderedInlines = 0;\r\n            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n                var inline = _a[_i];\r\n                var renderedInline = inline.render();\r\n                if (renderedInline) {\r\n                    element.appendChild(renderedInline);\r\n                    renderedInlines++;\r\n                }\r\n            }\r\n            if (renderedInlines > 0) {\r\n                return element;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    RichTextBlock.prototype.asString = function () {\r\n        var result = \"\";\r\n        for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n            var inline = _a[_i];\r\n            result += inline.asString();\r\n        }\r\n        return result;\r\n    };\r\n    RichTextBlock.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this._inlines = [];\r\n        if (Array.isArray(json[\"inlines\"])) {\r\n            for (var _i = 0, _a = json[\"inlines\"]; _i < _a.length; _i++) {\r\n                var jsonInline = _a[_i];\r\n                var inline = void 0;\r\n                if (typeof jsonInline === \"string\") {\r\n                    var textRun = new TextRun();\r\n                    textRun.text = jsonInline;\r\n                    inline = textRun;\r\n                }\r\n                else {\r\n                    inline = createElementInstance(this, jsonInline, false, // No fallback for inlines in 1.2\r\n                    errors);\r\n                }\r\n                if (inline) {\r\n                    this.internalAddInline(inline, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    RichTextBlock.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        if (this._inlines.length > 0) {\r\n            var jsonInlines = [];\r\n            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n                var inline = _a[_i];\r\n                jsonInlines.push(inline.toJSON());\r\n            }\r\n            Utils.setProperty(result, \"inlines\", jsonInlines);\r\n        }\r\n        return result;\r\n    };\r\n    RichTextBlock.prototype.getJsonTypeName = function () {\r\n        return \"RichTextBlock\";\r\n    };\r\n    RichTextBlock.prototype.getInlineCount = function () {\r\n        return this._inlines.length;\r\n    };\r\n    RichTextBlock.prototype.getInlineAt = function (index) {\r\n        if (index >= 0 && index < this._inlines.length) {\r\n            return this._inlines[index];\r\n        }\r\n        else {\r\n            throw new Error(\"RichTextBlock.getInlineAt: Index out of range (\" + index + \")\");\r\n        }\r\n    };\r\n    RichTextBlock.prototype.addInline = function (inline) {\r\n        this.internalAddInline(inline);\r\n    };\r\n    RichTextBlock.prototype.removeInline = function (inline) {\r\n        var index = this._inlines.indexOf(inline);\r\n        if (index >= 0) {\r\n            this._inlines[index].setParent(null);\r\n            this._inlines.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return RichTextBlock;\r\n}(CardElement));\r\nexports.RichTextBlock = RichTextBlock;\r\nvar Fact = /** @class */ (function (_super) {\r\n    __extends(Fact, _super);\r\n    function Fact(name, value) {\r\n        if (name === void 0) { name = undefined; }\r\n        if (value === void 0) { value = undefined; }\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    Fact.prototype.parse = function (json) {\r\n        _super.prototype.parse.call(this, json);\r\n        this.name = Utils.getStringValue(json[\"title\"]);\r\n        this.value = Utils.getStringValue(json[\"value\"]);\r\n    };\r\n    Fact.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"title\", this.name);\r\n        Utils.setProperty(result, \"value\", this.value);\r\n        return result;\r\n    };\r\n    return Fact;\r\n}(SerializableObject));\r\nexports.Fact = Fact;\r\nvar FactSet = /** @class */ (function (_super) {\r\n    __extends(FactSet, _super);\r\n    function FactSet() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.facts = [];\r\n        return _this;\r\n    }\r\n    Object.defineProperty(FactSet.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FactSet.prototype.internalRender = function () {\r\n        var element = null;\r\n        var hostConfig = this.hostConfig;\r\n        if (this.facts.length > 0) {\r\n            element = document.createElement(\"table\");\r\n            element.style.borderWidth = \"0px\";\r\n            element.style.borderSpacing = \"0px\";\r\n            element.style.borderStyle = \"none\";\r\n            element.style.borderCollapse = \"collapse\";\r\n            element.style.display = \"block\";\r\n            element.style.overflow = \"hidden\";\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\r\n            for (var i = 0; i < this.facts.length; i++) {\r\n                var trElement = document.createElement(\"tr\");\r\n                if (i > 0) {\r\n                    trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\r\n                }\r\n                // Title column\r\n                var tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\r\n                if (hostConfig.factSet.title.maxWidth) {\r\n                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\r\n                }\r\n                tdElement.style.verticalAlign = \"top\";\r\n                var textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = (Utils.isNullOrEmpty(this.facts[i].name) && this.isDesignMode()) ? \"Title\" : this.facts[i].name;\r\n                textBlock.size = hostConfig.factSet.title.size;\r\n                textBlock.color = hostConfig.factSet.title.color;\r\n                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.title.weight;\r\n                textBlock.wrap = hostConfig.factSet.title.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                // Spacer column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.width = \"10px\";\r\n                Utils.appendChild(trElement, tdElement);\r\n                // Value column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.style.verticalAlign = \"top\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\r\n                textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = this.facts[i].value;\r\n                textBlock.size = hostConfig.factSet.value.size;\r\n                textBlock.color = hostConfig.factSet.value.color;\r\n                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.value.weight;\r\n                textBlock.wrap = hostConfig.factSet.value.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                Utils.appendChild(element, trElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    FactSet.prototype.getJsonTypeName = function () {\r\n        return \"FactSet\";\r\n    };\r\n    FactSet.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setArrayProperty(result, \"facts\", this.facts);\r\n        return result;\r\n    };\r\n    FactSet.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.facts = [];\r\n        var jsonFacts = json[\"facts\"];\r\n        if (Array.isArray(jsonFacts)) {\r\n            for (var _i = 0, jsonFacts_1 = jsonFacts; _i < jsonFacts_1.length; _i++) {\r\n                var jsonFact = jsonFacts_1[_i];\r\n                var fact = new Fact();\r\n                fact.parse(jsonFact);\r\n                this.facts.push(fact);\r\n            }\r\n        }\r\n    };\r\n    return FactSet;\r\n}(CardElement));\r\nexports.FactSet = FactSet;\r\nvar Image = /** @class */ (function (_super) {\r\n    __extends(Image, _super);\r\n    function Image() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.style = Enums.ImageStyle.Default;\r\n        _this.size = Enums.Size.Auto;\r\n        _this.pixelWidth = null;\r\n        _this.pixelHeight = null;\r\n        _this.altText = \"\";\r\n        return _this;\r\n    }\r\n    Image.prototype.parseDimension = function (name, value, errors) {\r\n        if (value) {\r\n            if (typeof value === \"string\") {\r\n                try {\r\n                    var size = Shared.SizeAndUnit.parse(value);\r\n                    if (size.unit == Enums.SizeUnit.Pixel) {\r\n                        return size.physicalSize;\r\n                    }\r\n                }\r\n                catch (_a) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n            raiseParseError({\r\n                error: Enums.ValidationError.InvalidPropertyValue,\r\n                message: \"Invalid image \" + name + \": \" + value\r\n            }, errors);\r\n        }\r\n        return 0;\r\n    };\r\n    Image.prototype.applySize = function (element) {\r\n        if (this.pixelWidth || this.pixelHeight) {\r\n            if (this.pixelWidth) {\r\n                element.style.width = this.pixelWidth + \"px\";\r\n            }\r\n            if (this.pixelHeight) {\r\n                element.style.height = this.pixelHeight + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            switch (this.size) {\r\n                case Enums.Size.Stretch:\r\n                    element.style.width = \"100%\";\r\n                    break;\r\n                case Enums.Size.Auto:\r\n                    element.style.maxWidth = \"100%\";\r\n                    break;\r\n                case Enums.Size.Small:\r\n                    element.style.width = this.hostConfig.imageSizes.small + \"px\";\r\n                    break;\r\n                case Enums.Size.Large:\r\n                    element.style.width = this.hostConfig.imageSizes.large + \"px\";\r\n                    break;\r\n                case Enums.Size.Medium:\r\n                    element.style.width = this.hostConfig.imageSizes.medium + \"px\";\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Image.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Image.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var element = null;\r\n        if (!Utils.isNullOrEmpty(this.url)) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.alignItems = \"flex-start\";\r\n            element.onkeypress = function (e) {\r\n                if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) { // enter or space pressed\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.selectAction.execute();\r\n                }\r\n            };\r\n            element.onclick = function (e) {\r\n                if (_this.selectAction) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.selectAction.execute();\r\n                }\r\n            };\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n            // Cache hostConfig to avoid walking the parent hierarchy multiple times\r\n            var hostConfig = this.hostConfig;\r\n            var imageElement = document.createElement(\"img\");\r\n            imageElement.onload = function (e) {\r\n                raiseImageLoadedEvent(_this);\r\n            };\r\n            imageElement.onerror = function (e) {\r\n                var card = _this.getRootElement();\r\n                _this.renderedElement.innerHTML = \"\";\r\n                if (card && card.designMode) {\r\n                    var errorElement = document.createElement(\"div\");\r\n                    errorElement.style.display = \"flex\";\r\n                    errorElement.style.alignItems = \"center\";\r\n                    errorElement.style.justifyContent = \"center\";\r\n                    errorElement.style.backgroundColor = \"#EEEEEE\";\r\n                    errorElement.style.color = \"black\";\r\n                    errorElement.innerText = \":-(\";\r\n                    errorElement.style.padding = \"10px\";\r\n                    _this.applySize(errorElement);\r\n                    _this.renderedElement.appendChild(errorElement);\r\n                }\r\n                raiseImageLoadedEvent(_this);\r\n            };\r\n            imageElement.style.maxHeight = \"100%\";\r\n            imageElement.style.minWidth = \"0\";\r\n            imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\r\n            if (this.selectAction != null && hostConfig.supportsInteractivity) {\r\n                imageElement.tabIndex = 0;\r\n                imageElement.setAttribute(\"role\", this.selectAction.getAriaRole());\r\n                imageElement.setAttribute(\"aria-label\", this.selectAction.title);\r\n                imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n            }\r\n            this.applySize(imageElement);\r\n            if (this.style === Enums.ImageStyle.Person) {\r\n                imageElement.style.borderRadius = \"50%\";\r\n                imageElement.style.backgroundPosition = \"50% 50%\";\r\n                imageElement.style.backgroundRepeat = \"no-repeat\";\r\n            }\r\n            if (!Utils.isNullOrEmpty(this.backgroundColor)) {\r\n                imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);\r\n            }\r\n            imageElement.src = this.url;\r\n            if (!Utils.isNullOrEmpty(this.altText)) {\r\n                imageElement.alt = this.altText;\r\n            }\r\n            element.appendChild(imageElement);\r\n        }\r\n        return element;\r\n    };\r\n    Image.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        if (this._selectAction) {\r\n            Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\r\n        }\r\n        Utils.setEnumProperty(Enums.ImageStyle, result, \"style\", this.style, Enums.ImageStyle.Default);\r\n        Utils.setProperty(result, \"backgroundColor\", this.backgroundColor);\r\n        Utils.setProperty(result, \"url\", this.url);\r\n        Utils.setEnumProperty(Enums.Size, result, \"size\", this.size, Enums.Size.Auto);\r\n        if (this.pixelWidth) {\r\n            Utils.setProperty(result, \"width\", this.pixelWidth + \"px\");\r\n        }\r\n        if (this.pixelHeight) {\r\n            Utils.setProperty(result, \"height\", this.pixelHeight + \"px\");\r\n        }\r\n        Utils.setProperty(result, \"altText\", this.altText);\r\n        return result;\r\n    };\r\n    Image.prototype.getJsonTypeName = function () {\r\n        return \"Image\";\r\n    };\r\n    Image.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result && this.selectAction) {\r\n            result = this.selectAction.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    Image.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n        this.backgroundColor = Utils.getStringValue(json[\"backgroundColor\"]);\r\n        var styleString = Utils.getStringValue(json[\"style\"]);\r\n        if (styleString && styleString.toLowerCase() === \"normal\") {\r\n            this.style = Enums.ImageStyle.Default;\r\n            raiseParseError({\r\n                error: Enums.ValidationError.Deprecated,\r\n                message: \"The Image.style value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\r\n            }, errors);\r\n        }\r\n        else {\r\n            this.style = Utils.getEnumValue(Enums.ImageStyle, styleString, this.style);\r\n        }\r\n        this.size = Utils.getEnumValue(Enums.Size, json[\"size\"], this.size);\r\n        this.altText = Utils.getStringValue(json[\"altText\"]);\r\n        // pixelWidth and pixelHeight are only parsed for backwards compatibility.\r\n        // Payloads should use the width and height proerties instead.\r\n        if (json[\"pixelWidth\"] && typeof json[\"pixelWidth\"] === \"number\") {\r\n            this.pixelWidth = json[\"pixelWidth\"];\r\n            raiseParseError({\r\n                error: Enums.ValidationError.Deprecated,\r\n                message: \"The pixelWidth property is deprecated and will be removed. Use the width property instead.\"\r\n            }, errors);\r\n        }\r\n        if (json[\"pixelHeight\"] && typeof json[\"pixelHeight\"] === \"number\") {\r\n            this.pixelHeight = json[\"pixelHeight\"];\r\n            raiseParseError({\r\n                error: Enums.ValidationError.Deprecated,\r\n                message: \"The pixelHeight property is deprecated and will be removed. Use the height property instead.\"\r\n            }, errors);\r\n        }\r\n        var size = this.parseDimension(\"width\", json[\"width\"], errors);\r\n        if (size > 0) {\r\n            this.pixelWidth = size;\r\n        }\r\n        size = this.parseDimension(\"height\", json[\"height\"], errors);\r\n        if (size > 0) {\r\n            this.pixelHeight = size;\r\n        }\r\n        this.selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\r\n    };\r\n    Image.prototype.getResourceInformation = function () {\r\n        if (!Utils.isNullOrEmpty(this.url)) {\r\n            return [{ url: this.url, mimeType: \"image\" }];\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    };\r\n    Object.defineProperty(Image.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this._selectAction;\r\n        },\r\n        set: function (value) {\r\n            this._selectAction = value;\r\n            if (this._selectAction) {\r\n                this._selectAction.setParent(this);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Image;\r\n}(CardElement));\r\nexports.Image = Image;\r\nvar CardElementContainer = /** @class */ (function (_super) {\r\n    __extends(CardElementContainer, _super);\r\n    function CardElementContainer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._selectAction = null;\r\n        _this.allowVerticalOverflow = false;\r\n        return _this;\r\n    }\r\n    CardElementContainer.prototype.isElementAllowed = function (element, forbiddenElementTypes) {\r\n        if (!this.hostConfig.supportsInteractivity && element.isInteractive) {\r\n            return false;\r\n        }\r\n        if (forbiddenElementTypes) {\r\n            for (var _i = 0, forbiddenElementTypes_1 = forbiddenElementTypes; _i < forbiddenElementTypes_1.length; _i++) {\r\n                var forbiddenElementType = forbiddenElementTypes_1[_i];\r\n                if (element.getJsonTypeName() === forbiddenElementType) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    CardElementContainer.prototype.applyPadding = function () {\r\n        _super.prototype.applyPadding.call(this);\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n        var physicalPadding = new Shared.SpacingDefinition();\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n        this.renderedElement.style.marginRight = \"0\";\r\n        this.renderedElement.style.marginLeft = \"0\";\r\n    };\r\n    CardElementContainer.prototype.getSelectAction = function () {\r\n        return this._selectAction;\r\n    };\r\n    CardElementContainer.prototype.setSelectAction = function (value) {\r\n        this._selectAction = value;\r\n        if (this._selectAction) {\r\n            this._selectAction.setParent(this);\r\n        }\r\n    };\r\n    Object.defineProperty(CardElementContainer.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CardElementContainer.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        if (this.isSelectable) {\r\n            this._selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\r\n        }\r\n    };\r\n    CardElementContainer.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        if (this._selectAction && this.isSelectable) {\r\n            Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            var item = this.getItemAt(i);\r\n            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\r\n                context.addFailure(this, {\r\n                    error: Enums.ValidationError.InteractivityNotAllowed,\r\n                    message: \"Interactivity is not allowed.\"\r\n                });\r\n            }\r\n            if (!this.isElementAllowed(item, this.getForbiddenElementTypes())) {\r\n                context.addFailure(this, {\r\n                    error: Enums.ValidationError.InteractivityNotAllowed,\r\n                    message: \"Elements of type \" + item.getJsonTypeName() + \" are not allowed in this container.\"\r\n                });\r\n            }\r\n            item.internalValidateProperties(context);\r\n        }\r\n        if (this._selectAction) {\r\n            this._selectAction.internalValidateProperties(context);\r\n        }\r\n    };\r\n    CardElementContainer.prototype.render = function () {\r\n        var _this = this;\r\n        var element = _super.prototype.render.call(this);\r\n        var hostConfig = this.hostConfig;\r\n        if (this.allowVerticalOverflow) {\r\n            element.style.overflowX = \"hidden\";\r\n            element.style.overflowY = \"auto\";\r\n        }\r\n        if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n            element.tabIndex = 0;\r\n            element.setAttribute(\"role\", this._selectAction.getAriaRole());\r\n            element.setAttribute(\"aria-label\", this._selectAction.title);\r\n            element.onclick = function (e) {\r\n                if (_this._selectAction != null) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this._selectAction.execute();\r\n                }\r\n            };\r\n            element.onkeypress = function (e) {\r\n                if (_this._selectAction != null && (e.keyCode == 13 || e.keyCode == 32)) {\r\n                    // Enter or space pressed\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this._selectAction.execute();\r\n                }\r\n            };\r\n        }\r\n        return element;\r\n    };\r\n    CardElementContainer.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (processChildren) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                this.getItemAt(i).updateLayout();\r\n            }\r\n        }\r\n    };\r\n    CardElementContainer.prototype.getAllInputs = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result = result.concat(this.getItemAt(i).getAllInputs());\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result = result.concat(this.getItemAt(i).getResourceInformation());\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getElementById = function (id) {\r\n        var result = _super.prototype.getElementById.call(this, id);\r\n        if (!result) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                result = this.getItemAt(i).getElementById(id);\r\n                if (result) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    return CardElementContainer;\r\n}(CardElement));\r\nexports.CardElementContainer = CardElementContainer;\r\nvar ImageSet = /** @class */ (function (_super) {\r\n    __extends(ImageSet, _super);\r\n    function ImageSet() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._images = [];\r\n        _this.imageSize = Enums.Size.Medium;\r\n        return _this;\r\n    }\r\n    ImageSet.prototype.internalRender = function () {\r\n        var element = null;\r\n        if (this._images.length > 0) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.flexWrap = \"wrap\";\r\n            for (var i = 0; i < this._images.length; i++) {\r\n                this._images[i].size = this.imageSize;\r\n                var renderedImage = this._images[i].render();\r\n                renderedImage.style.display = \"inline-flex\";\r\n                renderedImage.style.margin = \"0px\";\r\n                renderedImage.style.marginRight = \"10px\";\r\n                renderedImage.style.maxHeight = this.hostConfig.imageSet.maxImageHeight + \"px\";\r\n                Utils.appendChild(element, renderedImage);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    ImageSet.prototype.getItemCount = function () {\r\n        return this._images.length;\r\n    };\r\n    ImageSet.prototype.getItemAt = function (index) {\r\n        return this._images[index];\r\n    };\r\n    ImageSet.prototype.getFirstVisibleRenderedItem = function () {\r\n        return this._images && this._images.length > 0 ? this._images[0] : null;\r\n    };\r\n    ImageSet.prototype.getLastVisibleRenderedItem = function () {\r\n        return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : null;\r\n    };\r\n    ImageSet.prototype.removeItem = function (item) {\r\n        if (item instanceof Image) {\r\n            var itemIndex = this._images.indexOf(item);\r\n            if (itemIndex >= 0) {\r\n                this._images.splice(itemIndex, 1);\r\n                item.setParent(null);\r\n                this.updateLayout();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ImageSet.prototype.getJsonTypeName = function () {\r\n        return \"ImageSet\";\r\n    };\r\n    ImageSet.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setEnumProperty(Enums.Size, result, \"imageSize\", this.imageSize, Enums.Size.Medium);\r\n        if (this._images.length > 0) {\r\n            var images = [];\r\n            for (var _i = 0, _a = this._images; _i < _a.length; _i++) {\r\n                var image = _a[_i];\r\n                images.push(image.toJSON());\r\n            }\r\n            Utils.setProperty(result, \"images\", images);\r\n        }\r\n        return result;\r\n    };\r\n    ImageSet.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.imageSize = Utils.getEnumValue(Enums.Size, json[\"imageSize\"], Enums.Size.Medium);\r\n        if (json[\"images\"] != null) {\r\n            var jsonImages = json[\"images\"];\r\n            this._images = [];\r\n            for (var i = 0; i < jsonImages.length; i++) {\r\n                var image = new Image();\r\n                image.parse(jsonImages[i], errors);\r\n                this.addImage(image);\r\n            }\r\n        }\r\n    };\r\n    ImageSet.prototype.addImage = function (image) {\r\n        if (!image.parent) {\r\n            this._images.push(image);\r\n            image.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(\"This image already belongs to another ImageSet\");\r\n        }\r\n    };\r\n    ImageSet.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\r\n    };\r\n    return ImageSet;\r\n}(CardElementContainer));\r\nexports.ImageSet = ImageSet;\r\nvar MediaSource = /** @class */ (function (_super) {\r\n    __extends(MediaSource, _super);\r\n    function MediaSource(url, mimeType) {\r\n        if (url === void 0) { url = undefined; }\r\n        if (mimeType === void 0) { mimeType = undefined; }\r\n        var _this = _super.call(this) || this;\r\n        _this.url = url;\r\n        _this.mimeType = mimeType;\r\n        return _this;\r\n    }\r\n    MediaSource.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.mimeType = Utils.getStringValue(json[\"mimeType\"]);\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n    };\r\n    MediaSource.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"mimeType\", this.mimeType);\r\n        Utils.setProperty(result, \"url\", this.url);\r\n        return result;\r\n    };\r\n    return MediaSource;\r\n}(SerializableObject));\r\nexports.MediaSource = MediaSource;\r\nvar Media = /** @class */ (function (_super) {\r\n    __extends(Media, _super);\r\n    function Media() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.sources = [];\r\n        return _this;\r\n    }\r\n    Media.prototype.getPosterUrl = function () {\r\n        return this.poster ? this.poster : this.hostConfig.media.defaultPoster;\r\n    };\r\n    Media.prototype.processSources = function () {\r\n        this._selectedSources = [];\r\n        this._selectedMediaType = undefined;\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var source = _a[_i];\r\n            var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];\r\n            if (mimeComponents.length == 2) {\r\n                if (!this._selectedMediaType) {\r\n                    var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);\r\n                    if (index >= 0) {\r\n                        this._selectedMediaType = Media.supportedMediaTypes[index];\r\n                    }\r\n                }\r\n                if (mimeComponents[0] == this._selectedMediaType) {\r\n                    this._selectedSources.push(source);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Media.prototype.renderPoster = function () {\r\n        var _this = this;\r\n        var playButtonArrowWidth = 12;\r\n        var playButtonArrowHeight = 15;\r\n        var posterRootElement = document.createElement(\"div\");\r\n        posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\r\n        posterRootElement.setAttribute(\"role\", \"contentinfo\");\r\n        posterRootElement.setAttribute(\"aria-label\", this.altText ? this.altText : \"Media content\");\r\n        posterRootElement.style.position = \"relative\";\r\n        posterRootElement.style.display = \"flex\";\r\n        var posterUrl = this.getPosterUrl();\r\n        if (posterUrl) {\r\n            var posterImageElement_1 = document.createElement(\"img\");\r\n            posterImageElement_1.style.width = \"100%\";\r\n            posterImageElement_1.style.height = \"100%\";\r\n            posterImageElement_1.onerror = function (e) {\r\n                posterImageElement_1.parentNode.removeChild(posterImageElement_1);\r\n                posterRootElement.classList.add(\"empty\");\r\n                posterRootElement.style.minHeight = \"150px\";\r\n            };\r\n            posterImageElement_1.src = posterUrl;\r\n            posterRootElement.appendChild(posterImageElement_1);\r\n        }\r\n        else {\r\n            posterRootElement.classList.add(\"empty\");\r\n            posterRootElement.style.minHeight = \"150px\";\r\n        }\r\n        if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {\r\n            var playButtonOuterElement = document.createElement(\"div\");\r\n            playButtonOuterElement.setAttribute(\"role\", \"button\");\r\n            playButtonOuterElement.setAttribute(\"aria-label\", \"Play media\");\r\n            playButtonOuterElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton\");\r\n            playButtonOuterElement.style.display = \"flex\";\r\n            playButtonOuterElement.style.alignItems = \"center\";\r\n            playButtonOuterElement.style.justifyContent = \"center\";\r\n            playButtonOuterElement.onclick = function (e) {\r\n                if (_this.hostConfig.media.allowInlinePlayback) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    var mediaPlayerElement = _this.renderMediaPlayer();\r\n                    _this.renderedElement.innerHTML = \"\";\r\n                    _this.renderedElement.appendChild(mediaPlayerElement);\r\n                    mediaPlayerElement.play();\r\n                }\r\n                else {\r\n                    if (Media.onPlay) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        Media.onPlay(_this);\r\n                    }\r\n                }\r\n            };\r\n            var playButtonInnerElement = document.createElement(\"div\");\r\n            playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\r\n            playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\r\n            playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\r\n            playButtonInnerElement.style.borderTopWidth = (playButtonArrowHeight / 2) + \"px\";\r\n            playButtonInnerElement.style.borderBottomWidth = (playButtonArrowHeight / 2) + \"px\";\r\n            playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\r\n            playButtonInnerElement.style.borderRightWidth = \"0\";\r\n            playButtonInnerElement.style.borderStyle = \"solid\";\r\n            playButtonInnerElement.style.borderTopColor = \"transparent\";\r\n            playButtonInnerElement.style.borderRightColor = \"transparent\";\r\n            playButtonInnerElement.style.borderBottomColor = \"transparent\";\r\n            playButtonInnerElement.style.transform = \"translate(\" + (playButtonArrowWidth / 10) + \"px,0px)\";\r\n            playButtonOuterElement.appendChild(playButtonInnerElement);\r\n            var playButtonContainer = document.createElement(\"div\");\r\n            playButtonContainer.style.position = \"absolute\";\r\n            playButtonContainer.style.left = \"0\";\r\n            playButtonContainer.style.top = \"0\";\r\n            playButtonContainer.style.width = \"100%\";\r\n            playButtonContainer.style.height = \"100%\";\r\n            playButtonContainer.style.display = \"flex\";\r\n            playButtonContainer.style.justifyContent = \"center\";\r\n            playButtonContainer.style.alignItems = \"center\";\r\n            playButtonContainer.appendChild(playButtonOuterElement);\r\n            posterRootElement.appendChild(playButtonContainer);\r\n        }\r\n        return posterRootElement;\r\n    };\r\n    Media.prototype.renderMediaPlayer = function () {\r\n        var mediaElement;\r\n        if (this._selectedMediaType == \"video\") {\r\n            var videoPlayer = document.createElement(\"video\");\r\n            var posterUrl = this.getPosterUrl();\r\n            if (posterUrl) {\r\n                videoPlayer.poster = posterUrl;\r\n            }\r\n            mediaElement = videoPlayer;\r\n        }\r\n        else {\r\n            mediaElement = document.createElement(\"audio\");\r\n        }\r\n        mediaElement.controls = true;\r\n        mediaElement.preload = \"none\";\r\n        mediaElement.style.width = \"100%\";\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var source = _a[_i];\r\n            var src = document.createElement(\"source\");\r\n            src.src = source.url;\r\n            src.type = source.mimeType;\r\n            mediaElement.appendChild(src);\r\n        }\r\n        return mediaElement;\r\n    };\r\n    Media.prototype.internalRender = function () {\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-media\");\r\n        this.processSources();\r\n        element.appendChild(this.renderPoster());\r\n        return element;\r\n    };\r\n    Media.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.poster = Utils.getStringValue(json[\"poster\"]);\r\n        this.altText = Utils.getStringValue(json[\"altText\"]);\r\n        this.sources = [];\r\n        if (Array.isArray(json[\"sources\"])) {\r\n            for (var _i = 0, _a = json[\"sources\"]; _i < _a.length; _i++) {\r\n                var jsonSource = _a[_i];\r\n                var source = new MediaSource();\r\n                source.parse(jsonSource, errors);\r\n                this.sources.push(source);\r\n            }\r\n        }\r\n    };\r\n    Media.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"poster\", this.poster);\r\n        Utils.setProperty(result, \"altText\", this.altText);\r\n        /*\r\n        if (this.sources.length > 0) {\r\n            let serializedSources = [];\r\n\r\n            for (let source of this.sources) {\r\n                serializedSources.push(source.toJSON());\r\n            }\r\n\r\n            Utils.setProperty(result, \"sources\", serializedSources);\r\n        }\r\n        */\r\n        Utils.setArrayProperty(result, \"sources\", this.sources);\r\n        return result;\r\n    };\r\n    Media.prototype.getJsonTypeName = function () {\r\n        return \"Media\";\r\n    };\r\n    Media.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        var posterUrl = this.getPosterUrl();\r\n        if (!Utils.isNullOrEmpty(posterUrl)) {\r\n            result.push({ url: posterUrl, mimeType: \"image\" });\r\n        }\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var mediaSource = _a[_i];\r\n            if (!Utils.isNullOrEmpty(mediaSource.url)) {\r\n                result.push({ url: mediaSource.url, mimeType: mediaSource.mimeType });\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(Media.prototype, \"selectedMediaType\", {\r\n        get: function () {\r\n            return this._selectedMediaType;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Media.supportedMediaTypes = [\"audio\", \"video\"];\r\n    return Media;\r\n}(CardElement));\r\nexports.Media = Media;\r\nvar InputValidationOptions = /** @class */ (function (_super) {\r\n    __extends(InputValidationOptions, _super);\r\n    function InputValidationOptions() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.necessity = Enums.InputValidationNecessity.Optional;\r\n        _this.errorMessage = undefined;\r\n        return _this;\r\n    }\r\n    InputValidationOptions.prototype.parse = function (json) {\r\n        _super.prototype.parse.call(this, json);\r\n        this.necessity = Utils.getEnumValue(Enums.InputValidationNecessity, json[\"necessity\"], this.necessity);\r\n        this.errorMessage = Utils.getStringValue(json[\"errorMessage\"]);\r\n    };\r\n    InputValidationOptions.prototype.toJSON = function () {\r\n        if (this.necessity != Enums.InputValidationNecessity.Optional || !Utils.isNullOrEmpty(this.errorMessage)) {\r\n            var result = _super.prototype.toJSON.call(this);\r\n            Utils.setEnumProperty(Enums.InputValidationNecessity, result, \"necessity\", this.necessity, Enums.InputValidationNecessity.Optional);\r\n            Utils.setProperty(result, \"errorMessage\", this.errorMessage);\r\n            return result;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    return InputValidationOptions;\r\n}(SerializableObject));\r\nexports.InputValidationOptions = InputValidationOptions;\r\nvar Input = /** @class */ (function (_super) {\r\n    __extends(Input, _super);\r\n    function Input() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.validation = new InputValidationOptions();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Input.prototype, \"isNullable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"renderedInputControlElement\", {\r\n        get: function () {\r\n            return this._renderedInputControlElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"inputControlContainerElement\", {\r\n        get: function () {\r\n            return this._inputControlContainerElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Input.prototype.overrideInternalRender = function () {\r\n        var hostConfig = this.hostConfig;\r\n        this._outerContainerElement = document.createElement(\"div\");\r\n        this._outerContainerElement.style.display = \"flex\";\r\n        this._outerContainerElement.style.flexDirection = \"column\";\r\n        this._inputControlContainerElement = document.createElement(\"div\");\r\n        this._inputControlContainerElement.className = hostConfig.makeCssClassName(\"ac-input-container\");\r\n        this._inputControlContainerElement.style.display = \"flex\";\r\n        this._renderedInputControlElement = this.internalRender();\r\n        this._renderedInputControlElement.style.minWidth = \"0px\";\r\n        if (AdaptiveCard.useBuiltInInputValidation && this.isNullable && this.validation.necessity == Enums.InputValidationNecessity.RequiredWithVisualCue) {\r\n            this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\r\n        }\r\n        this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\r\n        this._outerContainerElement.appendChild(this._inputControlContainerElement);\r\n        return this._outerContainerElement;\r\n    };\r\n    Input.prototype.valueChanged = function () {\r\n        this.resetValidationFailureCue();\r\n        if (this.onValueChanged) {\r\n            this.onValueChanged(this);\r\n        }\r\n        raiseInputValueChangedEvent(this);\r\n    };\r\n    Input.prototype.resetValidationFailureCue = function () {\r\n        if (AdaptiveCard.useBuiltInInputValidation && this.renderedElement) {\r\n            this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n            if (this._errorMessageElement) {\r\n                this._outerContainerElement.removeChild(this._errorMessageElement);\r\n                this._errorMessageElement = null;\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.showValidationErrorMessage = function () {\r\n        if (this.renderedElement && AdaptiveCard.useBuiltInInputValidation && AdaptiveCard.displayInputValidationErrors && !Utils.isNullOrEmpty(this.validation.errorMessage)) {\r\n            this._errorMessageElement = document.createElement(\"span\");\r\n            this._errorMessageElement.className = this.hostConfig.makeCssClassName(\"ac-input-validation-error-message\");\r\n            this._errorMessageElement.textContent = this.validation.errorMessage;\r\n            this._outerContainerElement.appendChild(this._errorMessageElement);\r\n        }\r\n    };\r\n    Input.prototype.parseInputValue = function (value) {\r\n        return value;\r\n    };\r\n    Input.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"title\", this.title);\r\n        Utils.setProperty(result, \"value\", this.renderedElement && !Utils.isNullOrEmpty(this.value) ? this.value : this.defaultValue);\r\n        if (AdaptiveCard.useBuiltInInputValidation) {\r\n            Utils.setProperty(result, \"validation\", this.validation.toJSON());\r\n        }\r\n        return result;\r\n    };\r\n    Input.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (Utils.isNullOrEmpty(this.id)) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.PropertyCantBeNull,\r\n                message: \"All inputs must have a unique Id\"\r\n            });\r\n        }\r\n    };\r\n    Input.prototype.validateValue = function () {\r\n        if (AdaptiveCard.useBuiltInInputValidation) {\r\n            this.resetValidationFailureCue();\r\n            var result = this.validation.necessity != Enums.InputValidationNecessity.Optional ? !Utils.isNullOrEmpty(this.value) : true;\r\n            if (!result && this.renderedElement) {\r\n                this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n                this.showValidationErrorMessage();\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    };\r\n    Input.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.id = Utils.getStringValue(json[\"id\"]);\r\n        this.defaultValue = Utils.getStringValue(json[\"value\"]);\r\n        if (AdaptiveCard.useBuiltInInputValidation) {\r\n            var jsonValidation = json[\"validation\"];\r\n            if (jsonValidation) {\r\n                this.validation.parse(jsonValidation);\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.getAllInputs = function () {\r\n        return [this];\r\n    };\r\n    Object.defineProperty(Input.prototype, \"defaultValue\", {\r\n        get: function () {\r\n            return this._defaultValue;\r\n        },\r\n        set: function (value) {\r\n            this._defaultValue = this.parseInputValue(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Input;\r\n}(CardElement));\r\nexports.Input = Input;\r\nvar TextInput = /** @class */ (function (_super) {\r\n    __extends(TextInput, _super);\r\n    function TextInput() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isMultiline = false;\r\n        _this.style = Enums.InputTextStyle.Text;\r\n        return _this;\r\n    }\r\n    TextInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        if (this.isMultiline) {\r\n            var textareaElement = document.createElement(\"textarea\");\r\n            textareaElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\r\n            textareaElement.style.flex = \"1 1 auto\";\r\n            textareaElement.tabIndex = 0;\r\n            if (!Utils.isNullOrEmpty(this.placeholder)) {\r\n                textareaElement.placeholder = this.placeholder;\r\n                textareaElement.setAttribute(\"aria-label\", this.placeholder);\r\n            }\r\n            if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n                textareaElement.value = this.defaultValue;\r\n            }\r\n            if (this.maxLength && this.maxLength > 0) {\r\n                textareaElement.maxLength = this.maxLength;\r\n            }\r\n            textareaElement.oninput = function () { _this.valueChanged(); };\r\n            textareaElement.onkeypress = function (e) {\r\n                // Ctrl+Enter pressed\r\n                if (e.keyCode == 10 && _this.inlineAction) {\r\n                    _this.inlineAction.execute();\r\n                }\r\n            };\r\n            return textareaElement;\r\n        }\r\n        else {\r\n            var inputElement = document.createElement(\"input\");\r\n            inputElement.type = Enums.InputTextStyle[this.style].toLowerCase();\r\n            inputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\r\n            inputElement.style.flex = \"1 1 auto\";\r\n            inputElement.tabIndex = 0;\r\n            if (!Utils.isNullOrEmpty(this.placeholder)) {\r\n                inputElement.placeholder = this.placeholder;\r\n                inputElement.setAttribute(\"aria-label\", this.placeholder);\r\n            }\r\n            if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n                inputElement.value = this.defaultValue;\r\n            }\r\n            if (this.maxLength && this.maxLength > 0) {\r\n                inputElement.maxLength = this.maxLength;\r\n            }\r\n            inputElement.oninput = function () { _this.valueChanged(); };\r\n            inputElement.onkeypress = function (e) {\r\n                // Enter pressed\r\n                if (e.keyCode == 13 && _this.inlineAction) {\r\n                    _this.inlineAction.execute();\r\n                }\r\n            };\r\n            return inputElement;\r\n        }\r\n    };\r\n    TextInput.prototype.overrideInternalRender = function () {\r\n        var _this = this;\r\n        var renderedInputControl = _super.prototype.overrideInternalRender.call(this);\r\n        if (this.inlineAction) {\r\n            var button_1 = document.createElement(\"button\");\r\n            button_1.className = this.hostConfig.makeCssClassName(\"ac-inlineActionButton\");\r\n            button_1.onclick = function (e) {\r\n                e.preventDefault();\r\n                e.cancelBubble = true;\r\n                _this.inlineAction.execute();\r\n            };\r\n            if (!Utils.isNullOrEmpty(this.inlineAction.iconUrl)) {\r\n                button_1.classList.add(\"iconOnly\");\r\n                var icon_1 = document.createElement(\"img\");\r\n                icon_1.style.height = \"100%\";\r\n                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\r\n                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\r\n                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\r\n                // after the image has loaded and been gicven its final size. The below trick also fixes that.\r\n                icon_1.style.display = \"none\";\r\n                icon_1.onload = function () {\r\n                    icon_1.style.removeProperty(\"display\");\r\n                };\r\n                icon_1.onerror = function () {\r\n                    button_1.removeChild(icon_1);\r\n                    button_1.classList.remove(\"iconOnly\");\r\n                    button_1.classList.add(\"textOnly\");\r\n                    button_1.textContent = !Utils.isNullOrEmpty(_this.inlineAction.title) ? _this.inlineAction.title : \"Title\";\r\n                };\r\n                icon_1.src = this.inlineAction.iconUrl;\r\n                button_1.appendChild(icon_1);\r\n                if (!Utils.isNullOrEmpty(this.inlineAction.title)) {\r\n                    button_1.title = this.inlineAction.title;\r\n                }\r\n            }\r\n            else {\r\n                button_1.classList.add(\"textOnly\");\r\n                button_1.textContent = !Utils.isNullOrEmpty(this.inlineAction.title) ? this.inlineAction.title : \"Title\";\r\n            }\r\n            button_1.style.marginLeft = \"8px\";\r\n            this.inputControlContainerElement.appendChild(button_1);\r\n        }\r\n        return renderedInputControl;\r\n    };\r\n    TextInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Text\";\r\n    };\r\n    TextInput.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result && this.inlineAction) {\r\n            result = this.inlineAction.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    TextInput.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"placeholder\", this.placeholder);\r\n        Utils.setNumberProperty(result, \"maxLength\", this.maxLength);\r\n        Utils.setProperty(result, \"isMultiline\", this.isMultiline, false);\r\n        Utils.setEnumProperty(Enums.InputTextStyle, result, \"style\", this.style, Enums.InputTextStyle.Text);\r\n        if (this._inlineAction) {\r\n            Utils.setProperty(result, \"inlineAction\", this._inlineAction.toJSON());\r\n        }\r\n        return result;\r\n    };\r\n    TextInput.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.maxLength = Utils.getNumberValue(json[\"maxLength\"]);\r\n        this.isMultiline = Utils.getBoolValue(json[\"isMultiline\"], this.isMultiline);\r\n        this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\r\n        this.style = Utils.getEnumValue(Enums.InputTextStyle, json[\"style\"], this.style);\r\n        this.inlineAction = createActionInstance(this, json[\"inlineAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\r\n    };\r\n    Object.defineProperty(TextInput.prototype, \"inlineAction\", {\r\n        get: function () {\r\n            return this._inlineAction;\r\n        },\r\n        set: function (value) {\r\n            this._inlineAction = value;\r\n            if (this._inlineAction) {\r\n                this._inlineAction.setParent(this);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TextInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (this.renderedInputControlElement) {\r\n                if (this.isMultiline) {\r\n                    return this.renderedInputControlElement.value;\r\n                }\r\n                else {\r\n                    return this.renderedInputControlElement.value;\r\n                }\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return TextInput;\r\n}(Input));\r\nexports.TextInput = TextInput;\r\nvar ToggleInput = /** @class */ (function (_super) {\r\n    __extends(ToggleInput, _super);\r\n    function ToggleInput() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.valueOn = \"true\";\r\n        _this.valueOff = \"false\";\r\n        _this.wrap = false;\r\n        return _this;\r\n    }\r\n    ToggleInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\r\n        element.style.width = \"100%\";\r\n        element.style.display = \"flex\";\r\n        element.style.alignItems = \"center\";\r\n        this._checkboxInputElement = document.createElement(\"input\");\r\n        this._checkboxInputElement.id = Utils.generateUniqueId();\r\n        this._checkboxInputElement.type = \"checkbox\";\r\n        this._checkboxInputElement.style.display = \"inline-block\";\r\n        this._checkboxInputElement.style.verticalAlign = \"middle\";\r\n        this._checkboxInputElement.style.margin = \"0\";\r\n        this._checkboxInputElement.style.flex = \"0 0 auto\";\r\n        this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\r\n        this._checkboxInputElement.tabIndex = 0;\r\n        if (this.defaultValue == this.valueOn) {\r\n            this._checkboxInputElement.checked = true;\r\n        }\r\n        this._checkboxInputElement.onchange = function () { _this.valueChanged(); };\r\n        Utils.appendChild(element, this._checkboxInputElement);\r\n        if (!Utils.isNullOrEmpty(this.title) || this.isDesignMode()) {\r\n            var label = new Label();\r\n            label.setParent(this);\r\n            label.forElementId = this._checkboxInputElement.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = Utils.isNullOrEmpty(this.title) ? this.getJsonTypeName() : this.title;\r\n            label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n            var labelElement = label.render();\r\n            labelElement.style.display = \"inline-block\";\r\n            labelElement.style.flex = \"1 1 auto\";\r\n            labelElement.style.marginLeft = \"6px\";\r\n            labelElement.style.verticalAlign = \"middle\";\r\n            var spacerElement = document.createElement(\"div\");\r\n            spacerElement.style.width = \"6px\";\r\n            Utils.appendChild(element, spacerElement);\r\n            Utils.appendChild(element, labelElement);\r\n        }\r\n        return element;\r\n    };\r\n    Object.defineProperty(ToggleInput.prototype, \"isNullable\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ToggleInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Toggle\";\r\n    };\r\n    ToggleInput.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"valueOn\", this.valueOn, \"true\");\r\n        Utils.setProperty(result, \"valueOff\", this.valueOff, \"false\");\r\n        Utils.setProperty(result, \"wrap\", this.wrap);\r\n        return result;\r\n    };\r\n    ToggleInput.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.title = Utils.getStringValue(json[\"title\"]);\r\n        this.valueOn = Utils.getStringValue(json[\"valueOn\"], this.valueOn);\r\n        this.valueOff = Utils.getStringValue(json[\"valueOff\"], this.valueOff);\r\n        this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\r\n    };\r\n    Object.defineProperty(ToggleInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (this._checkboxInputElement) {\r\n                return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ToggleInput;\r\n}(Input));\r\nexports.ToggleInput = ToggleInput;\r\nvar Choice = /** @class */ (function (_super) {\r\n    __extends(Choice, _super);\r\n    function Choice(title, value) {\r\n        if (title === void 0) { title = undefined; }\r\n        if (value === void 0) { value = undefined; }\r\n        var _this = _super.call(this) || this;\r\n        _this.title = title;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    Choice.prototype.parse = function (json) {\r\n        _super.prototype.parse.call(this, json);\r\n        this.title = Utils.getStringValue(json[\"title\"], \"\");\r\n        this.value = Utils.getStringValue(json[\"value\"], \"\");\r\n    };\r\n    Choice.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"title\", this.title);\r\n        Utils.setProperty(result, \"value\", this.value);\r\n        return result;\r\n    };\r\n    return Choice;\r\n}(SerializableObject));\r\nexports.Choice = Choice;\r\nvar ChoiceSetInput = /** @class */ (function (_super) {\r\n    __extends(ChoiceSetInput, _super);\r\n    function ChoiceSetInput() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.choices = [];\r\n        _this.isCompact = false;\r\n        _this.isMultiSelect = false;\r\n        _this.wrap = false;\r\n        return _this;\r\n    }\r\n    ChoiceSetInput.getUniqueCategoryName = function () {\r\n        var uniqueCwtegoryName = \"__ac-category\" + ChoiceSetInput.uniqueCategoryCounter;\r\n        ChoiceSetInput.uniqueCategoryCounter++;\r\n        return uniqueCwtegoryName;\r\n    };\r\n    // Make sure `aria-current` is applied to the currently-selected item\r\n    ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {\r\n        var options = this._selectElement.options;\r\n        if (options) {\r\n            for (var i = 0; i < options.length; i++) {\r\n                if (options[i].selected) {\r\n                    options[i].setAttribute(\"aria-current\", \"true\");\r\n                }\r\n                else {\r\n                    options[i].removeAttribute(\"aria-current\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        if (!this.isMultiSelect) {\r\n            if (this.isCompact) {\r\n                // Render as a combo box\r\n                this._selectElement = document.createElement(\"select\");\r\n                this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\r\n                this._selectElement.style.width = \"100%\";\r\n                var option = document.createElement(\"option\");\r\n                option.selected = true;\r\n                option.disabled = true;\r\n                option.hidden = true;\r\n                option.value = \"\";\r\n                if (this.placeholder) {\r\n                    option.text = this.placeholder;\r\n                }\r\n                Utils.appendChild(this._selectElement, option);\r\n                for (var i = 0; i < this.choices.length; i++) {\r\n                    var option_1 = document.createElement(\"option\");\r\n                    option_1.value = this.choices[i].value;\r\n                    option_1.text = this.choices[i].title;\r\n                    option_1.setAttribute(\"aria-label\", this.choices[i].title);\r\n                    if (this.choices[i].value == this.defaultValue) {\r\n                        option_1.selected = true;\r\n                    }\r\n                    Utils.appendChild(this._selectElement, option_1);\r\n                }\r\n                this._selectElement.onchange = function () {\r\n                    _this.internalApplyAriaCurrent();\r\n                    _this.valueChanged();\r\n                };\r\n                this.internalApplyAriaCurrent();\r\n                return this._selectElement;\r\n            }\r\n            else {\r\n                // Render as a series of radio buttons\r\n                var uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\r\n                var element = document.createElement(\"div\");\r\n                element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-expanded\");\r\n                element.style.width = \"100%\";\r\n                this._toggleInputs = [];\r\n                for (var i_1 = 0; i_1 < this.choices.length; i_1++) {\r\n                    var radioInput = document.createElement(\"input\");\r\n                    radioInput.id = Utils.generateUniqueId();\r\n                    radioInput.type = \"radio\";\r\n                    radioInput.style.margin = \"0\";\r\n                    radioInput.style.display = \"inline-block\";\r\n                    radioInput.style.verticalAlign = \"middle\";\r\n                    radioInput.name = Utils.isNullOrEmpty(this.id) ? uniqueCategoryName : this.id;\r\n                    radioInput.value = this.choices[i_1].value;\r\n                    radioInput.style.flex = \"0 0 auto\";\r\n                    radioInput.setAttribute(\"aria-label\", this.choices[i_1].title);\r\n                    if (this.choices[i_1].value == this.defaultValue) {\r\n                        radioInput.checked = true;\r\n                    }\r\n                    radioInput.onchange = function () { _this.valueChanged(); };\r\n                    this._toggleInputs.push(radioInput);\r\n                    var label = new Label();\r\n                    label.setParent(this);\r\n                    label.forElementId = radioInput.id;\r\n                    label.hostConfig = this.hostConfig;\r\n                    label.text = Utils.isNullOrEmpty(this.choices[i_1].title) ? \"Choice \" + i_1 : this.choices[i_1].title;\r\n                    label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\r\n                    label.wrap = this.wrap;\r\n                    var labelElement = label.render();\r\n                    labelElement.style.display = \"inline-block\";\r\n                    labelElement.style.flex = \"1 1 auto\";\r\n                    labelElement.style.marginLeft = \"6px\";\r\n                    labelElement.style.verticalAlign = \"middle\";\r\n                    var spacerElement = document.createElement(\"div\");\r\n                    spacerElement.style.width = \"6px\";\r\n                    var compoundInput = document.createElement(\"div\");\r\n                    compoundInput.style.display = \"flex\";\r\n                    compoundInput.style.alignItems = \"center\";\r\n                    Utils.appendChild(compoundInput, radioInput);\r\n                    Utils.appendChild(compoundInput, spacerElement);\r\n                    Utils.appendChild(compoundInput, labelElement);\r\n                    Utils.appendChild(element, compoundInput);\r\n                }\r\n                return element;\r\n            }\r\n        }\r\n        else {\r\n            // Render as a list of toggle inputs\r\n            var defaultValues = this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : null;\r\n            var element = document.createElement(\"div\");\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-multiSelect\");\r\n            element.style.width = \"100%\";\r\n            this._toggleInputs = [];\r\n            for (var i_2 = 0; i_2 < this.choices.length; i_2++) {\r\n                var checkboxInput = document.createElement(\"input\");\r\n                checkboxInput.id = Utils.generateUniqueId();\r\n                checkboxInput.type = \"checkbox\";\r\n                checkboxInput.style.margin = \"0\";\r\n                checkboxInput.style.display = \"inline-block\";\r\n                checkboxInput.style.verticalAlign = \"middle\";\r\n                checkboxInput.value = this.choices[i_2].value;\r\n                checkboxInput.style.flex = \"0 0 auto\";\r\n                checkboxInput.setAttribute(\"aria-label\", this.choices[i_2].title);\r\n                if (defaultValues) {\r\n                    if (defaultValues.indexOf(this.choices[i_2].value) >= 0) {\r\n                        checkboxInput.checked = true;\r\n                    }\r\n                }\r\n                checkboxInput.onchange = function () { _this.valueChanged(); };\r\n                this._toggleInputs.push(checkboxInput);\r\n                var label = new Label();\r\n                label.setParent(this);\r\n                label.forElementId = checkboxInput.id;\r\n                label.hostConfig = this.hostConfig;\r\n                label.text = Utils.isNullOrEmpty(this.choices[i_2].title) ? \"Choice \" + i_2 : this.choices[i_2].title;\r\n                label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\r\n                label.wrap = this.wrap;\r\n                var labelElement = label.render();\r\n                labelElement.style.display = \"inline-block\";\r\n                labelElement.style.flex = \"1 1 auto\";\r\n                labelElement.style.marginLeft = \"6px\";\r\n                labelElement.style.verticalAlign = \"middle\";\r\n                var spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n                var compoundInput = document.createElement(\"div\");\r\n                compoundInput.style.display = \"flex\";\r\n                compoundInput.style.alignItems = \"center\";\r\n                Utils.appendChild(compoundInput, checkboxInput);\r\n                Utils.appendChild(compoundInput, spacerElement);\r\n                Utils.appendChild(compoundInput, labelElement);\r\n                Utils.appendChild(element, compoundInput);\r\n            }\r\n            return element;\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.ChoiceSet\";\r\n    };\r\n    ChoiceSetInput.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"placeholder\", this.placeholder);\r\n        /*\r\n        let choices = [];\r\n\r\n        if (this.choices) {\r\n            for (let choice of this.choices) {\r\n                choices.push(choice.toJSON());\r\n            }\r\n        }\r\n\r\n        Utils.setProperty(result, \"choices\", choices);\r\n        */\r\n        Utils.setArrayProperty(result, \"choices\", this.choices);\r\n        Utils.setProperty(result, \"style\", this.isCompact ? null : \"expanded\");\r\n        Utils.setProperty(result, \"isMultiSelect\", this.isMultiSelect, false);\r\n        Utils.setProperty(result, \"wrap\", this.wrap, false);\r\n        return result;\r\n    };\r\n    ChoiceSetInput.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this.choices.length == 0) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.CollectionCantBeEmpty,\r\n                message: \"An Input.ChoiceSet must have at least one choice defined.\"\r\n            });\r\n        }\r\n        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n            var choice = _a[_i];\r\n            if (!choice.title || !choice.value) {\r\n                context.addFailure(this, {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"All choices in an Input.ChoiceSet must have their title and value properties set.\"\r\n                });\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.isCompact = !(json[\"style\"] === \"expanded\");\r\n        this.isMultiSelect = Utils.getBoolValue(json[\"isMultiSelect\"], this.isMultiSelect);\r\n        this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\r\n        this.choices = [];\r\n        if (Array.isArray(json[\"choices\"])) {\r\n            for (var _i = 0, _a = json[\"choices\"]; _i < _a.length; _i++) {\r\n                var jsonChoice = _a[_i];\r\n                var choice = new Choice();\r\n                choice.parse(jsonChoice);\r\n                this.choices.push(choice);\r\n            }\r\n        }\r\n        this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\r\n    };\r\n    Object.defineProperty(ChoiceSetInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (!this.isMultiSelect) {\r\n                if (this.isCompact) {\r\n                    if (this._selectElement) {\r\n                        return this._selectElement.selectedIndex > 0 ? this._selectElement.value : null;\r\n                    }\r\n                    return null;\r\n                }\r\n                else {\r\n                    if (!this._toggleInputs || this._toggleInputs.length == 0) {\r\n                        return null;\r\n                    }\r\n                    for (var i = 0; i < this._toggleInputs.length; i++) {\r\n                        if (this._toggleInputs[i].checked) {\r\n                            return this._toggleInputs[i].value;\r\n                        }\r\n                    }\r\n                    return null;\r\n                }\r\n            }\r\n            else {\r\n                if (!this._toggleInputs || this._toggleInputs.length == 0) {\r\n                    return null;\r\n                }\r\n                var result = \"\";\r\n                for (var i = 0; i < this._toggleInputs.length; i++) {\r\n                    if (this._toggleInputs[i].checked) {\r\n                        if (result != \"\") {\r\n                            result += this.hostConfig.choiceSetInputValueSeparator;\r\n                        }\r\n                        result += this._toggleInputs[i].value;\r\n                    }\r\n                }\r\n                return result == \"\" ? null : result;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ChoiceSetInput.uniqueCategoryCounter = 0;\r\n    return ChoiceSetInput;\r\n}(Input));\r\nexports.ChoiceSetInput = ChoiceSetInput;\r\nvar NumberInput = /** @class */ (function (_super) {\r\n    __extends(NumberInput, _super);\r\n    function NumberInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NumberInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._numberInputElement = document.createElement(\"input\");\r\n        this._numberInputElement.setAttribute(\"type\", \"number\");\r\n        if (this.min) {\r\n            this._numberInputElement.setAttribute(\"min\", this.min.toString());\r\n        }\r\n        if (this.max) {\r\n            this._numberInputElement.setAttribute(\"max\", this.max.toString());\r\n        }\r\n        this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\r\n        this._numberInputElement.style.width = \"100%\";\r\n        this._numberInputElement.tabIndex = 0;\r\n        if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n            this._numberInputElement.value = this.defaultValue;\r\n        }\r\n        if (!Utils.isNullOrEmpty(this.placeholder)) {\r\n            this._numberInputElement.placeholder = this.placeholder;\r\n            this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        this._numberInputElement.oninput = function () { _this.valueChanged(); };\r\n        return this._numberInputElement;\r\n    };\r\n    NumberInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Number\";\r\n    };\r\n    NumberInput.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"placeholder\", this.placeholder);\r\n        Utils.setNumberProperty(result, \"min\", this.min);\r\n        Utils.setNumberProperty(result, \"max\", this.max);\r\n        return result;\r\n    };\r\n    NumberInput.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\r\n        this.min = Utils.getNumberValue(json[\"min\"]);\r\n        this.max = Utils.getNumberValue(json[\"max\"]);\r\n    };\r\n    Object.defineProperty(NumberInput.prototype, \"min\", {\r\n        get: function () {\r\n            return this._min;\r\n        },\r\n        set: function (value) {\r\n            this._min = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(NumberInput.prototype, \"max\", {\r\n        get: function () {\r\n            return this._max;\r\n        },\r\n        set: function (value) {\r\n            this._max = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(NumberInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._numberInputElement ? this._numberInputElement.value : undefined;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(NumberInput.prototype, \"valueAsNumber\", {\r\n        get: function () {\r\n            return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return NumberInput;\r\n}(Input));\r\nexports.NumberInput = NumberInput;\r\nvar DateInput = /** @class */ (function (_super) {\r\n    __extends(DateInput, _super);\r\n    function DateInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DateInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._dateInputElement = document.createElement(\"input\");\r\n        this._dateInputElement.setAttribute(\"type\", \"date\");\r\n        this._dateInputElement.setAttribute(\"min\", this.min);\r\n        this._dateInputElement.setAttribute(\"max\", this.max);\r\n        this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\r\n        this._dateInputElement.style.width = \"100%\";\r\n        this._dateInputElement.oninput = function () { _this.valueChanged(); };\r\n        if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n            this._dateInputElement.value = this.defaultValue;\r\n        }\r\n        return this._dateInputElement;\r\n    };\r\n    DateInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Date\";\r\n    };\r\n    DateInput.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"min\", this.min);\r\n        Utils.setProperty(result, \"max\", this.max);\r\n        return result;\r\n    };\r\n    DateInput.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.min = Utils.getStringValue(json[\"min\"]);\r\n        this.max = Utils.getStringValue(json[\"max\"]);\r\n    };\r\n    Object.defineProperty(DateInput.prototype, \"min\", {\r\n        get: function () {\r\n            return this._min;\r\n        },\r\n        set: function (value) {\r\n            this._min = this.parseInputValue(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateInput.prototype, \"max\", {\r\n        get: function () {\r\n            return this._max;\r\n        },\r\n        set: function (value) {\r\n            this._max = this.parseInputValue(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DateInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._dateInputElement ? this._dateInputElement.value : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return DateInput;\r\n}(Input));\r\nexports.DateInput = DateInput;\r\nvar TimeInput = /** @class */ (function (_super) {\r\n    __extends(TimeInput, _super);\r\n    function TimeInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TimeInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._timeInputElement = document.createElement(\"input\");\r\n        this._timeInputElement.setAttribute(\"type\", \"time\");\r\n        this._timeInputElement.setAttribute(\"min\", this.min);\r\n        this._timeInputElement.setAttribute(\"max\", this.max);\r\n        this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\r\n        this._timeInputElement.style.width = \"100%\";\r\n        this._timeInputElement.oninput = function () { _this.valueChanged(); };\r\n        if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n            this._timeInputElement.value = this.defaultValue;\r\n        }\r\n        return this._timeInputElement;\r\n    };\r\n    TimeInput.prototype.parseInputValue = function (value) {\r\n        if (/^[0-9]{2}:[0-9]{2}$/.test(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    TimeInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Time\";\r\n    };\r\n    TimeInput.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"min\", this.min);\r\n        Utils.setProperty(result, \"max\", this.max);\r\n        return result;\r\n    };\r\n    TimeInput.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.min = Utils.getStringValue(json[\"min\"]);\r\n        this.max = Utils.getStringValue(json[\"max\"]);\r\n    };\r\n    Object.defineProperty(TimeInput.prototype, \"min\", {\r\n        get: function () {\r\n            return this._min;\r\n        },\r\n        set: function (value) {\r\n            this._min = this.parseInputValue(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimeInput.prototype, \"max\", {\r\n        get: function () {\r\n            return this._max;\r\n        },\r\n        set: function (value) {\r\n            this._max = this.parseInputValue(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TimeInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._timeInputElement ? this._timeInputElement.value : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return TimeInput;\r\n}(Input));\r\nexports.TimeInput = TimeInput;\r\nvar ActionButtonState;\r\n(function (ActionButtonState) {\r\n    ActionButtonState[ActionButtonState[\"Normal\"] = 0] = \"Normal\";\r\n    ActionButtonState[ActionButtonState[\"Expanded\"] = 1] = \"Expanded\";\r\n    ActionButtonState[ActionButtonState[\"Subdued\"] = 2] = \"Subdued\";\r\n})(ActionButtonState || (ActionButtonState = {}));\r\nvar ActionButton = /** @class */ (function () {\r\n    function ActionButton(action, parentContainerStyle) {\r\n        this._state = ActionButtonState.Normal;\r\n        this.onClick = null;\r\n        this.action = action;\r\n        this._parentContainerStyle = parentContainerStyle;\r\n    }\r\n    ActionButton.prototype.updateCssStyle = function () {\r\n        var _a, _b;\r\n        var hostConfig = this.action.parent.hostConfig;\r\n        this.action.renderedElement.className = hostConfig.makeCssClassName(\"ac-pushButton\");\r\n        if (!Utils.isNullOrEmpty(this._parentContainerStyle)) {\r\n            this.action.renderedElement.classList.add(\"style-\" + this._parentContainerStyle);\r\n        }\r\n        if (this.action instanceof ShowCardAction) {\r\n            this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expandable\"));\r\n        }\r\n        this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"expanded\"));\r\n        this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"subdued\"));\r\n        switch (this._state) {\r\n            case ActionButtonState.Expanded:\r\n                this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\r\n                break;\r\n            case ActionButtonState.Subdued:\r\n                this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\r\n                break;\r\n        }\r\n        if (!Utils.isNullOrEmpty(this.action.style)) {\r\n            if (this.action.style === Enums.ActionStyle.Positive) {\r\n                (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\r\n            }\r\n            else {\r\n                (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames(\"style-\" + this.action.style.toLowerCase()));\r\n            }\r\n        }\r\n    };\r\n    ActionButton.prototype.render = function () {\r\n        var _this = this;\r\n        this.action.render();\r\n        this.action.renderedElement.onclick = function (e) {\r\n            e.preventDefault();\r\n            e.cancelBubble = true;\r\n            _this.click();\r\n        };\r\n        this.updateCssStyle();\r\n    };\r\n    ActionButton.prototype.click = function () {\r\n        if (this.onClick != null) {\r\n            this.onClick(this);\r\n        }\r\n    };\r\n    Object.defineProperty(ActionButton.prototype, \"state\", {\r\n        get: function () {\r\n            return this._state;\r\n        },\r\n        set: function (value) {\r\n            this._state = value;\r\n            this.updateCssStyle();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ActionButton;\r\n}());\r\nvar Action = /** @class */ (function (_super) {\r\n    __extends(Action, _super);\r\n    function Action() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._shouldFallback = false;\r\n        _this._parent = null;\r\n        _this._actionCollection = null; // hold the reference to its action collection\r\n        _this._renderedElement = null;\r\n        _this.requires = new HostConfig.HostCapabilities();\r\n        _this.style = Enums.ActionStyle.Default;\r\n        return _this;\r\n    }\r\n    Action.prototype.setCollection = function (actionCollection) {\r\n        this._actionCollection = actionCollection;\r\n    };\r\n    Action.prototype.addCssClasses = function (element) {\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.internalGetReferencedInputs = function (allInputs) {\r\n        return {};\r\n    };\r\n    Action.prototype.internalPrepareForExecution = function (inputs) {\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.internalValidateInputs = function (referencedInputs) {\r\n        var result = [];\r\n        if (AdaptiveCard.useBuiltInInputValidation && !this.ignoreInputValidation) {\r\n            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = referencedInputs[key];\r\n                if (!input.validateValue()) {\r\n                    result.push(input);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Action.prototype.getAriaRole = function () {\r\n        return \"button\";\r\n    };\r\n    Action.prototype.getHref = function () {\r\n        return \"\";\r\n    };\r\n    Action.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"type\", this.getJsonTypeName());\r\n        Utils.setProperty(result, \"title\", this.title);\r\n        Utils.setProperty(result, \"iconUrl\", this.iconUrl);\r\n        Utils.setProperty(result, \"style\", this.style, Enums.ActionStyle.Default);\r\n        return result;\r\n    };\r\n    Action.prototype.render = function (baseCssClass) {\r\n        if (baseCssClass === void 0) { baseCssClass = \"ac-pushButton\"; }\r\n        // Cache hostConfig for perf\r\n        var hostConfig = this.parent.hostConfig;\r\n        var buttonElement = document.createElement(\"button\");\r\n        this.addCssClasses(buttonElement);\r\n        buttonElement.setAttribute(\"aria-label\", this.title);\r\n        buttonElement.type = \"button\";\r\n        buttonElement.style.display = \"flex\";\r\n        buttonElement.style.alignItems = \"center\";\r\n        buttonElement.style.justifyContent = \"center\";\r\n        buttonElement.setAttribute(\"role\", this.getAriaRole());\r\n        var hasTitle = !Utils.isNullOrEmpty(this.title);\r\n        var titleElement = document.createElement(\"div\");\r\n        titleElement.style.overflow = \"hidden\";\r\n        titleElement.style.textOverflow = \"ellipsis\";\r\n        if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {\r\n            titleElement.style.whiteSpace = \"nowrap\";\r\n        }\r\n        if (hasTitle) {\r\n            titleElement.innerText = this.title;\r\n        }\r\n        if (Utils.isNullOrEmpty(this.iconUrl)) {\r\n            buttonElement.classList.add(\"noIcon\");\r\n            buttonElement.appendChild(titleElement);\r\n        }\r\n        else {\r\n            var iconElement = document.createElement(\"img\");\r\n            iconElement.src = this.iconUrl;\r\n            iconElement.style.width = hostConfig.actions.iconSize + \"px\";\r\n            iconElement.style.height = hostConfig.actions.iconSize + \"px\";\r\n            iconElement.style.flex = \"0 0 auto\";\r\n            if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {\r\n                buttonElement.classList.add(\"iconAbove\");\r\n                buttonElement.style.flexDirection = \"column\";\r\n                if (hasTitle) {\r\n                    iconElement.style.marginBottom = \"4px\";\r\n                }\r\n            }\r\n            else {\r\n                buttonElement.classList.add(\"iconLeft\");\r\n                if (hasTitle) {\r\n                    iconElement.style.marginRight = \"4px\";\r\n                }\r\n            }\r\n            buttonElement.appendChild(iconElement);\r\n            buttonElement.appendChild(titleElement);\r\n        }\r\n        this._renderedElement = buttonElement;\r\n    };\r\n    Action.prototype.setParent = function (value) {\r\n        this._parent = value;\r\n    };\r\n    Action.prototype.execute = function () {\r\n        if (this.onExecute) {\r\n            this.onExecute(this);\r\n        }\r\n        raiseExecuteActionEvent(this);\r\n    };\r\n    Action.prototype.prepareForExecution = function () {\r\n        var referencedInputs = this.getReferencedInputs();\r\n        if (this.internalValidateInputs(referencedInputs).length > 0) {\r\n            return false;\r\n        }\r\n        this.internalPrepareForExecution(referencedInputs);\r\n        return true;\r\n    };\r\n    ;\r\n    Action.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        raiseParseActionEvent(this, json, errors);\r\n        this.requires.parse(json[\"requires\"], errors);\r\n        if (!json[\"title\"] && json[\"title\"] !== \"\") {\r\n            raiseParseError({\r\n                error: Enums.ValidationError.PropertyCantBeNull,\r\n                message: \"Actions should always have a title.\"\r\n            }, errors);\r\n        }\r\n        this.title = Utils.getStringValue(json[\"title\"]);\r\n        this.iconUrl = Utils.getStringValue(json[\"iconUrl\"]);\r\n        this.style = Utils.getStringValue(json[\"style\"], this.style);\r\n    };\r\n    Action.prototype.remove = function () {\r\n        if (this._actionCollection) {\r\n            return this._actionCollection.removeAction(this);\r\n        }\r\n        return false;\r\n    };\r\n    Action.prototype.getAllInputs = function () {\r\n        return [];\r\n    };\r\n    Action.prototype.getResourceInformation = function () {\r\n        if (!Utils.isNullOrEmpty(this.iconUrl)) {\r\n            return [{ url: this.iconUrl, mimeType: \"image\" }];\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    };\r\n    Action.prototype.getActionById = function (id) {\r\n        if (this.id == id) {\r\n            return this;\r\n        }\r\n    };\r\n    Action.prototype.getReferencedInputs = function () {\r\n        return this.internalGetReferencedInputs(this.parent.getRootElement().getAllInputs());\r\n    };\r\n    Action.prototype.validateInputs = function () {\r\n        return this.internalValidateInputs(this.getReferencedInputs());\r\n    };\r\n    Action.prototype.shouldFallback = function () {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.parent.hostConfig.hostCapabilities);\r\n    };\r\n    Object.defineProperty(Action.prototype, \"isPrimary\", {\r\n        get: function () {\r\n            return this.style == Enums.ActionStyle.Positive;\r\n        },\r\n        set: function (value) {\r\n            if (value) {\r\n                this.style = Enums.ActionStyle.Positive;\r\n            }\r\n            else {\r\n                if (this.style == Enums.ActionStyle.Positive) {\r\n                    this.style = Enums.ActionStyle.Default;\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"renderedElement\", {\r\n        get: function () {\r\n            return this._renderedElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Action;\r\n}(CardObject));\r\nexports.Action = Action;\r\nvar SubmitAction = /** @class */ (function (_super) {\r\n    __extends(SubmitAction, _super);\r\n    function SubmitAction() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._isPrepared = false;\r\n        _this._ignoreInputValidation = false;\r\n        return _this;\r\n    }\r\n    SubmitAction.prototype.internalGetReferencedInputs = function (allInputs) {\r\n        var result = {};\r\n        for (var _i = 0, allInputs_1 = allInputs; _i < allInputs_1.length; _i++) {\r\n            var input = allInputs_1[_i];\r\n            result[input.id] = input;\r\n        }\r\n        return result;\r\n    };\r\n    SubmitAction.prototype.internalPrepareForExecution = function (inputs) {\r\n        if (this._originalData) {\r\n            this._processedData = JSON.parse(JSON.stringify(this._originalData));\r\n        }\r\n        else {\r\n            this._processedData = {};\r\n        }\r\n        for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            var input = inputs[key];\r\n            if (input.value != null) {\r\n                this._processedData[input.id] = input.value;\r\n            }\r\n        }\r\n        this._isPrepared = true;\r\n    };\r\n    SubmitAction.prototype.getJsonTypeName = function () {\r\n        return SubmitAction.JsonTypeName;\r\n    };\r\n    SubmitAction.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\r\n        Utils.setProperty(result, \"data\", this._originalData);\r\n        return result;\r\n    };\r\n    SubmitAction.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\r\n        this.data = json[\"data\"];\r\n    };\r\n    Object.defineProperty(SubmitAction.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return this._ignoreInputValidation;\r\n        },\r\n        set: function (value) {\r\n            this._ignoreInputValidation = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitAction.prototype, \"data\", {\r\n        get: function () {\r\n            return this._isPrepared ? this._processedData : this._originalData;\r\n        },\r\n        set: function (value) {\r\n            this._originalData = value;\r\n            this._isPrepared = false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    SubmitAction.JsonTypeName = \"Action.Submit\";\r\n    return SubmitAction;\r\n}(Action));\r\nexports.SubmitAction = SubmitAction;\r\nvar OpenUrlAction = /** @class */ (function (_super) {\r\n    __extends(OpenUrlAction, _super);\r\n    function OpenUrlAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OpenUrlAction.prototype.getJsonTypeName = function () {\r\n        return OpenUrlAction.JsonTypeName;\r\n    };\r\n    OpenUrlAction.prototype.getAriaRole = function () {\r\n        return \"link\";\r\n    };\r\n    OpenUrlAction.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"url\", this.url);\r\n        return result;\r\n    };\r\n    OpenUrlAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (Utils.isNullOrEmpty(this.url)) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.PropertyCantBeNull,\r\n                message: \"An Action.OpenUrl must have its url property set.\"\r\n            });\r\n        }\r\n    };\r\n    OpenUrlAction.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n    };\r\n    OpenUrlAction.prototype.getHref = function () {\r\n        return this.url;\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    OpenUrlAction.JsonTypeName = \"Action.OpenUrl\";\r\n    return OpenUrlAction;\r\n}(Action));\r\nexports.OpenUrlAction = OpenUrlAction;\r\nvar ToggleVisibilityAction = /** @class */ (function (_super) {\r\n    __extends(ToggleVisibilityAction, _super);\r\n    function ToggleVisibilityAction() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.targetElements = {};\r\n        return _this;\r\n    }\r\n    ToggleVisibilityAction.prototype.getJsonTypeName = function () {\r\n        return ToggleVisibilityAction.JsonTypeName;\r\n    };\r\n    ToggleVisibilityAction.prototype.execute = function () {\r\n        for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\r\n            var elementId = _a[_i];\r\n            var targetElement = this.parent.getRootElement().getElementById(elementId);\r\n            if (targetElement) {\r\n                if (typeof this.targetElements[elementId] === \"boolean\") {\r\n                    targetElement.isVisible = this.targetElements[elementId];\r\n                }\r\n                else {\r\n                    targetElement.isVisible = !targetElement.isVisible;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.parse = function (json) {\r\n        _super.prototype.parse.call(this, json);\r\n        this.targetElements = {};\r\n        var jsonTargetElements = json[\"targetElements\"];\r\n        if (jsonTargetElements && Array.isArray(jsonTargetElements)) {\r\n            for (var _i = 0, jsonTargetElements_1 = jsonTargetElements; _i < jsonTargetElements_1.length; _i++) {\r\n                var item = jsonTargetElements_1[_i];\r\n                if (typeof item === \"string\") {\r\n                    this.targetElements[item] = undefined;\r\n                }\r\n                else if (typeof item === \"object\") {\r\n                    var jsonElementId = item[\"elementId\"];\r\n                    if (jsonElementId && typeof jsonElementId === \"string\") {\r\n                        this.targetElements[jsonElementId] = Utils.getBoolValue(item[\"isVisible\"], undefined);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        var targetElements = [];\r\n        for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\r\n            var id = _a[_i];\r\n            if (typeof this.targetElements[id] === \"boolean\") {\r\n                targetElements.push({\r\n                    elementId: id,\r\n                    isVisible: this.targetElements[id]\r\n                });\r\n            }\r\n            else {\r\n                targetElements.push(id);\r\n            }\r\n        }\r\n        result[\"targetElements\"] = targetElements;\r\n        return result;\r\n    };\r\n    ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {\r\n        if (isVisible === void 0) { isVisible = undefined; }\r\n        this.targetElements[elementId] = isVisible;\r\n    };\r\n    ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {\r\n        delete this.targetElements[elementId];\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ToggleVisibilityAction.JsonTypeName = \"Action.ToggleVisibility\";\r\n    return ToggleVisibilityAction;\r\n}(Action));\r\nexports.ToggleVisibilityAction = ToggleVisibilityAction;\r\nvar HttpHeader = /** @class */ (function (_super) {\r\n    __extends(HttpHeader, _super);\r\n    function HttpHeader(name, value) {\r\n        if (name === void 0) { name = \"\"; }\r\n        if (value === void 0) { value = \"\"; }\r\n        var _this = _super.call(this) || this;\r\n        _this._value = new Shared.StringWithSubstitutions();\r\n        _this.name = name;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    HttpHeader.prototype.parse = function (json) {\r\n        _super.prototype.parse.call(this, json);\r\n        this.name = Utils.getStringValue(json[\"name\"]);\r\n        this.value = Utils.getStringValue(json[\"value\"]);\r\n    };\r\n    HttpHeader.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"name\", this.name);\r\n        Utils.setProperty(result, \"value\", this._value.getOriginal());\r\n        return result;\r\n    };\r\n    HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {\r\n        this._value.getReferencedInputs(inputs, referencedInputs);\r\n    };\r\n    HttpHeader.prototype.prepareForExecution = function (inputs) {\r\n        this._value.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\r\n    };\r\n    Object.defineProperty(HttpHeader.prototype, \"value\", {\r\n        get: function () {\r\n            return this._value.get();\r\n        },\r\n        set: function (newValue) {\r\n            this._value.set(newValue);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return HttpHeader;\r\n}(SerializableObject));\r\nexports.HttpHeader = HttpHeader;\r\nvar HttpAction = /** @class */ (function (_super) {\r\n    __extends(HttpAction, _super);\r\n    function HttpAction() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._url = new Shared.StringWithSubstitutions();\r\n        _this._body = new Shared.StringWithSubstitutions();\r\n        _this._headers = [];\r\n        _this._ignoreInputValidation = false;\r\n        return _this;\r\n    }\r\n    HttpAction.prototype.internalGetReferencedInputs = function (allInputs) {\r\n        var result = {};\r\n        this._url.getReferencedInputs(allInputs, result);\r\n        for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {\r\n            var header = _a[_i];\r\n            header.getReferencedInputs(allInputs, result);\r\n        }\r\n        this._body.getReferencedInputs(allInputs, result);\r\n        return result;\r\n    };\r\n    HttpAction.prototype.internalPrepareForExecution = function (inputs) {\r\n        this._url.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\r\n        var contentType = Shared.ContentTypes.applicationJson;\r\n        for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {\r\n            var header = _a[_i];\r\n            header.prepareForExecution(inputs);\r\n            if (header.name && header.name.toLowerCase() == \"content-type\") {\r\n                contentType = header.value;\r\n            }\r\n        }\r\n        this._body.substituteInputValues(inputs, contentType);\r\n    };\r\n    ;\r\n    HttpAction.prototype.getJsonTypeName = function () {\r\n        return HttpAction.JsonTypeName;\r\n    };\r\n    HttpAction.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"method\", this.method);\r\n        Utils.setProperty(result, \"url\", this._url.getOriginal());\r\n        Utils.setProperty(result, \"body\", this._body.getOriginal());\r\n        Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\r\n        Utils.setArrayProperty(result, \"headers\", this.headers);\r\n        return result;\r\n    };\r\n    HttpAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (Utils.isNullOrEmpty(this.url)) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.PropertyCantBeNull,\r\n                message: \"An Action.Http must have its url property set.\"\r\n            });\r\n        }\r\n        if (this.headers.length > 0) {\r\n            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n                var header = _a[_i];\r\n                if (!header.name) {\r\n                    context.addFailure(this, {\r\n                        error: Enums.ValidationError.PropertyCantBeNull,\r\n                        message: \"All headers of an Action.Http must have their name and value properties set.\"\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n    HttpAction.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n        this.method = Utils.getStringValue(json[\"method\"]);\r\n        this.body = Utils.getStringValue(json[\"body\"]);\r\n        this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\r\n        this._headers = [];\r\n        if (Array.isArray(json[\"headers\"])) {\r\n            for (var _i = 0, _a = json[\"headers\"]; _i < _a.length; _i++) {\r\n                var jsonHeader = _a[_i];\r\n                var httpHeader = new HttpHeader();\r\n                httpHeader.parse(jsonHeader);\r\n                this.headers.push(httpHeader);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(HttpAction.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return this._ignoreInputValidation;\r\n        },\r\n        set: function (value) {\r\n            this._ignoreInputValidation = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"url\", {\r\n        get: function () {\r\n            return this._url.get();\r\n        },\r\n        set: function (value) {\r\n            this._url.set(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"body\", {\r\n        get: function () {\r\n            return this._body.get();\r\n        },\r\n        set: function (value) {\r\n            this._body.set(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"headers\", {\r\n        get: function () {\r\n            return this._headers ? this._headers : [];\r\n        },\r\n        set: function (value) {\r\n            this._headers = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    HttpAction.JsonTypeName = \"Action.Http\";\r\n    return HttpAction;\r\n}(Action));\r\nexports.HttpAction = HttpAction;\r\nvar ShowCardAction = /** @class */ (function (_super) {\r\n    __extends(ShowCardAction, _super);\r\n    function ShowCardAction() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.card = new InlineAdaptiveCard();\r\n        return _this;\r\n    }\r\n    ShowCardAction.prototype.addCssClasses = function (element) {\r\n        _super.prototype.addCssClasses.call(this, element);\r\n        element.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\r\n    };\r\n    ShowCardAction.prototype.getJsonTypeName = function () {\r\n        return ShowCardAction.JsonTypeName;\r\n    };\r\n    ShowCardAction.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        if (this.card) {\r\n            Utils.setProperty(result, \"card\", this.card.toJSON());\r\n        }\r\n        return result;\r\n    };\r\n    ShowCardAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        this.card.internalValidateProperties(context);\r\n    };\r\n    ShowCardAction.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        var jsonCard = json[\"card\"];\r\n        if (jsonCard) {\r\n            this.card.parse(jsonCard, errors);\r\n        }\r\n        else {\r\n            raiseParseError({\r\n                error: Enums.ValidationError.PropertyCantBeNull,\r\n                message: \"An Action.ShowCard must have its \\\"card\\\" property set to a valid AdaptiveCard object.\"\r\n            }, errors);\r\n        }\r\n    };\r\n    ShowCardAction.prototype.setParent = function (value) {\r\n        _super.prototype.setParent.call(this, value);\r\n        this.card.setParent(value);\r\n    };\r\n    ShowCardAction.prototype.getAllInputs = function () {\r\n        return this.card.getAllInputs();\r\n    };\r\n    ShowCardAction.prototype.getResourceInformation = function () {\r\n        return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());\r\n    };\r\n    ShowCardAction.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result) {\r\n            result = this.card.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ShowCardAction.JsonTypeName = \"Action.ShowCard\";\r\n    return ShowCardAction;\r\n}(Action));\r\nexports.ShowCardAction = ShowCardAction;\r\nvar ActionCollection = /** @class */ (function () {\r\n    function ActionCollection(owner) {\r\n        this._expandedAction = null;\r\n        this._renderedActionCount = 0;\r\n        this._actionCard = null;\r\n        this.items = [];\r\n        this.buttons = [];\r\n        this._owner = owner;\r\n    }\r\n    ActionCollection.prototype.refreshContainer = function () {\r\n        this._actionCardContainer.innerHTML = \"\";\r\n        if (this._actionCard === null) {\r\n            this._actionCardContainer.style.marginTop = \"0px\";\r\n            return;\r\n        }\r\n        this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\" : \"0px\";\r\n        var padding = this._owner.getEffectivePadding();\r\n        this._owner.getImmediateSurroundingPadding(padding);\r\n        var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n        if (this._actionCard !== null) {\r\n            this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\r\n            this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\r\n            this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n            this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {\r\n                this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n                this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\r\n            }\r\n            Utils.appendChild(this._actionCardContainer, this._actionCard);\r\n        }\r\n    };\r\n    ActionCollection.prototype.layoutChanged = function () {\r\n        this._owner.getRootElement().updateLayout();\r\n    };\r\n    ActionCollection.prototype.hideActionCard = function () {\r\n        var previouslyExpandedAction = this._expandedAction;\r\n        this._expandedAction = null;\r\n        this._actionCard = null;\r\n        this.refreshContainer();\r\n        if (previouslyExpandedAction) {\r\n            this.layoutChanged();\r\n            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\r\n        }\r\n    };\r\n    ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {\r\n        if (suppressStyle === void 0) { suppressStyle = false; }\r\n        if (raiseEvent === void 0) { raiseEvent = true; }\r\n        if (action.card == null) {\r\n            return;\r\n        }\r\n        action.card.suppressStyle = suppressStyle;\r\n        var renderedCard = action.card.renderedElement ? action.card.renderedElement : action.card.render();\r\n        this._actionCard = renderedCard;\r\n        this._expandedAction = action;\r\n        this.refreshContainer();\r\n        if (raiseEvent) {\r\n            this.layoutChanged();\r\n            raiseInlineCardExpandedEvent(action, true);\r\n        }\r\n    };\r\n    ActionCollection.prototype.collapseExpandedAction = function () {\r\n        for (var i = 0; i < this.buttons.length; i++) {\r\n            this.buttons[i].state = ActionButtonState.Normal;\r\n        }\r\n        this.hideActionCard();\r\n    };\r\n    ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {\r\n        for (var i = 0; i < this.buttons.length; i++) {\r\n            if (this.buttons[i].action !== action) {\r\n                this.buttons[i].state = ActionButtonState.Subdued;\r\n            }\r\n            else {\r\n                this.buttons[i].state = ActionButtonState.Expanded;\r\n            }\r\n        }\r\n        this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);\r\n    };\r\n    ActionCollection.prototype.actionClicked = function (actionButton) {\r\n        if (!(actionButton.action instanceof ShowCardAction)) {\r\n            for (var i = 0; i < this.buttons.length; i++) {\r\n                this.buttons[i].state = ActionButtonState.Normal;\r\n            }\r\n            this.hideActionCard();\r\n            actionButton.action.execute();\r\n        }\r\n        else {\r\n            if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\r\n                actionButton.action.execute();\r\n            }\r\n            else if (actionButton.action === this._expandedAction) {\r\n                this.collapseExpandedAction();\r\n            }\r\n            else {\r\n                this.expandShowCardAction(actionButton.action, true);\r\n            }\r\n        }\r\n    };\r\n    ActionCollection.prototype.getParentContainer = function () {\r\n        if (this._owner instanceof Container) {\r\n            return this._owner;\r\n        }\r\n        else {\r\n            return this._owner.getParentContainer();\r\n        }\r\n    };\r\n    ActionCollection.prototype.findActionButton = function (action) {\r\n        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\r\n            var actionButton = _a[_i];\r\n            if (actionButton.action == action) {\r\n                return actionButton;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    ActionCollection.prototype.parse = function (json, errors) {\r\n        this.clear();\r\n        if (json && json instanceof Array) {\r\n            for (var _i = 0, json_1 = json; _i < json_1.length; _i++) {\r\n                var jsonAction = json_1[_i];\r\n                var action = createActionInstance(this._owner, jsonAction, [], !this._owner.isDesignMode(), errors);\r\n                if (action) {\r\n                    this.addAction(action);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActionCollection.prototype.toJSON = function () {\r\n        if (this.items.length > 0) {\r\n            var result = [];\r\n            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n                var action = _a[_i];\r\n                result.push(action.toJSON());\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    ActionCollection.prototype.getActionById = function (id) {\r\n        var result = null;\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            result = this.items[i].getActionById(id);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ActionCollection.prototype.validateProperties = function (context) {\r\n        if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {\r\n            context.addFailure(this._owner, {\r\n                error: Enums.ValidationError.TooManyActions,\r\n                message: \"A maximum of \" + this._owner.hostConfig.actions.maxActions + \" actions are allowed.\"\r\n            });\r\n        }\r\n        if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\r\n            context.addFailure(this._owner, {\r\n                error: Enums.ValidationError.InteractivityNotAllowed,\r\n                message: \"Interactivity is not allowed.\"\r\n            });\r\n        }\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (!isActionAllowed(item, this._owner.getForbiddenActionTypes())) {\r\n                context.addFailure(this._owner, {\r\n                    error: Enums.ValidationError.ActionTypeNotAllowed,\r\n                    message: \"Actions of type \" + item.getJsonTypeName() + \" are not allowe.\"\r\n                });\r\n            }\r\n            item.internalValidateProperties(context);\r\n        }\r\n    };\r\n    ActionCollection.prototype.render = function (orientation, isDesignMode) {\r\n        var _this = this;\r\n        // Cache hostConfig for better perf\r\n        var hostConfig = this._owner.hostConfig;\r\n        if (!hostConfig.supportsInteractivity) {\r\n            return null;\r\n        }\r\n        var element = document.createElement(\"div\");\r\n        var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;\r\n        var forbiddenActionTypes = this._owner.getForbiddenActionTypes();\r\n        this._actionCardContainer = document.createElement(\"div\");\r\n        this._renderedActionCount = 0;\r\n        if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && isActionAllowed(this.items[0], forbiddenActionTypes)) {\r\n            this.showActionCard(this.items[0], true);\r\n            this._renderedActionCount = 1;\r\n        }\r\n        else {\r\n            var buttonStrip = document.createElement(\"div\");\r\n            buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\r\n            buttonStrip.style.display = \"flex\";\r\n            if (orientation == Enums.Orientation.Horizontal) {\r\n                buttonStrip.style.flexDirection = \"row\";\r\n                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                buttonStrip.style.flexDirection = \"column\";\r\n                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Stretch:\r\n                            buttonStrip.style.alignItems = \"stretch\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            var parentContainerStyle = this.getParentContainer().getEffectiveStyle();\r\n            for (var i = 0; i < this.items.length; i++) {\r\n                if (isActionAllowed(this.items[i], forbiddenActionTypes)) {\r\n                    var actionButton = this.findActionButton(this.items[i]);\r\n                    if (!actionButton) {\r\n                        actionButton = new ActionButton(this.items[i], parentContainerStyle);\r\n                        actionButton.onClick = function (ab) { _this.actionClicked(ab); };\r\n                        this.buttons.push(actionButton);\r\n                    }\r\n                    actionButton.render();\r\n                    if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {\r\n                        actionButton.action.renderedElement.style.flex = \"0 1 100%\";\r\n                    }\r\n                    else {\r\n                        actionButton.action.renderedElement.style.flex = \"0 1 auto\";\r\n                    }\r\n                    buttonStrip.appendChild(actionButton.action.renderedElement);\r\n                    this._renderedActionCount++;\r\n                    if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {\r\n                        break;\r\n                    }\r\n                    else if (hostConfig.actions.buttonSpacing > 0) {\r\n                        var spacer = document.createElement(\"div\");\r\n                        if (orientation === Enums.Orientation.Horizontal) {\r\n                            spacer.style.flex = \"0 0 auto\";\r\n                            spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n                        else {\r\n                            spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n                        Utils.appendChild(buttonStrip, spacer);\r\n                    }\r\n                }\r\n            }\r\n            var buttonStripContainer = document.createElement(\"div\");\r\n            buttonStripContainer.style.overflow = \"hidden\";\r\n            buttonStripContainer.appendChild(buttonStrip);\r\n            Utils.appendChild(element, buttonStripContainer);\r\n        }\r\n        Utils.appendChild(element, this._actionCardContainer);\r\n        for (var i = 0; i < this.buttons.length; i++) {\r\n            if (this.buttons[i].state == ActionButtonState.Expanded) {\r\n                this.expandShowCardAction(this.buttons[i].action, false);\r\n                break;\r\n            }\r\n        }\r\n        return this._renderedActionCount > 0 ? element : null;\r\n    };\r\n    ActionCollection.prototype.addAction = function (action) {\r\n        if (!action) {\r\n            throw new Error(\"The action parameter cannot be null.\");\r\n        }\r\n        if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {\r\n            this.items.push(action);\r\n            if (!action.parent) {\r\n                action.setParent(this._owner);\r\n            }\r\n            invokeSetCollection(action, this);\r\n        }\r\n        else {\r\n            throw new Error(\"The action already belongs to another element.\");\r\n        }\r\n    };\r\n    ActionCollection.prototype.removeAction = function (action) {\r\n        if (this.expandedAction && this._expandedAction == action) {\r\n            this.collapseExpandedAction();\r\n        }\r\n        var actionIndex = this.items.indexOf(action);\r\n        if (actionIndex >= 0) {\r\n            this.items.splice(actionIndex, 1);\r\n            action.setParent(null);\r\n            invokeSetCollection(action, null);\r\n            for (var i = 0; i < this.buttons.length; i++) {\r\n                if (this.buttons[i].action == action) {\r\n                    this.buttons.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ActionCollection.prototype.clear = function () {\r\n        this.items = [];\r\n        this.buttons = [];\r\n        this._expandedAction = null;\r\n        this._renderedActionCount = 0;\r\n    };\r\n    ActionCollection.prototype.getAllInputs = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            var action = this.items[i];\r\n            result = result.concat(action.getAllInputs());\r\n        }\r\n        return result;\r\n    };\r\n    ActionCollection.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            result = result.concat(this.items[i].getResourceInformation());\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ActionCollection.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return this._renderedActionCount;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActionCollection.prototype, \"expandedAction\", {\r\n        get: function () {\r\n            return this._expandedAction;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ActionCollection;\r\n}());\r\nvar ActionSet = /** @class */ (function (_super) {\r\n    __extends(ActionSet, _super);\r\n    function ActionSet() {\r\n        var _this = _super.call(this) || this;\r\n        _this.orientation = null;\r\n        _this._actionCollection = new ActionCollection(_this);\r\n        return _this;\r\n    }\r\n    ActionSet.prototype.internalRender = function () {\r\n        return this._actionCollection.render(this.orientation ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());\r\n    };\r\n    ActionSet.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setEnumProperty(Enums.Orientation, result, \"orientation\", this.orientation);\r\n        Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\r\n        return result;\r\n    };\r\n    ActionSet.prototype.isBleedingAtBottom = function () {\r\n        if (this._actionCollection.renderedActionCount == 0) {\r\n            return _super.prototype.isBleedingAtBottom.call(this);\r\n        }\r\n        else {\r\n            if (this._actionCollection.items.length == 1) {\r\n                return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction != null;\r\n            }\r\n        }\r\n    };\r\n    ActionSet.prototype.getJsonTypeName = function () {\r\n        return \"ActionSet\";\r\n    };\r\n    ActionSet.prototype.getActionCount = function () {\r\n        return this._actionCollection.items.length;\r\n    };\r\n    ActionSet.prototype.getActionAt = function (index) {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.items[index];\r\n        }\r\n        else {\r\n            _super.prototype.getActionAt.call(this, index);\r\n        }\r\n    };\r\n    ActionSet.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        this._actionCollection.validateProperties(context);\r\n    };\r\n    ActionSet.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        var jsonOrientation = json[\"orientation\"];\r\n        if (jsonOrientation) {\r\n            this.orientation = Utils.getEnumValue(Enums.Orientation, jsonOrientation, Enums.Orientation.Horizontal);\r\n        }\r\n        this._actionCollection.parse(json[\"actions\"], errors);\r\n    };\r\n    ActionSet.prototype.addAction = function (action) {\r\n        this._actionCollection.addAction(action);\r\n    };\r\n    ActionSet.prototype.getAllInputs = function () {\r\n        return this._actionCollection.getAllInputs();\r\n    };\r\n    ActionSet.prototype.getResourceInformation = function () {\r\n        return this._actionCollection.getResourceInformation();\r\n    };\r\n    Object.defineProperty(ActionSet.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ActionSet;\r\n}(CardElement));\r\nexports.ActionSet = ActionSet;\r\nvar StylableCardElementContainer = /** @class */ (function (_super) {\r\n    __extends(StylableCardElementContainer, _super);\r\n    function StylableCardElementContainer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._style = null;\r\n        _this._bleed = false;\r\n        return _this;\r\n    }\r\n    StylableCardElementContainer.prototype.applyBackground = function () {\r\n        var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\r\n        if (!Utils.isNullOrEmpty(styleDefinition.backgroundColor)) {\r\n            this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.applyPadding = function () {\r\n        _super.prototype.applyPadding.call(this);\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n        var physicalPadding = new Shared.SpacingDefinition();\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n        if (this.isBleeding()) {\r\n            // Bleed into the first parent that does have padding\r\n            var padding = new Shared.PaddingDefinition();\r\n            this.getImmediateSurroundingPadding(padding);\r\n            var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n            this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n            if (!this.isDesignMode()) {\r\n                this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\r\n                this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\r\n            }\r\n            if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {\r\n                this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            this.renderedElement.style.marginRight = \"0\";\r\n            this.renderedElement.style.marginLeft = \"0\";\r\n            this.renderedElement.style.marginTop = \"0\";\r\n            this.renderedElement.style.marginBottom = \"0\";\r\n            if (this.separatorElement) {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.getHasBackground = function () {\r\n        var currentElement = this.parent;\r\n        while (currentElement) {\r\n            var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;\r\n            if (currentElement instanceof StylableCardElementContainer) {\r\n                if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {\r\n                    return true;\r\n                }\r\n            }\r\n            currentElement = currentElement.parent;\r\n        }\r\n        return false;\r\n    };\r\n    StylableCardElementContainer.prototype.getDefaultPadding = function () {\r\n        return this.getHasBackground() ?\r\n            new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);\r\n    };\r\n    StylableCardElementContainer.prototype.getHasExpandedAction = function () {\r\n        return false;\r\n    };\r\n    StylableCardElementContainer.prototype.getBleed = function () {\r\n        return this._bleed;\r\n    };\r\n    StylableCardElementContainer.prototype.setBleed = function (value) {\r\n        this._bleed = value;\r\n    };\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"hasExplicitStyle\", {\r\n        get: function () {\r\n            return this._style != null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"allowCustomStyle\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"supportsMinHeight\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StylableCardElementContainer.prototype.isBleeding = function () {\r\n        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\r\n    };\r\n    StylableCardElementContainer.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"style\", this.style);\r\n        return result;\r\n    };\r\n    StylableCardElementContainer.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this._style) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this._style);\r\n            if (!styleDefinition) {\r\n                context.addFailure(this, {\r\n                    error: Enums.ValidationError.InvalidPropertyValue,\r\n                    message: \"Unknown container style: \" + this._style\r\n                });\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this._style = Utils.getStringValue(json[\"style\"]);\r\n    };\r\n    StylableCardElementContainer.prototype.render = function () {\r\n        var renderedElement = _super.prototype.render.call(this);\r\n        if (renderedElement && this.getHasBackground()) {\r\n            this.applyBackground();\r\n        }\r\n        return renderedElement;\r\n    };\r\n    StylableCardElementContainer.prototype.getEffectiveStyle = function () {\r\n        var effectiveStyle = this.style;\r\n        return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);\r\n    };\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"style\", {\r\n        get: function () {\r\n            if (this.allowCustomStyle) {\r\n                if (this._style && this.hostConfig.containerStyles.getStyleByName(this._style)) {\r\n                    return this._style;\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        set: function (value) {\r\n            this._style = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return StylableCardElementContainer;\r\n}(CardElementContainer));\r\nexports.StylableCardElementContainer = StylableCardElementContainer;\r\nvar BackgroundImage = /** @class */ (function (_super) {\r\n    __extends(BackgroundImage, _super);\r\n    function BackgroundImage() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.fillMode = BackgroundImage.defaultFillMode;\r\n        _this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\r\n        _this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\r\n        return _this;\r\n    }\r\n    BackgroundImage.prototype.reset = function () {\r\n        this.url = undefined;\r\n        this.fillMode = BackgroundImage.defaultFillMode;\r\n        this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\r\n        this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\r\n    };\r\n    BackgroundImage.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n        this.fillMode = Utils.getEnumValue(Enums.FillMode, json[\"fillMode\"], this.fillMode);\r\n        this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\r\n        this.verticalAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalAlignment\"], this.verticalAlignment);\r\n    };\r\n    BackgroundImage.prototype.toJSON = function () {\r\n        if (!this.isValid()) {\r\n            return null;\r\n        }\r\n        if (this.fillMode == BackgroundImage.defaultFillMode &&\r\n            this.horizontalAlignment == BackgroundImage.defaultHorizontalAlignment &&\r\n            this.verticalAlignment == BackgroundImage.defaultVerticalAlignment) {\r\n            return this.url;\r\n        }\r\n        else {\r\n            var result = _super.prototype.toJSON.call(this);\r\n            Utils.setProperty(result, \"url\", this.url);\r\n            Utils.setEnumProperty(Enums.FillMode, result, \"fillMode\", this.fillMode, BackgroundImage.defaultFillMode);\r\n            Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment, BackgroundImage.defaultHorizontalAlignment);\r\n            Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalAlignment\", this.verticalAlignment, BackgroundImage.defaultVerticalAlignment);\r\n            return result;\r\n        }\r\n    };\r\n    BackgroundImage.prototype.apply = function (element) {\r\n        if (this.url) {\r\n            element.style.backgroundImage = \"url('\" + this.url + \"')\";\r\n            switch (this.fillMode) {\r\n                case Enums.FillMode.Repeat:\r\n                    element.style.backgroundRepeat = \"repeat\";\r\n                    break;\r\n                case Enums.FillMode.RepeatHorizontally:\r\n                    element.style.backgroundRepeat = \"repeat-x\";\r\n                    break;\r\n                case Enums.FillMode.RepeatVertically:\r\n                    element.style.backgroundRepeat = \"repeat-y\";\r\n                    break;\r\n                case Enums.FillMode.Cover:\r\n                default:\r\n                    element.style.backgroundRepeat = \"no-repeat\";\r\n                    element.style.backgroundSize = \"cover\";\r\n                    break;\r\n            }\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.backgroundPositionX = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.backgroundPositionX = \"right\";\r\n                    break;\r\n            }\r\n            switch (this.verticalAlignment) {\r\n                case Enums.VerticalAlignment.Center:\r\n                    element.style.backgroundPositionY = \"center\";\r\n                    break;\r\n                case Enums.VerticalAlignment.Bottom:\r\n                    element.style.backgroundPositionY = \"bottom\";\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    BackgroundImage.prototype.isValid = function () {\r\n        return !Utils.isNullOrEmpty(this.url);\r\n    };\r\n    BackgroundImage.defaultFillMode = Enums.FillMode.Cover;\r\n    BackgroundImage.defaultHorizontalAlignment = Enums.HorizontalAlignment.Left;\r\n    BackgroundImage.defaultVerticalAlignment = Enums.VerticalAlignment.Top;\r\n    return BackgroundImage;\r\n}(SerializableObject));\r\nexports.BackgroundImage = BackgroundImage;\r\nvar Container = /** @class */ (function (_super) {\r\n    __extends(Container, _super);\r\n    function Container() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._items = [];\r\n        _this._renderedItems = [];\r\n        _this.backgroundImage = new BackgroundImage();\r\n        _this.verticalContentAlignment = Enums.VerticalAlignment.Top;\r\n        _this.rtl = null;\r\n        return _this;\r\n    }\r\n    Container.prototype.insertItemAt = function (item, index, forceInsert) {\r\n        if (!item.parent || forceInsert) {\r\n            if (item.isStandalone) {\r\n                if (index < 0 || index >= this._items.length) {\r\n                    this._items.push(item);\r\n                }\r\n                else {\r\n                    this._items.splice(index, 0, item);\r\n                }\r\n                item.setParent(this);\r\n            }\r\n            else {\r\n                throw new Error(\"Elements of type \" + item.getJsonTypeName() + \" cannot be used as standalone elements.\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"The element already belongs to another container.\");\r\n        }\r\n    };\r\n    Container.prototype.supportsExcplitiHeight = function () {\r\n        return true;\r\n    };\r\n    Container.prototype.getItemsCollectionPropertyName = function () {\r\n        return \"items\";\r\n    };\r\n    Container.prototype.applyBackground = function () {\r\n        if (this.backgroundImage.isValid()) {\r\n            this.backgroundImage.apply(this.renderedElement);\r\n        }\r\n        _super.prototype.applyBackground.call(this);\r\n    };\r\n    Container.prototype.internalRender = function () {\r\n        this._renderedItems = [];\r\n        // Cache hostConfig to avoid walking the parent hierarchy several times\r\n        var hostConfig = this.hostConfig;\r\n        var element = document.createElement(\"div\");\r\n        if (this.rtl != null && this.rtl) {\r\n            element.dir = \"rtl\";\r\n        }\r\n        element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\r\n        element.style.display = \"flex\";\r\n        element.style.flexDirection = \"column\";\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n            // Forces the container to be at least as tall as its content.\r\n            //\r\n            // Fixes a quirk in Chrome where, for nested flex elements, the\r\n            // inner element's height would never exceed the outer element's\r\n            // height. This caused overflow truncation to break -- containers\r\n            // would always be measured as not overflowing, since their heights\r\n            // were constrained by their parents as opposed to truly reflecting\r\n            // the height of their content.\r\n            //\r\n            // See the \"Browser Rendering Notes\" section of this answer:\r\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\r\n            element.style.minHeight = '-webkit-min-content';\r\n        }\r\n        switch (this.verticalContentAlignment) {\r\n            case Enums.VerticalAlignment.Center:\r\n                element.style.justifyContent = \"center\";\r\n                break;\r\n            case Enums.VerticalAlignment.Bottom:\r\n                element.style.justifyContent = \"flex-end\";\r\n                break;\r\n            default:\r\n                element.style.justifyContent = \"flex-start\";\r\n                break;\r\n        }\r\n        if (this._items.length > 0) {\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                var renderedElement = this.isElementAllowed(this._items[i], this.getForbiddenElementTypes()) ? this._items[i].render() : null;\r\n                if (renderedElement) {\r\n                    if (this._renderedItems.length > 0 && this._items[i].separatorElement) {\r\n                        this._items[i].separatorElement.style.flex = \"0 0 auto\";\r\n                        Utils.appendChild(element, this._items[i].separatorElement);\r\n                    }\r\n                    Utils.appendChild(element, renderedElement);\r\n                    this._renderedItems.push(this._items[i]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.isDesignMode()) {\r\n                var placeholderElement = this.createPlaceholderElement();\r\n                placeholderElement.style.width = \"100%\";\r\n                placeholderElement.style.height = \"100%\";\r\n                element.appendChild(placeholderElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    Container.prototype.truncateOverflow = function (maxHeight) {\r\n        // Add 1 to account for rounding differences between browsers\r\n        var boundary = this.renderedElement.offsetTop + maxHeight + 1;\r\n        var handleElement = function (cardElement) {\r\n            var elt = cardElement.renderedElement;\r\n            if (elt) {\r\n                switch (Utils.getFitStatus(elt, boundary)) {\r\n                    case Enums.ContainerFitStatus.FullyInContainer:\r\n                        var sizeChanged = cardElement['resetOverflow']();\r\n                        // If the element's size changed after resetting content,\r\n                        // we have to check if it still fits fully in the card\r\n                        if (sizeChanged) {\r\n                            handleElement(cardElement);\r\n                        }\r\n                        break;\r\n                    case Enums.ContainerFitStatus.Overflowing:\r\n                        var maxHeight_1 = boundary - elt.offsetTop;\r\n                        cardElement['handleOverflow'](maxHeight_1);\r\n                        break;\r\n                    case Enums.ContainerFitStatus.FullyOutOfContainer:\r\n                        cardElement['handleOverflow'](0);\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            handleElement(item);\r\n        }\r\n        return true;\r\n    };\r\n    Container.prototype.undoOverflowTruncation = function () {\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item['resetOverflow']();\r\n        }\r\n    };\r\n    Container.prototype.getHasBackground = function () {\r\n        return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);\r\n    };\r\n    Object.defineProperty(Container.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Container.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"backgroundImage\", this.backgroundImage.toJSON());\r\n        Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalContentAlignment\", this.verticalContentAlignment, Enums.VerticalAlignment.Top);\r\n        if (this._items.length > 0) {\r\n            var elements = [];\r\n            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                var element = _a[_i];\r\n                elements.push(element.toJSON());\r\n            }\r\n            Utils.setProperty(result, this.getItemsCollectionPropertyName(), elements);\r\n        }\r\n        Utils.setProperty(result, \"bleed\", this.bleed, false);\r\n        return result;\r\n    };\r\n    Container.prototype.getItemCount = function () {\r\n        return this._items.length;\r\n    };\r\n    Container.prototype.getItemAt = function (index) {\r\n        return this._items[index];\r\n    };\r\n    Container.prototype.getFirstVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (item.isVisible) {\r\n                    return item;\r\n                }\r\n            }\r\n            ;\r\n        }\r\n        return null;\r\n    };\r\n    Container.prototype.getLastVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (var i = this._renderedItems.length - 1; i >= 0; i--) {\r\n                if (this._renderedItems[i].isVisible) {\r\n                    return this._renderedItems[i];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Container.prototype.getJsonTypeName = function () {\r\n        return \"Container\";\r\n    };\r\n    Container.prototype.isFirstElement = function (element) {\r\n        var designMode = this.isDesignMode();\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] == element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.isLastElement = function (element) {\r\n        var designMode = this.isDesignMode();\r\n        for (var i = this._items.length - 1; i >= 0; i--) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] == element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.isRtl = function () {\r\n        if (this.rtl != null) {\r\n            return this.rtl;\r\n        }\r\n        else {\r\n            var parentContainer = this.getParentContainer();\r\n            return parentContainer ? parentContainer.isRtl() : false;\r\n        }\r\n    };\r\n    Container.prototype.isBleedingAtTop = function () {\r\n        var firstRenderedItem = this.getFirstVisibleRenderedItem();\r\n        return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);\r\n    };\r\n    Container.prototype.isBleedingAtBottom = function () {\r\n        var lastRenderedItem = this.getLastVisibleRenderedItem();\r\n        return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);\r\n    };\r\n    Container.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this.setShouldFallback(false);\r\n        this._items = [];\r\n        this._renderedItems = [];\r\n        this.backgroundImage.reset();\r\n        var jsonBackgroundImage = json[\"backgroundImage\"];\r\n        if (jsonBackgroundImage) {\r\n            if (typeof jsonBackgroundImage === \"string\") {\r\n                this.backgroundImage.url = jsonBackgroundImage;\r\n                this.backgroundImage.fillMode = Enums.FillMode.Cover;\r\n            }\r\n            else if (typeof jsonBackgroundImage === \"object\") {\r\n                this.backgroundImage.parse(jsonBackgroundImage, errors);\r\n            }\r\n        }\r\n        this.verticalContentAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalContentAlignment\"], this.verticalContentAlignment);\r\n        if (json[this.getItemsCollectionPropertyName()] != null) {\r\n            var items = json[this.getItemsCollectionPropertyName()];\r\n            this.clear();\r\n            for (var i = 0; i < items.length; i++) {\r\n                var element = createElementInstance(this, items[i], !this.isDesignMode(), errors);\r\n                if (element) {\r\n                    this.insertItemAt(element, -1, true);\r\n                }\r\n            }\r\n        }\r\n        this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\r\n    };\r\n    Container.prototype.indexOf = function (cardElement) {\r\n        return this._items.indexOf(cardElement);\r\n    };\r\n    Container.prototype.addItem = function (item) {\r\n        this.insertItemAt(item, -1, false);\r\n    };\r\n    Container.prototype.insertItemBefore = function (item, insertBefore) {\r\n        this.insertItemAt(item, this._items.indexOf(insertBefore), false);\r\n    };\r\n    Container.prototype.insertItemAfter = function (item, insertAfter) {\r\n        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\r\n    };\r\n    Container.prototype.removeItem = function (item) {\r\n        var itemIndex = this._items.indexOf(item);\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n            item.setParent(null);\r\n            this.updateLayout();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.clear = function () {\r\n        this._items = [];\r\n    };\r\n    Container.prototype.getResourceInformation = function () {\r\n        var result = _super.prototype.getResourceInformation.call(this);\r\n        if (this.backgroundImage.isValid()) {\r\n            result.push({ url: this.backgroundImage.url, mimeType: \"image\" });\r\n        }\r\n        return result;\r\n    };\r\n    Container.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result) {\r\n            if (this.selectAction) {\r\n                result = this.selectAction.getActionById(id);\r\n            }\r\n            if (!result) {\r\n                for (var i = 0; i < this._items.length; i++) {\r\n                    result = this._items[i].getActionById(id);\r\n                    if (result) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(Container.prototype, \"padding\", {\r\n        get: function () {\r\n            return this.getPadding();\r\n        },\r\n        set: function (value) {\r\n            this.setPadding(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Container.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this.getSelectAction();\r\n        },\r\n        set: function (value) {\r\n            this.setSelectAction(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Container.prototype, \"bleed\", {\r\n        get: function () {\r\n            return this.getBleed();\r\n        },\r\n        set: function (value) {\r\n            this.setBleed(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Container;\r\n}(StylableCardElementContainer));\r\nexports.Container = Container;\r\nvar Column = /** @class */ (function (_super) {\r\n    __extends(Column, _super);\r\n    function Column(width) {\r\n        if (width === void 0) { width = \"stretch\"; }\r\n        var _this = _super.call(this) || this;\r\n        _this._computedWeight = 0;\r\n        _this.width = \"stretch\";\r\n        _this.width = width;\r\n        return _this;\r\n    }\r\n    Column.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        var minDesignTimeColumnHeight = 20;\r\n        if (this.isDesignMode()) {\r\n            renderedElement.style.minWidth = \"20px\";\r\n            renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\r\n        }\r\n        else {\r\n            renderedElement.style.minWidth = \"0\";\r\n            if (this.minPixelHeight) {\r\n                renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n            }\r\n        }\r\n        if (this.width === \"auto\") {\r\n            renderedElement.style.flex = \"0 1 auto\";\r\n        }\r\n        else if (this.width === \"stretch\") {\r\n            renderedElement.style.flex = \"1 1 50px\";\r\n        }\r\n        else {\r\n            var sizeAndUnit = this.width;\r\n            if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {\r\n                renderedElement.style.flex = \"0 0 auto\";\r\n                renderedElement.style.width = sizeAndUnit.physicalSize + \"px\";\r\n            }\r\n            else {\r\n                renderedElement.style.flex = \"1 1 \" + (this._computedWeight > 0 ? this._computedWeight : sizeAndUnit.physicalSize) + \"%\";\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Column.prototype, \"separatorOrientation\", {\r\n        get: function () {\r\n            return Enums.Orientation.Vertical;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Column.prototype.getJsonTypeName = function () {\r\n        return \"Column\";\r\n    };\r\n    Column.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        if (this.width instanceof Shared.SizeAndUnit) {\r\n            if (this.width.unit == Enums.SizeUnit.Pixel) {\r\n                Utils.setProperty(result, \"width\", this.width.physicalSize + \"px\");\r\n            }\r\n            else {\r\n                Utils.setNumberProperty(result, \"width\", this.width.physicalSize);\r\n            }\r\n        }\r\n        else {\r\n            Utils.setProperty(result, \"width\", this.width);\r\n        }\r\n        return result;\r\n    };\r\n    Column.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        var jsonWidth = json[\"width\"];\r\n        if (jsonWidth === undefined) {\r\n            jsonWidth = json[\"size\"];\r\n            if (jsonWidth !== undefined) {\r\n                raiseParseError({\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The \\\"Column.size\\\" property is deprecated and will be removed. Use the \\\"Column.width\\\" property instead.\"\r\n                }, errors);\r\n            }\r\n        }\r\n        if (jsonWidth) {\r\n            var invalidWidth = false;\r\n            try {\r\n                this.width = Shared.SizeAndUnit.parse(jsonWidth);\r\n            }\r\n            catch (e) {\r\n                if (typeof jsonWidth === \"string\" && (jsonWidth === \"auto\" || jsonWidth === \"stretch\")) {\r\n                    this.width = jsonWidth;\r\n                }\r\n                else {\r\n                    invalidWidth = true;\r\n                }\r\n            }\r\n            if (invalidWidth) {\r\n                raiseParseError({\r\n                    error: Enums.ValidationError.InvalidPropertyValue,\r\n                    message: \"Invalid column width:\" + jsonWidth + \" - defaulting to \\\"auto\\\"\"\r\n                }, errors);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Column.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            if (this.parent && this.parent instanceof ColumnSet) {\r\n                return this.separatorElement && !this.parent.isLeftMostElement(this);\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Column;\r\n}(Container));\r\nexports.Column = Column;\r\nvar ColumnSet = /** @class */ (function (_super) {\r\n    __extends(ColumnSet, _super);\r\n    function ColumnSet() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._columns = [];\r\n        return _this;\r\n    }\r\n    ColumnSet.prototype.createColumnInstance = function (json, errors) {\r\n        return createCardObjectInstance(this, json, [], // Forbidden types not supported for elements for now\r\n        !this.isDesignMode(), function (typeName) {\r\n            return !typeName || typeName === \"Column\" ? new Column() : null;\r\n        }, function (typeName, errorType) {\r\n            if (errorType == InstanceCreationErrorType.UnknownType) {\r\n                return {\r\n                    error: Enums.ValidationError.UnknownElementType,\r\n                    message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    error: Enums.ValidationError.ElementTypeNotAllowed,\r\n                    message: \"Element type \" + typeName + \" isn't allowed in a ColumnSet.\"\r\n                };\r\n            }\r\n        }, errors);\r\n    };\r\n    ColumnSet.prototype.internalRender = function () {\r\n        this._renderedColumns = [];\r\n        if (this._columns.length > 0) {\r\n            // Cache hostConfig to avoid walking the parent hierarchy several times\r\n            var hostConfig = this.hostConfig;\r\n            var element = document.createElement(\"div\");\r\n            element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\r\n            element.style.display = \"flex\";\r\n            if (AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n                // See comment in Container.internalRender()\r\n                element.style.minHeight = '-webkit-min-content';\r\n            }\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n            var totalWeight = 0;\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.width instanceof Shared.SizeAndUnit && (column.width.unit == Enums.SizeUnit.Weight)) {\r\n                    totalWeight += column.width.physicalSize;\r\n                }\r\n            }\r\n            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\r\n                var column = _c[_b];\r\n                if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {\r\n                    var computedWeight = 100 / totalWeight * column.width.physicalSize;\r\n                    // Best way to emulate \"internal\" access I know of\r\n                    column[\"_computedWeight\"] = computedWeight;\r\n                }\r\n                var renderedColumn = column.render();\r\n                if (renderedColumn) {\r\n                    if (this._renderedColumns.length > 0 && column.separatorElement) {\r\n                        column.separatorElement.style.flex = \"0 0 auto\";\r\n                        Utils.appendChild(element, column.separatorElement);\r\n                    }\r\n                    Utils.appendChild(element, renderedColumn);\r\n                    this._renderedColumns.push(column);\r\n                }\r\n            }\r\n            return this._renderedColumns.length > 0 ? element : null;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    ColumnSet.prototype.truncateOverflow = function (maxHeight) {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            column['handleOverflow'](maxHeight);\r\n        }\r\n        return true;\r\n    };\r\n    ColumnSet.prototype.undoOverflowTruncation = function () {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            column['resetOverflow']();\r\n        }\r\n    };\r\n    Object.defineProperty(ColumnSet.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ColumnSet.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        if (this._columns.length > 0) {\r\n            var columns = [];\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                columns.push(column.toJSON());\r\n            }\r\n            Utils.setProperty(result, \"columns\", columns);\r\n        }\r\n        Utils.setProperty(result, \"bleed\", this.bleed, false);\r\n        return result;\r\n    };\r\n    ColumnSet.prototype.isFirstElement = function (element) {\r\n        for (var i = 0; i < this._columns.length; i++) {\r\n            if (this._columns[i].isVisible) {\r\n                return this._columns[i] == element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.isBleedingAtTop = function () {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.isBleedingAtTop()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.isBleedingAtBottom = function () {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.isBleedingAtBottom()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.getCount = function () {\r\n        return this._columns.length;\r\n    };\r\n    ColumnSet.prototype.getItemCount = function () {\r\n        return this.getCount();\r\n    };\r\n    ColumnSet.prototype.getFirstVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[0];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    ColumnSet.prototype.getLastVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[this._renderedColumns.length - 1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    ColumnSet.prototype.getColumnAt = function (index) {\r\n        return this._columns[index];\r\n    };\r\n    ColumnSet.prototype.getItemAt = function (index) {\r\n        return this.getColumnAt(index);\r\n    };\r\n    ColumnSet.prototype.getJsonTypeName = function () {\r\n        return \"ColumnSet\";\r\n    };\r\n    ColumnSet.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        if (json[\"columns\"] != null) {\r\n            var jsonColumns = json[\"columns\"];\r\n            this._columns = [];\r\n            for (var i = 0; i < jsonColumns.length; i++) {\r\n                var column = this.createColumnInstance(jsonColumns[i], errors);\r\n                if (column) {\r\n                    this._columns.push(column);\r\n                }\r\n            }\r\n        }\r\n        this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\r\n    };\r\n    ColumnSet.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        var weightedColumns = 0;\r\n        var stretchedColumns = 0;\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            if (typeof column.width === \"number\") {\r\n                weightedColumns++;\r\n            }\r\n            else if (column.width === \"stretch\") {\r\n                stretchedColumns++;\r\n            }\r\n        }\r\n        if (weightedColumns > 0 && stretchedColumns > 0) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.Hint,\r\n                message: \"It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.\"\r\n            });\r\n        }\r\n    };\r\n    ColumnSet.prototype.addColumn = function (column) {\r\n        if (!column.parent) {\r\n            this._columns.push(column);\r\n            column.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(\"This column already belongs to another ColumnSet.\");\r\n        }\r\n    };\r\n    ColumnSet.prototype.removeItem = function (item) {\r\n        if (item instanceof Column) {\r\n            var itemIndex = this._columns.indexOf(item);\r\n            if (itemIndex >= 0) {\r\n                this._columns.splice(itemIndex, 1);\r\n                item.setParent(null);\r\n                this.updateLayout();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\r\n    };\r\n    ColumnSet.prototype.isLeftMostElement = function (element) {\r\n        return this._columns.indexOf(element) == 0;\r\n    };\r\n    ColumnSet.prototype.isRightMostElement = function (element) {\r\n        return this._columns.indexOf(element) == this._columns.length - 1;\r\n    };\r\n    ColumnSet.prototype.isTopElement = function (element) {\r\n        return this._columns.indexOf(element) >= 0;\r\n    };\r\n    ColumnSet.prototype.isBottomElement = function (element) {\r\n        return this._columns.indexOf(element) >= 0;\r\n    };\r\n    ColumnSet.prototype.getActionById = function (id) {\r\n        var result = null;\r\n        for (var i = 0; i < this._columns.length; i++) {\r\n            result = this._columns[i].getActionById(id);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ColumnSet.prototype, \"bleed\", {\r\n        get: function () {\r\n            return this.getBleed();\r\n        },\r\n        set: function (value) {\r\n            this.setBleed(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSet.prototype, \"padding\", {\r\n        get: function () {\r\n            return this.getPadding();\r\n        },\r\n        set: function (value) {\r\n            this.setPadding(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSet.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this.getSelectAction();\r\n        },\r\n        set: function (value) {\r\n            this.setSelectAction(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ColumnSet;\r\n}(StylableCardElementContainer));\r\nexports.ColumnSet = ColumnSet;\r\nfunction raiseImageLoadedEvent(image) {\r\n    var card = image.getRootElement();\r\n    var onImageLoadedHandler = (card && card.onImageLoaded) ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\r\n    if (onImageLoadedHandler) {\r\n        onImageLoadedHandler(image);\r\n    }\r\n}\r\nfunction raiseAnchorClickedEvent(element, anchor) {\r\n    var card = element.getRootElement();\r\n    var onAnchorClickedHandler = (card && card.onAnchorClicked) ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\r\n    return onAnchorClickedHandler != null ? onAnchorClickedHandler(element, anchor) : false;\r\n}\r\nfunction raiseExecuteActionEvent(action) {\r\n    var card = action.parent.getRootElement();\r\n    var onExecuteActionHandler = (card && card.onExecuteAction) ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\r\n    if (onExecuteActionHandler) {\r\n        if (action.prepareForExecution()) {\r\n            onExecuteActionHandler(action);\r\n        }\r\n    }\r\n}\r\nfunction raiseInlineCardExpandedEvent(action, isExpanded) {\r\n    var card = action.parent.getRootElement();\r\n    var onInlineCardExpandedHandler = (card && card.onInlineCardExpanded) ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;\r\n    if (onInlineCardExpandedHandler) {\r\n        onInlineCardExpandedHandler(action, isExpanded);\r\n    }\r\n}\r\nfunction raiseInputValueChangedEvent(input) {\r\n    var card = input.getRootElement();\r\n    var onInputValueChangedHandler = (card && card.onInputValueChanged) ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;\r\n    if (onInputValueChangedHandler) {\r\n        onInputValueChangedHandler(input);\r\n    }\r\n}\r\nfunction raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {\r\n    if (shouldUpdateLayout === void 0) { shouldUpdateLayout = true; }\r\n    var rootElement = element.getRootElement();\r\n    if (shouldUpdateLayout) {\r\n        rootElement.updateLayout();\r\n    }\r\n    var card = rootElement;\r\n    var onElementVisibilityChangedHandler = (card && card.onElementVisibilityChanged) ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;\r\n    if (onElementVisibilityChangedHandler != null) {\r\n        onElementVisibilityChangedHandler(element);\r\n    }\r\n}\r\nfunction raiseParseElementEvent(element, json, errors) {\r\n    var card = element.getRootElement();\r\n    var onParseElementHandler = (card && card.onParseElement) ? card.onParseElement : AdaptiveCard.onParseElement;\r\n    if (onParseElementHandler != null) {\r\n        onParseElementHandler(element, json, errors);\r\n    }\r\n}\r\nfunction raiseParseActionEvent(action, json, errors) {\r\n    var card = action.parent ? action.parent.getRootElement() : null;\r\n    var onParseActionHandler = (card && card.onParseAction) ? card.onParseAction : AdaptiveCard.onParseAction;\r\n    if (onParseActionHandler != null) {\r\n        onParseActionHandler(action, json, errors);\r\n    }\r\n}\r\nfunction raiseParseError(error, errors) {\r\n    if (errors) {\r\n        errors.push(error);\r\n    }\r\n    if (AdaptiveCard.onParseError != null) {\r\n        AdaptiveCard.onParseError(error);\r\n    }\r\n}\r\nvar ContainerWithActions = /** @class */ (function (_super) {\r\n    __extends(ContainerWithActions, _super);\r\n    function ContainerWithActions() {\r\n        var _this = _super.call(this) || this;\r\n        _this._actionCollection = new ActionCollection(_this);\r\n        return _this;\r\n    }\r\n    ContainerWithActions.prototype.internalRender = function () {\r\n        var element = _super.prototype.internalRender.call(this);\r\n        var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);\r\n        if (renderedActions) {\r\n            Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {\r\n                spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing),\r\n                lineThickness: null,\r\n                lineColor: null\r\n            }, Enums.Orientation.Horizontal));\r\n            Utils.appendChild(element, renderedActions);\r\n        }\r\n        if (this.renderIfEmpty) {\r\n            return element;\r\n        }\r\n        else {\r\n            return element.children.length > 0 ? element : null;\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getHasExpandedAction = function () {\r\n        if (this.renderedActionCount == 0) {\r\n            return false;\r\n        }\r\n        else if (this.renderedActionCount == 1) {\r\n            return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n        }\r\n        else {\r\n            return this._actionCollection.expandedAction != null;\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerWithActions.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return this._actionCollection.renderedActionCount;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ContainerWithActions.prototype, \"renderIfEmpty\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ContainerWithActions.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\r\n        return result;\r\n    };\r\n    ContainerWithActions.prototype.getActionCount = function () {\r\n        return this._actionCollection.items.length;\r\n    };\r\n    ContainerWithActions.prototype.getActionAt = function (index) {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.items[index];\r\n        }\r\n        else {\r\n            _super.prototype.getActionAt.call(this, index);\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getActionById = function (id) {\r\n        var result = this._actionCollection.getActionById(id);\r\n        return result ? result : _super.prototype.getActionById.call(this, id);\r\n    };\r\n    ContainerWithActions.prototype.parse = function (json, errors) {\r\n        _super.prototype.parse.call(this, json, errors);\r\n        this._actionCollection.parse(json[\"actions\"], errors);\r\n    };\r\n    ContainerWithActions.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this._actionCollection) {\r\n            this._actionCollection.validateProperties(context);\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.isLastElement = function (element) {\r\n        return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;\r\n    };\r\n    ContainerWithActions.prototype.addAction = function (action) {\r\n        this._actionCollection.addAction(action);\r\n    };\r\n    ContainerWithActions.prototype.clear = function () {\r\n        _super.prototype.clear.call(this);\r\n        this._actionCollection.clear();\r\n    };\r\n    ContainerWithActions.prototype.getAllInputs = function () {\r\n        return _super.prototype.getAllInputs.call(this).concat(this._actionCollection.getAllInputs());\r\n    };\r\n    ContainerWithActions.prototype.getResourceInformation = function () {\r\n        return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());\r\n    };\r\n    ContainerWithActions.prototype.isBleedingAtBottom = function () {\r\n        if (this._actionCollection.renderedActionCount == 0) {\r\n            return _super.prototype.isBleedingAtBottom.call(this);\r\n        }\r\n        else {\r\n            if (this._actionCollection.items.length == 1) {\r\n                return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction != null;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerWithActions.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ContainerWithActions;\r\n}(Container));\r\nexports.ContainerWithActions = ContainerWithActions;\r\nvar TypeRegistry = /** @class */ (function () {\r\n    function TypeRegistry() {\r\n        this._items = [];\r\n        this.reset();\r\n    }\r\n    TypeRegistry.prototype.findTypeRegistration = function (typeName) {\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            if (this._items[i].typeName === typeName) {\r\n                return this._items[i];\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    TypeRegistry.prototype.clear = function () {\r\n        this._items = [];\r\n    };\r\n    TypeRegistry.prototype.registerType = function (typeName, createInstance) {\r\n        var registrationInfo = this.findTypeRegistration(typeName);\r\n        if (registrationInfo != null) {\r\n            registrationInfo.createInstance = createInstance;\r\n        }\r\n        else {\r\n            registrationInfo = {\r\n                typeName: typeName,\r\n                createInstance: createInstance\r\n            };\r\n            this._items.push(registrationInfo);\r\n        }\r\n    };\r\n    TypeRegistry.prototype.unregisterType = function (typeName) {\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            if (this._items[i].typeName === typeName) {\r\n                this._items.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    TypeRegistry.prototype.createInstance = function (typeName) {\r\n        var registrationInfo = this.findTypeRegistration(typeName);\r\n        return registrationInfo ? registrationInfo.createInstance() : null;\r\n    };\r\n    TypeRegistry.prototype.getItemCount = function () {\r\n        return this._items.length;\r\n    };\r\n    TypeRegistry.prototype.getItemAt = function (index) {\r\n        return this._items[index];\r\n    };\r\n    return TypeRegistry;\r\n}());\r\nexports.TypeRegistry = TypeRegistry;\r\nvar ElementTypeRegistry = /** @class */ (function (_super) {\r\n    __extends(ElementTypeRegistry, _super);\r\n    function ElementTypeRegistry() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ElementTypeRegistry.prototype.reset = function () {\r\n        this.clear();\r\n        this.registerType(\"Container\", function () { return new Container(); });\r\n        this.registerType(\"TextBlock\", function () { return new TextBlock(); });\r\n        this.registerType(\"RichTextBlock\", function () { return new RichTextBlock(); });\r\n        this.registerType(\"TextRun\", function () { return new TextRun(); });\r\n        this.registerType(\"Image\", function () { return new Image(); });\r\n        this.registerType(\"ImageSet\", function () { return new ImageSet(); });\r\n        this.registerType(\"Media\", function () { return new Media(); });\r\n        this.registerType(\"FactSet\", function () { return new FactSet(); });\r\n        this.registerType(\"ColumnSet\", function () { return new ColumnSet(); });\r\n        this.registerType(\"ActionSet\", function () { return new ActionSet(); });\r\n        this.registerType(\"Input.Text\", function () { return new TextInput(); });\r\n        this.registerType(\"Input.Date\", function () { return new DateInput(); });\r\n        this.registerType(\"Input.Time\", function () { return new TimeInput(); });\r\n        this.registerType(\"Input.Number\", function () { return new NumberInput(); });\r\n        this.registerType(\"Input.ChoiceSet\", function () { return new ChoiceSetInput(); });\r\n        this.registerType(\"Input.Toggle\", function () { return new ToggleInput(); });\r\n    };\r\n    return ElementTypeRegistry;\r\n}(TypeRegistry));\r\nexports.ElementTypeRegistry = ElementTypeRegistry;\r\nvar ActionTypeRegistry = /** @class */ (function (_super) {\r\n    __extends(ActionTypeRegistry, _super);\r\n    function ActionTypeRegistry() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ActionTypeRegistry.prototype.reset = function () {\r\n        this.clear();\r\n        this.registerType(OpenUrlAction.JsonTypeName, function () { return new OpenUrlAction(); });\r\n        this.registerType(SubmitAction.JsonTypeName, function () { return new SubmitAction(); });\r\n        this.registerType(ShowCardAction.JsonTypeName, function () { return new ShowCardAction(); });\r\n        this.registerType(ToggleVisibilityAction.JsonTypeName, function () { return new ToggleVisibilityAction(); });\r\n    };\r\n    return ActionTypeRegistry;\r\n}(TypeRegistry));\r\nexports.ActionTypeRegistry = ActionTypeRegistry;\r\nvar AdaptiveCard = /** @class */ (function (_super) {\r\n    __extends(AdaptiveCard, _super);\r\n    function AdaptiveCard() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._cardTypeName = \"AdaptiveCard\";\r\n        _this._fallbackCard = null;\r\n        _this.onAnchorClicked = null;\r\n        _this.onExecuteAction = null;\r\n        _this.onElementVisibilityChanged = null;\r\n        _this.onImageLoaded = null;\r\n        _this.onInlineCardExpanded = null;\r\n        _this.onInputValueChanged = null;\r\n        _this.onParseElement = null;\r\n        _this.onParseAction = null;\r\n        _this.version = new HostConfig.Version(1, 0);\r\n        _this.designMode = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AdaptiveCard, \"processMarkdown\", {\r\n        get: function () {\r\n            throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\");\r\n        },\r\n        set: function (value) {\r\n            throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.applyMarkdown = function (text) {\r\n        var result = {\r\n            didProcess: false\r\n        };\r\n        if (AdaptiveCard.onProcessMarkdown) {\r\n            AdaptiveCard.onProcessMarkdown(text, result);\r\n        }\r\n        else if (window[\"markdownit\"]) {\r\n            // Check for markdownit\r\n            result.outputHtml = window[\"markdownit\"]().render(text);\r\n            result.didProcess = true;\r\n        }\r\n        else {\r\n            console.warn(\"Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown\");\r\n        }\r\n        return result;\r\n    };\r\n    AdaptiveCard.prototype.isVersionSupported = function () {\r\n        if (this.bypassVersionCheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            var unsupportedVersion = !this.version ||\r\n                !this.version.isValid ||\r\n                (AdaptiveCard.currentVersion.major < this.version.major) ||\r\n                (AdaptiveCard.currentVersion.major == this.version.major && AdaptiveCard.currentVersion.minor < this.version.minor);\r\n            return !unsupportedVersion;\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {\r\n        return \"body\";\r\n    };\r\n    AdaptiveCard.prototype.internalRender = function () {\r\n        var renderedElement = _super.prototype.internalRender.call(this);\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n            // Unlike containers, the root card element should be allowed to\r\n            // be shorter than its content (otherwise the overflow truncation\r\n            // logic would never get triggered)\r\n            renderedElement.style.minHeight = null;\r\n        }\r\n        return renderedElement;\r\n    };\r\n    AdaptiveCard.prototype.getHasBackground = function () {\r\n        return true;\r\n    };\r\n    AdaptiveCard.prototype.getDefaultPadding = function () {\r\n        return new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);\r\n    };\r\n    Object.defineProperty(AdaptiveCard.prototype, \"renderIfEmpty\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"bypassVersionCheck\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"allowCustomStyle\", {\r\n        get: function () {\r\n            return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"hasBackground\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.prototype.getJsonTypeName = function () {\r\n        return \"AdaptiveCard\";\r\n    };\r\n    AdaptiveCard.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        Utils.setProperty(result, \"$schema\", \"http://adaptivecards.io/schemas/adaptive-card.json\");\r\n        if (!this.bypassVersionCheck && this.version) {\r\n            Utils.setProperty(result, \"version\", this.version.toString());\r\n        }\r\n        Utils.setProperty(result, \"fallbackText\", this.fallbackText);\r\n        Utils.setProperty(result, \"lang\", this.lang);\r\n        Utils.setProperty(result, \"speak\", this.speak);\r\n        return result;\r\n    };\r\n    AdaptiveCard.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this._cardTypeName != \"AdaptiveCard\") {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.MissingCardType,\r\n                message: \"Invalid or missing card type. Make sure the card's type property is set to \\\"AdaptiveCard\\\".\"\r\n            });\r\n        }\r\n        if (!this.bypassVersionCheck && !this.version) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.PropertyCantBeNull,\r\n                message: \"The version property must be specified.\"\r\n            });\r\n        }\r\n        else if (!this.isVersionSupported()) {\r\n            context.addFailure(this, {\r\n                error: Enums.ValidationError.UnsupportedCardVersion,\r\n                message: \"The specified card version (\" + this.version + \") is not supported. The maximum supported card version is \" + AdaptiveCard.currentVersion\r\n            });\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.parse = function (json, errors) {\r\n        this._fallbackCard = null;\r\n        this._cardTypeName = Utils.getStringValue(json[\"type\"]);\r\n        this.speak = Utils.getStringValue(json[\"speak\"]);\r\n        var langId = Utils.getStringValue(json[\"lang\"]);\r\n        if (langId && typeof langId === \"string\") {\r\n            try {\r\n                this.lang = langId;\r\n            }\r\n            catch (e) {\r\n                raiseParseError({\r\n                    error: Enums.ValidationError.InvalidPropertyValue,\r\n                    message: e.message\r\n                }, errors);\r\n            }\r\n        }\r\n        this.version = HostConfig.Version.parse(json[\"version\"], errors);\r\n        this.fallbackText = Utils.getStringValue(json[\"fallbackText\"]);\r\n        var fallbackElement = createElementInstance(null, json[\"fallback\"], !this.isDesignMode(), errors);\r\n        if (fallbackElement) {\r\n            this._fallbackCard = new AdaptiveCard();\r\n            this._fallbackCard.addItem(fallbackElement);\r\n        }\r\n        _super.prototype.parse.call(this, json, errors);\r\n    };\r\n    AdaptiveCard.prototype.render = function (target) {\r\n        var renderedCard;\r\n        if (this.shouldFallback() && this._fallbackCard) {\r\n            this._fallbackCard.hostConfig = this.hostConfig;\r\n            renderedCard = this._fallbackCard.render();\r\n        }\r\n        else {\r\n            renderedCard = _super.prototype.render.call(this);\r\n            if (renderedCard) {\r\n                renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\"));\r\n                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\r\n                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\r\n                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\r\n                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\r\n                // by default.\r\n                if (Shared.GlobalSettings.setTabIndexAtCardRoot) {\r\n                    renderedCard.tabIndex = 0;\r\n                }\r\n                if (!Utils.isNullOrEmpty(this.speak)) {\r\n                    renderedCard.setAttribute(\"aria-label\", this.speak);\r\n                }\r\n            }\r\n        }\r\n        if (target) {\r\n            target.appendChild(renderedCard);\r\n            this.updateLayout();\r\n        }\r\n        return renderedCard;\r\n    };\r\n    AdaptiveCard.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation && this.isRendered()) {\r\n            var card = this.renderedElement;\r\n            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\r\n            this['handleOverflow'](card.offsetHeight - padding);\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.shouldFallback = function () {\r\n        return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();\r\n    };\r\n    Object.defineProperty(AdaptiveCard.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.currentVersion = new HostConfig.Version(1, 2);\r\n    AdaptiveCard.useAdvancedTextBlockTruncation = true;\r\n    AdaptiveCard.useAdvancedCardBottomTruncation = false;\r\n    AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = true;\r\n    AdaptiveCard.allowMarkForTextHighlighting = false;\r\n    AdaptiveCard.alwaysBleedSeparators = false;\r\n    AdaptiveCard.enableFullJsonRoundTrip = false;\r\n    AdaptiveCard.useBuiltInInputValidation = true;\r\n    AdaptiveCard.displayInputValidationErrors = true;\r\n    AdaptiveCard.elementTypeRegistry = new ElementTypeRegistry();\r\n    AdaptiveCard.actionTypeRegistry = new ActionTypeRegistry();\r\n    AdaptiveCard.onAnchorClicked = null;\r\n    AdaptiveCard.onExecuteAction = null;\r\n    AdaptiveCard.onElementVisibilityChanged = null;\r\n    AdaptiveCard.onImageLoaded = null;\r\n    AdaptiveCard.onInlineCardExpanded = null;\r\n    AdaptiveCard.onInputValueChanged = null;\r\n    AdaptiveCard.onParseElement = null;\r\n    AdaptiveCard.onParseAction = null;\r\n    AdaptiveCard.onParseError = null;\r\n    AdaptiveCard.onProcessMarkdown = null;\r\n    return AdaptiveCard;\r\n}(ContainerWithActions));\r\nexports.AdaptiveCard = AdaptiveCard;\r\nvar InlineAdaptiveCard = /** @class */ (function (_super) {\r\n    __extends(InlineAdaptiveCard, _super);\r\n    function InlineAdaptiveCard() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.suppressStyle = false;\r\n        return _this;\r\n    }\r\n    InlineAdaptiveCard.prototype.getDefaultPadding = function () {\r\n        return new Shared.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);\r\n    };\r\n    Object.defineProperty(InlineAdaptiveCard.prototype, \"bypassVersionCheck\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(InlineAdaptiveCard.prototype, \"defaultStyle\", {\r\n        get: function () {\r\n            if (this.suppressStyle) {\r\n                return Enums.ContainerStyle.Default;\r\n            }\r\n            else {\r\n                return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InlineAdaptiveCard.prototype.render = function (target) {\r\n        var renderedCard = _super.prototype.render.call(this, target);\r\n        renderedCard.setAttribute(\"aria-live\", \"polite\");\r\n        renderedCard.removeAttribute(\"tabindex\");\r\n        return renderedCard;\r\n    };\r\n    InlineAdaptiveCard.prototype.getForbiddenActionTypes = function () {\r\n        return [ShowCardAction];\r\n    };\r\n    return InlineAdaptiveCard;\r\n}(AdaptiveCard));\r\nvar defaultHostConfig = new HostConfig.HostConfig({\r\n    supportsInteractivity: true,\r\n    spacing: {\r\n        small: 10,\r\n        default: 20,\r\n        medium: 30,\r\n        large: 40,\r\n        extraLarge: 50,\r\n        padding: 20\r\n    },\r\n    separator: {\r\n        lineThickness: 1,\r\n        lineColor: \"#EEEEEE\"\r\n    },\r\n    fontTypes: {\r\n        default: {\r\n            fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\r\n            fontSizes: {\r\n                small: 12,\r\n                default: 14,\r\n                medium: 17,\r\n                large: 21,\r\n                extraLarge: 26\r\n            },\r\n            fontWeights: {\r\n                lighter: 200,\r\n                default: 400,\r\n                bolder: 600\r\n            }\r\n        },\r\n        monospace: {\r\n            fontFamily: \"'Courier New', Courier, monospace\",\r\n            fontSizes: {\r\n                small: 12,\r\n                default: 14,\r\n                medium: 17,\r\n                large: 21,\r\n                extraLarge: 26\r\n            },\r\n            fontWeights: {\r\n                lighter: 200,\r\n                default: 400,\r\n                bolder: 600\r\n            }\r\n        }\r\n    },\r\n    imageSizes: {\r\n        small: 40,\r\n        medium: 80,\r\n        large: 160\r\n    },\r\n    containerStyles: {\r\n        default: {\r\n            backgroundColor: \"#FFFFFF\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#54a254\",\r\n                    subtle: \"#DD54a254\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        emphasis: {\r\n            backgroundColor: \"#08000000\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#54a254\",\r\n                    subtle: \"#DD54a254\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        accent: {\r\n            backgroundColor: \"#C7DEF9\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#54a254\",\r\n                    subtle: \"#DD54a254\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        good: {\r\n            backgroundColor: \"#CCFFCC\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#54a254\",\r\n                    subtle: \"#DD54a254\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        attention: {\r\n            backgroundColor: \"#FFC5B2\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#54a254\",\r\n                    subtle: \"#DD54a254\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        warning: {\r\n            backgroundColor: \"#FFE2B2\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#54a254\",\r\n                    subtle: \"#DD54a254\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        }\r\n    },\r\n    actions: {\r\n        maxActions: 5,\r\n        spacing: Enums.Spacing.Default,\r\n        buttonSpacing: 10,\r\n        showCard: {\r\n            actionMode: Enums.ShowCardActionMode.Inline,\r\n            inlineTopMargin: 16\r\n        },\r\n        actionsOrientation: Enums.Orientation.Horizontal,\r\n        actionAlignment: Enums.ActionAlignment.Left\r\n    },\r\n    adaptiveCard: {\r\n        allowCustomStyle: false\r\n    },\r\n    imageSet: {\r\n        imageSize: Enums.Size.Medium,\r\n        maxImageHeight: 100\r\n    },\r\n    factSet: {\r\n        title: {\r\n            color: Enums.TextColor.Default,\r\n            size: Enums.TextSize.Default,\r\n            isSubtle: false,\r\n            weight: Enums.TextWeight.Bolder,\r\n            wrap: true,\r\n            maxWidth: 150,\r\n        },\r\n        value: {\r\n            color: Enums.TextColor.Default,\r\n            size: Enums.TextSize.Default,\r\n            isSubtle: false,\r\n            weight: Enums.TextWeight.Default,\r\n            wrap: true,\r\n        },\r\n        spacing: 10\r\n    }\r\n});\r\n//# sourceMappingURL=card-elements.js.map"]},"metadata":{},"sourceType":"script"}