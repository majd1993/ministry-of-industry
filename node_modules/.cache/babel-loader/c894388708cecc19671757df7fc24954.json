{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _botframeworkWebchatApi = require(\"botframework-webchat-api\");\n\nvar _reactSay = require(\"react-say\");\n\nvar _reactScrollToBottom = require(\"react-scroll-to-bottom\");\n\nvar _createEmotion = _interopRequireDefault(require(\"create-emotion\"));\n\nvar _createStyleSet = _interopRequireDefault(require(\"./Styles/createStyleSet\"));\n\nvar _markdownIt = _interopRequireDefault(require(\"markdown-it\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _BypassSpeechSynthesisPonyfill = require(\"./hooks/internal/BypassSpeechSynthesisPonyfill\");\n\nvar _addTargetBlankToHyperlinksMarkdown = _interopRequireDefault(require(\"./Utils/addTargetBlankToHyperlinksMarkdown\"));\n\nvar _createCSSKey = _interopRequireDefault(require(\"./Utils/createCSSKey\"));\n\nvar _createCoreMiddleware = _interopRequireDefault(require(\"./Middleware/Activity/createCoreMiddleware\"));\n\nvar _createCoreMiddleware2 = _interopRequireDefault(require(\"./Middleware/ActivityStatus/createCoreMiddleware\"));\n\nvar _createCoreMiddleware3 = _interopRequireDefault(require(\"./Middleware/AttachmentForScreenReader/createCoreMiddleware\"));\n\nvar _createCoreMiddleware4 = _interopRequireDefault(require(\"./Middleware/Attachment/createCoreMiddleware\"));\n\nvar _createCoreMiddleware5 = _interopRequireDefault(require(\"./Middleware/Avatar/createCoreMiddleware\"));\n\nvar _createCoreMiddleware6 = _interopRequireDefault(require(\"./Middleware/CardAction/createCoreMiddleware\"));\n\nvar _createCoreMiddleware7 = _interopRequireDefault(require(\"./Middleware/Toast/createCoreMiddleware\"));\n\nvar _createCoreMiddleware8 = _interopRequireDefault(require(\"./Middleware/TypingIndicator/createCoreMiddleware\"));\n\nvar _Dictation = _interopRequireDefault(require(\"./Dictation\"));\n\nvar _downscaleImageToDataURL = _interopRequireDefault(require(\"./Utils/downscaleImageToDataURL\"));\n\nvar _ErrorBox = _interopRequireDefault(require(\"./ErrorBox\"));\n\nvar _mapMap = _interopRequireDefault(require(\"./Utils/mapMap\"));\n\nvar _singleToArray = _interopRequireDefault(require(\"./Utils/singleToArray\"));\n\nvar _UITracker = _interopRequireDefault(require(\"./hooks/internal/UITracker\"));\n\nvar _WebChatUIContext = _interopRequireDefault(require(\"./hooks/internal/WebChatUIContext\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar useReferenceGrammarID = _botframeworkWebchatApi.hooks.useReferenceGrammarID,\n    useStyleOptions = _botframeworkWebchatApi.hooks.useStyleOptions;\nvar node_env = undefined || \"production\";\nvar emotionPool = {};\n\nfunction createFocusContext(_ref) {\n  var sendBoxFocusRef = _ref.sendBoxFocusRef,\n      transcriptFocusRef = _ref.transcriptFocusRef;\n  return {\n    focus: function focus(where) {\n      var ref = where === 'sendBox' || where === 'sendBoxWithoutKeyboard' ? sendBoxFocusRef : transcriptFocusRef;\n\n      var _ref2 = ref || {},\n          current = _ref2.current;\n\n      if (current) {\n        if (where === 'sendBoxWithoutKeyboard') {\n          // To not activate the virtual keyboard while changing focus to an input, we will temporarily set it as read-only and flip it back.\n          // https://stackoverflow.com/questions/7610758/prevent-iphone-default-keyboard-when-focusing-an-input/7610923\n          var readOnly = current.getAttribute('readonly');\n          current.setAttribute('readonly', 'readonly');\n          setTimeout(function () {\n            current.focus();\n            readOnly ? current.setAttribute('readonly', readOnly) : current.removeAttribute('readonly');\n          }, 0);\n        } else {\n          current.focus();\n        }\n      }\n    }\n  };\n}\n\nfunction styleSetToEmotionObjects(styleToEmotionObject, styleSet) {\n  return (0, _mapMap.default)(styleSet, function (style, key) {\n    return key === 'options' ? style : styleToEmotionObject(style);\n  });\n}\n\nvar ComposerCore = function ComposerCore(_ref3) {\n  var children = _ref3.children,\n      extraStyleSet = _ref3.extraStyleSet,\n      nonce = _ref3.nonce,\n      renderMarkdown = _ref3.renderMarkdown,\n      styleSet = _ref3.styleSet,\n      suggestedActionsAccessKey = _ref3.suggestedActionsAccessKey,\n      webSpeechPonyfillFactory = _ref3.webSpeechPonyfillFactory;\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = _slicedToArray(_useState, 2),\n      dictateAbortable = _useState2[0],\n      setDictateAbortable = _useState2[1];\n\n  var _useReferenceGrammarI = useReferenceGrammarID(),\n      _useReferenceGrammarI2 = _slicedToArray(_useReferenceGrammarI, 1),\n      referenceGrammarID = _useReferenceGrammarI2[0];\n\n  var _useStyleOptions = useStyleOptions(),\n      _useStyleOptions2 = _slicedToArray(_useStyleOptions, 1),\n      styleOptions = _useStyleOptions2[0];\n\n  var internalMarkdownIt = (0, _react.useMemo)(function () {\n    return new _markdownIt.default();\n  }, []);\n  var sendBoxFocusRef = (0, _react.useRef)();\n  var transcriptActivityElementsRef = (0, _react.useRef)([]);\n  var transcriptFocusRef = (0, _react.useRef)();\n  var transcriptRootElementRef = (0, _react.useRef)();\n  var dictationOnError = (0, _react.useCallback)(function (err) {\n    console.error(err);\n  }, []);\n  var focusContext = (0, _react.useMemo)(function () {\n    return createFocusContext({\n      sendBoxFocusRef: sendBoxFocusRef,\n      transcriptFocusRef: transcriptFocusRef\n    });\n  }, [sendBoxFocusRef, transcriptFocusRef]);\n  var internalRenderMarkdownInline = (0, _react.useMemo)(function () {\n    return function (markdown) {\n      var tree = internalMarkdownIt.parseInline(markdown); // We should add rel=\"noopener noreferrer\" and target=\"_blank\"\n\n      var patchedTree = (0, _addTargetBlankToHyperlinksMarkdown.default)(tree);\n      return internalMarkdownIt.renderer.render(patchedTree);\n    };\n  }, [internalMarkdownIt]);\n  var styleToEmotionObject = (0, _react.useMemo)(function () {\n    // Emotion doesn't hash with nonce. We need to provide the pooling mechanism.\n    // 1. If 2 instances use different nonce, they should result in different hash;\n    // 2. If 2 instances are being mounted, pooling will make sure we render only 1 set of <style> tags, instead of 2.\n    var emotion = emotionPool[nonce] || (emotionPool[nonce] = (0, _createEmotion.default)({\n      key: \"webchat--css-\".concat((0, _createCSSKey.default)()),\n      nonce: nonce\n    }));\n    return function (style) {\n      return emotion.css(style);\n    };\n  }, [nonce]);\n  var patchedStyleSet = (0, _react.useMemo)(function () {\n    return styleSetToEmotionObjects(styleToEmotionObject, _objectSpread(_objectSpread({}, styleSet || (0, _createStyleSet.default)(styleOptions)), extraStyleSet));\n  }, [extraStyleSet, styleOptions, styleSet, styleToEmotionObject]);\n  var webSpeechPonyfill = (0, _react.useMemo)(function () {\n    var ponyfill = webSpeechPonyfillFactory && webSpeechPonyfillFactory({\n      referenceGrammarID: referenceGrammarID\n    });\n\n    var _ref4 = ponyfill || {},\n        speechSynthesis = _ref4.speechSynthesis,\n        SpeechSynthesisUtterance = _ref4.SpeechSynthesisUtterance;\n\n    return _objectSpread(_objectSpread({}, ponyfill), {}, {\n      speechSynthesis: speechSynthesis || _BypassSpeechSynthesisPonyfill.speechSynthesis,\n      SpeechSynthesisUtterance: SpeechSynthesisUtterance || _BypassSpeechSynthesisPonyfill.SpeechSynthesisUtterance\n    });\n  }, [referenceGrammarID, webSpeechPonyfillFactory]);\n  var context = (0, _react.useMemo)(function () {\n    return _objectSpread(_objectSpread({}, focusContext), {}, {\n      dictateAbortable: dictateAbortable,\n      internalMarkdownItState: [internalMarkdownIt],\n      internalRenderMarkdownInline: internalRenderMarkdownInline,\n      nonce: nonce,\n      renderMarkdown: renderMarkdown,\n      sendBoxFocusRef: sendBoxFocusRef,\n      setDictateAbortable: setDictateAbortable,\n      styleSet: patchedStyleSet,\n      styleToEmotionObject: styleToEmotionObject,\n      suggestedActionsAccessKey: suggestedActionsAccessKey,\n      transcriptActivityElementsRef: transcriptActivityElementsRef,\n      transcriptFocusRef: transcriptFocusRef,\n      transcriptRootElementRef: transcriptRootElementRef,\n      webSpeechPonyfill: webSpeechPonyfill\n    });\n  }, [dictateAbortable, focusContext, internalMarkdownIt, internalRenderMarkdownInline, nonce, patchedStyleSet, renderMarkdown, sendBoxFocusRef, setDictateAbortable, styleToEmotionObject, suggestedActionsAccessKey, transcriptActivityElementsRef, transcriptFocusRef, transcriptRootElementRef, webSpeechPonyfill]);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_reactSay.Composer, {\n    ponyfill: webSpeechPonyfill\n  }, /*#__PURE__*/_react.default.createElement(_WebChatUIContext.default.Provider, {\n    value: context\n  }, children, /*#__PURE__*/_react.default.createElement(_Dictation.default, {\n    onError: dictationOnError\n  }))));\n};\n\nComposerCore.defaultProps = {\n  extraStyleSet: undefined,\n  nonce: undefined,\n  renderMarkdown: undefined,\n  styleSet: undefined,\n  suggestedActionsAccessKey: 'A a Å å',\n  webSpeechPonyfillFactory: undefined\n};\nComposerCore.propTypes = {\n  extraStyleSet: _propTypes.default.any,\n  nonce: _propTypes.default.string,\n  renderMarkdown: _propTypes.default.func,\n  styleSet: _propTypes.default.any,\n  suggestedActionsAccessKey: _propTypes.default.oneOfType([_propTypes.default.oneOf([false]), _propTypes.default.string]),\n  webSpeechPonyfillFactory: _propTypes.default.func\n};\n\nvar Composer = function Composer(_ref5) {\n  var activityMiddleware = _ref5.activityMiddleware,\n      activityStatusMiddleware = _ref5.activityStatusMiddleware,\n      attachmentForScreenReaderMiddleware = _ref5.attachmentForScreenReaderMiddleware,\n      attachmentMiddleware = _ref5.attachmentMiddleware,\n      avatarMiddleware = _ref5.avatarMiddleware,\n      cardActionMiddleware = _ref5.cardActionMiddleware,\n      children = _ref5.children,\n      extraStyleSet = _ref5.extraStyleSet,\n      renderMarkdown = _ref5.renderMarkdown,\n      styleSet = _ref5.styleSet,\n      suggestedActionsAccessKey = _ref5.suggestedActionsAccessKey,\n      toastMiddleware = _ref5.toastMiddleware,\n      typingIndicatorMiddleware = _ref5.typingIndicatorMiddleware,\n      webSpeechPonyfillFactory = _ref5.webSpeechPonyfillFactory,\n      composerProps = _objectWithoutProperties(_ref5, [\"activityMiddleware\", \"activityStatusMiddleware\", \"attachmentForScreenReaderMiddleware\", \"attachmentMiddleware\", \"avatarMiddleware\", \"cardActionMiddleware\", \"children\", \"extraStyleSet\", \"renderMarkdown\", \"styleSet\", \"suggestedActionsAccessKey\", \"toastMiddleware\", \"typingIndicatorMiddleware\", \"webSpeechPonyfillFactory\"]);\n\n  var nonce = composerProps.nonce,\n      onTelemetry = composerProps.onTelemetry;\n  var patchedActivityMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(activityMiddleware)), _toConsumableArray((0, _createCoreMiddleware.default)()));\n  }, [activityMiddleware]);\n  var patchedActivityStatusMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(activityStatusMiddleware)), _toConsumableArray((0, _createCoreMiddleware2.default)()));\n  }, [activityStatusMiddleware]);\n  var patchedAttachmentForScreenReaderMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(attachmentForScreenReaderMiddleware)), _toConsumableArray((0, _createCoreMiddleware3.default)()));\n  }, [attachmentForScreenReaderMiddleware]);\n  var patchedAttachmentMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(attachmentMiddleware)), _toConsumableArray((0, _createCoreMiddleware4.default)()));\n  }, [attachmentMiddleware]);\n  var patchedAvatarMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(avatarMiddleware)), _toConsumableArray((0, _createCoreMiddleware5.default)()));\n  }, [avatarMiddleware]);\n  var patchedCardActionMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(cardActionMiddleware)), _toConsumableArray((0, _createCoreMiddleware6.default)()));\n  }, [cardActionMiddleware]);\n  var patchedToastMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(toastMiddleware)), _toConsumableArray((0, _createCoreMiddleware7.default)()));\n  }, [toastMiddleware]);\n  var patchedTypingIndicatorMiddleware = (0, _react.useMemo)(function () {\n    return [].concat(_toConsumableArray((0, _singleToArray.default)(typingIndicatorMiddleware)), _toConsumableArray((0, _createCoreMiddleware8.default)()));\n  }, [typingIndicatorMiddleware]);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_botframeworkWebchatApi.Composer, _extends({\n    activityMiddleware: patchedActivityMiddleware,\n    activityStatusMiddleware: patchedActivityStatusMiddleware,\n    attachmentForScreenReaderMiddleware: patchedAttachmentForScreenReaderMiddleware,\n    attachmentMiddleware: patchedAttachmentMiddleware,\n    avatarMiddleware: patchedAvatarMiddleware,\n    cardActionMiddleware: patchedCardActionMiddleware,\n    downscaleImageToDataURL: _downscaleImageToDataURL.default // Under dev server of create-react-app, \"NODE_ENV\" will be set to \"development\".\n    ,\n    internalErrorBoxClass: node_env === 'development' ? _ErrorBox.default : undefined,\n    nonce: nonce,\n    toastMiddleware: patchedToastMiddleware,\n    typingIndicatorMiddleware: patchedTypingIndicatorMiddleware\n  }, composerProps), /*#__PURE__*/_react.default.createElement(_reactScrollToBottom.Composer, {\n    nonce: nonce\n  }, /*#__PURE__*/_react.default.createElement(ComposerCore, {\n    extraStyleSet: extraStyleSet,\n    nonce: nonce,\n    renderMarkdown: renderMarkdown,\n    styleSet: styleSet,\n    suggestedActionsAccessKey: suggestedActionsAccessKey,\n    webSpeechPonyfillFactory: webSpeechPonyfillFactory\n  }, children, onTelemetry && /*#__PURE__*/_react.default.createElement(_UITracker.default, null)))));\n};\n\nComposer.defaultProps = _objectSpread(_objectSpread(_objectSpread({}, _botframeworkWebchatApi.Composer.defaultProps), ComposerCore.defaultProps), {}, {\n  activityMiddleware: undefined,\n  activityRenderer: undefined,\n  activityStatusMiddleware: undefined,\n  activityStatusRenderer: undefined,\n  attachmentForScreenReaderMiddleware: undefined,\n  attachmentMiddleware: undefined,\n  attachmentRenderer: undefined,\n  avatarMiddleware: undefined,\n  avatarRenderer: undefined,\n  cardActionMiddleware: undefined,\n  children: undefined,\n  nonce: undefined,\n  renderMarkdown: undefined,\n  toastMiddleware: undefined,\n  toastRenderer: undefined,\n  typingIndicatorMiddleware: undefined,\n  typingIndicatorRenderer: undefined,\n  webSpeechPonyfillFactory: undefined\n});\nComposer.propTypes = _objectSpread(_objectSpread(_objectSpread({}, _botframeworkWebchatApi.Composer.propTypes), ComposerCore.propTypes), {}, {\n  activityMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  activityRenderer: _propTypes.default.func,\n  activityStatusMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  activityStatusRenderer: _propTypes.default.func,\n  attachmentForScreenReaderMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  attachmentMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  attachmentRenderer: _propTypes.default.func,\n  avatarMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  avatarRenderer: _propTypes.default.func,\n  cardActionMiddleware: _propTypes.default.func,\n  children: _propTypes.default.any,\n  nonce: _propTypes.default.string,\n  renderMarkdown: _propTypes.default.func,\n  toastMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  toastRenderer: _propTypes.default.func,\n  typingIndicatorMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),\n  typingIndicatorRenderer: _propTypes.default.func,\n  webSpeechPonyfillFactory: _propTypes.default.func\n});\nvar _default = Composer;\nexports.default = _default;","map":{"version":3,"sources":["../src/Composer.js"],"names":["useReferenceGrammarID","useStyleOptions","hooks","node_env","emotionPool","sendBoxFocusRef","transcriptFocusRef","focus","ref","where","current","readOnly","setTimeout","key","styleToEmotionObject","ComposerCore","children","extraStyleSet","nonce","renderMarkdown","styleSet","suggestedActionsAccessKey","webSpeechPonyfillFactory","dictateAbortable","setDictateAbortable","referenceGrammarID","styleOptions","internalMarkdownIt","MarkdownIt","transcriptActivityElementsRef","transcriptRootElementRef","dictationOnError","console","focusContext","createFocusContext","internalRenderMarkdownInline","tree","patchedTree","emotion","patchedStyleSet","styleSetToEmotionObjects","webSpeechPonyfill","ponyfill","speechSynthesis","SpeechSynthesisUtterance","bypassSpeechSynthesis","BypassSpeechSynthesisUtterance","context","internalMarkdownItState","undefined","PropTypes","func","Composer","activityMiddleware","activityStatusMiddleware","attachmentForScreenReaderMiddleware","attachmentMiddleware","avatarMiddleware","cardActionMiddleware","toastMiddleware","typingIndicatorMiddleware","composerProps","onTelemetry","patchedActivityMiddleware","patchedActivityStatusMiddleware","patchedAttachmentForScreenReaderMiddleware","patchedAttachmentMiddleware","patchedAvatarMiddleware","patchedCardActionMiddleware","patchedToastMiddleware","patchedTypingIndicatorMiddleware","downscaleImageToDataURL","ErrorBox","APIComposer","activityRenderer","activityStatusRenderer","attachmentRenderer","avatarRenderer","toastRenderer","typingIndicatorRenderer"],"mappings":"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","sourcesContent":["import { Composer as APIComposer, hooks } from 'botframework-webchat-api';\nimport { Composer as SayComposer } from 'react-say';\nimport { Composer as ScrollToBottomComposer } from 'react-scroll-to-bottom';\nimport createEmotion from 'create-emotion';\nimport createStyleSet from './Styles/createStyleSet';\nimport MarkdownIt from 'markdown-it';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\n\nimport {\n  speechSynthesis as bypassSpeechSynthesis,\n  SpeechSynthesisUtterance as BypassSpeechSynthesisUtterance\n} from './hooks/internal/BypassSpeechSynthesisPonyfill';\nimport addTargetBlankToHyperlinksMarkdown from './Utils/addTargetBlankToHyperlinksMarkdown';\nimport createCSSKey from './Utils/createCSSKey';\nimport createDefaultActivityMiddleware from './Middleware/Activity/createCoreMiddleware';\nimport createDefaultActivityStatusMiddleware from './Middleware/ActivityStatus/createCoreMiddleware';\nimport createDefaultAttachmentForScreenReaderMiddleware from './Middleware/AttachmentForScreenReader/createCoreMiddleware';\nimport createDefaultAttachmentMiddleware from './Middleware/Attachment/createCoreMiddleware';\nimport createDefaultAvatarMiddleware from './Middleware/Avatar/createCoreMiddleware';\nimport createDefaultCardActionMiddleware from './Middleware/CardAction/createCoreMiddleware';\nimport createDefaultToastMiddleware from './Middleware/Toast/createCoreMiddleware';\nimport createDefaultTypingIndicatorMiddleware from './Middleware/TypingIndicator/createCoreMiddleware';\nimport Dictation from './Dictation';\nimport downscaleImageToDataURL from './Utils/downscaleImageToDataURL';\nimport ErrorBox from './ErrorBox';\nimport mapMap from './Utils/mapMap';\nimport singleToArray from './Utils/singleToArray';\nimport UITracker from './hooks/internal/UITracker';\nimport WebChatUIContext from './hooks/internal/WebChatUIContext';\n\nconst { useReferenceGrammarID, useStyleOptions } = hooks;\n\nconst node_env = process.env.node_env || process.env.NODE_ENV;\n\nconst emotionPool = {};\n\nfunction createFocusContext({ sendBoxFocusRef, transcriptFocusRef }) {\n  return {\n    focus: where => {\n      const ref = where === 'sendBox' || where === 'sendBoxWithoutKeyboard' ? sendBoxFocusRef : transcriptFocusRef;\n      const { current } = ref || {};\n\n      if (current) {\n        if (where === 'sendBoxWithoutKeyboard') {\n          // To not activate the virtual keyboard while changing focus to an input, we will temporarily set it as read-only and flip it back.\n          // https://stackoverflow.com/questions/7610758/prevent-iphone-default-keyboard-when-focusing-an-input/7610923\n          const readOnly = current.getAttribute('readonly');\n\n          current.setAttribute('readonly', 'readonly');\n\n          setTimeout(() => {\n            current.focus();\n            readOnly ? current.setAttribute('readonly', readOnly) : current.removeAttribute('readonly');\n          }, 0);\n        } else {\n          current.focus();\n        }\n      }\n    }\n  };\n}\n\nfunction styleSetToEmotionObjects(styleToEmotionObject, styleSet) {\n  return mapMap(styleSet, (style, key) => (key === 'options' ? style : styleToEmotionObject(style)));\n}\n\nconst ComposerCore = ({\n  children,\n  extraStyleSet,\n  nonce,\n  renderMarkdown,\n  styleSet,\n  suggestedActionsAccessKey,\n  webSpeechPonyfillFactory\n}) => {\n  const [dictateAbortable, setDictateAbortable] = useState();\n  const [referenceGrammarID] = useReferenceGrammarID();\n  const [styleOptions] = useStyleOptions();\n  const internalMarkdownIt = useMemo(() => new MarkdownIt(), []);\n  const sendBoxFocusRef = useRef();\n  const transcriptActivityElementsRef = useRef([]);\n  const transcriptFocusRef = useRef();\n  const transcriptRootElementRef = useRef();\n\n  const dictationOnError = useCallback(err => {\n    console.error(err);\n  }, []);\n\n  const focusContext = useMemo(() => createFocusContext({ sendBoxFocusRef, transcriptFocusRef }), [\n    sendBoxFocusRef,\n    transcriptFocusRef\n  ]);\n\n  const internalRenderMarkdownInline = useMemo(\n    () => markdown => {\n      const tree = internalMarkdownIt.parseInline(markdown);\n\n      // We should add rel=\"noopener noreferrer\" and target=\"_blank\"\n      const patchedTree = addTargetBlankToHyperlinksMarkdown(tree);\n\n      return internalMarkdownIt.renderer.render(patchedTree);\n    },\n    [internalMarkdownIt]\n  );\n\n  const styleToEmotionObject = useMemo(() => {\n    // Emotion doesn't hash with nonce. We need to provide the pooling mechanism.\n    // 1. If 2 instances use different nonce, they should result in different hash;\n    // 2. If 2 instances are being mounted, pooling will make sure we render only 1 set of <style> tags, instead of 2.\n    const emotion =\n      emotionPool[nonce] || (emotionPool[nonce] = createEmotion({ key: `webchat--css-${createCSSKey()}`, nonce }));\n\n    return style => emotion.css(style);\n  }, [nonce]);\n\n  const patchedStyleSet = useMemo(\n    () =>\n      styleSetToEmotionObjects(styleToEmotionObject, {\n        ...(styleSet || createStyleSet(styleOptions)),\n        ...extraStyleSet\n      }),\n    [extraStyleSet, styleOptions, styleSet, styleToEmotionObject]\n  );\n\n  const webSpeechPonyfill = useMemo(() => {\n    const ponyfill = webSpeechPonyfillFactory && webSpeechPonyfillFactory({ referenceGrammarID });\n    const { speechSynthesis, SpeechSynthesisUtterance } = ponyfill || {};\n\n    return {\n      ...ponyfill,\n      speechSynthesis: speechSynthesis || bypassSpeechSynthesis,\n      SpeechSynthesisUtterance: SpeechSynthesisUtterance || BypassSpeechSynthesisUtterance\n    };\n  }, [referenceGrammarID, webSpeechPonyfillFactory]);\n\n  const context = useMemo(\n    () => ({\n      ...focusContext,\n      dictateAbortable,\n      internalMarkdownItState: [internalMarkdownIt],\n      internalRenderMarkdownInline,\n      nonce,\n      renderMarkdown,\n      sendBoxFocusRef,\n      setDictateAbortable,\n      styleSet: patchedStyleSet,\n      styleToEmotionObject,\n      suggestedActionsAccessKey,\n      transcriptActivityElementsRef,\n      transcriptFocusRef,\n      transcriptRootElementRef,\n      webSpeechPonyfill\n    }),\n    [\n      dictateAbortable,\n      focusContext,\n      internalMarkdownIt,\n      internalRenderMarkdownInline,\n      nonce,\n      patchedStyleSet,\n      renderMarkdown,\n      sendBoxFocusRef,\n      setDictateAbortable,\n      styleToEmotionObject,\n      suggestedActionsAccessKey,\n      transcriptActivityElementsRef,\n      transcriptFocusRef,\n      transcriptRootElementRef,\n      webSpeechPonyfill\n    ]\n  );\n\n  return (\n    <React.Fragment>\n      <SayComposer ponyfill={webSpeechPonyfill}>\n        <WebChatUIContext.Provider value={context}>\n          {children}\n          <Dictation onError={dictationOnError} />\n        </WebChatUIContext.Provider>\n      </SayComposer>\n    </React.Fragment>\n  );\n};\n\nComposerCore.defaultProps = {\n  extraStyleSet: undefined,\n  nonce: undefined,\n  renderMarkdown: undefined,\n  styleSet: undefined,\n  suggestedActionsAccessKey: 'A a Å å',\n  webSpeechPonyfillFactory: undefined\n};\n\nComposerCore.propTypes = {\n  extraStyleSet: PropTypes.any,\n  nonce: PropTypes.string,\n  renderMarkdown: PropTypes.func,\n  styleSet: PropTypes.any,\n  suggestedActionsAccessKey: PropTypes.oneOfType([PropTypes.oneOf([false]), PropTypes.string]),\n  webSpeechPonyfillFactory: PropTypes.func\n};\n\nconst Composer = ({\n  activityMiddleware,\n  activityStatusMiddleware,\n  attachmentForScreenReaderMiddleware,\n  attachmentMiddleware,\n  avatarMiddleware,\n  cardActionMiddleware,\n  children,\n  extraStyleSet,\n  renderMarkdown,\n  styleSet,\n  suggestedActionsAccessKey,\n  toastMiddleware,\n  typingIndicatorMiddleware,\n  webSpeechPonyfillFactory,\n  ...composerProps\n}) => {\n  const { nonce, onTelemetry } = composerProps;\n\n  const patchedActivityMiddleware = useMemo(\n    () => [...singleToArray(activityMiddleware), ...createDefaultActivityMiddleware()],\n    [activityMiddleware]\n  );\n\n  const patchedActivityStatusMiddleware = useMemo(\n    () => [...singleToArray(activityStatusMiddleware), ...createDefaultActivityStatusMiddleware()],\n    [activityStatusMiddleware]\n  );\n\n  const patchedAttachmentForScreenReaderMiddleware = useMemo(\n    () => [\n      ...singleToArray(attachmentForScreenReaderMiddleware),\n      ...createDefaultAttachmentForScreenReaderMiddleware()\n    ],\n    [attachmentForScreenReaderMiddleware]\n  );\n\n  const patchedAttachmentMiddleware = useMemo(\n    () => [...singleToArray(attachmentMiddleware), ...createDefaultAttachmentMiddleware()],\n    [attachmentMiddleware]\n  );\n\n  const patchedAvatarMiddleware = useMemo(\n    () => [...singleToArray(avatarMiddleware), ...createDefaultAvatarMiddleware()],\n    [avatarMiddleware]\n  );\n\n  const patchedCardActionMiddleware = useMemo(\n    () => [...singleToArray(cardActionMiddleware), ...createDefaultCardActionMiddleware()],\n    [cardActionMiddleware]\n  );\n\n  const patchedToastMiddleware = useMemo(() => [...singleToArray(toastMiddleware), ...createDefaultToastMiddleware()], [\n    toastMiddleware\n  ]);\n\n  const patchedTypingIndicatorMiddleware = useMemo(\n    () => [...singleToArray(typingIndicatorMiddleware), ...createDefaultTypingIndicatorMiddleware()],\n    [typingIndicatorMiddleware]\n  );\n\n  return (\n    <React.Fragment>\n      <APIComposer\n        activityMiddleware={patchedActivityMiddleware}\n        activityStatusMiddleware={patchedActivityStatusMiddleware}\n        attachmentForScreenReaderMiddleware={patchedAttachmentForScreenReaderMiddleware}\n        attachmentMiddleware={patchedAttachmentMiddleware}\n        avatarMiddleware={patchedAvatarMiddleware}\n        cardActionMiddleware={patchedCardActionMiddleware}\n        downscaleImageToDataURL={downscaleImageToDataURL}\n        // Under dev server of create-react-app, \"NODE_ENV\" will be set to \"development\".\n        internalErrorBoxClass={node_env === 'development' ? ErrorBox : undefined}\n        nonce={nonce}\n        toastMiddleware={patchedToastMiddleware}\n        typingIndicatorMiddleware={patchedTypingIndicatorMiddleware}\n        {...composerProps}\n      >\n        <ScrollToBottomComposer nonce={nonce}>\n          <ComposerCore\n            extraStyleSet={extraStyleSet}\n            nonce={nonce}\n            renderMarkdown={renderMarkdown}\n            styleSet={styleSet}\n            suggestedActionsAccessKey={suggestedActionsAccessKey}\n            webSpeechPonyfillFactory={webSpeechPonyfillFactory}\n          >\n            {children}\n            {onTelemetry && <UITracker />}\n          </ComposerCore>\n        </ScrollToBottomComposer>\n      </APIComposer>\n    </React.Fragment>\n  );\n};\n\nComposer.defaultProps = {\n  ...APIComposer.defaultProps,\n  ...ComposerCore.defaultProps,\n  activityMiddleware: undefined,\n  activityRenderer: undefined,\n  activityStatusMiddleware: undefined,\n  activityStatusRenderer: undefined,\n  attachmentForScreenReaderMiddleware: undefined,\n  attachmentMiddleware: undefined,\n  attachmentRenderer: undefined,\n  avatarMiddleware: undefined,\n  avatarRenderer: undefined,\n  cardActionMiddleware: undefined,\n  children: undefined,\n  nonce: undefined,\n  renderMarkdown: undefined,\n  toastMiddleware: undefined,\n  toastRenderer: undefined,\n  typingIndicatorMiddleware: undefined,\n  typingIndicatorRenderer: undefined,\n  webSpeechPonyfillFactory: undefined\n};\n\nComposer.propTypes = {\n  ...APIComposer.propTypes,\n  ...ComposerCore.propTypes,\n  activityMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  activityRenderer: PropTypes.func,\n  activityStatusMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  activityStatusRenderer: PropTypes.func,\n  attachmentForScreenReaderMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  attachmentMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  attachmentRenderer: PropTypes.func,\n  avatarMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  avatarRenderer: PropTypes.func,\n  cardActionMiddleware: PropTypes.func,\n  children: PropTypes.any,\n  nonce: PropTypes.string,\n  renderMarkdown: PropTypes.func,\n  toastMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  toastRenderer: PropTypes.func,\n  typingIndicatorMiddleware: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.func), PropTypes.func]),\n  typingIndicatorRenderer: PropTypes.func,\n  webSpeechPonyfillFactory: PropTypes.func\n};\n\nexport default Composer;\n"],"sourceRoot":"component:///"},"metadata":{},"sourceType":"script"}