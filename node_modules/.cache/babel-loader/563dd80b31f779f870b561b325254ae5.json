{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createCoreMiddleware;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _AudioAttachment = _interopRequireDefault(require(\"../../Attachment/AudioAttachment\"));\n\nvar _FileAttachment = _interopRequireDefault(require(\"../../Attachment/FileAttachment\"));\n\nvar _ImageAttachment = _interopRequireDefault(require(\"../../Attachment/ImageAttachment\"));\n\nvar _TextAttachment = _interopRequireDefault(require(\"../../Attachment/TextAttachment\"));\n\nvar _VideoAttachment = _interopRequireDefault(require(\"../../Attachment/VideoAttachment\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now\n\n\nfunction createCoreMiddleware() {\n  return [// This is not returning a React component, but a render function.\n\n  /* eslint-disable-next-line react/display-name */\n  function () {\n    return function (next) {\n      return function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var _args$ = args[0],\n            _args$$activity = _args$.activity,\n            activity = _args$$activity === void 0 ? {} : _args$$activity,\n            _args$$activity2 = _args$.activity;\n        _args$$activity2 = _args$$activity2 === void 0 ? {} : _args$$activity2;\n        var _args$$activity2$from = _args$$activity2.from;\n        _args$$activity2$from = _args$$activity2$from === void 0 ? {} : _args$$activity2$from;\n        var role = _args$$activity2$from.role,\n            attachment = _args$.attachment,\n            _args$$attachment = _args$.attachment;\n        _args$$attachment = _args$$attachment === void 0 ? {} : _args$$attachment;\n        var contentType = _args$$attachment.contentType,\n            contentUrl = _args$$attachment.contentUrl,\n            thumbnailUrl = _args$$attachment.thumbnailUrl;\n        return role === 'user' && !/^text\\//.test(contentType) && !thumbnailUrl ? /*#__PURE__*/_react.default.createElement(_FileAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : /^audio\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_AudioAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : /^image\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_ImageAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : /^video\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_VideoAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : contentUrl || contentType === 'application/octet-stream' ? /*#__PURE__*/_react.default.createElement(_FileAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : /^text\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_TextAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : next.apply(void 0, args);\n      };\n    };\n  }];\n}","map":{"version":3,"sources":["../../../src/Middleware/Attachment/createCoreMiddleware.js"],"names":["args","activity","role","attachment","contentType","contentUrl","thumbnailUrl","next"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport AudioAttachment from '../../Attachment/AudioAttachment';\nimport FileAttachment from '../../Attachment/FileAttachment';\nimport ImageAttachment from '../../Attachment/ImageAttachment';\nimport TextAttachment from '../../Attachment/TextAttachment';\nimport VideoAttachment from '../../Attachment/VideoAttachment';\n\n// TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now\nexport default function createCoreMiddleware() {\n  return [\n    // This is not returning a React component, but a render function.\n    /* eslint-disable-next-line react/display-name */\n    () => next => (...args) => {\n      const [\n        {\n          activity = {},\n          activity: { from: { role } = {} } = {},\n          attachment,\n          attachment: { contentType, contentUrl, thumbnailUrl } = {}\n        }\n      ] = args;\n\n      return role === 'user' && !/^text\\//u.test(contentType) && !thumbnailUrl ? (\n        <FileAttachment activity={activity} attachment={attachment} />\n      ) : /^audio\\//u.test(contentType) ? (\n        <AudioAttachment activity={activity} attachment={attachment} />\n      ) : /^image\\//u.test(contentType) ? (\n        <ImageAttachment activity={activity} attachment={attachment} />\n      ) : /^video\\//u.test(contentType) ? (\n        <VideoAttachment activity={activity} attachment={attachment} />\n      ) : contentUrl || contentType === 'application/octet-stream' ? (\n        <FileAttachment activity={activity} attachment={attachment} />\n      ) : /^text\\//u.test(contentType) ? (\n        <TextAttachment activity={activity} attachment={attachment} />\n      ) : (\n        next(...args)\n      );\n    }\n  ];\n}\n"],"sourceRoot":"component:///"},"metadata":{},"sourceType":"script"}