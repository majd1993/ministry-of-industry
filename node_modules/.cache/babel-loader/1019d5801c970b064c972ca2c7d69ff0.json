{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = createStore;\nexports.withDevTools = withDevTools;\n\nvar _redux = require(\"redux\");\n\nvar _reduxDevtoolsExtension = require(\"redux-devtools-extension\");\n\nvar _reduxSaga = _interopRequireDefault(require(\"redux-saga\"));\n\nvar _reducer = _interopRequireDefault(require(\"./reducer\"));\n\nvar _sagaError = _interopRequireDefault(require(\"./actions/sagaError\"));\n\nvar _sagas = _interopRequireDefault(require(\"./sagas\")); // This is for the racing between sagaMiddleware and store\n\n/* eslint no-use-before-define: \"off\" */\n\n\nfunction createEnhancerAndSagaMiddleware(getStore) {\n  var sagaMiddleware = (0, _reduxSaga[\"default\"])({\n    onError: function onError() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var err = args[0];\n      console.error(err);\n      var store = getStore();\n      store && store.dispatch((0, _sagaError[\"default\"])());\n    }\n  });\n\n  for (var _len = arguments.length, middlewares = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    middlewares[_key - 1] = arguments[_key];\n  }\n\n  return {\n    enhancer: _redux.applyMiddleware.apply(void 0, middlewares.concat([sagaMiddleware])),\n    sagaMiddleware: sagaMiddleware\n  };\n}\n\nfunction createStore(initialState) {\n  for (var _len3 = arguments.length, middlewares = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    middlewares[_key3 - 1] = arguments[_key3];\n  }\n\n  var _createEnhancerAndSag = createEnhancerAndSagaMiddleware.apply(void 0, [function () {\n    return store;\n  }].concat(middlewares)),\n      enhancer = _createEnhancerAndSag.enhancer,\n      sagaMiddleware = _createEnhancerAndSag.sagaMiddleware;\n\n  var store = (0, _redux.createStore)(_reducer[\"default\"], initialState || {}, enhancer);\n  sagaMiddleware.run(_sagas[\"default\"]);\n  return store;\n}\n\nfunction withDevTools(initialState) {\n  for (var _len4 = arguments.length, middlewares = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    middlewares[_key4 - 1] = arguments[_key4];\n  }\n\n  var _createEnhancerAndSag2 = createEnhancerAndSagaMiddleware.apply(void 0, [function () {\n    return store;\n  }].concat(middlewares)),\n      enhancer = _createEnhancerAndSag2.enhancer,\n      sagaMiddleware = _createEnhancerAndSag2.sagaMiddleware;\n\n  var store = (0, _redux.createStore)(_reducer[\"default\"], initialState || {}, (0, _reduxDevtoolsExtension.composeWithDevTools)(enhancer));\n  sagaMiddleware.run(_sagas[\"default\"]);\n  return store;\n}","map":{"version":3,"sources":["../src/createStore.ts"],"names":["middlewares","sagaMiddleware","onError","args","err","console","store","getStore","enhancer","applyMiddleware","reducer","initialState","sagas"],"mappings":"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","sourcesContent":["// This is for the racing between sagaMiddleware and store\n/* eslint no-use-before-define: \"off\" */\n\nimport { applyMiddleware, createStore as createReduxStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\n\nimport reducer from './reducer';\nimport sagaError from './actions/sagaError';\nimport sagas from './sagas';\n\nfunction createEnhancerAndSagaMiddleware(getStore, ...middlewares) {\n  const sagaMiddleware = createSagaMiddleware({\n    onError: (...args) => {\n      const [err] = args;\n\n      console.error(err);\n\n      const store = getStore();\n\n      store && store.dispatch(sagaError());\n    }\n  });\n\n  return {\n    enhancer: applyMiddleware(...middlewares, sagaMiddleware),\n    sagaMiddleware\n  };\n}\n\nexport default function createStore(initialState, ...middlewares) {\n  const { enhancer, sagaMiddleware } = createEnhancerAndSagaMiddleware(() => store, ...middlewares);\n  const store = createReduxStore(reducer, initialState || {}, enhancer);\n\n  sagaMiddleware.run(sagas);\n\n  return store;\n}\n\nexport function withDevTools(initialState, ...middlewares) {\n  const { enhancer, sagaMiddleware } = createEnhancerAndSagaMiddleware(() => store, ...middlewares);\n  const store = createReduxStore(reducer, initialState || {}, composeWithDevTools(enhancer));\n\n  sagaMiddleware.run(sagas);\n\n  return store;\n}\n"],"sourceRoot":"core:///"},"metadata":{},"sourceType":"script"}