{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useImmediateEffect;\n\nvar _react = require(\"react\");\n\nfunction useImmediateEffect(fn, deps) {\n  var unsubscribeRef = (0, _react.useRef)({\n    first: true,\n    id: Math.random().toString(36).substr(2, 5),\n    unsubscribe: fn()\n  });\n  (0, _react.useEffect)(function () {\n    var current = unsubscribeRef.current;\n\n    if (!current.first) {\n      current.unsubscribe = fn();\n    } else {\n      current.first = false;\n    }\n\n    return function () {\n      current.unsubscribe && current.unsubscribe();\n      current.unsubscribe = null;\n    };\n  }, deps);\n}","map":{"version":3,"sources":["../src/useImmediateEffect.js"],"names":["unsubscribeRef","first","id","Math","unsubscribe","fn","current"],"mappings":";;;;;;;AAAA,IAAA,MAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAEe,SAAA,kBAAA,CAAA,EAAA,EAAA,IAAA,EAAsC;AACnD,MAAMA,cAAc,GAAG,CAAA,GAAA,MAAA,CAAA,MAAA,EAAO;AAC5BC,IAAAA,KAAK,EADuB,IAAA;AAE5BC,IAAAA,EAAE,EAAEC,IAAI,CAAJA,MAAAA,GAAAA,QAAAA,CAAAA,EAAAA,EAAAA,MAAAA,CAAAA,CAAAA,EAFwB,CAExBA,CAFwB;AAG5BC,IAAAA,WAAW,EAAEC,EAAE;AAHa,GAAP,CAAvB;AAMA,GAAA,GAAA,MAAA,CAAA,SAAA,EAAU,YAAM;AAAA,QACNC,OADM,GACMN,cADN,CAAA,OAAA;;AAGd,QAAI,CAACM,OAAO,CAAZ,KAAA,EAAoB;AAClBA,MAAAA,OAAO,CAAPA,WAAAA,GAAsBD,EAAtBC,EAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,OAAO,CAAPA,KAAAA,GAAAA,KAAAA;AACD;;AAED,WAAO,YAAM;AACXA,MAAAA,OAAO,CAAPA,WAAAA,IAAuBA,OAAO,CAA9BA,WAAuBA,EAAvBA;AACAA,MAAAA,OAAO,CAAPA,WAAAA,GAAAA,IAAAA;AAFF,KAAA;AATF,GAAA,EAAA,IAAA;AAcD","sourcesContent":["import { useEffect, useRef } from 'react';\n\nexport default function useImmediateEffect(fn, deps) {\n  const unsubscribeRef = useRef({\n    first: true,\n    id: Math.random().toString(36).substr(2, 5),\n    unsubscribe: fn()\n  });\n\n  useEffect(() => {\n    const { current } = unsubscribeRef;\n\n    if (!current.first) {\n      current.unsubscribe = fn();\n    } else {\n      current.first = false;\n    }\n\n    return () => {\n      current.unsubscribe && current.unsubscribe();\n      current.unsubscribe = null;\n    };\n  }, deps);\n}\n"]},"metadata":{},"sourceType":"script"}