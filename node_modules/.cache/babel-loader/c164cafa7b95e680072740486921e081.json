{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Context = _interopRequireDefault(require(\"./Context\"));\n\nvar _createSynthesize = _interopRequireDefault(require(\"./createSynthesize\"));\n\nvar _migrateDeprecatedProps = _interopRequireDefault(require(\"./migrateDeprecatedProps\"));\n\nvar _useEvent = _interopRequireDefault(require(\"./useEvent\"));\n\nvar Composer = function Composer(props) {\n  var _migrateDeprecatedPro = (0, _migrateDeprecatedProps[\"default\"])(props, Composer),\n      children = _migrateDeprecatedPro.children,\n      ponyfillFromProps = _migrateDeprecatedPro.ponyfill; // If we have the parent context, we will use that synthesize() function and its internal queue.\n\n\n  var _ref = (0, _react.useContext)(_Context[\"default\"]) || {},\n      parentPonyfill = _ref.ponyfill,\n      parentSynthesize = _ref.synthesize;\n\n  var ponyfill = ponyfillFromProps || parentPonyfill || {\n    speechSynthesis: window.speechSynthesis || window.webkitSpeechSynthesis,\n    SpeechSynthesisUtterance: window.SpeechSynthesisUtterance || window.webkitSpeechSynthesisUtterance\n  }; // If the parent context changed and no longer has a synthesize() function, we will create the queue.\n  // This is very unlikely to happen.\n\n  var synthesize = (0, _react.useMemo)(function () {\n    return parentSynthesize || (0, _createSynthesize[\"default\"])();\n  }, [parentSynthesize]);\n  var speechSynthesis = ponyfill.speechSynthesis;\n\n  var _useState = (0, _react.useState)(speechSynthesis.getVoices()),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      voices = _useState2[0],\n      setVoices = _useState2[1];\n\n  (0, _useEvent[\"default\"])(speechSynthesis, 'voiceschanged', function () {\n    return setVoices(speechSynthesis.getVoices());\n  });\n  var context = (0, _react.useMemo)(function () {\n    return {\n      ponyfill: ponyfill,\n      synthesize: synthesize,\n      voices: voices\n    };\n  }, [ponyfill, synthesize, voices]);\n  return _react[\"default\"].createElement(_Context[\"default\"].Provider, {\n    value: context\n  }, typeof children === 'function' ? _react[\"default\"].createElement(_Context[\"default\"].Consumer, null, function (context) {\n    return children(context);\n  }) : children);\n};\n\nComposer.defaultProps = {\n  children: undefined,\n  ponyfill: undefined\n};\nComposer.propTypes = {\n  children: _propTypes[\"default\"].any,\n  ponyfill: _propTypes[\"default\"].shape({\n    speechSynthesis: _propTypes[\"default\"].any,\n    SpeechSynthesisUtterance: _propTypes[\"default\"].any\n  })\n};\nvar _default = Composer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../src/Composer.js"],"names":["Composer","children","ponyfillFromProps","parentPonyfill","parentSynthesize","Context","ponyfill","speechSynthesis","window","SpeechSynthesisUtterance","webkitSpeechSynthesisUtterance","synthesize","voices","setVoices","context","undefined","PropTypes","any"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useContext, useMemo, useState } from 'react';\n\nimport Context from './Context';\nimport createSynthesize from './createSynthesize';\nimport migrateDeprecatedProps from './migrateDeprecatedProps';\nimport useEvent from './useEvent';\n\nconst Composer = props => {\n  const { children, ponyfill: ponyfillFromProps } = migrateDeprecatedProps(props, Composer);\n\n  // If we have the parent context, we will use that synthesize() function and its internal queue.\n  const { ponyfill: parentPonyfill, synthesize: parentSynthesize } = useContext(Context) || {};\n\n  const ponyfill = ponyfillFromProps || parentPonyfill || {\n    speechSynthesis: window.speechSynthesis || window.webkitSpeechSynthesis,\n    SpeechSynthesisUtterance: window.SpeechSynthesisUtterance || window.webkitSpeechSynthesisUtterance,\n  };\n\n  // If the parent context changed and no longer has a synthesize() function, we will create the queue.\n  // This is very unlikely to happen.\n  const synthesize = useMemo(() => parentSynthesize || createSynthesize(), [parentSynthesize]);\n  const { speechSynthesis } = ponyfill;\n  const [voices, setVoices] = useState(speechSynthesis.getVoices());\n\n  useEvent(speechSynthesis, 'voiceschanged', () => setVoices(speechSynthesis.getVoices()));\n\n  const context = useMemo(() => ({\n    ponyfill,\n    synthesize,\n    voices\n  }), [ponyfill, synthesize, voices]);\n\n  return (\n    <Context.Provider value={ context }>\n      {\n        typeof children === 'function' ?\n          <Context.Consumer>\n            { context => children(context) }\n          </Context.Consumer>\n        :\n          children\n      }\n    </Context.Provider>\n  );\n};\n\nComposer.defaultProps = {\n  children: undefined,\n  ponyfill: undefined\n};\n\nComposer.propTypes = {\n  children: PropTypes.any,\n  ponyfill: PropTypes.shape({\n    speechSynthesis: PropTypes.any,\n    SpeechSynthesisUtterance: PropTypes.any\n  })\n};\n\nexport default Composer;\n"]},"metadata":{},"sourceType":"script"}