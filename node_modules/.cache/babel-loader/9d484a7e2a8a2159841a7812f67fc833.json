{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = startDictateOnSpeakCompleteSaga;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _effects = require(\"redux-saga/effects\");\n\nvar _markActivity = require(\"../actions/markActivity\");\n\nvar _activities = require(\"../selectors/activities\");\n\nvar _setDictateState = require(\"../actions/setDictateState\");\n\nvar _DictateState = require(\"../constants/DictateState\");\n\nvar _dictateState = _interopRequireDefault(require(\"../selectors/dictateState\"));\n\nvar _speakingActivity = _interopRequireDefault(require(\"../definitions/speakingActivity\"));\n\nvar _startDictate = _interopRequireDefault(require(\"../actions/startDictate\"));\n\nvar _marked = /*#__PURE__*/_regenerator[\"default\"].mark(startDictateOnSpeakComplete),\n    _marked2 = /*#__PURE__*/_regenerator[\"default\"].mark(startDictateOnSpeakCompleteSaga);\n\nfunction startDictateOnSpeakComplete() {\n  var speakingActivities, dictateState;\n  return _regenerator[\"default\"].wrap(function startDictateOnSpeakComplete$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return (0, _effects.select)((0, _activities.of)(_speakingActivity[\"default\"]));\n\n        case 2:\n          speakingActivities = _context.sent;\n          _context.next = 5;\n          return (0, _effects.select)(_dictateState[\"default\"]);\n\n        case 5:\n          dictateState = _context.sent;\n\n          if (!(dictateState === _DictateState.WILL_START && !speakingActivities.length)) {\n            _context.next = 9;\n            break;\n          }\n\n          _context.next = 9;\n          return (0, _effects.put)((0, _startDictate[\"default\"])());\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n} // TODO: [P4] We should turn this into a reducer instead\n\n\nfunction startDictateOnSpeakCompleteSaga() {\n  return _regenerator[\"default\"].wrap(function startDictateOnSpeakCompleteSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return (0, _effects.takeEvery)(function (_ref) {\n            var type = _ref.type;\n            return type === _markActivity.MARK_ACTIVITY || type === _setDictateState.SET_DICTATE_STATE;\n          }, startDictateOnSpeakComplete);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}","map":{"version":3,"sources":["../../src/sagas/startDictateOnSpeakCompleteSaga.js"],"names":["startDictateOnSpeakComplete","speakingActivities","speakingActivity","dictateState","dictateStateSelector","WILL_START","startDictateOnSpeakCompleteSaga","type","MARK_ACTIVITY","SET_DICTATE_STATE"],"mappings":";;;;;;;;;;;AAAA,IAAA,QAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AAEA,IAAA,aAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AACA,IAAA,WAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AACA,IAAA,gBAAA,GAAA,OAAA,CAAA,4BAAA,CAAA;;AACA,IAAA,aAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,aAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,2BAAA,CAAA,CAAA;;AACA,IAAA,iBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,iCAAA,CAAA,CAAA;;AACA,IAAA,aAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,yBAAA,CAAA,CAAA;;wDAEUA,2B;yDAUeM,+B;;AAVzB,SAAA,2BAAA,GAAA;AAAA,MAAA,kBAAA,EAAA,YAAA;AAAA,SAAA,YAAA,CAAA,SAAA,CAAA,CAAA,IAAA,CAAA,SAAA,4BAAA,CAAA,QAAA,EAAA;AAAA,WAAA,CAAA,EAAA;AAAA,cAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,aAAA,CAAA;AAAA,UAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAC6B,iBAAM,CAAA,GAAA,QAAA,CAAA,MAAA,EAAO,CAAA,GAAA,WAAA,CAAA,EAAA,EAAaJ,iBAAAA,CAA1B,SAA0BA,CAAb,CAAP,CAAN;;AAD7B,aAAA,CAAA;AACQD,UAAAA,kBADR,GAAA,QAAA,CAAA,IACQA;AADR,UAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAEuB,iBAAM,CAAA,GAAA,QAAA,CAAA,MAAA,EAAOG,aAAAA,CAAb,SAAaA,CAAP,CAAN;;AAFvB,aAAA,CAAA;AAEQD,UAAAA,YAFR,GAAA,QAAA,CAAA,IAEQA;;AAFR,cAAA,EAIMA,YAAY,KAAKE,aAAAA,CAAjBF,UAAAA,IAA+B,CAACF,kBAAkB,CAJxD,MAAA,CAAA,EAAA;AAAA,YAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,UAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAKI,iBAAM,CAAA,GAAA,QAAA,CAAA,GAAA,EAAI,CAAA,GAAA,aAAA,CAAV,SAAU,CAAA,GAAJ,CAAN;;AALJ,aAAA,CAAA;AAAA,aAAA,KAAA;AAAA,iBAAA,QAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,GAAA,EAAA,OAAA,CAAA;EASA;;;AACe,SAAA,+BAAA,GAAA;AAAA,SAAA,YAAA,CAAA,SAAA,CAAA,CAAA,IAAA,CAAA,SAAA,gCAAA,CAAA,SAAA,EAAA;AAAA,WAAA,CAAA,EAAA;AAAA,cAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,aAAA,CAAA;AAAA,UAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AACb,iBAAM,CAAA,GAAA,QAAA,CAAA,SAAA,EAAU,UAAA,IAAA,EAAA;AAAA,gBAAGM,IAAH,GAAA,IAAA,CAAA,IAAA;AAAA,mBAAcA,IAAI,KAAKC,aAAAA,CAATD,aAAAA,IAA0BA,IAAI,KAAKE,gBAAAA,CAAjD,iBAAA;AAAV,WAAA,EAAN,2BAAM,CAAN;;AADa,aAAA,CAAA;AAAA,aAAA,KAAA;AAAA,iBAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,GAAA,EAAA,QAAA,CAAA;AAAA","sourcesContent":["import { put, select, takeEvery } from 'redux-saga/effects';\n\nimport { MARK_ACTIVITY } from '../actions/markActivity';\nimport { of as activitiesOf } from '../selectors/activities';\nimport { SET_DICTATE_STATE } from '../actions/setDictateState';\nimport { WILL_START } from '../constants/DictateState';\nimport dictateStateSelector from '../selectors/dictateState';\nimport speakingActivity from '../definitions/speakingActivity';\nimport startDictate from '../actions/startDictate';\n\nfunction* startDictateOnSpeakComplete() {\n  const speakingActivities = yield select(activitiesOf(speakingActivity));\n  const dictateState = yield select(dictateStateSelector);\n\n  if (dictateState === WILL_START && !speakingActivities.length) {\n    yield put(startDictate());\n  }\n}\n\n// TODO: [P4] We should turn this into a reducer instead\nexport default function* startDictateOnSpeakCompleteSaga() {\n  yield takeEvery(({ type }) => type === MARK_ACTIVITY || type === SET_DICTATE_STATE, startDictateOnSpeakComplete);\n}\n"],"sourceRoot":"core:///"},"metadata":{},"sourceType":"script"}