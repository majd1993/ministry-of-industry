{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _botframeworkWebchatApi = require(\"botframework-webchat-api\");\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _CollapseIcon = _interopRequireDefault(require(\"./Toast/CollapseIcon\"));\n\nvar _ExpandIcon = _interopRequireDefault(require(\"./Toast/ExpandIcon\"));\n\nvar _NotificationIcon = _interopRequireDefault(require(\"./Toast/NotificationIcon\"));\n\nvar _randomId = _interopRequireDefault(require(\"./Utils/randomId\"));\n\nvar _useStyleSet3 = _interopRequireDefault(require(\"./hooks/useStyleSet\"));\n\nvar _useStyleToEmotionObject = _interopRequireDefault(require(\"./hooks/internal/useStyleToEmotionObject\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar useDebouncedNotifications = _botframeworkWebchatApi.hooks.useDebouncedNotifications,\n    useLocalizer = _botframeworkWebchatApi.hooks.useLocalizer,\n    useRenderToast = _botframeworkWebchatApi.hooks.useRenderToast;\nvar ROOT_STYLE = {\n  display: 'flex',\n  flexDirection: 'column',\n  '& .webchat__toaster__header': {\n    display: 'flex',\n    flexShrink: 0\n  },\n  '& .webchat__toaster__expandText': {\n    flex: 1\n  },\n  '& .webchat__toaster__list': {\n    display: 'block',\n    listStyleType: 'none'\n  }\n};\nvar LEVEL_AS_NUMBER = {\n  error: 1,\n  warn: 2,\n  info: 3,\n  success: 4\n};\n\nfunction getLevelAsNumber(level) {\n  return LEVEL_AS_NUMBER[level] || 5;\n}\n\nfunction compareLevel(x, y) {\n  return getLevelAsNumber(x) - getLevelAsNumber(y);\n}\n\nfunction sortNotifications(map) {\n  return Object.values(map) // We want the order reversed, most recent on top.\n  .sort(function (_ref, _ref2) {\n    var x = _ref.timestamp;\n    var y = _ref2.timestamp;\n    return y - x;\n  });\n}\n\nvar PASSTHRU_FN = function PASSTHRU_FN(value) {\n  return value;\n};\n\nvar TOAST_ACCORDION_IDS = {\n  two: 'TOAST_ACCORDION_TWO',\n  few: 'TOAST_ACCORDION_FEW',\n  many: 'TOAST_ACCORDION_MANY',\n  other: 'TOAST_ACCORDION_OTHER'\n};\n\nvar BasicToaster = function BasicToaster() {\n  var instanceId = (0, _react.useMemo)(_randomId.default, []);\n\n  var _useStyleSet = (0, _useStyleSet3.default)(),\n      _useStyleSet2 = _slicedToArray(_useStyleSet, 1),\n      toasterStyleSet = _useStyleSet2[0].toaster;\n\n  var _useDebouncedNotifica = useDebouncedNotifications(),\n      _useDebouncedNotifica2 = _slicedToArray(_useDebouncedNotifica, 1),\n      debouncedNotifications = _useDebouncedNotifica2[0];\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1];\n\n  var localizeWithPlural = useLocalizer({\n    plural: true\n  });\n  var renderToast = useRenderToast();\n  var rootClassName = (0, _useStyleToEmotionObject.default)()(ROOT_STYLE) + '';\n  var handleToggleExpand = (0, _react.useCallback)(function () {\n    return setExpanded(!expanded);\n  }, [expanded, setExpanded]);\n  var sortedNotifications = (0, _react.useMemo)(function () {\n    return sortNotifications(debouncedNotifications);\n  }, [debouncedNotifications]);\n  var sortedNotificationsWithChildren = (0, _react.useMemo)(function () {\n    return sortedNotifications.map(function (notification) {\n      var children = renderToast({\n        notification: notification\n      });\n      return children && {\n        children: children,\n        notification: notification\n      };\n    }).filter(PASSTHRU_FN);\n  }, [renderToast, sortedNotifications]);\n  var expandable = sortedNotificationsWithChildren.length > 1;\n\n  var _sortedNotificationsW = sortedNotificationsWithChildren.map(function (_ref3) {\n    var level = _ref3.notification.level;\n    return level;\n  }).sort(compareLevel),\n      _sortedNotificationsW2 = _slicedToArray(_sortedNotificationsW, 1),\n      highestLevel = _sortedNotificationsW2[0];\n\n  var expandableElementId = (0, _react.useMemo)(function () {\n    return !expandable || expanded ? \"webchat__toaster__list__\".concat(instanceId) : undefined;\n  }, [expandable, expanded, instanceId]);\n  var headerElementId = (0, _react.useMemo)(function () {\n    return expandable ? \"webchat__toaster__header__\".concat(instanceId) : undefined;\n  }, [expandable, instanceId]);\n  (0, _react.useEffect)(function () {\n    !expandable && setExpanded(false);\n  }, [expandable]);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"aria-labelledby\": headerElementId,\n    \"aria-live\": \"polite\",\n    \"aria-relevant\": \"all\",\n    className: (0, _classnames.default)('webchat__toaster', {\n      'webchat__toaster--expandable': expandable,\n      'webchat__toaster--expanded': expanded,\n      'webchat__toaster--error': highestLevel === 'error',\n      'webchat__toaster--info': highestLevel === 'info',\n      'webchat__toaster--success': highestLevel === 'success',\n      'webchat__toaster--warn': highestLevel === 'warn'\n    }, rootClassName, toasterStyleSet + ''),\n    role: \"log\"\n  }, expandable && /*#__PURE__*/_react.default.createElement(\"button\", {\n    \"aria-controls\": expandableElementId,\n    \"aria-expanded\": expanded,\n    className: \"webchat__toaster__header\",\n    id: headerElementId,\n    onClick: handleToggleExpand,\n    type: \"button\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"webchat__toaster__expandLevelIconBox\"\n  }, /*#__PURE__*/_react.default.createElement(_NotificationIcon.default, {\n    className: \"webchat__toaster__expandLevelIcon\",\n    level: highestLevel\n  })), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"webchat__toaster__expandText\"\n  }, localizeWithPlural(TOAST_ACCORDION_IDS, sortedNotificationsWithChildren.length)), /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"webchat__toaster__expandIcon\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"webchat__toaster__expandIconFocus\"\n  }, expanded ? /*#__PURE__*/_react.default.createElement(_CollapseIcon.default, null) : /*#__PURE__*/_react.default.createElement(_ExpandIcon.default, null)))), (!expandable || expanded) && /*#__PURE__*/_react.default.createElement(\"ul\", {\n    \"aria-labelledby\": headerElementId,\n    className: \"webchat__toaster__list\",\n    id: expandableElementId,\n    role: \"region\"\n  }, sortedNotificationsWithChildren.map(function (_ref4) {\n    var children = _ref4.children,\n        id = _ref4.notification.id;\n    return /*#__PURE__*/_react.default.createElement(\"li\", {\n      \"aria-atomic\": true,\n      className: \"webchat__toaster__listItem\",\n      key: id,\n      role: \"none\"\n    }, children);\n  })));\n};\n\nvar _default = BasicToaster;\nexports.default = _default;","map":{"version":3,"sources":["../src/BasicToaster.js"],"names":["useDebouncedNotifications","useLocalizer","useRenderToast","hooks","ROOT_STYLE","display","flexDirection","flexShrink","flex","listStyleType","LEVEL_AS_NUMBER","error","warn","info","success","getLevelAsNumber","x","y","PASSTHRU_FN","TOAST_ACCORDION_IDS","two","few","many","other","BasicToaster","instanceId","randomId","toasterStyleSet","debouncedNotifications","expanded","setExpanded","localizeWithPlural","plural","renderToast","rootClassName","handleToggleExpand","sortedNotifications","sortNotifications","sortedNotificationsWithChildren","children","notification","expandable","highestLevel","level","expandableElementId","headerElementId","id"],"mappings":"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","sourcesContent":["/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, 2, 3, 4, 5] }] */\n/* eslint react/forbid-dom-props: \"off\" */\n\nimport { hooks } from 'botframework-webchat-api';\nimport classNames from 'classnames';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport CollapseIcon from './Toast/CollapseIcon';\nimport ExpandIcon from './Toast/ExpandIcon';\nimport NotificationIcon from './Toast/NotificationIcon';\nimport randomId from './Utils/randomId';\nimport useStyleSet from './hooks/useStyleSet';\nimport useStyleToEmotionObject from './hooks/internal/useStyleToEmotionObject';\n\nconst { useDebouncedNotifications, useLocalizer, useRenderToast } = hooks;\n\nconst ROOT_STYLE = {\n  display: 'flex',\n  flexDirection: 'column',\n\n  '& .webchat__toaster__header': {\n    display: 'flex',\n    flexShrink: 0\n  },\n\n  '& .webchat__toaster__expandText': {\n    flex: 1\n  },\n\n  '& .webchat__toaster__list': {\n    display: 'block',\n    listStyleType: 'none'\n  }\n};\n\nconst LEVEL_AS_NUMBER = {\n  error: 1,\n  warn: 2,\n  info: 3,\n  success: 4\n};\n\nfunction getLevelAsNumber(level) {\n  return LEVEL_AS_NUMBER[level] || 5;\n}\n\nfunction compareLevel(x, y) {\n  return getLevelAsNumber(x) - getLevelAsNumber(y);\n}\n\nfunction sortNotifications(map) {\n  return (\n    Object.values(map)\n      // We want the order reversed, most recent on top.\n      .sort(({ timestamp: x }, { timestamp: y }) => y - x)\n  );\n}\n\nconst PASSTHRU_FN = value => value;\nconst TOAST_ACCORDION_IDS = {\n  two: 'TOAST_ACCORDION_TWO',\n  few: 'TOAST_ACCORDION_FEW',\n  many: 'TOAST_ACCORDION_MANY',\n  other: 'TOAST_ACCORDION_OTHER'\n};\n\nconst BasicToaster = () => {\n  const instanceId = useMemo(randomId, []);\n  const [{ toaster: toasterStyleSet }] = useStyleSet();\n  const [debouncedNotifications] = useDebouncedNotifications();\n  const [expanded, setExpanded] = useState(false);\n  const localizeWithPlural = useLocalizer({ plural: true });\n  const renderToast = useRenderToast();\n  const rootClassName = useStyleToEmotionObject()(ROOT_STYLE) + '';\n\n  const handleToggleExpand = useCallback(() => setExpanded(!expanded), [expanded, setExpanded]);\n  const sortedNotifications = useMemo(() => sortNotifications(debouncedNotifications), [debouncedNotifications]);\n  const sortedNotificationsWithChildren = useMemo(\n    () =>\n      sortedNotifications\n        .map(notification => {\n          const children = renderToast({ notification });\n\n          return children && { children, notification };\n        })\n        .filter(PASSTHRU_FN),\n    [renderToast, sortedNotifications]\n  );\n\n  const expandable = sortedNotificationsWithChildren.length > 1;\n  const [highestLevel] = sortedNotificationsWithChildren.map(({ notification: { level } }) => level).sort(compareLevel);\n\n  const expandableElementId = useMemo(\n    () => (!expandable || expanded ? `webchat__toaster__list__${instanceId}` : undefined),\n    [expandable, expanded, instanceId]\n  );\n  const headerElementId = useMemo(() => (expandable ? `webchat__toaster__header__${instanceId}` : undefined), [\n    expandable,\n    instanceId\n  ]);\n\n  useEffect(() => {\n    !expandable && setExpanded(false);\n  }, [expandable]);\n\n  return (\n    <div\n      aria-labelledby={headerElementId}\n      aria-live=\"polite\"\n      aria-relevant=\"all\"\n      className={classNames(\n        'webchat__toaster',\n        {\n          'webchat__toaster--expandable': expandable,\n          'webchat__toaster--expanded': expanded,\n          'webchat__toaster--error': highestLevel === 'error',\n          'webchat__toaster--info': highestLevel === 'info',\n          'webchat__toaster--success': highestLevel === 'success',\n          'webchat__toaster--warn': highestLevel === 'warn'\n        },\n        rootClassName,\n        toasterStyleSet + ''\n      )}\n      role=\"log\"\n    >\n      {expandable && (\n        <button\n          aria-controls={expandableElementId}\n          aria-expanded={expanded}\n          className=\"webchat__toaster__header\"\n          id={headerElementId}\n          onClick={handleToggleExpand}\n          type=\"button\"\n        >\n          <div aria-hidden={true} className=\"webchat__toaster__expandLevelIconBox\">\n            <NotificationIcon className=\"webchat__toaster__expandLevelIcon\" level={highestLevel} />\n          </div>\n          <div className=\"webchat__toaster__expandText\">\n            {localizeWithPlural(TOAST_ACCORDION_IDS, sortedNotificationsWithChildren.length)}\n          </div>\n          <div aria-hidden={true} className=\"webchat__toaster__expandIcon\">\n            <div className=\"webchat__toaster__expandIconFocus\">{expanded ? <CollapseIcon /> : <ExpandIcon />}</div>\n          </div>\n        </button>\n      )}\n      {(!expandable || expanded) && (\n        <ul aria-labelledby={headerElementId} className=\"webchat__toaster__list\" id={expandableElementId} role=\"region\">\n          {sortedNotificationsWithChildren.map(({ children, notification: { id } }) => (\n            <li aria-atomic={true} className=\"webchat__toaster__listItem\" key={id} role=\"none\">\n              {children}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default BasicToaster;\n"],"sourceRoot":"component:///"},"metadata":{},"sourceType":"script"}