{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = shareObservable;\n/* global Observable */\n\nfunction shareObservable(observable) {\n  var observers = [];\n  var subscription;\n  return new Observable(function (observer) {\n    if (!subscription) {\n      subscription = observable.subscribe({\n        complete: function complete() {\n          observers.forEach(function (observer) {\n            return observer.complete();\n          });\n        },\n        error: function error(err) {\n          observers.forEach(function (observer) {\n            return observer.error(err);\n          });\n        },\n        next: function next(value) {\n          observers.forEach(function (observer) {\n            return observer.next(value);\n          });\n        }\n      });\n    }\n\n    observers.push(observer);\n    return function () {\n      observers = observers.filter(function (o) {\n        return o !== observer;\n      });\n\n      if (!observers.length) {\n        subscription.unsubscribe();\n        subscription = null;\n      }\n    };\n  });\n}","map":{"version":3,"sources":["../src/shareObservable.js"],"names":["observers","subscription","complete","observer","error","next","o"],"mappings":";;;;;;AAAA;;AAEe,SAAA,eAAA,CAAA,UAAA,EAAqC;AAClD,MAAIA,SAAS,GAAb,EAAA;AACA,MAAA,YAAA;AAEA,SAAO,IAAA,UAAA,CAAe,UAAA,QAAA,EAAY;AAChC,QAAI,CAAJ,YAAA,EAAmB;AACjBC,MAAAA,YAAY,GAAG,UAAU,CAAV,SAAA,CAAqB;AAClCC,QAAAA,QADkC,EAAA,SAAA,QAAA,GACvB;AACTF,UAAAA,SAAS,CAATA,OAAAA,CAAkB,UAAA,QAAA,EAAQ;AAAA,mBAAIG,QAAQ,CAAZ,QAAIA,EAAJ;AAA1BH,WAAAA;AAFgC,SAAA;AAKlCI,QAAAA,KALkC,EAAA,SAAA,KAAA,CAAA,GAAA,EAKvB;AACTJ,UAAAA,SAAS,CAATA,OAAAA,CAAkB,UAAA,QAAA,EAAQ;AAAA,mBAAIG,QAAQ,CAARA,KAAAA,CAAJ,GAAIA,CAAJ;AAA1BH,WAAAA;AANgC,SAAA;AASlCK,QAAAA,IATkC,EAAA,SAAA,IAAA,CAAA,KAAA,EAStB;AACVL,UAAAA,SAAS,CAATA,OAAAA,CAAkB,UAAA,QAAA,EAAQ;AAAA,mBAAIG,QAAQ,CAARA,IAAAA,CAAJ,KAAIA,CAAJ;AAA1BH,WAAAA;AACD;AAXiC,OAArB,CAAfC;AAaD;;AAEDD,IAAAA,SAAS,CAATA,IAAAA,CAAAA,QAAAA;AAEA,WAAO,YAAM;AACXA,MAAAA,SAAS,GAAG,SAAS,CAAT,MAAA,CAAiB,UAAA,CAAA,EAAC;AAAA,eAAIM,CAAC,KAAL,QAAA;AAA9BN,OAAY,CAAZA;;AAEA,UAAI,CAACA,SAAS,CAAd,MAAA,EAAuB;AACrBC,QAAAA,YAAY,CAAZA,WAAAA;AACAA,QAAAA,YAAY,GAAZA,IAAAA;AACD;AANH,KAAA;AAnBF,GAAO,CAAP;AA4BD","sourcesContent":["/* global Observable */\n\nexport default function shareObservable(observable) {\n  let observers = [];\n  let subscription;\n\n  return new Observable(observer => {\n    if (!subscription) {\n      subscription = observable.subscribe({\n        complete() {\n          observers.forEach(observer => observer.complete());\n        },\n\n        error(err) {\n          observers.forEach(observer => observer.error(err));\n        },\n\n        next(value) {\n          observers.forEach(observer => observer.next(value));\n        }\n      });\n    }\n\n    observers.push(observer);\n\n    return () => {\n      observers = observers.filter(o => o !== observer);\n\n      if (!observers.length) {\n        subscription.unsubscribe();\n        subscription = null;\n      }\n    };\n  });\n}\n"],"sourceRoot":"directlinespeech:///"},"metadata":{},"sourceType":"script"}