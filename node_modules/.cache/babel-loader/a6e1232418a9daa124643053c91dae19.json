{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useCreateActivityRendererInternal;\n\nvar _react = require(\"react\");\n\nvar _useRenderAttachment = _interopRequireDefault(require(\"../useRenderAttachment\"));\n\nvar _useWebChatAPIContext2 = _interopRequireDefault(require(\"./useWebChatAPIContext\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction useCreateActivityRendererInternal(renderAttachmentOverride) {\n  var _useWebChatAPIContext = (0, _useWebChatAPIContext2.default)(),\n      createActivityRenderer = _useWebChatAPIContext.activityRenderer;\n\n  var defaultRenderAttachment = (0, _useRenderAttachment.default)();\n  var renderAttachment = renderAttachmentOverride || defaultRenderAttachment;\n  return (0, _react.useMemo)(function () {\n    return function () {\n      var renderActivity = createActivityRenderer.apply(void 0, arguments);\n\n      if (!renderActivity) {\n        return false;\n      }\n\n      return function (renderActivityOptions) {\n        if ( /*#__PURE__*/(0, _react.isValidElement)(renderActivity)) {\n          return renderActivity;\n        }\n\n        var activityElement = renderActivity(function () {\n          return renderAttachment.apply(void 0, arguments);\n        }, renderActivityOptions); // \"activityElement\" cannot be false. If the middleware want to hide the \"activityElement\", it should return \"false\" when we call createActivityRenderer().\n\n        activityElement || console.warn('botframework-webchat: To hide an activity, the activity renderer should return false. It should not return a function that will return false when called.');\n        return activityElement;\n      };\n    };\n  }, [createActivityRenderer, renderAttachment]);\n}","map":{"version":3,"sources":["../../../src/hooks/internal/useCreateActivityRendererInternal.js"],"names":["createActivityRenderer","defaultRenderAttachment","renderAttachment","renderAttachmentOverride","renderActivity","activityElement","console"],"mappings":";;;;;;;AAAA,IAAA,MAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAEA,IAAA,oBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,wBAAA,CAAA,CAAA;;AACA,IAAA,sBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,wBAAA,CAAA,CAAA;;;;;;;;AAEe,SAAA,iCAAA,CAAA,wBAAA,EAAqE;AAAA,MAAA,qBAAA,GAC7B,CAAA,GAAA,sBAAA,CAD6B,OAC7B,GAD6B;AAAA,MACxDA,sBADwD,GAAA,qBAAA,CAAA,gBAAA;;AAElF,MAAMC,uBAAuB,GAAG,CAAA,GAAA,oBAAA,CAAhC,OAAgC,GAAhC;AAEA,MAAMC,gBAAgB,GAAGC,wBAAwB,IAAjD,uBAAA;AAEA,SAAO,CAAA,GAAA,MAAA,CAAA,OAAA,EACL,YAAA;AAAA,WAAM,YAAsC;AAC1C,UAAMC,cAAc,GAAGJ,sBAAsB,CAAtBA,KAAAA,CAAAA,KAAAA,CAAAA,EAAvB,SAAuBA,CAAvB;;AAEA,UAAI,CAAJ,cAAA,EAAqB;AACnB,eAAA,KAAA;AACD;;AAED,aAAO,UAAA,qBAAA,EAAyB;AAC9B,aAAA,aAAI,CAAA,GAAA,MAAA,CAAA,cAAA,EAAJ,cAAI,CAAJ,EAAoC;AAClC,iBAAA,cAAA;AACD;;AAED,YAAMK,eAAe,GAAGD,cAAc,CACpC,YAAA;AAAA,iBAA6BF,gBAAgB,CAAhBA,KAAAA,CAAAA,KAAAA,CAAAA,EAA7B,SAA6BA,CAA7B;AADoC,SAAA,EALR,qBAKQ,CAAtC,CAL8B,CAU9B;;AACAG,QAAAA,eAAe,IACbC,OAAO,CAAPA,IAAAA,CADFD,2JACEC,CADFD;AAKA,eAAA,eAAA;AAhBF,OAAA;AAPF,KAAA;AADK,GAAA,EA2BL,CAAA,sBAAA,EA3BF,gBA2BE,CA3BK,CAAP;AA6BD","sourcesContent":["import { isValidElement, useMemo } from 'react';\n\nimport useRenderAttachment from '../useRenderAttachment';\nimport useWebChatAPIContext from './useWebChatAPIContext';\n\nexport default function useCreateActivityRendererInternal(renderAttachmentOverride) {\n  const { activityRenderer: createActivityRenderer } = useWebChatAPIContext();\n  const defaultRenderAttachment = useRenderAttachment();\n\n  const renderAttachment = renderAttachmentOverride || defaultRenderAttachment;\n\n  return useMemo(\n    () => (...createActivityRendererOptions) => {\n      const renderActivity = createActivityRenderer(...createActivityRendererOptions);\n\n      if (!renderActivity) {\n        return false;\n      }\n\n      return renderActivityOptions => {\n        if (isValidElement(renderActivity)) {\n          return renderActivity;\n        }\n\n        const activityElement = renderActivity(\n          (...renderAttachmentArgs) => renderAttachment(...renderAttachmentArgs),\n          renderActivityOptions\n        );\n\n        // \"activityElement\" cannot be false. If the middleware want to hide the \"activityElement\", it should return \"false\" when we call createActivityRenderer().\n        activityElement ||\n          console.warn(\n            'botframework-webchat: To hide an activity, the activity renderer should return false. It should not return a function that will return false when called.'\n          );\n\n        return activityElement;\n      };\n    },\n    [createActivityRenderer, renderAttachment]\n  );\n}\n"],"sourceRoot":"component:///"},"metadata":{},"sourceType":"script"}