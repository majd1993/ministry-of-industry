{"ast":null,"code":"import _inherits from \"/home/Ubility/Desktop/ministry-of-industry-and-advanced-technology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/Ubility/Desktop/ministry-of-industry-and-advanced-technology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"/home/Ubility/Desktop/ministry-of-industry-and-advanced-technology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/Ubility/Desktop/ministry-of-industry-and-advanced-technology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\nimport { CancellationErrorCodePropertyName } from \"../common.speech/Exports\";\nimport { Contracts } from \"./Contracts\";\nimport { CancellationDetailsBase, CancellationErrorCode, CancellationReason, PropertyCollection, PropertyId, ResultReason } from \"./Exports\";\nexport var SpeakerRecognitionResultType;\n\n(function (SpeakerRecognitionResultType) {\n  SpeakerRecognitionResultType[SpeakerRecognitionResultType[\"Verify\"] = 0] = \"Verify\";\n  SpeakerRecognitionResultType[SpeakerRecognitionResultType[\"Identify\"] = 1] = \"Identify\";\n})(SpeakerRecognitionResultType || (SpeakerRecognitionResultType = {}));\n/**\n * Output format\n * @class SpeakerRecognitionResult\n */\n\n\nexport var SpeakerRecognitionResult = /*#__PURE__*/function () {\n  function SpeakerRecognitionResult(resultType, data, profileId) {\n    var resultReason = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ResultReason.RecognizedSpeaker;\n\n    _classCallCheck(this, SpeakerRecognitionResult);\n\n    this.privProperties = new PropertyCollection();\n    this.privReason = resultReason;\n\n    if (this.privReason !== ResultReason.Canceled) {\n      if (resultType === SpeakerRecognitionResultType.Identify) {\n        var json = JSON.parse(data);\n        Contracts.throwIfNullOrUndefined(json, \"JSON\");\n        this.privProfileId = json.identifiedProfile.profileId;\n        this.privScore = json.identifiedProfile.score;\n      } else {\n        var _json = JSON.parse(data);\n\n        Contracts.throwIfNullOrUndefined(_json, \"JSON\");\n        this.privScore = _json.score;\n\n        if (_json.recognitionResult.toLowerCase() !== \"accept\") {\n          this.privReason = ResultReason.NoMatch;\n        }\n\n        if (profileId !== undefined && profileId !== \"\") {\n          this.privProfileId = profileId;\n        }\n      }\n    } else {\n      var _json2 = JSON.parse(data);\n\n      Contracts.throwIfNullOrUndefined(_json2, \"JSON\");\n      this.privErrorDetails = _json2.statusText;\n      this.privProperties.setProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.ServiceError]);\n    }\n\n    this.privProperties.setProperty(PropertyId.SpeechServiceResponse_JsonResult, data);\n  }\n\n  _createClass(SpeakerRecognitionResult, [{\n    key: \"properties\",\n    get: function get() {\n      return this.privProperties;\n    }\n  }, {\n    key: \"reason\",\n    get: function get() {\n      return this.privReason;\n    }\n  }, {\n    key: \"profileId\",\n    get: function get() {\n      return this.privProfileId;\n    }\n  }, {\n    key: \"errorDetails\",\n    get: function get() {\n      return this.privErrorDetails;\n    }\n  }, {\n    key: \"score\",\n    get: function get() {\n      return this.privScore;\n    }\n  }]);\n\n  return SpeakerRecognitionResult;\n}();\n/**\n * @class SpeakerRecognitionCancellationDetails\n */\n// tslint:disable-next-line:max-classes-per-file\n\nexport var SpeakerRecognitionCancellationDetails = /*#__PURE__*/function (_CancellationDetailsB) {\n  _inherits(SpeakerRecognitionCancellationDetails, _CancellationDetailsB);\n\n  var _super = _createSuper(SpeakerRecognitionCancellationDetails);\n\n  function SpeakerRecognitionCancellationDetails(reason, errorDetails, errorCode) {\n    _classCallCheck(this, SpeakerRecognitionCancellationDetails);\n\n    return _super.call(this, reason, errorDetails, errorCode);\n  }\n  /**\n   * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult\n   * @member SpeakerRecognitionCancellationDetails.fromResult\n   * @function\n   * @public\n   * @param {SpeakerRecognitionResult} result - The result that was canceled.\n   * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.\n   */\n\n\n  _createClass(SpeakerRecognitionCancellationDetails, null, [{\n    key: \"fromResult\",\n    value: function fromResult(result) {\n      var reason = CancellationReason.Error;\n      var errorCode = CancellationErrorCode.NoError;\n\n      if (!!result.properties) {\n        errorCode = CancellationErrorCode[result.properties.getProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.NoError])];\n      }\n\n      return new SpeakerRecognitionCancellationDetails(reason, result.errorDetails, errorCode);\n    }\n  }]);\n\n  return SpeakerRecognitionCancellationDetails;\n}(CancellationDetailsBase);","map":{"version":3,"sources":["src/sdk/SpeakerRecognitionResult.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license.\r\n\r\nimport { CancellationErrorCodePropertyName } from \"../common.speech/Exports\";\r\nimport { Contracts } from \"./Contracts\";\r\nimport {\r\n    CancellationDetailsBase,\r\n    CancellationErrorCode,\r\n    CancellationReason,\r\n    PropertyCollection,\r\n    PropertyId,\r\n    ResultReason,\r\n} from \"./Exports\";\r\n\r\nexport enum SpeakerRecognitionResultType {\r\n    Verify,\r\n    Identify\r\n}\r\n/**\r\n * Output format\r\n * @class SpeakerRecognitionResult\r\n */\r\nexport class SpeakerRecognitionResult {\r\n    private privReason: ResultReason;\r\n    private privProperties: PropertyCollection;\r\n    private privProfileId: string;\r\n    private privScore: number;\r\n    private privErrorDetails: string;\r\n\r\n    public constructor(resultType: SpeakerRecognitionResultType, data: string, profileId: string, resultReason: ResultReason = ResultReason.RecognizedSpeaker) {\r\n        this.privProperties = new PropertyCollection();\r\n        this.privReason = resultReason;\r\n        if (this.privReason !== ResultReason.Canceled) {\r\n            if (resultType === SpeakerRecognitionResultType.Identify) {\r\n                const json: { identifiedProfile: { profileId: string, score: number } } = JSON.parse(data);\r\n                Contracts.throwIfNullOrUndefined(json, \"JSON\");\r\n                this.privProfileId = json.identifiedProfile.profileId;\r\n                this.privScore = json.identifiedProfile.score;\r\n            } else {\r\n                const json: { recognitionResult: string, score: number } = JSON.parse(data);\r\n                Contracts.throwIfNullOrUndefined(json, \"JSON\");\r\n                this.privScore = json.score;\r\n                if (json.recognitionResult.toLowerCase() !== \"accept\") {\r\n                    this.privReason = ResultReason.NoMatch;\r\n                }\r\n                if (profileId !== undefined && profileId !== \"\") {\r\n                    this.privProfileId = profileId;\r\n                }\r\n            }\r\n        } else {\r\n            const json: { statusText: string } = JSON.parse(data);\r\n            Contracts.throwIfNullOrUndefined(json, \"JSON\");\r\n            this.privErrorDetails = json.statusText;\r\n            this.privProperties.setProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.ServiceError]);\r\n        }\r\n        this.privProperties.setProperty(PropertyId.SpeechServiceResponse_JsonResult, data);\r\n    }\r\n\r\n    public get properties(): PropertyCollection {\r\n        return this.privProperties;\r\n    }\r\n\r\n    public get reason(): ResultReason {\r\n        return this.privReason;\r\n    }\r\n\r\n    public get profileId(): string {\r\n        return this.privProfileId;\r\n    }\r\n\r\n    public get errorDetails(): string {\r\n        return this.privErrorDetails;\r\n    }\r\n\r\n    public get score(): number {\r\n        return this.privScore;\r\n    }\r\n}\r\n\r\n/**\r\n * @class SpeakerRecognitionCancellationDetails\r\n */\r\n// tslint:disable-next-line:max-classes-per-file\r\nexport class SpeakerRecognitionCancellationDetails extends CancellationDetailsBase {\r\n\r\n    private constructor(reason: CancellationReason, errorDetails: string, errorCode: CancellationErrorCode) {\r\n        super(reason, errorDetails, errorCode);\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult\r\n     * @member SpeakerRecognitionCancellationDetails.fromResult\r\n     * @function\r\n     * @public\r\n     * @param {SpeakerRecognitionResult} result - The result that was canceled.\r\n     * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.\r\n     */\r\n    public static fromResult(result: SpeakerRecognitionResult): SpeakerRecognitionCancellationDetails {\r\n        const reason = CancellationReason.Error;\r\n        let errorCode: CancellationErrorCode = CancellationErrorCode.NoError;\r\n\r\n        if (!!result.properties) {\r\n            errorCode = (CancellationErrorCode as any)[result.properties.getProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.NoError])];\r\n        }\r\n\r\n        return new SpeakerRecognitionCancellationDetails(reason, result.errorDetails, errorCode);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}