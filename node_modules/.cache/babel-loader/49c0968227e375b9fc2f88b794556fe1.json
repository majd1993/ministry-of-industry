{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = createPromiseQueue;\n\nvar _pDeferEs = _interopRequireDefault(require(\"p-defer-es5\"));\n\nfunction createPromiseQueue() {\n  var deferred;\n  var queue = [];\n\n  var push = function push(value) {\n    if (deferred) {\n      var _deferred = deferred,\n          resolve = _deferred.resolve;\n      deferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  var shift = function shift() {\n    return queue.length ? Promise.resolve(queue.shift()) : (deferred || (deferred = (0, _pDeferEs[\"default\"])())).promise;\n  };\n\n  return {\n    push: push,\n    shift: shift\n  };\n}","map":{"version":3,"sources":["../src/createPromiseQueue.js"],"names":["queue","push","resolve","deferred","shift","Promise"],"mappings":";;;;;;;;;AAAA,IAAA,SAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,aAAA,CAAA,CAAA;;AAEe,SAAA,kBAAA,GAA8B;AAC3C,MAAA,QAAA;AACA,MAAMA,KAAK,GAAX,EAAA;;AAEA,MAAMC,IAAI,GAAG,SAAPA,IAAO,CAAA,KAAA,EAAS;AACpB,QAAA,QAAA,EAAc;AAAA,UAAA,SAAA,GAAA,QAAA;AAAA,UACJC,OADI,GAAA,SAAA,CAAA,OAAA;AAGZC,MAAAA,QAAQ,GAARA,IAAAA;AACAD,MAAAA,OAAO,CAAPA,KAAO,CAAPA;AAJF,KAAA,MAKO;AACLF,MAAAA,KAAK,CAALA,IAAAA,CAAAA,KAAAA;AACD;AARH,GAAA;;AAWA,MAAMI,KAAK,GAAG,SAARA,KAAQ,GAAA;AAAA,WACZJ,KAAK,CAALA,MAAAA,GAAeK,OAAO,CAAPA,OAAAA,CAAgBL,KAAK,CAApCA,KAA+BA,EAAhBK,CAAfL,GAAgD,CAACG,QAAQ,KAAKA,QAAQ,GAAG,CAAA,GAAA,SAAA,CAAzB,SAAyB,CAAA,GAAhB,CAAT,EADpC,OAAA;AAAd,GAAA;;AAGA,SAAO;AACLF,IAAAA,IAAI,EADC,IAAA;AAELG,IAAAA,KAAK,EAALA;AAFK,GAAP;AAID","sourcesContent":["import createDeferred from 'p-defer-es5';\n\nexport default function createPromiseQueue() {\n  let deferred;\n  const queue = [];\n\n  const push = value => {\n    if (deferred) {\n      const { resolve } = deferred;\n\n      deferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  const shift = () =>\n    queue.length ? Promise.resolve(queue.shift()) : (deferred || (deferred = createDeferred())).promise;\n\n  return {\n    push,\n    shift\n  };\n}\n"],"sourceRoot":"core:///"},"metadata":{},"sourceType":"script"}